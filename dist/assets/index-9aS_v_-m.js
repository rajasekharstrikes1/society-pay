(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();function Pi(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Vv={exports:{}},md={},Fv={exports:{}},$e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pA;function i3(){if(pA)return $e;pA=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.iterator;function v(W){return W===null||typeof W!="object"?null:(W=p&&W[p]||W["@@iterator"],typeof W=="function"?W:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,E={};function S(W,Y,he){this.props=W,this.context=Y,this.refs=E,this.updater=he||w}S.prototype.isReactComponent={},S.prototype.setState=function(W,Y){if(typeof W!="object"&&typeof W!="function"&&W!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,W,Y,"setState")},S.prototype.forceUpdate=function(W){this.updater.enqueueForceUpdate(this,W,"forceUpdate")};function P(){}P.prototype=S.prototype;function k(W,Y,he){this.props=W,this.context=Y,this.refs=E,this.updater=he||w}var C=k.prototype=new P;C.constructor=k,b(C,S.prototype),C.isPureReactComponent=!0;var R=Array.isArray,V=Object.prototype.hasOwnProperty,B={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function j(W,Y,he){var Re,Ce={},Be=null,Xe=null;if(Y!=null)for(Re in Y.ref!==void 0&&(Xe=Y.ref),Y.key!==void 0&&(Be=""+Y.key),Y)V.call(Y,Re)&&!I.hasOwnProperty(Re)&&(Ce[Re]=Y[Re]);var Je=arguments.length-2;if(Je===1)Ce.children=he;else if(1<Je){for(var oe=Array(Je),Ae=0;Ae<Je;Ae++)oe[Ae]=arguments[Ae+2];Ce.children=oe}if(W&&W.defaultProps)for(Re in Je=W.defaultProps,Je)Ce[Re]===void 0&&(Ce[Re]=Je[Re]);return{$$typeof:t,type:W,key:Be,ref:Xe,props:Ce,_owner:B.current}}function D(W,Y){return{$$typeof:t,type:W.type,key:Y,ref:W.ref,props:W.props,_owner:W._owner}}function $(W){return typeof W=="object"&&W!==null&&W.$$typeof===t}function M(W){var Y={"=":"=0",":":"=2"};return"$"+W.replace(/[=:]/g,function(he){return Y[he]})}var U=/\/+/g;function F(W,Y){return typeof W=="object"&&W!==null&&W.key!=null?M(""+W.key):Y.toString(36)}function me(W,Y,he,Re,Ce){var Be=typeof W;(Be==="undefined"||Be==="boolean")&&(W=null);var Xe=!1;if(W===null)Xe=!0;else switch(Be){case"string":case"number":Xe=!0;break;case"object":switch(W.$$typeof){case t:case e:Xe=!0}}if(Xe)return Xe=W,Ce=Ce(Xe),W=Re===""?"."+F(Xe,0):Re,R(Ce)?(he="",W!=null&&(he=W.replace(U,"$&/")+"/"),me(Ce,Y,he,"",function(Ae){return Ae})):Ce!=null&&($(Ce)&&(Ce=D(Ce,he+(!Ce.key||Xe&&Xe.key===Ce.key?"":(""+Ce.key).replace(U,"$&/")+"/")+W)),Y.push(Ce)),1;if(Xe=0,Re=Re===""?".":Re+":",R(W))for(var Je=0;Je<W.length;Je++){Be=W[Je];var oe=Re+F(Be,Je);Xe+=me(Be,Y,he,oe,Ce)}else if(oe=v(W),typeof oe=="function")for(W=oe.call(W),Je=0;!(Be=W.next()).done;)Be=Be.value,oe=Re+F(Be,Je++),Xe+=me(Be,Y,he,oe,Ce);else if(Be==="object")throw Y=String(W),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.");return Xe}function Pe(W,Y,he){if(W==null)return W;var Re=[],Ce=0;return me(W,Re,"","",function(Be){return Y.call(he,Be,Ce++)}),Re}function De(W){if(W._status===-1){var Y=W._result;Y=Y(),Y.then(function(he){(W._status===0||W._status===-1)&&(W._status=1,W._result=he)},function(he){(W._status===0||W._status===-1)&&(W._status=2,W._result=he)}),W._status===-1&&(W._status=0,W._result=Y)}if(W._status===1)return W._result.default;throw W._result}var pe={current:null},ie={transition:null},fe={ReactCurrentDispatcher:pe,ReactCurrentBatchConfig:ie,ReactCurrentOwner:B};function ue(){throw Error("act(...) is not supported in production builds of React.")}return $e.Children={map:Pe,forEach:function(W,Y,he){Pe(W,function(){Y.apply(this,arguments)},he)},count:function(W){var Y=0;return Pe(W,function(){Y++}),Y},toArray:function(W){return Pe(W,function(Y){return Y})||[]},only:function(W){if(!$(W))throw Error("React.Children.only expected to receive a single React element child.");return W}},$e.Component=S,$e.Fragment=r,$e.Profiler=i,$e.PureComponent=k,$e.StrictMode=n,$e.Suspense=u,$e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fe,$e.act=ue,$e.cloneElement=function(W,Y,he){if(W==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+W+".");var Re=b({},W.props),Ce=W.key,Be=W.ref,Xe=W._owner;if(Y!=null){if(Y.ref!==void 0&&(Be=Y.ref,Xe=B.current),Y.key!==void 0&&(Ce=""+Y.key),W.type&&W.type.defaultProps)var Je=W.type.defaultProps;for(oe in Y)V.call(Y,oe)&&!I.hasOwnProperty(oe)&&(Re[oe]=Y[oe]===void 0&&Je!==void 0?Je[oe]:Y[oe])}var oe=arguments.length-2;if(oe===1)Re.children=he;else if(1<oe){Je=Array(oe);for(var Ae=0;Ae<oe;Ae++)Je[Ae]=arguments[Ae+2];Re.children=Je}return{$$typeof:t,type:W.type,key:Ce,ref:Be,props:Re,_owner:Xe}},$e.createContext=function(W){return W={$$typeof:o,_currentValue:W,_currentValue2:W,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},W.Provider={$$typeof:a,_context:W},W.Consumer=W},$e.createElement=j,$e.createFactory=function(W){var Y=j.bind(null,W);return Y.type=W,Y},$e.createRef=function(){return{current:null}},$e.forwardRef=function(W){return{$$typeof:c,render:W}},$e.isValidElement=$,$e.lazy=function(W){return{$$typeof:m,_payload:{_status:-1,_result:W},_init:De}},$e.memo=function(W,Y){return{$$typeof:d,type:W,compare:Y===void 0?null:Y}},$e.startTransition=function(W){var Y=ie.transition;ie.transition={};try{W()}finally{ie.transition=Y}},$e.unstable_act=ue,$e.useCallback=function(W,Y){return pe.current.useCallback(W,Y)},$e.useContext=function(W){return pe.current.useContext(W)},$e.useDebugValue=function(){},$e.useDeferredValue=function(W){return pe.current.useDeferredValue(W)},$e.useEffect=function(W,Y){return pe.current.useEffect(W,Y)},$e.useId=function(){return pe.current.useId()},$e.useImperativeHandle=function(W,Y,he){return pe.current.useImperativeHandle(W,Y,he)},$e.useInsertionEffect=function(W,Y){return pe.current.useInsertionEffect(W,Y)},$e.useLayoutEffect=function(W,Y){return pe.current.useLayoutEffect(W,Y)},$e.useMemo=function(W,Y){return pe.current.useMemo(W,Y)},$e.useReducer=function(W,Y,he){return pe.current.useReducer(W,Y,he)},$e.useRef=function(W){return pe.current.useRef(W)},$e.useState=function(W){return pe.current.useState(W)},$e.useSyncExternalStore=function(W,Y,he){return pe.current.useSyncExternalStore(W,Y,he)},$e.useTransition=function(){return pe.current.useTransition()},$e.version="18.3.1",$e}var gA;function tu(){return gA||(gA=1,Fv.exports=i3()),Fv.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yA;function a3(){if(yA)return md;yA=1;var t=tu(),e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function o(c,u,d){var m,p={},v=null,w=null;d!==void 0&&(v=""+d),u.key!==void 0&&(v=""+u.key),u.ref!==void 0&&(w=u.ref);for(m in u)n.call(u,m)&&!a.hasOwnProperty(m)&&(p[m]=u[m]);if(c&&c.defaultProps)for(m in u=c.defaultProps,u)p[m]===void 0&&(p[m]=u[m]);return{$$typeof:e,type:c,key:v,ref:w,props:p,_owner:i.current}}return md.Fragment=r,md.jsx=o,md.jsxs=o,md}var vA;function s3(){return vA||(vA=1,Vv.exports=a3()),Vv.exports}var f=s3(),_=tu();const hk=Pi(_);var fm={},$v={exports:{}},rn={},Uv={exports:{}},Bv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xA;function o3(){return xA||(xA=1,function(t){function e(ie,fe){var ue=ie.length;ie.push(fe);e:for(;0<ue;){var W=ue-1>>>1,Y=ie[W];if(0<i(Y,fe))ie[W]=fe,ie[ue]=Y,ue=W;else break e}}function r(ie){return ie.length===0?null:ie[0]}function n(ie){if(ie.length===0)return null;var fe=ie[0],ue=ie.pop();if(ue!==fe){ie[0]=ue;e:for(var W=0,Y=ie.length,he=Y>>>1;W<he;){var Re=2*(W+1)-1,Ce=ie[Re],Be=Re+1,Xe=ie[Be];if(0>i(Ce,ue))Be<Y&&0>i(Xe,Ce)?(ie[W]=Xe,ie[Be]=ue,W=Be):(ie[W]=Ce,ie[Re]=ue,W=Re);else if(Be<Y&&0>i(Xe,ue))ie[W]=Xe,ie[Be]=ue,W=Be;else break e}}return fe}function i(ie,fe){var ue=ie.sortIndex-fe.sortIndex;return ue!==0?ue:ie.id-fe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],d=[],m=1,p=null,v=3,w=!1,b=!1,E=!1,S=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(ie){for(var fe=r(d);fe!==null;){if(fe.callback===null)n(d);else if(fe.startTime<=ie)n(d),fe.sortIndex=fe.expirationTime,e(u,fe);else break;fe=r(d)}}function R(ie){if(E=!1,C(ie),!b)if(r(u)!==null)b=!0,De(V);else{var fe=r(d);fe!==null&&pe(R,fe.startTime-ie)}}function V(ie,fe){b=!1,E&&(E=!1,P(j),j=-1),w=!0;var ue=v;try{for(C(fe),p=r(u);p!==null&&(!(p.expirationTime>fe)||ie&&!M());){var W=p.callback;if(typeof W=="function"){p.callback=null,v=p.priorityLevel;var Y=W(p.expirationTime<=fe);fe=t.unstable_now(),typeof Y=="function"?p.callback=Y:p===r(u)&&n(u),C(fe)}else n(u);p=r(u)}if(p!==null)var he=!0;else{var Re=r(d);Re!==null&&pe(R,Re.startTime-fe),he=!1}return he}finally{p=null,v=ue,w=!1}}var B=!1,I=null,j=-1,D=5,$=-1;function M(){return!(t.unstable_now()-$<D)}function U(){if(I!==null){var ie=t.unstable_now();$=ie;var fe=!0;try{fe=I(!0,ie)}finally{fe?F():(B=!1,I=null)}}else B=!1}var F;if(typeof k=="function")F=function(){k(U)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,Pe=me.port2;me.port1.onmessage=U,F=function(){Pe.postMessage(null)}}else F=function(){S(U,0)};function De(ie){I=ie,B||(B=!0,F())}function pe(ie,fe){j=S(function(){ie(t.unstable_now())},fe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ie){ie.callback=null},t.unstable_continueExecution=function(){b||w||(b=!0,De(V))},t.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<ie?Math.floor(1e3/ie):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(ie){switch(v){case 1:case 2:case 3:var fe=3;break;default:fe=v}var ue=v;v=fe;try{return ie()}finally{v=ue}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ie,fe){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var ue=v;v=ie;try{return fe()}finally{v=ue}},t.unstable_scheduleCallback=function(ie,fe,ue){var W=t.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?W+ue:W):ue=W,ie){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=ue+Y,ie={id:m++,callback:fe,priorityLevel:ie,startTime:ue,expirationTime:Y,sortIndex:-1},ue>W?(ie.sortIndex=ue,e(d,ie),r(u)===null&&ie===r(d)&&(E?(P(j),j=-1):E=!0,pe(R,ue-W))):(ie.sortIndex=Y,e(u,ie),b||w||(b=!0,De(V))),ie},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(ie){var fe=v;return function(){var ue=v;v=fe;try{return ie.apply(this,arguments)}finally{v=ue}}}}(Bv)),Bv}var wA;function l3(){return wA||(wA=1,Uv.exports=o3()),Uv.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bA;function c3(){if(bA)return rn;bA=1;var t=tu(),e=l3();function r(s){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+s,h=1;h<arguments.length;h++)l+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function a(s,l){o(s,l),o(s+"Capture",l)}function o(s,l){for(i[s]=l,s=0;s<l.length;s++)n.add(l[s])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},p={};function v(s){return u.call(p,s)?!0:u.call(m,s)?!1:d.test(s)?p[s]=!0:(m[s]=!0,!1)}function w(s,l,h,y){if(h!==null&&h.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return y?!1:h!==null?!h.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function b(s,l,h,y){if(l===null||typeof l>"u"||w(s,l,h,y))return!0;if(y)return!1;if(h!==null)switch(h.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function E(s,l,h,y,x,T,O){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=y,this.attributeNamespace=x,this.mustUseProperty=h,this.propertyName=s,this.type=l,this.sanitizeURL=T,this.removeEmptyString=O}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){S[s]=new E(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var l=s[0];S[l]=new E(l,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){S[s]=new E(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){S[s]=new E(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){S[s]=new E(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){S[s]=new E(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){S[s]=new E(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){S[s]=new E(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){S[s]=new E(s,5,!1,s.toLowerCase(),null,!1,!1)});var P=/[\-:]([a-z])/g;function k(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var l=s.replace(P,k);S[l]=new E(l,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var l=s.replace(P,k);S[l]=new E(l,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var l=s.replace(P,k);S[l]=new E(l,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){S[s]=new E(s,1,!1,s.toLowerCase(),null,!1,!1)}),S.xlinkHref=new E("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){S[s]=new E(s,1,!1,s.toLowerCase(),null,!0,!0)});function C(s,l,h,y){var x=S.hasOwnProperty(l)?S[l]:null;(x!==null?x.type!==0:y||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(b(l,h,x,y)&&(h=null),y||x===null?v(l)&&(h===null?s.removeAttribute(l):s.setAttribute(l,""+h)):x.mustUseProperty?s[x.propertyName]=h===null?x.type===3?!1:"":h:(l=x.attributeName,y=x.attributeNamespace,h===null?s.removeAttribute(l):(x=x.type,h=x===3||x===4&&h===!0?"":""+h,y?s.setAttributeNS(y,l,h):s.setAttribute(l,h))))}var R=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,V=Symbol.for("react.element"),B=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),$=Symbol.for("react.provider"),M=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),me=Symbol.for("react.suspense_list"),Pe=Symbol.for("react.memo"),De=Symbol.for("react.lazy"),pe=Symbol.for("react.offscreen"),ie=Symbol.iterator;function fe(s){return s===null||typeof s!="object"?null:(s=ie&&s[ie]||s["@@iterator"],typeof s=="function"?s:null)}var ue=Object.assign,W;function Y(s){if(W===void 0)try{throw Error()}catch(h){var l=h.stack.trim().match(/\n( *(at )?)/);W=l&&l[1]||""}return`
`+W+s}var he=!1;function Re(s,l){if(!s||he)return"";he=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(X){var y=X}Reflect.construct(s,[],l)}else{try{l.call()}catch(X){y=X}s.call(l.prototype)}else{try{throw Error()}catch(X){y=X}s()}}catch(X){if(X&&y&&typeof X.stack=="string"){for(var x=X.stack.split(`
`),T=y.stack.split(`
`),O=x.length-1,z=T.length-1;1<=O&&0<=z&&x[O]!==T[z];)z--;for(;1<=O&&0<=z;O--,z--)if(x[O]!==T[z]){if(O!==1||z!==1)do if(O--,z--,0>z||x[O]!==T[z]){var q=`
`+x[O].replace(" at new "," at ");return s.displayName&&q.includes("<anonymous>")&&(q=q.replace("<anonymous>",s.displayName)),q}while(1<=O&&0<=z);break}}}finally{he=!1,Error.prepareStackTrace=h}return(s=s?s.displayName||s.name:"")?Y(s):""}function Ce(s){switch(s.tag){case 5:return Y(s.type);case 16:return Y("Lazy");case 13:return Y("Suspense");case 19:return Y("SuspenseList");case 0:case 2:case 15:return s=Re(s.type,!1),s;case 11:return s=Re(s.type.render,!1),s;case 1:return s=Re(s.type,!0),s;default:return""}}function Be(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case I:return"Fragment";case B:return"Portal";case D:return"Profiler";case j:return"StrictMode";case F:return"Suspense";case me:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case M:return(s.displayName||"Context")+".Consumer";case $:return(s._context.displayName||"Context")+".Provider";case U:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case Pe:return l=s.displayName||null,l!==null?l:Be(s.type)||"Memo";case De:l=s._payload,s=s._init;try{return Be(s(l))}catch{}}return null}function Xe(s){var l=s.type;switch(s.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=l.render,s=s.displayName||s.name||"",l.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Be(l);case 8:return l===j?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function Je(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function oe(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Ae(s){var l=oe(s)?"checked":"value",h=Object.getOwnPropertyDescriptor(s.constructor.prototype,l),y=""+s[l];if(!s.hasOwnProperty(l)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var x=h.get,T=h.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return x.call(this)},set:function(O){y=""+O,T.call(this,O)}}),Object.defineProperty(s,l,{enumerable:h.enumerable}),{getValue:function(){return y},setValue:function(O){y=""+O},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function Fe(s){s._valueTracker||(s._valueTracker=Ae(s))}function ae(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var h=l.getValue(),y="";return s&&(y=oe(s)?s.checked?"true":"false":s.value),s=y,s!==h?(l.setValue(s),!0):!1}function Pt(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Ge(s,l){var h=l.checked;return ue({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??s._wrapperState.initialChecked})}function Bt(s,l){var h=l.defaultValue==null?"":l.defaultValue,y=l.checked!=null?l.checked:l.defaultChecked;h=Je(l.value!=null?l.value:h),s._wrapperState={initialChecked:y,initialValue:h,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function Xt(s,l){l=l.checked,l!=null&&C(s,"checked",l,!1)}function cn(s,l){Xt(s,l);var h=Je(l.value),y=l.type;if(h!=null)y==="number"?(h===0&&s.value===""||s.value!=h)&&(s.value=""+h):s.value!==""+h&&(s.value=""+h);else if(y==="submit"||y==="reset"){s.removeAttribute("value");return}l.hasOwnProperty("value")?kl(s,l.type,h):l.hasOwnProperty("defaultValue")&&kl(s,l.type,Je(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(s.defaultChecked=!!l.defaultChecked)}function po(s,l,h){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var y=l.type;if(!(y!=="submit"&&y!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+s._wrapperState.initialValue,h||l===s.value||(s.value=l),s.defaultValue=l}h=s.name,h!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,h!==""&&(s.name=h)}function kl(s,l,h){(l!=="number"||Pt(s.ownerDocument)!==s)&&(h==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+h&&(s.defaultValue=""+h))}var ua=Array.isArray;function da(s,l,h,y){if(s=s.options,l){l={};for(var x=0;x<h.length;x++)l["$"+h[x]]=!0;for(h=0;h<s.length;h++)x=l.hasOwnProperty("$"+s[h].value),s[h].selected!==x&&(s[h].selected=x),x&&y&&(s[h].defaultSelected=!0)}else{for(h=""+Je(h),l=null,x=0;x<s.length;x++){if(s[x].value===h){s[x].selected=!0,y&&(s[x].defaultSelected=!0);return}l!==null||s[x].disabled||(l=s[x])}l!==null&&(l.selected=!0)}}function _u(s,l){if(l.dangerouslySetInnerHTML!=null)throw Error(r(91));return ue({},l,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function jl(s,l){var h=l.value;if(h==null){if(h=l.children,l=l.defaultValue,h!=null){if(l!=null)throw Error(r(92));if(ua(h)){if(1<h.length)throw Error(r(93));h=h[0]}l=h}l==null&&(l=""),h=l}s._wrapperState={initialValue:Je(h)}}function Rl(s,l){var h=Je(l.value),y=Je(l.defaultValue);h!=null&&(h=""+h,h!==s.value&&(s.value=h),l.defaultValue==null&&s.defaultValue!==h&&(s.defaultValue=h)),y!=null&&(s.defaultValue=""+y)}function Eu(s){var l=s.textContent;l===s._wrapperState.initialValue&&l!==""&&l!==null&&(s.value=l)}function Jt(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zt(s,l){return s==null||s==="http://www.w3.org/1999/xhtml"?Jt(l):s==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var fa,Su=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,h,y,x){MSApp.execUnsafeLocalFunction(function(){return s(l,h,y,x)})}:s}(function(s,l){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=l;else{for(fa=fa||document.createElement("div"),fa.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=fa.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;l.firstChild;)s.appendChild(l.firstChild)}});function rs(s,l){if(l){var h=s.firstChild;if(h&&h===s.lastChild&&h.nodeType===3){h.nodeValue=l;return}}s.textContent=l}var go={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},yo=["Webkit","ms","Moz","O"];Object.keys(go).forEach(function(s){yo.forEach(function(l){l=l+s.charAt(0).toUpperCase()+s.substring(1),go[l]=go[s]})});function Au(s,l,h){return l==null||typeof l=="boolean"||l===""?"":h||typeof l!="number"||l===0||go.hasOwnProperty(s)&&go[s]?(""+l).trim():l+"px"}function Tu(s,l){s=s.style;for(var h in l)if(l.hasOwnProperty(h)){var y=h.indexOf("--")===0,x=Au(h,l[h],y);h==="float"&&(h="cssFloat"),y?s.setProperty(h,x):s[h]=x}}var Pu=ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Iu(s,l){if(l){if(Pu[s]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(r(137,s));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(r(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(r(61))}if(l.style!=null&&typeof l.style!="object")throw Error(r(62))}}function Nu(s,l){if(s.indexOf("-")===-1)return typeof l.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vo=null;function Ol(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Dl=null,Cn=null,Ci=null;function Ml(s){if(s=Zu(s)){if(typeof Dl!="function")throw Error(r(280));var l=s.stateNode;l&&(l=Ph(l),Dl(s.stateNode,s.type,l))}}function ki(s){Cn?Ci?Ci.push(s):Ci=[s]:Cn=s}function Cu(){if(Cn){var s=Cn,l=Ci;if(Ci=Cn=null,Ml(s),l)for(s=0;s<l.length;s++)Ml(l[s])}}function xo(s,l){return s(l)}function ku(){}var ha=!1;function ju(s,l,h){if(ha)return s(l,h);ha=!0;try{return xo(s,l,h)}finally{ha=!1,(Cn!==null||Ci!==null)&&(ku(),Cu())}}function Mt(s,l){var h=s.stateNode;if(h===null)return null;var y=Ph(h);if(y===null)return null;h=y[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(s=s.type,y=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!y;break e;default:s=!1}if(s)return null;if(h&&typeof h!="function")throw Error(r(231,l,typeof h));return h}var Ll=!1;if(c)try{var ei={};Object.defineProperty(ei,"passive",{get:function(){Ll=!0}}),window.addEventListener("test",ei,ei),window.removeEventListener("test",ei,ei)}catch{Ll=!1}function wo(s,l,h,y,x,T,O,z,q){var X=Array.prototype.slice.call(arguments,3);try{l.apply(h,X)}catch(ne){this.onError(ne)}}var bo=!1,Vl=null,ti=!1,Ru=null,fy={onError:function(s){bo=!0,Vl=s}};function Fl(s,l,h,y,x,T,O,z,q){bo=!1,Vl=null,wo.apply(fy,arguments)}function Jf(s,l,h,y,x,T,O,z,q){if(Fl.apply(this,arguments),bo){if(bo){var X=Vl;bo=!1,Vl=null}else throw Error(r(198));ti||(ti=!0,Ru=X)}}function ri(s){var l=s,h=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(h=l.return),s=l.return;while(s)}return l.tag===3?h:null}function _o(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function ni(s){if(ri(s)!==s)throw Error(r(188))}function Zf(s){var l=s.alternate;if(!l){if(l=ri(s),l===null)throw Error(r(188));return l!==s?null:s}for(var h=s,y=l;;){var x=h.return;if(x===null)break;var T=x.alternate;if(T===null){if(y=x.return,y!==null){h=y;continue}break}if(x.child===T.child){for(T=x.child;T;){if(T===h)return ni(x),s;if(T===y)return ni(x),l;T=T.sibling}throw Error(r(188))}if(h.return!==y.return)h=x,y=T;else{for(var O=!1,z=x.child;z;){if(z===h){O=!0,h=x,y=T;break}if(z===y){O=!0,y=x,h=T;break}z=z.sibling}if(!O){for(z=T.child;z;){if(z===h){O=!0,h=T,y=x;break}if(z===y){O=!0,y=T,h=x;break}z=z.sibling}if(!O)throw Error(r(189))}}if(h.alternate!==y)throw Error(r(190))}if(h.tag!==3)throw Error(r(188));return h.stateNode.current===h?s:l}function Ou(s){return s=Zf(s),s!==null?$l(s):null}function $l(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var l=$l(s);if(l!==null)return l;s=s.sibling}return null}var Ul=e.unstable_scheduleCallback,Du=e.unstable_cancelCallback,eh=e.unstable_shouldYield,hy=e.unstable_requestPaint,ft=e.unstable_now,th=e.unstable_getCurrentPriorityLevel,Eo=e.unstable_ImmediatePriority,ns=e.unstable_UserBlockingPriority,kn=e.unstable_NormalPriority,Mu=e.unstable_LowPriority,rh=e.unstable_IdlePriority,So=null,un=null;function nh(s){if(un&&typeof un.onCommitFiberRoot=="function")try{un.onCommitFiberRoot(So,s,void 0,(s.current.flags&128)===128)}catch{}}var Ur=Math.clz32?Math.clz32:ah,Lu=Math.log,ih=Math.LN2;function ah(s){return s>>>=0,s===0?32:31-(Lu(s)/ih|0)|0}var Bl=64,zl=4194304;function is(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function Ao(s,l){var h=s.pendingLanes;if(h===0)return 0;var y=0,x=s.suspendedLanes,T=s.pingedLanes,O=h&268435455;if(O!==0){var z=O&~x;z!==0?y=is(z):(T&=O,T!==0&&(y=is(T)))}else O=h&~x,O!==0?y=is(O):T!==0&&(y=is(T));if(y===0)return 0;if(l!==0&&l!==y&&(l&x)===0&&(x=y&-y,T=l&-l,x>=T||x===16&&(T&4194240)!==0))return l;if((y&4)!==0&&(y|=h&16),l=s.entangledLanes,l!==0)for(s=s.entanglements,l&=y;0<l;)h=31-Ur(l),x=1<<h,y|=s[h],l&=~x;return y}function my(s,l){switch(s){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ma(s,l){for(var h=s.suspendedLanes,y=s.pingedLanes,x=s.expirationTimes,T=s.pendingLanes;0<T;){var O=31-Ur(T),z=1<<O,q=x[O];q===-1?((z&h)===0||(z&y)!==0)&&(x[O]=my(z,l)):q<=l&&(s.expiredLanes|=z),T&=~z}}function dn(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function To(){var s=Bl;return Bl<<=1,(Bl&4194240)===0&&(Bl=64),s}function as(s){for(var l=[],h=0;31>h;h++)l.push(s);return l}function ss(s,l,h){s.pendingLanes|=l,l!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,l=31-Ur(l),s[l]=h}function ct(s,l){var h=s.pendingLanes&~l;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=l,s.mutableReadLanes&=l,s.entangledLanes&=l,l=s.entanglements;var y=s.eventTimes;for(s=s.expirationTimes;0<h;){var x=31-Ur(h),T=1<<x;l[x]=0,y[x]=-1,s[x]=-1,h&=~T}}function os(s,l){var h=s.entangledLanes|=l;for(s=s.entanglements;h;){var y=31-Ur(h),x=1<<y;x&l|s[y]&l&&(s[y]|=l),h&=~x}}var We=0;function ls(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var sh,ql,oh,lh,ch,Vu=!1,ji=[],vr=null,ii=null,ai=null,cs=new Map,jn=new Map,Ri=[],py="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function uh(s,l){switch(s){case"focusin":case"focusout":vr=null;break;case"dragenter":case"dragleave":ii=null;break;case"mouseover":case"mouseout":ai=null;break;case"pointerover":case"pointerout":cs.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":jn.delete(l.pointerId)}}function Yr(s,l,h,y,x,T){return s===null||s.nativeEvent!==T?(s={blockedOn:l,domEventName:h,eventSystemFlags:y,nativeEvent:T,targetContainers:[x]},l!==null&&(l=Zu(l),l!==null&&ql(l)),s):(s.eventSystemFlags|=y,l=s.targetContainers,x!==null&&l.indexOf(x)===-1&&l.push(x),s)}function gy(s,l,h,y,x){switch(l){case"focusin":return vr=Yr(vr,s,l,h,y,x),!0;case"dragenter":return ii=Yr(ii,s,l,h,y,x),!0;case"mouseover":return ai=Yr(ai,s,l,h,y,x),!0;case"pointerover":var T=x.pointerId;return cs.set(T,Yr(cs.get(T)||null,s,l,h,y,x)),!0;case"gotpointercapture":return T=x.pointerId,jn.set(T,Yr(jn.get(T)||null,s,l,h,y,x)),!0}return!1}function dh(s){var l=ko(s.target);if(l!==null){var h=ri(l);if(h!==null){if(l=h.tag,l===13){if(l=_o(h),l!==null){s.blockedOn=l,ch(s.priority,function(){oh(h)});return}}else if(l===3&&h.stateNode.current.memoizedState.isDehydrated){s.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}s.blockedOn=null}function pa(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var h=Kl(s.domEventName,s.eventSystemFlags,l[0],s.nativeEvent);if(h===null){h=s.nativeEvent;var y=new h.constructor(h.type,h);vo=y,h.target.dispatchEvent(y),vo=null}else return l=Zu(h),l!==null&&ql(l),s.blockedOn=h,!1;l.shift()}return!0}function Po(s,l,h){pa(s)&&h.delete(l)}function fh(){Vu=!1,vr!==null&&pa(vr)&&(vr=null),ii!==null&&pa(ii)&&(ii=null),ai!==null&&pa(ai)&&(ai=null),cs.forEach(Po),jn.forEach(Po)}function si(s,l){s.blockedOn===l&&(s.blockedOn=null,Vu||(Vu=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,fh)))}function oi(s){function l(x){return si(x,s)}if(0<ji.length){si(ji[0],s);for(var h=1;h<ji.length;h++){var y=ji[h];y.blockedOn===s&&(y.blockedOn=null)}}for(vr!==null&&si(vr,s),ii!==null&&si(ii,s),ai!==null&&si(ai,s),cs.forEach(l),jn.forEach(l),h=0;h<Ri.length;h++)y=Ri[h],y.blockedOn===s&&(y.blockedOn=null);for(;0<Ri.length&&(h=Ri[0],h.blockedOn===null);)dh(h),h.blockedOn===null&&Ri.shift()}var ga=R.ReactCurrentBatchConfig,us=!0;function Et(s,l,h,y){var x=We,T=ga.transition;ga.transition=null;try{We=1,Fu(s,l,h,y)}finally{We=x,ga.transition=T}}function yy(s,l,h,y){var x=We,T=ga.transition;ga.transition=null;try{We=4,Fu(s,l,h,y)}finally{We=x,ga.transition=T}}function Fu(s,l,h,y){if(us){var x=Kl(s,l,h,y);if(x===null)Iy(s,l,y,Io,h),uh(s,y);else if(gy(x,s,l,h,y))y.stopPropagation();else if(uh(s,y),l&4&&-1<py.indexOf(s)){for(;x!==null;){var T=Zu(x);if(T!==null&&sh(T),T=Kl(s,l,h,y),T===null&&Iy(s,l,y,Io,h),T===x)break;x=T}x!==null&&y.stopPropagation()}else Iy(s,l,y,null,h)}}var Io=null;function Kl(s,l,h,y){if(Io=null,s=Ol(y),s=ko(s),s!==null)if(l=ri(s),l===null)s=null;else if(h=l.tag,h===13){if(s=_o(l),s!==null)return s;s=null}else if(h===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null);return Io=s,null}function $u(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(th()){case Eo:return 1;case ns:return 4;case kn:case Mu:return 16;case rh:return 536870912;default:return 16}default:return 16}}var fn=null,Wl=null,Qr=null;function Uu(){if(Qr)return Qr;var s,l=Wl,h=l.length,y,x="value"in fn?fn.value:fn.textContent,T=x.length;for(s=0;s<h&&l[s]===x[s];s++);var O=h-s;for(y=1;y<=O&&l[h-y]===x[T-y];y++);return Qr=x.slice(s,1<y?1-y:void 0)}function Hl(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function Oi(){return!0}function Bu(){return!1}function xr(s){function l(h,y,x,T,O){this._reactName=h,this._targetInst=x,this.type=y,this.nativeEvent=T,this.target=O,this.currentTarget=null;for(var z in s)s.hasOwnProperty(z)&&(h=s[z],this[z]=h?h(T):T[z]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?Oi:Bu,this.isPropagationStopped=Bu,this}return ue(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Oi)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Oi)},persist:function(){},isPersistent:Oi}),l}var li={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gl=xr(li),Di=ue({},li,{view:0,detail:0}),vy=xr(Di),Yl,ya,ds,No=ue({},Di,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mi,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==ds&&(ds&&s.type==="mousemove"?(Yl=s.screenX-ds.screenX,ya=s.screenY-ds.screenY):ya=Yl=0,ds=s),Yl)},movementY:function(s){return"movementY"in s?s.movementY:ya}}),Ql=xr(No),zu=ue({},No,{dataTransfer:0}),hh=xr(zu),Xl=ue({},Di,{relatedTarget:0}),Jl=xr(Xl),mh=ue({},li,{animationName:0,elapsedTime:0,pseudoElement:0}),va=xr(mh),ph=ue({},li,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),gh=xr(ph),yh=ue({},li,{data:0}),qu=xr(yh),Zl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Br={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xh(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=vh[s])?!!l[s]:!1}function Mi(){return xh}var g=ue({},Di,{key:function(s){if(s.key){var l=Zl[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=Hl(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Br[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mi,charCode:function(s){return s.type==="keypress"?Hl(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Hl(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),A=xr(g),N=ue({},No,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),L=xr(N),H=ue({},Di,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mi}),Z=xr(H),ce=ue({},li,{propertyName:0,elapsedTime:0,pseudoElement:0}),at=xr(ce),er=ue({},No,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Ye=xr(er),lr=[9,13,27,32],zt=c&&"CompositionEvent"in window,Rn=null;c&&"documentMode"in document&&(Rn=document.documentMode);var hn=c&&"TextEvent"in window&&!Rn,Co=c&&(!zt||Rn&&8<Rn&&11>=Rn),ec=" ",cE=!1;function uE(s,l){switch(s){case"keyup":return lr.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dE(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var tc=!1;function t4(s,l){switch(s){case"compositionend":return dE(l);case"keypress":return l.which!==32?null:(cE=!0,ec);case"textInput":return s=l.data,s===ec&&cE?null:s;default:return null}}function r4(s,l){if(tc)return s==="compositionend"||!zt&&uE(s,l)?(s=Uu(),Qr=Wl=fn=null,tc=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Co&&l.locale!=="ko"?null:l.data;default:return null}}var n4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fE(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!n4[s.type]:l==="textarea"}function hE(s,l,h,y){ki(y),l=Sh(l,"onChange"),0<l.length&&(h=new Gl("onChange","change",null,h,y),s.push({event:h,listeners:l}))}var Ku=null,Wu=null;function i4(s){kE(s,0)}function wh(s){var l=sc(s);if(ae(l))return s}function a4(s,l){if(s==="change")return l}var mE=!1;if(c){var xy;if(c){var wy="oninput"in document;if(!wy){var pE=document.createElement("div");pE.setAttribute("oninput","return;"),wy=typeof pE.oninput=="function"}xy=wy}else xy=!1;mE=xy&&(!document.documentMode||9<document.documentMode)}function gE(){Ku&&(Ku.detachEvent("onpropertychange",yE),Wu=Ku=null)}function yE(s){if(s.propertyName==="value"&&wh(Wu)){var l=[];hE(l,Wu,s,Ol(s)),ju(i4,l)}}function s4(s,l,h){s==="focusin"?(gE(),Ku=l,Wu=h,Ku.attachEvent("onpropertychange",yE)):s==="focusout"&&gE()}function o4(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return wh(Wu)}function l4(s,l){if(s==="click")return wh(l)}function c4(s,l){if(s==="input"||s==="change")return wh(l)}function u4(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var ci=typeof Object.is=="function"?Object.is:u4;function Hu(s,l){if(ci(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var h=Object.keys(s),y=Object.keys(l);if(h.length!==y.length)return!1;for(y=0;y<h.length;y++){var x=h[y];if(!u.call(l,x)||!ci(s[x],l[x]))return!1}return!0}function vE(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function xE(s,l){var h=vE(s);s=0;for(var y;h;){if(h.nodeType===3){if(y=s+h.textContent.length,s<=l&&y>=l)return{node:h,offset:l-s};s=y}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=vE(h)}}function wE(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?wE(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function bE(){for(var s=window,l=Pt();l instanceof s.HTMLIFrameElement;){try{var h=typeof l.contentWindow.location.href=="string"}catch{h=!1}if(h)s=l.contentWindow;else break;l=Pt(s.document)}return l}function by(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}function d4(s){var l=bE(),h=s.focusedElem,y=s.selectionRange;if(l!==h&&h&&h.ownerDocument&&wE(h.ownerDocument.documentElement,h)){if(y!==null&&by(h)){if(l=y.start,s=y.end,s===void 0&&(s=l),"selectionStart"in h)h.selectionStart=l,h.selectionEnd=Math.min(s,h.value.length);else if(s=(l=h.ownerDocument||document)&&l.defaultView||window,s.getSelection){s=s.getSelection();var x=h.textContent.length,T=Math.min(y.start,x);y=y.end===void 0?T:Math.min(y.end,x),!s.extend&&T>y&&(x=y,y=T,T=x),x=xE(h,T);var O=xE(h,y);x&&O&&(s.rangeCount!==1||s.anchorNode!==x.node||s.anchorOffset!==x.offset||s.focusNode!==O.node||s.focusOffset!==O.offset)&&(l=l.createRange(),l.setStart(x.node,x.offset),s.removeAllRanges(),T>y?(s.addRange(l),s.extend(O.node,O.offset)):(l.setEnd(O.node,O.offset),s.addRange(l)))}}for(l=[],s=h;s=s.parentNode;)s.nodeType===1&&l.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<l.length;h++)s=l[h],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var f4=c&&"documentMode"in document&&11>=document.documentMode,rc=null,_y=null,Gu=null,Ey=!1;function _E(s,l,h){var y=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Ey||rc==null||rc!==Pt(y)||(y=rc,"selectionStart"in y&&by(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Gu&&Hu(Gu,y)||(Gu=y,y=Sh(_y,"onSelect"),0<y.length&&(l=new Gl("onSelect","select",null,l,h),s.push({event:l,listeners:y}),l.target=rc)))}function bh(s,l){var h={};return h[s.toLowerCase()]=l.toLowerCase(),h["Webkit"+s]="webkit"+l,h["Moz"+s]="moz"+l,h}var nc={animationend:bh("Animation","AnimationEnd"),animationiteration:bh("Animation","AnimationIteration"),animationstart:bh("Animation","AnimationStart"),transitionend:bh("Transition","TransitionEnd")},Sy={},EE={};c&&(EE=document.createElement("div").style,"AnimationEvent"in window||(delete nc.animationend.animation,delete nc.animationiteration.animation,delete nc.animationstart.animation),"TransitionEvent"in window||delete nc.transitionend.transition);function _h(s){if(Sy[s])return Sy[s];if(!nc[s])return s;var l=nc[s],h;for(h in l)if(l.hasOwnProperty(h)&&h in EE)return Sy[s]=l[h];return s}var SE=_h("animationend"),AE=_h("animationiteration"),TE=_h("animationstart"),PE=_h("transitionend"),IE=new Map,NE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fs(s,l){IE.set(s,l),a(l,[s])}for(var Ay=0;Ay<NE.length;Ay++){var Ty=NE[Ay],h4=Ty.toLowerCase(),m4=Ty[0].toUpperCase()+Ty.slice(1);fs(h4,"on"+m4)}fs(SE,"onAnimationEnd"),fs(AE,"onAnimationIteration"),fs(TE,"onAnimationStart"),fs("dblclick","onDoubleClick"),fs("focusin","onFocus"),fs("focusout","onBlur"),fs(PE,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),p4=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yu));function CE(s,l,h){var y=s.type||"unknown-event";s.currentTarget=h,Jf(y,l,void 0,s),s.currentTarget=null}function kE(s,l){l=(l&4)!==0;for(var h=0;h<s.length;h++){var y=s[h],x=y.event;y=y.listeners;e:{var T=void 0;if(l)for(var O=y.length-1;0<=O;O--){var z=y[O],q=z.instance,X=z.currentTarget;if(z=z.listener,q!==T&&x.isPropagationStopped())break e;CE(x,z,X),T=q}else for(O=0;O<y.length;O++){if(z=y[O],q=z.instance,X=z.currentTarget,z=z.listener,q!==T&&x.isPropagationStopped())break e;CE(x,z,X),T=q}}}if(ti)throw s=Ru,ti=!1,Ru=null,s}function yt(s,l){var h=l[Oy];h===void 0&&(h=l[Oy]=new Set);var y=s+"__bubble";h.has(y)||(jE(l,s,2,!1),h.add(y))}function Py(s,l,h){var y=0;l&&(y|=4),jE(h,s,y,l)}var Eh="_reactListening"+Math.random().toString(36).slice(2);function Qu(s){if(!s[Eh]){s[Eh]=!0,n.forEach(function(h){h!=="selectionchange"&&(p4.has(h)||Py(h,!1,s),Py(h,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[Eh]||(l[Eh]=!0,Py("selectionchange",!1,l))}}function jE(s,l,h,y){switch($u(l)){case 1:var x=Et;break;case 4:x=yy;break;default:x=Fu}h=x.bind(null,l,h,s),x=void 0,!Ll||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(x=!0),y?x!==void 0?s.addEventListener(l,h,{capture:!0,passive:x}):s.addEventListener(l,h,!0):x!==void 0?s.addEventListener(l,h,{passive:x}):s.addEventListener(l,h,!1)}function Iy(s,l,h,y,x){var T=y;if((l&1)===0&&(l&2)===0&&y!==null)e:for(;;){if(y===null)return;var O=y.tag;if(O===3||O===4){var z=y.stateNode.containerInfo;if(z===x||z.nodeType===8&&z.parentNode===x)break;if(O===4)for(O=y.return;O!==null;){var q=O.tag;if((q===3||q===4)&&(q=O.stateNode.containerInfo,q===x||q.nodeType===8&&q.parentNode===x))return;O=O.return}for(;z!==null;){if(O=ko(z),O===null)return;if(q=O.tag,q===5||q===6){y=T=O;continue e}z=z.parentNode}}y=y.return}ju(function(){var X=T,ne=Ol(h),se=[];e:{var re=IE.get(s);if(re!==void 0){var ge=Gl,be=s;switch(s){case"keypress":if(Hl(h)===0)break e;case"keydown":case"keyup":ge=A;break;case"focusin":be="focus",ge=Jl;break;case"focusout":be="blur",ge=Jl;break;case"beforeblur":case"afterblur":ge=Jl;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ge=Ql;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ge=hh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ge=Z;break;case SE:case AE:case TE:ge=va;break;case PE:ge=at;break;case"scroll":ge=vy;break;case"wheel":ge=Ye;break;case"copy":case"cut":case"paste":ge=gh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ge=L}var _e=(l&4)!==0,Lt=!_e&&s==="scroll",G=_e?re!==null?re+"Capture":null:re;_e=[];for(var K=X,Q;K!==null;){Q=K;var le=Q.stateNode;if(Q.tag===5&&le!==null&&(Q=le,G!==null&&(le=Mt(K,G),le!=null&&_e.push(Xu(K,le,Q)))),Lt)break;K=K.return}0<_e.length&&(re=new ge(re,be,null,h,ne),se.push({event:re,listeners:_e}))}}if((l&7)===0){e:{if(re=s==="mouseover"||s==="pointerover",ge=s==="mouseout"||s==="pointerout",re&&h!==vo&&(be=h.relatedTarget||h.fromElement)&&(ko(be)||be[xa]))break e;if((ge||re)&&(re=ne.window===ne?ne:(re=ne.ownerDocument)?re.defaultView||re.parentWindow:window,ge?(be=h.relatedTarget||h.toElement,ge=X,be=be?ko(be):null,be!==null&&(Lt=ri(be),be!==Lt||be.tag!==5&&be.tag!==6)&&(be=null)):(ge=null,be=X),ge!==be)){if(_e=Ql,le="onMouseLeave",G="onMouseEnter",K="mouse",(s==="pointerout"||s==="pointerover")&&(_e=L,le="onPointerLeave",G="onPointerEnter",K="pointer"),Lt=ge==null?re:sc(ge),Q=be==null?re:sc(be),re=new _e(le,K+"leave",ge,h,ne),re.target=Lt,re.relatedTarget=Q,le=null,ko(ne)===X&&(_e=new _e(G,K+"enter",be,h,ne),_e.target=Q,_e.relatedTarget=Lt,le=_e),Lt=le,ge&&be)t:{for(_e=ge,G=be,K=0,Q=_e;Q;Q=ic(Q))K++;for(Q=0,le=G;le;le=ic(le))Q++;for(;0<K-Q;)_e=ic(_e),K--;for(;0<Q-K;)G=ic(G),Q--;for(;K--;){if(_e===G||G!==null&&_e===G.alternate)break t;_e=ic(_e),G=ic(G)}_e=null}else _e=null;ge!==null&&RE(se,re,ge,_e,!1),be!==null&&Lt!==null&&RE(se,Lt,be,_e,!0)}}e:{if(re=X?sc(X):window,ge=re.nodeName&&re.nodeName.toLowerCase(),ge==="select"||ge==="input"&&re.type==="file")var Ee=a4;else if(fE(re))if(mE)Ee=c4;else{Ee=o4;var Ie=s4}else(ge=re.nodeName)&&ge.toLowerCase()==="input"&&(re.type==="checkbox"||re.type==="radio")&&(Ee=l4);if(Ee&&(Ee=Ee(s,X))){hE(se,Ee,h,ne);break e}Ie&&Ie(s,re,X),s==="focusout"&&(Ie=re._wrapperState)&&Ie.controlled&&re.type==="number"&&kl(re,"number",re.value)}switch(Ie=X?sc(X):window,s){case"focusin":(fE(Ie)||Ie.contentEditable==="true")&&(rc=Ie,_y=X,Gu=null);break;case"focusout":Gu=_y=rc=null;break;case"mousedown":Ey=!0;break;case"contextmenu":case"mouseup":case"dragend":Ey=!1,_E(se,h,ne);break;case"selectionchange":if(f4)break;case"keydown":case"keyup":_E(se,h,ne)}var Ne;if(zt)e:{switch(s){case"compositionstart":var Oe="onCompositionStart";break e;case"compositionend":Oe="onCompositionEnd";break e;case"compositionupdate":Oe="onCompositionUpdate";break e}Oe=void 0}else tc?uE(s,h)&&(Oe="onCompositionEnd"):s==="keydown"&&h.keyCode===229&&(Oe="onCompositionStart");Oe&&(Co&&h.locale!=="ko"&&(tc||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&tc&&(Ne=Uu()):(fn=ne,Wl="value"in fn?fn.value:fn.textContent,tc=!0)),Ie=Sh(X,Oe),0<Ie.length&&(Oe=new qu(Oe,s,null,h,ne),se.push({event:Oe,listeners:Ie}),Ne?Oe.data=Ne:(Ne=dE(h),Ne!==null&&(Oe.data=Ne)))),(Ne=hn?t4(s,h):r4(s,h))&&(X=Sh(X,"onBeforeInput"),0<X.length&&(ne=new qu("onBeforeInput","beforeinput",null,h,ne),se.push({event:ne,listeners:X}),ne.data=Ne))}kE(se,l)})}function Xu(s,l,h){return{instance:s,listener:l,currentTarget:h}}function Sh(s,l){for(var h=l+"Capture",y=[];s!==null;){var x=s,T=x.stateNode;x.tag===5&&T!==null&&(x=T,T=Mt(s,h),T!=null&&y.unshift(Xu(s,T,x)),T=Mt(s,l),T!=null&&y.push(Xu(s,T,x))),s=s.return}return y}function ic(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function RE(s,l,h,y,x){for(var T=l._reactName,O=[];h!==null&&h!==y;){var z=h,q=z.alternate,X=z.stateNode;if(q!==null&&q===y)break;z.tag===5&&X!==null&&(z=X,x?(q=Mt(h,T),q!=null&&O.unshift(Xu(h,q,z))):x||(q=Mt(h,T),q!=null&&O.push(Xu(h,q,z)))),h=h.return}O.length!==0&&s.push({event:l,listeners:O})}var g4=/\r\n?/g,y4=/\u0000|\uFFFD/g;function OE(s){return(typeof s=="string"?s:""+s).replace(g4,`
`).replace(y4,"")}function Ah(s,l,h){if(l=OE(l),OE(s)!==l&&h)throw Error(r(425))}function Th(){}var Ny=null,Cy=null;function ky(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var jy=typeof setTimeout=="function"?setTimeout:void 0,v4=typeof clearTimeout=="function"?clearTimeout:void 0,DE=typeof Promise=="function"?Promise:void 0,x4=typeof queueMicrotask=="function"?queueMicrotask:typeof DE<"u"?function(s){return DE.resolve(null).then(s).catch(w4)}:jy;function w4(s){setTimeout(function(){throw s})}function Ry(s,l){var h=l,y=0;do{var x=h.nextSibling;if(s.removeChild(h),x&&x.nodeType===8)if(h=x.data,h==="/$"){if(y===0){s.removeChild(x),oi(l);return}y--}else h!=="$"&&h!=="$?"&&h!=="$!"||y++;h=x}while(h);oi(l)}function hs(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return s}function ME(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var h=s.data;if(h==="$"||h==="$!"||h==="$?"){if(l===0)return s;l--}else h==="/$"&&l++}s=s.previousSibling}return null}var ac=Math.random().toString(36).slice(2),Li="__reactFiber$"+ac,Ju="__reactProps$"+ac,xa="__reactContainer$"+ac,Oy="__reactEvents$"+ac,b4="__reactListeners$"+ac,_4="__reactHandles$"+ac;function ko(s){var l=s[Li];if(l)return l;for(var h=s.parentNode;h;){if(l=h[xa]||h[Li]){if(h=l.alternate,l.child!==null||h!==null&&h.child!==null)for(s=ME(s);s!==null;){if(h=s[Li])return h;s=ME(s)}return l}s=h,h=s.parentNode}return null}function Zu(s){return s=s[Li]||s[xa],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function sc(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(r(33))}function Ph(s){return s[Ju]||null}var Dy=[],oc=-1;function ms(s){return{current:s}}function vt(s){0>oc||(s.current=Dy[oc],Dy[oc]=null,oc--)}function ht(s,l){oc++,Dy[oc]=s.current,s.current=l}var ps={},Nr=ms(ps),Xr=ms(!1),jo=ps;function lc(s,l){var h=s.type.contextTypes;if(!h)return ps;var y=s.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===l)return y.__reactInternalMemoizedMaskedChildContext;var x={},T;for(T in h)x[T]=l[T];return y&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=l,s.__reactInternalMemoizedMaskedChildContext=x),x}function Jr(s){return s=s.childContextTypes,s!=null}function Ih(){vt(Xr),vt(Nr)}function LE(s,l,h){if(Nr.current!==ps)throw Error(r(168));ht(Nr,l),ht(Xr,h)}function VE(s,l,h){var y=s.stateNode;if(l=l.childContextTypes,typeof y.getChildContext!="function")return h;y=y.getChildContext();for(var x in y)if(!(x in l))throw Error(r(108,Xe(s)||"Unknown",x));return ue({},h,y)}function Nh(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||ps,jo=Nr.current,ht(Nr,s),ht(Xr,Xr.current),!0}function FE(s,l,h){var y=s.stateNode;if(!y)throw Error(r(169));h?(s=VE(s,l,jo),y.__reactInternalMemoizedMergedChildContext=s,vt(Xr),vt(Nr),ht(Nr,s)):vt(Xr),ht(Xr,h)}var wa=null,Ch=!1,My=!1;function $E(s){wa===null?wa=[s]:wa.push(s)}function E4(s){Ch=!0,$E(s)}function gs(){if(!My&&wa!==null){My=!0;var s=0,l=We;try{var h=wa;for(We=1;s<h.length;s++){var y=h[s];do y=y(!0);while(y!==null)}wa=null,Ch=!1}catch(x){throw wa!==null&&(wa=wa.slice(s+1)),Ul(Eo,gs),x}finally{We=l,My=!1}}return null}var cc=[],uc=0,kh=null,jh=0,On=[],Dn=0,Ro=null,ba=1,_a="";function Oo(s,l){cc[uc++]=jh,cc[uc++]=kh,kh=s,jh=l}function UE(s,l,h){On[Dn++]=ba,On[Dn++]=_a,On[Dn++]=Ro,Ro=s;var y=ba;s=_a;var x=32-Ur(y)-1;y&=~(1<<x),h+=1;var T=32-Ur(l)+x;if(30<T){var O=x-x%5;T=(y&(1<<O)-1).toString(32),y>>=O,x-=O,ba=1<<32-Ur(l)+x|h<<x|y,_a=T+s}else ba=1<<T|h<<x|y,_a=s}function Ly(s){s.return!==null&&(Oo(s,1),UE(s,1,0))}function Vy(s){for(;s===kh;)kh=cc[--uc],cc[uc]=null,jh=cc[--uc],cc[uc]=null;for(;s===Ro;)Ro=On[--Dn],On[Dn]=null,_a=On[--Dn],On[Dn]=null,ba=On[--Dn],On[Dn]=null}var mn=null,pn=null,St=!1,ui=null;function BE(s,l){var h=Fn(5,null,null,0);h.elementType="DELETED",h.stateNode=l,h.return=s,l=s.deletions,l===null?(s.deletions=[h],s.flags|=16):l.push(h)}function zE(s,l){switch(s.tag){case 5:var h=s.type;return l=l.nodeType!==1||h.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(s.stateNode=l,mn=s,pn=hs(l.firstChild),!0):!1;case 6:return l=s.pendingProps===""||l.nodeType!==3?null:l,l!==null?(s.stateNode=l,mn=s,pn=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(h=Ro!==null?{id:ba,overflow:_a}:null,s.memoizedState={dehydrated:l,treeContext:h,retryLane:1073741824},h=Fn(18,null,null,0),h.stateNode=l,h.return=s,s.child=h,mn=s,pn=null,!0):!1;default:return!1}}function Fy(s){return(s.mode&1)!==0&&(s.flags&128)===0}function $y(s){if(St){var l=pn;if(l){var h=l;if(!zE(s,l)){if(Fy(s))throw Error(r(418));l=hs(h.nextSibling);var y=mn;l&&zE(s,l)?BE(y,h):(s.flags=s.flags&-4097|2,St=!1,mn=s)}}else{if(Fy(s))throw Error(r(418));s.flags=s.flags&-4097|2,St=!1,mn=s}}}function qE(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;mn=s}function Rh(s){if(s!==mn)return!1;if(!St)return qE(s),St=!0,!1;var l;if((l=s.tag!==3)&&!(l=s.tag!==5)&&(l=s.type,l=l!=="head"&&l!=="body"&&!ky(s.type,s.memoizedProps)),l&&(l=pn)){if(Fy(s))throw KE(),Error(r(418));for(;l;)BE(s,l),l=hs(l.nextSibling)}if(qE(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));e:{for(s=s.nextSibling,l=0;s;){if(s.nodeType===8){var h=s.data;if(h==="/$"){if(l===0){pn=hs(s.nextSibling);break e}l--}else h!=="$"&&h!=="$!"&&h!=="$?"||l++}s=s.nextSibling}pn=null}}else pn=mn?hs(s.stateNode.nextSibling):null;return!0}function KE(){for(var s=pn;s;)s=hs(s.nextSibling)}function dc(){pn=mn=null,St=!1}function Uy(s){ui===null?ui=[s]:ui.push(s)}var S4=R.ReactCurrentBatchConfig;function ed(s,l,h){if(s=h.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(r(309));var y=h.stateNode}if(!y)throw Error(r(147,s));var x=y,T=""+s;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===T?l.ref:(l=function(O){var z=x.refs;O===null?delete z[T]:z[T]=O},l._stringRef=T,l)}if(typeof s!="string")throw Error(r(284));if(!h._owner)throw Error(r(290,s))}return s}function Oh(s,l){throw s=Object.prototype.toString.call(l),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s))}function WE(s){var l=s._init;return l(s._payload)}function HE(s){function l(G,K){if(s){var Q=G.deletions;Q===null?(G.deletions=[K],G.flags|=16):Q.push(K)}}function h(G,K){if(!s)return null;for(;K!==null;)l(G,K),K=K.sibling;return null}function y(G,K){for(G=new Map;K!==null;)K.key!==null?G.set(K.key,K):G.set(K.index,K),K=K.sibling;return G}function x(G,K){return G=Ss(G,K),G.index=0,G.sibling=null,G}function T(G,K,Q){return G.index=Q,s?(Q=G.alternate,Q!==null?(Q=Q.index,Q<K?(G.flags|=2,K):Q):(G.flags|=2,K)):(G.flags|=1048576,K)}function O(G){return s&&G.alternate===null&&(G.flags|=2),G}function z(G,K,Q,le){return K===null||K.tag!==6?(K=jv(Q,G.mode,le),K.return=G,K):(K=x(K,Q),K.return=G,K)}function q(G,K,Q,le){var Ee=Q.type;return Ee===I?ne(G,K,Q.props.children,le,Q.key):K!==null&&(K.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===De&&WE(Ee)===K.type)?(le=x(K,Q.props),le.ref=ed(G,K,Q),le.return=G,le):(le=im(Q.type,Q.key,Q.props,null,G.mode,le),le.ref=ed(G,K,Q),le.return=G,le)}function X(G,K,Q,le){return K===null||K.tag!==4||K.stateNode.containerInfo!==Q.containerInfo||K.stateNode.implementation!==Q.implementation?(K=Rv(Q,G.mode,le),K.return=G,K):(K=x(K,Q.children||[]),K.return=G,K)}function ne(G,K,Q,le,Ee){return K===null||K.tag!==7?(K=Bo(Q,G.mode,le,Ee),K.return=G,K):(K=x(K,Q),K.return=G,K)}function se(G,K,Q){if(typeof K=="string"&&K!==""||typeof K=="number")return K=jv(""+K,G.mode,Q),K.return=G,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case V:return Q=im(K.type,K.key,K.props,null,G.mode,Q),Q.ref=ed(G,null,K),Q.return=G,Q;case B:return K=Rv(K,G.mode,Q),K.return=G,K;case De:var le=K._init;return se(G,le(K._payload),Q)}if(ua(K)||fe(K))return K=Bo(K,G.mode,Q,null),K.return=G,K;Oh(G,K)}return null}function re(G,K,Q,le){var Ee=K!==null?K.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number")return Ee!==null?null:z(G,K,""+Q,le);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case V:return Q.key===Ee?q(G,K,Q,le):null;case B:return Q.key===Ee?X(G,K,Q,le):null;case De:return Ee=Q._init,re(G,K,Ee(Q._payload),le)}if(ua(Q)||fe(Q))return Ee!==null?null:ne(G,K,Q,le,null);Oh(G,Q)}return null}function ge(G,K,Q,le,Ee){if(typeof le=="string"&&le!==""||typeof le=="number")return G=G.get(Q)||null,z(K,G,""+le,Ee);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case V:return G=G.get(le.key===null?Q:le.key)||null,q(K,G,le,Ee);case B:return G=G.get(le.key===null?Q:le.key)||null,X(K,G,le,Ee);case De:var Ie=le._init;return ge(G,K,Q,Ie(le._payload),Ee)}if(ua(le)||fe(le))return G=G.get(Q)||null,ne(K,G,le,Ee,null);Oh(K,le)}return null}function be(G,K,Q,le){for(var Ee=null,Ie=null,Ne=K,Oe=K=0,dr=null;Ne!==null&&Oe<Q.length;Oe++){Ne.index>Oe?(dr=Ne,Ne=null):dr=Ne.sibling;var tt=re(G,Ne,Q[Oe],le);if(tt===null){Ne===null&&(Ne=dr);break}s&&Ne&&tt.alternate===null&&l(G,Ne),K=T(tt,K,Oe),Ie===null?Ee=tt:Ie.sibling=tt,Ie=tt,Ne=dr}if(Oe===Q.length)return h(G,Ne),St&&Oo(G,Oe),Ee;if(Ne===null){for(;Oe<Q.length;Oe++)Ne=se(G,Q[Oe],le),Ne!==null&&(K=T(Ne,K,Oe),Ie===null?Ee=Ne:Ie.sibling=Ne,Ie=Ne);return St&&Oo(G,Oe),Ee}for(Ne=y(G,Ne);Oe<Q.length;Oe++)dr=ge(Ne,G,Oe,Q[Oe],le),dr!==null&&(s&&dr.alternate!==null&&Ne.delete(dr.key===null?Oe:dr.key),K=T(dr,K,Oe),Ie===null?Ee=dr:Ie.sibling=dr,Ie=dr);return s&&Ne.forEach(function(As){return l(G,As)}),St&&Oo(G,Oe),Ee}function _e(G,K,Q,le){var Ee=fe(Q);if(typeof Ee!="function")throw Error(r(150));if(Q=Ee.call(Q),Q==null)throw Error(r(151));for(var Ie=Ee=null,Ne=K,Oe=K=0,dr=null,tt=Q.next();Ne!==null&&!tt.done;Oe++,tt=Q.next()){Ne.index>Oe?(dr=Ne,Ne=null):dr=Ne.sibling;var As=re(G,Ne,tt.value,le);if(As===null){Ne===null&&(Ne=dr);break}s&&Ne&&As.alternate===null&&l(G,Ne),K=T(As,K,Oe),Ie===null?Ee=As:Ie.sibling=As,Ie=As,Ne=dr}if(tt.done)return h(G,Ne),St&&Oo(G,Oe),Ee;if(Ne===null){for(;!tt.done;Oe++,tt=Q.next())tt=se(G,tt.value,le),tt!==null&&(K=T(tt,K,Oe),Ie===null?Ee=tt:Ie.sibling=tt,Ie=tt);return St&&Oo(G,Oe),Ee}for(Ne=y(G,Ne);!tt.done;Oe++,tt=Q.next())tt=ge(Ne,G,Oe,tt.value,le),tt!==null&&(s&&tt.alternate!==null&&Ne.delete(tt.key===null?Oe:tt.key),K=T(tt,K,Oe),Ie===null?Ee=tt:Ie.sibling=tt,Ie=tt);return s&&Ne.forEach(function(n3){return l(G,n3)}),St&&Oo(G,Oe),Ee}function Lt(G,K,Q,le){if(typeof Q=="object"&&Q!==null&&Q.type===I&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case V:e:{for(var Ee=Q.key,Ie=K;Ie!==null;){if(Ie.key===Ee){if(Ee=Q.type,Ee===I){if(Ie.tag===7){h(G,Ie.sibling),K=x(Ie,Q.props.children),K.return=G,G=K;break e}}else if(Ie.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===De&&WE(Ee)===Ie.type){h(G,Ie.sibling),K=x(Ie,Q.props),K.ref=ed(G,Ie,Q),K.return=G,G=K;break e}h(G,Ie);break}else l(G,Ie);Ie=Ie.sibling}Q.type===I?(K=Bo(Q.props.children,G.mode,le,Q.key),K.return=G,G=K):(le=im(Q.type,Q.key,Q.props,null,G.mode,le),le.ref=ed(G,K,Q),le.return=G,G=le)}return O(G);case B:e:{for(Ie=Q.key;K!==null;){if(K.key===Ie)if(K.tag===4&&K.stateNode.containerInfo===Q.containerInfo&&K.stateNode.implementation===Q.implementation){h(G,K.sibling),K=x(K,Q.children||[]),K.return=G,G=K;break e}else{h(G,K);break}else l(G,K);K=K.sibling}K=Rv(Q,G.mode,le),K.return=G,G=K}return O(G);case De:return Ie=Q._init,Lt(G,K,Ie(Q._payload),le)}if(ua(Q))return be(G,K,Q,le);if(fe(Q))return _e(G,K,Q,le);Oh(G,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"?(Q=""+Q,K!==null&&K.tag===6?(h(G,K.sibling),K=x(K,Q),K.return=G,G=K):(h(G,K),K=jv(Q,G.mode,le),K.return=G,G=K),O(G)):h(G,K)}return Lt}var fc=HE(!0),GE=HE(!1),Dh=ms(null),Mh=null,hc=null,By=null;function zy(){By=hc=Mh=null}function qy(s){var l=Dh.current;vt(Dh),s._currentValue=l}function Ky(s,l,h){for(;s!==null;){var y=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,y!==null&&(y.childLanes|=l)):y!==null&&(y.childLanes&l)!==l&&(y.childLanes|=l),s===h)break;s=s.return}}function mc(s,l){Mh=s,By=hc=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&l)!==0&&(Zr=!0),s.firstContext=null)}function Mn(s){var l=s._currentValue;if(By!==s)if(s={context:s,memoizedValue:l,next:null},hc===null){if(Mh===null)throw Error(r(308));hc=s,Mh.dependencies={lanes:0,firstContext:s}}else hc=hc.next=s;return l}var Do=null;function Wy(s){Do===null?Do=[s]:Do.push(s)}function YE(s,l,h,y){var x=l.interleaved;return x===null?(h.next=h,Wy(l)):(h.next=x.next,x.next=h),l.interleaved=h,Ea(s,y)}function Ea(s,l){s.lanes|=l;var h=s.alternate;for(h!==null&&(h.lanes|=l),h=s,s=s.return;s!==null;)s.childLanes|=l,h=s.alternate,h!==null&&(h.childLanes|=l),h=s,s=s.return;return h.tag===3?h.stateNode:null}var ys=!1;function Hy(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function QE(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Sa(s,l){return{eventTime:s,lane:l,tag:0,payload:null,callback:null,next:null}}function vs(s,l,h){var y=s.updateQueue;if(y===null)return null;if(y=y.shared,(Ze&2)!==0){var x=y.pending;return x===null?l.next=l:(l.next=x.next,x.next=l),y.pending=l,Ea(s,h)}return x=y.interleaved,x===null?(l.next=l,Wy(y)):(l.next=x.next,x.next=l),y.interleaved=l,Ea(s,h)}function Lh(s,l,h){if(l=l.updateQueue,l!==null&&(l=l.shared,(h&4194240)!==0)){var y=l.lanes;y&=s.pendingLanes,h|=y,l.lanes=h,os(s,h)}}function XE(s,l){var h=s.updateQueue,y=s.alternate;if(y!==null&&(y=y.updateQueue,h===y)){var x=null,T=null;if(h=h.firstBaseUpdate,h!==null){do{var O={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};T===null?x=T=O:T=T.next=O,h=h.next}while(h!==null);T===null?x=T=l:T=T.next=l}else x=T=l;h={baseState:y.baseState,firstBaseUpdate:x,lastBaseUpdate:T,shared:y.shared,effects:y.effects},s.updateQueue=h;return}s=h.lastBaseUpdate,s===null?h.firstBaseUpdate=l:s.next=l,h.lastBaseUpdate=l}function Vh(s,l,h,y){var x=s.updateQueue;ys=!1;var T=x.firstBaseUpdate,O=x.lastBaseUpdate,z=x.shared.pending;if(z!==null){x.shared.pending=null;var q=z,X=q.next;q.next=null,O===null?T=X:O.next=X,O=q;var ne=s.alternate;ne!==null&&(ne=ne.updateQueue,z=ne.lastBaseUpdate,z!==O&&(z===null?ne.firstBaseUpdate=X:z.next=X,ne.lastBaseUpdate=q))}if(T!==null){var se=x.baseState;O=0,ne=X=q=null,z=T;do{var re=z.lane,ge=z.eventTime;if((y&re)===re){ne!==null&&(ne=ne.next={eventTime:ge,lane:0,tag:z.tag,payload:z.payload,callback:z.callback,next:null});e:{var be=s,_e=z;switch(re=l,ge=h,_e.tag){case 1:if(be=_e.payload,typeof be=="function"){se=be.call(ge,se,re);break e}se=be;break e;case 3:be.flags=be.flags&-65537|128;case 0:if(be=_e.payload,re=typeof be=="function"?be.call(ge,se,re):be,re==null)break e;se=ue({},se,re);break e;case 2:ys=!0}}z.callback!==null&&z.lane!==0&&(s.flags|=64,re=x.effects,re===null?x.effects=[z]:re.push(z))}else ge={eventTime:ge,lane:re,tag:z.tag,payload:z.payload,callback:z.callback,next:null},ne===null?(X=ne=ge,q=se):ne=ne.next=ge,O|=re;if(z=z.next,z===null){if(z=x.shared.pending,z===null)break;re=z,z=re.next,re.next=null,x.lastBaseUpdate=re,x.shared.pending=null}}while(!0);if(ne===null&&(q=se),x.baseState=q,x.firstBaseUpdate=X,x.lastBaseUpdate=ne,l=x.shared.interleaved,l!==null){x=l;do O|=x.lane,x=x.next;while(x!==l)}else T===null&&(x.shared.lanes=0);Vo|=O,s.lanes=O,s.memoizedState=se}}function JE(s,l,h){if(s=l.effects,l.effects=null,s!==null)for(l=0;l<s.length;l++){var y=s[l],x=y.callback;if(x!==null){if(y.callback=null,y=h,typeof x!="function")throw Error(r(191,x));x.call(y)}}}var td={},Vi=ms(td),rd=ms(td),nd=ms(td);function Mo(s){if(s===td)throw Error(r(174));return s}function Gy(s,l){switch(ht(nd,l),ht(rd,s),ht(Vi,td),s=l.nodeType,s){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:Zt(null,"");break;default:s=s===8?l.parentNode:l,l=s.namespaceURI||null,s=s.tagName,l=Zt(l,s)}vt(Vi),ht(Vi,l)}function pc(){vt(Vi),vt(rd),vt(nd)}function ZE(s){Mo(nd.current);var l=Mo(Vi.current),h=Zt(l,s.type);l!==h&&(ht(rd,s),ht(Vi,h))}function Yy(s){rd.current===s&&(vt(Vi),vt(rd))}var It=ms(0);function Fh(s){for(var l=s;l!==null;){if(l.tag===13){var h=l.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Qy=[];function Xy(){for(var s=0;s<Qy.length;s++)Qy[s]._workInProgressVersionPrimary=null;Qy.length=0}var $h=R.ReactCurrentDispatcher,Jy=R.ReactCurrentBatchConfig,Lo=0,Nt=null,tr=null,cr=null,Uh=!1,id=!1,ad=0,A4=0;function Cr(){throw Error(r(321))}function Zy(s,l){if(l===null)return!1;for(var h=0;h<l.length&&h<s.length;h++)if(!ci(s[h],l[h]))return!1;return!0}function ev(s,l,h,y,x,T){if(Lo=T,Nt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,$h.current=s===null||s.memoizedState===null?N4:C4,s=h(y,x),id){T=0;do{if(id=!1,ad=0,25<=T)throw Error(r(301));T+=1,cr=tr=null,l.updateQueue=null,$h.current=k4,s=h(y,x)}while(id)}if($h.current=qh,l=tr!==null&&tr.next!==null,Lo=0,cr=tr=Nt=null,Uh=!1,l)throw Error(r(300));return s}function tv(){var s=ad!==0;return ad=0,s}function Fi(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return cr===null?Nt.memoizedState=cr=s:cr=cr.next=s,cr}function Ln(){if(tr===null){var s=Nt.alternate;s=s!==null?s.memoizedState:null}else s=tr.next;var l=cr===null?Nt.memoizedState:cr.next;if(l!==null)cr=l,tr=s;else{if(s===null)throw Error(r(310));tr=s,s={memoizedState:tr.memoizedState,baseState:tr.baseState,baseQueue:tr.baseQueue,queue:tr.queue,next:null},cr===null?Nt.memoizedState=cr=s:cr=cr.next=s}return cr}function sd(s,l){return typeof l=="function"?l(s):l}function rv(s){var l=Ln(),h=l.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=s;var y=tr,x=y.baseQueue,T=h.pending;if(T!==null){if(x!==null){var O=x.next;x.next=T.next,T.next=O}y.baseQueue=x=T,h.pending=null}if(x!==null){T=x.next,y=y.baseState;var z=O=null,q=null,X=T;do{var ne=X.lane;if((Lo&ne)===ne)q!==null&&(q=q.next={lane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),y=X.hasEagerState?X.eagerState:s(y,X.action);else{var se={lane:ne,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null};q===null?(z=q=se,O=y):q=q.next=se,Nt.lanes|=ne,Vo|=ne}X=X.next}while(X!==null&&X!==T);q===null?O=y:q.next=z,ci(y,l.memoizedState)||(Zr=!0),l.memoizedState=y,l.baseState=O,l.baseQueue=q,h.lastRenderedState=y}if(s=h.interleaved,s!==null){x=s;do T=x.lane,Nt.lanes|=T,Vo|=T,x=x.next;while(x!==s)}else x===null&&(h.lanes=0);return[l.memoizedState,h.dispatch]}function nv(s){var l=Ln(),h=l.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=s;var y=h.dispatch,x=h.pending,T=l.memoizedState;if(x!==null){h.pending=null;var O=x=x.next;do T=s(T,O.action),O=O.next;while(O!==x);ci(T,l.memoizedState)||(Zr=!0),l.memoizedState=T,l.baseQueue===null&&(l.baseState=T),h.lastRenderedState=T}return[T,y]}function eS(){}function tS(s,l){var h=Nt,y=Ln(),x=l(),T=!ci(y.memoizedState,x);if(T&&(y.memoizedState=x,Zr=!0),y=y.queue,iv(iS.bind(null,h,y,s),[s]),y.getSnapshot!==l||T||cr!==null&&cr.memoizedState.tag&1){if(h.flags|=2048,od(9,nS.bind(null,h,y,x,l),void 0,null),ur===null)throw Error(r(349));(Lo&30)!==0||rS(h,l,x)}return x}function rS(s,l,h){s.flags|=16384,s={getSnapshot:l,value:h},l=Nt.updateQueue,l===null?(l={lastEffect:null,stores:null},Nt.updateQueue=l,l.stores=[s]):(h=l.stores,h===null?l.stores=[s]:h.push(s))}function nS(s,l,h,y){l.value=h,l.getSnapshot=y,aS(l)&&sS(s)}function iS(s,l,h){return h(function(){aS(l)&&sS(s)})}function aS(s){var l=s.getSnapshot;s=s.value;try{var h=l();return!ci(s,h)}catch{return!0}}function sS(s){var l=Ea(s,1);l!==null&&mi(l,s,1,-1)}function oS(s){var l=Fi();return typeof s=="function"&&(s=s()),l.memoizedState=l.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:sd,lastRenderedState:s},l.queue=s,s=s.dispatch=I4.bind(null,Nt,s),[l.memoizedState,s]}function od(s,l,h,y){return s={tag:s,create:l,destroy:h,deps:y,next:null},l=Nt.updateQueue,l===null?(l={lastEffect:null,stores:null},Nt.updateQueue=l,l.lastEffect=s.next=s):(h=l.lastEffect,h===null?l.lastEffect=s.next=s:(y=h.next,h.next=s,s.next=y,l.lastEffect=s)),s}function lS(){return Ln().memoizedState}function Bh(s,l,h,y){var x=Fi();Nt.flags|=s,x.memoizedState=od(1|l,h,void 0,y===void 0?null:y)}function zh(s,l,h,y){var x=Ln();y=y===void 0?null:y;var T=void 0;if(tr!==null){var O=tr.memoizedState;if(T=O.destroy,y!==null&&Zy(y,O.deps)){x.memoizedState=od(l,h,T,y);return}}Nt.flags|=s,x.memoizedState=od(1|l,h,T,y)}function cS(s,l){return Bh(8390656,8,s,l)}function iv(s,l){return zh(2048,8,s,l)}function uS(s,l){return zh(4,2,s,l)}function dS(s,l){return zh(4,4,s,l)}function fS(s,l){if(typeof l=="function")return s=s(),l(s),function(){l(null)};if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function hS(s,l,h){return h=h!=null?h.concat([s]):null,zh(4,4,fS.bind(null,l,s),h)}function av(){}function mS(s,l){var h=Ln();l=l===void 0?null:l;var y=h.memoizedState;return y!==null&&l!==null&&Zy(l,y[1])?y[0]:(h.memoizedState=[s,l],s)}function pS(s,l){var h=Ln();l=l===void 0?null:l;var y=h.memoizedState;return y!==null&&l!==null&&Zy(l,y[1])?y[0]:(s=s(),h.memoizedState=[s,l],s)}function gS(s,l,h){return(Lo&21)===0?(s.baseState&&(s.baseState=!1,Zr=!0),s.memoizedState=h):(ci(h,l)||(h=To(),Nt.lanes|=h,Vo|=h,s.baseState=!0),l)}function T4(s,l){var h=We;We=h!==0&&4>h?h:4,s(!0);var y=Jy.transition;Jy.transition={};try{s(!1),l()}finally{We=h,Jy.transition=y}}function yS(){return Ln().memoizedState}function P4(s,l,h){var y=_s(s);if(h={lane:y,action:h,hasEagerState:!1,eagerState:null,next:null},vS(s))xS(l,h);else if(h=YE(s,l,h,y),h!==null){var x=qr();mi(h,s,y,x),wS(h,l,y)}}function I4(s,l,h){var y=_s(s),x={lane:y,action:h,hasEagerState:!1,eagerState:null,next:null};if(vS(s))xS(l,x);else{var T=s.alternate;if(s.lanes===0&&(T===null||T.lanes===0)&&(T=l.lastRenderedReducer,T!==null))try{var O=l.lastRenderedState,z=T(O,h);if(x.hasEagerState=!0,x.eagerState=z,ci(z,O)){var q=l.interleaved;q===null?(x.next=x,Wy(l)):(x.next=q.next,q.next=x),l.interleaved=x;return}}catch{}finally{}h=YE(s,l,x,y),h!==null&&(x=qr(),mi(h,s,y,x),wS(h,l,y))}}function vS(s){var l=s.alternate;return s===Nt||l!==null&&l===Nt}function xS(s,l){id=Uh=!0;var h=s.pending;h===null?l.next=l:(l.next=h.next,h.next=l),s.pending=l}function wS(s,l,h){if((h&4194240)!==0){var y=l.lanes;y&=s.pendingLanes,h|=y,l.lanes=h,os(s,h)}}var qh={readContext:Mn,useCallback:Cr,useContext:Cr,useEffect:Cr,useImperativeHandle:Cr,useInsertionEffect:Cr,useLayoutEffect:Cr,useMemo:Cr,useReducer:Cr,useRef:Cr,useState:Cr,useDebugValue:Cr,useDeferredValue:Cr,useTransition:Cr,useMutableSource:Cr,useSyncExternalStore:Cr,useId:Cr,unstable_isNewReconciler:!1},N4={readContext:Mn,useCallback:function(s,l){return Fi().memoizedState=[s,l===void 0?null:l],s},useContext:Mn,useEffect:cS,useImperativeHandle:function(s,l,h){return h=h!=null?h.concat([s]):null,Bh(4194308,4,fS.bind(null,l,s),h)},useLayoutEffect:function(s,l){return Bh(4194308,4,s,l)},useInsertionEffect:function(s,l){return Bh(4,2,s,l)},useMemo:function(s,l){var h=Fi();return l=l===void 0?null:l,s=s(),h.memoizedState=[s,l],s},useReducer:function(s,l,h){var y=Fi();return l=h!==void 0?h(l):l,y.memoizedState=y.baseState=l,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:l},y.queue=s,s=s.dispatch=P4.bind(null,Nt,s),[y.memoizedState,s]},useRef:function(s){var l=Fi();return s={current:s},l.memoizedState=s},useState:oS,useDebugValue:av,useDeferredValue:function(s){return Fi().memoizedState=s},useTransition:function(){var s=oS(!1),l=s[0];return s=T4.bind(null,s[1]),Fi().memoizedState=s,[l,s]},useMutableSource:function(){},useSyncExternalStore:function(s,l,h){var y=Nt,x=Fi();if(St){if(h===void 0)throw Error(r(407));h=h()}else{if(h=l(),ur===null)throw Error(r(349));(Lo&30)!==0||rS(y,l,h)}x.memoizedState=h;var T={value:h,getSnapshot:l};return x.queue=T,cS(iS.bind(null,y,T,s),[s]),y.flags|=2048,od(9,nS.bind(null,y,T,h,l),void 0,null),h},useId:function(){var s=Fi(),l=ur.identifierPrefix;if(St){var h=_a,y=ba;h=(y&~(1<<32-Ur(y)-1)).toString(32)+h,l=":"+l+"R"+h,h=ad++,0<h&&(l+="H"+h.toString(32)),l+=":"}else h=A4++,l=":"+l+"r"+h.toString(32)+":";return s.memoizedState=l},unstable_isNewReconciler:!1},C4={readContext:Mn,useCallback:mS,useContext:Mn,useEffect:iv,useImperativeHandle:hS,useInsertionEffect:uS,useLayoutEffect:dS,useMemo:pS,useReducer:rv,useRef:lS,useState:function(){return rv(sd)},useDebugValue:av,useDeferredValue:function(s){var l=Ln();return gS(l,tr.memoizedState,s)},useTransition:function(){var s=rv(sd)[0],l=Ln().memoizedState;return[s,l]},useMutableSource:eS,useSyncExternalStore:tS,useId:yS,unstable_isNewReconciler:!1},k4={readContext:Mn,useCallback:mS,useContext:Mn,useEffect:iv,useImperativeHandle:hS,useInsertionEffect:uS,useLayoutEffect:dS,useMemo:pS,useReducer:nv,useRef:lS,useState:function(){return nv(sd)},useDebugValue:av,useDeferredValue:function(s){var l=Ln();return tr===null?l.memoizedState=s:gS(l,tr.memoizedState,s)},useTransition:function(){var s=nv(sd)[0],l=Ln().memoizedState;return[s,l]},useMutableSource:eS,useSyncExternalStore:tS,useId:yS,unstable_isNewReconciler:!1};function di(s,l){if(s&&s.defaultProps){l=ue({},l),s=s.defaultProps;for(var h in s)l[h]===void 0&&(l[h]=s[h]);return l}return l}function sv(s,l,h,y){l=s.memoizedState,h=h(y,l),h=h==null?l:ue({},l,h),s.memoizedState=h,s.lanes===0&&(s.updateQueue.baseState=h)}var Kh={isMounted:function(s){return(s=s._reactInternals)?ri(s)===s:!1},enqueueSetState:function(s,l,h){s=s._reactInternals;var y=qr(),x=_s(s),T=Sa(y,x);T.payload=l,h!=null&&(T.callback=h),l=vs(s,T,x),l!==null&&(mi(l,s,x,y),Lh(l,s,x))},enqueueReplaceState:function(s,l,h){s=s._reactInternals;var y=qr(),x=_s(s),T=Sa(y,x);T.tag=1,T.payload=l,h!=null&&(T.callback=h),l=vs(s,T,x),l!==null&&(mi(l,s,x,y),Lh(l,s,x))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var h=qr(),y=_s(s),x=Sa(h,y);x.tag=2,l!=null&&(x.callback=l),l=vs(s,x,y),l!==null&&(mi(l,s,y,h),Lh(l,s,y))}};function bS(s,l,h,y,x,T,O){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(y,T,O):l.prototype&&l.prototype.isPureReactComponent?!Hu(h,y)||!Hu(x,T):!0}function _S(s,l,h){var y=!1,x=ps,T=l.contextType;return typeof T=="object"&&T!==null?T=Mn(T):(x=Jr(l)?jo:Nr.current,y=l.contextTypes,T=(y=y!=null)?lc(s,x):ps),l=new l(h,T),s.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=Kh,s.stateNode=l,l._reactInternals=s,y&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=x,s.__reactInternalMemoizedMaskedChildContext=T),l}function ES(s,l,h,y){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(h,y),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(h,y),l.state!==s&&Kh.enqueueReplaceState(l,l.state,null)}function ov(s,l,h,y){var x=s.stateNode;x.props=h,x.state=s.memoizedState,x.refs={},Hy(s);var T=l.contextType;typeof T=="object"&&T!==null?x.context=Mn(T):(T=Jr(l)?jo:Nr.current,x.context=lc(s,T)),x.state=s.memoizedState,T=l.getDerivedStateFromProps,typeof T=="function"&&(sv(s,l,T,h),x.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(l=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),l!==x.state&&Kh.enqueueReplaceState(x,x.state,null),Vh(s,h,x,y),x.state=s.memoizedState),typeof x.componentDidMount=="function"&&(s.flags|=4194308)}function gc(s,l){try{var h="",y=l;do h+=Ce(y),y=y.return;while(y);var x=h}catch(T){x=`
Error generating stack: `+T.message+`
`+T.stack}return{value:s,source:l,stack:x,digest:null}}function lv(s,l,h){return{value:s,source:null,stack:h??null,digest:l??null}}function cv(s,l){try{console.error(l.value)}catch(h){setTimeout(function(){throw h})}}var j4=typeof WeakMap=="function"?WeakMap:Map;function SS(s,l,h){h=Sa(-1,h),h.tag=3,h.payload={element:null};var y=l.value;return h.callback=function(){Jh||(Jh=!0,Sv=y),cv(s,l)},h}function AS(s,l,h){h=Sa(-1,h),h.tag=3;var y=s.type.getDerivedStateFromError;if(typeof y=="function"){var x=l.value;h.payload=function(){return y(x)},h.callback=function(){cv(s,l)}}var T=s.stateNode;return T!==null&&typeof T.componentDidCatch=="function"&&(h.callback=function(){cv(s,l),typeof y!="function"&&(ws===null?ws=new Set([this]):ws.add(this));var O=l.stack;this.componentDidCatch(l.value,{componentStack:O!==null?O:""})}),h}function TS(s,l,h){var y=s.pingCache;if(y===null){y=s.pingCache=new j4;var x=new Set;y.set(l,x)}else x=y.get(l),x===void 0&&(x=new Set,y.set(l,x));x.has(h)||(x.add(h),s=W4.bind(null,s,l,h),l.then(s,s))}function PS(s){do{var l;if((l=s.tag===13)&&(l=s.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return s;s=s.return}while(s!==null);return null}function IS(s,l,h,y,x){return(s.mode&1)===0?(s===l?s.flags|=65536:(s.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(l=Sa(-1,1),l.tag=2,vs(h,l,1))),h.lanes|=1),s):(s.flags|=65536,s.lanes=x,s)}var R4=R.ReactCurrentOwner,Zr=!1;function zr(s,l,h,y){l.child=s===null?GE(l,null,h,y):fc(l,s.child,h,y)}function NS(s,l,h,y,x){h=h.render;var T=l.ref;return mc(l,x),y=ev(s,l,h,y,T,x),h=tv(),s!==null&&!Zr?(l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~x,Aa(s,l,x)):(St&&h&&Ly(l),l.flags|=1,zr(s,l,y,x),l.child)}function CS(s,l,h,y,x){if(s===null){var T=h.type;return typeof T=="function"&&!kv(T)&&T.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(l.tag=15,l.type=T,kS(s,l,T,y,x)):(s=im(h.type,null,y,l,l.mode,x),s.ref=l.ref,s.return=l,l.child=s)}if(T=s.child,(s.lanes&x)===0){var O=T.memoizedProps;if(h=h.compare,h=h!==null?h:Hu,h(O,y)&&s.ref===l.ref)return Aa(s,l,x)}return l.flags|=1,s=Ss(T,y),s.ref=l.ref,s.return=l,l.child=s}function kS(s,l,h,y,x){if(s!==null){var T=s.memoizedProps;if(Hu(T,y)&&s.ref===l.ref)if(Zr=!1,l.pendingProps=y=T,(s.lanes&x)!==0)(s.flags&131072)!==0&&(Zr=!0);else return l.lanes=s.lanes,Aa(s,l,x)}return uv(s,l,h,y,x)}function jS(s,l,h){var y=l.pendingProps,x=y.children,T=s!==null?s.memoizedState:null;if(y.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},ht(vc,gn),gn|=h;else{if((h&1073741824)===0)return s=T!==null?T.baseLanes|h:h,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:s,cachePool:null,transitions:null},l.updateQueue=null,ht(vc,gn),gn|=s,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=T!==null?T.baseLanes:h,ht(vc,gn),gn|=y}else T!==null?(y=T.baseLanes|h,l.memoizedState=null):y=h,ht(vc,gn),gn|=y;return zr(s,l,x,h),l.child}function RS(s,l){var h=l.ref;(s===null&&h!==null||s!==null&&s.ref!==h)&&(l.flags|=512,l.flags|=2097152)}function uv(s,l,h,y,x){var T=Jr(h)?jo:Nr.current;return T=lc(l,T),mc(l,x),h=ev(s,l,h,y,T,x),y=tv(),s!==null&&!Zr?(l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~x,Aa(s,l,x)):(St&&y&&Ly(l),l.flags|=1,zr(s,l,h,x),l.child)}function OS(s,l,h,y,x){if(Jr(h)){var T=!0;Nh(l)}else T=!1;if(mc(l,x),l.stateNode===null)Hh(s,l),_S(l,h,y),ov(l,h,y,x),y=!0;else if(s===null){var O=l.stateNode,z=l.memoizedProps;O.props=z;var q=O.context,X=h.contextType;typeof X=="object"&&X!==null?X=Mn(X):(X=Jr(h)?jo:Nr.current,X=lc(l,X));var ne=h.getDerivedStateFromProps,se=typeof ne=="function"||typeof O.getSnapshotBeforeUpdate=="function";se||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(z!==y||q!==X)&&ES(l,O,y,X),ys=!1;var re=l.memoizedState;O.state=re,Vh(l,y,O,x),q=l.memoizedState,z!==y||re!==q||Xr.current||ys?(typeof ne=="function"&&(sv(l,h,ne,y),q=l.memoizedState),(z=ys||bS(l,h,z,y,re,q,X))?(se||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(l.flags|=4194308)):(typeof O.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=y,l.memoizedState=q),O.props=y,O.state=q,O.context=X,y=z):(typeof O.componentDidMount=="function"&&(l.flags|=4194308),y=!1)}else{O=l.stateNode,QE(s,l),z=l.memoizedProps,X=l.type===l.elementType?z:di(l.type,z),O.props=X,se=l.pendingProps,re=O.context,q=h.contextType,typeof q=="object"&&q!==null?q=Mn(q):(q=Jr(h)?jo:Nr.current,q=lc(l,q));var ge=h.getDerivedStateFromProps;(ne=typeof ge=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(z!==se||re!==q)&&ES(l,O,y,q),ys=!1,re=l.memoizedState,O.state=re,Vh(l,y,O,x);var be=l.memoizedState;z!==se||re!==be||Xr.current||ys?(typeof ge=="function"&&(sv(l,h,ge,y),be=l.memoizedState),(X=ys||bS(l,h,X,y,re,be,q)||!1)?(ne||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(y,be,q),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(y,be,q)),typeof O.componentDidUpdate=="function"&&(l.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof O.componentDidUpdate!="function"||z===s.memoizedProps&&re===s.memoizedState||(l.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||z===s.memoizedProps&&re===s.memoizedState||(l.flags|=1024),l.memoizedProps=y,l.memoizedState=be),O.props=y,O.state=be,O.context=q,y=X):(typeof O.componentDidUpdate!="function"||z===s.memoizedProps&&re===s.memoizedState||(l.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||z===s.memoizedProps&&re===s.memoizedState||(l.flags|=1024),y=!1)}return dv(s,l,h,y,T,x)}function dv(s,l,h,y,x,T){RS(s,l);var O=(l.flags&128)!==0;if(!y&&!O)return x&&FE(l,h,!1),Aa(s,l,T);y=l.stateNode,R4.current=l;var z=O&&typeof h.getDerivedStateFromError!="function"?null:y.render();return l.flags|=1,s!==null&&O?(l.child=fc(l,s.child,null,T),l.child=fc(l,null,z,T)):zr(s,l,z,T),l.memoizedState=y.state,x&&FE(l,h,!0),l.child}function DS(s){var l=s.stateNode;l.pendingContext?LE(s,l.pendingContext,l.pendingContext!==l.context):l.context&&LE(s,l.context,!1),Gy(s,l.containerInfo)}function MS(s,l,h,y,x){return dc(),Uy(x),l.flags|=256,zr(s,l,h,y),l.child}var fv={dehydrated:null,treeContext:null,retryLane:0};function hv(s){return{baseLanes:s,cachePool:null,transitions:null}}function LS(s,l,h){var y=l.pendingProps,x=It.current,T=!1,O=(l.flags&128)!==0,z;if((z=O)||(z=s!==null&&s.memoizedState===null?!1:(x&2)!==0),z?(T=!0,l.flags&=-129):(s===null||s.memoizedState!==null)&&(x|=1),ht(It,x&1),s===null)return $y(l),s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((l.mode&1)===0?l.lanes=1:s.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(O=y.children,s=y.fallback,T?(y=l.mode,T=l.child,O={mode:"hidden",children:O},(y&1)===0&&T!==null?(T.childLanes=0,T.pendingProps=O):T=am(O,y,0,null),s=Bo(s,y,h,null),T.return=l,s.return=l,T.sibling=s,l.child=T,l.child.memoizedState=hv(h),l.memoizedState=fv,s):mv(l,O));if(x=s.memoizedState,x!==null&&(z=x.dehydrated,z!==null))return O4(s,l,O,y,z,x,h);if(T){T=y.fallback,O=l.mode,x=s.child,z=x.sibling;var q={mode:"hidden",children:y.children};return(O&1)===0&&l.child!==x?(y=l.child,y.childLanes=0,y.pendingProps=q,l.deletions=null):(y=Ss(x,q),y.subtreeFlags=x.subtreeFlags&14680064),z!==null?T=Ss(z,T):(T=Bo(T,O,h,null),T.flags|=2),T.return=l,y.return=l,y.sibling=T,l.child=y,y=T,T=l.child,O=s.child.memoizedState,O=O===null?hv(h):{baseLanes:O.baseLanes|h,cachePool:null,transitions:O.transitions},T.memoizedState=O,T.childLanes=s.childLanes&~h,l.memoizedState=fv,y}return T=s.child,s=T.sibling,y=Ss(T,{mode:"visible",children:y.children}),(l.mode&1)===0&&(y.lanes=h),y.return=l,y.sibling=null,s!==null&&(h=l.deletions,h===null?(l.deletions=[s],l.flags|=16):h.push(s)),l.child=y,l.memoizedState=null,y}function mv(s,l){return l=am({mode:"visible",children:l},s.mode,0,null),l.return=s,s.child=l}function Wh(s,l,h,y){return y!==null&&Uy(y),fc(l,s.child,null,h),s=mv(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function O4(s,l,h,y,x,T,O){if(h)return l.flags&256?(l.flags&=-257,y=lv(Error(r(422))),Wh(s,l,O,y)):l.memoizedState!==null?(l.child=s.child,l.flags|=128,null):(T=y.fallback,x=l.mode,y=am({mode:"visible",children:y.children},x,0,null),T=Bo(T,x,O,null),T.flags|=2,y.return=l,T.return=l,y.sibling=T,l.child=y,(l.mode&1)!==0&&fc(l,s.child,null,O),l.child.memoizedState=hv(O),l.memoizedState=fv,T);if((l.mode&1)===0)return Wh(s,l,O,null);if(x.data==="$!"){if(y=x.nextSibling&&x.nextSibling.dataset,y)var z=y.dgst;return y=z,T=Error(r(419)),y=lv(T,y,void 0),Wh(s,l,O,y)}if(z=(O&s.childLanes)!==0,Zr||z){if(y=ur,y!==null){switch(O&-O){case 4:x=2;break;case 16:x=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:x=32;break;case 536870912:x=268435456;break;default:x=0}x=(x&(y.suspendedLanes|O))!==0?0:x,x!==0&&x!==T.retryLane&&(T.retryLane=x,Ea(s,x),mi(y,s,x,-1))}return Cv(),y=lv(Error(r(421))),Wh(s,l,O,y)}return x.data==="$?"?(l.flags|=128,l.child=s.child,l=H4.bind(null,s),x._reactRetry=l,null):(s=T.treeContext,pn=hs(x.nextSibling),mn=l,St=!0,ui=null,s!==null&&(On[Dn++]=ba,On[Dn++]=_a,On[Dn++]=Ro,ba=s.id,_a=s.overflow,Ro=l),l=mv(l,y.children),l.flags|=4096,l)}function VS(s,l,h){s.lanes|=l;var y=s.alternate;y!==null&&(y.lanes|=l),Ky(s.return,l,h)}function pv(s,l,h,y,x){var T=s.memoizedState;T===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:y,tail:h,tailMode:x}:(T.isBackwards=l,T.rendering=null,T.renderingStartTime=0,T.last=y,T.tail=h,T.tailMode=x)}function FS(s,l,h){var y=l.pendingProps,x=y.revealOrder,T=y.tail;if(zr(s,l,y.children,h),y=It.current,(y&2)!==0)y=y&1|2,l.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&VS(s,h,l);else if(s.tag===19)VS(s,h,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}y&=1}if(ht(It,y),(l.mode&1)===0)l.memoizedState=null;else switch(x){case"forwards":for(h=l.child,x=null;h!==null;)s=h.alternate,s!==null&&Fh(s)===null&&(x=h),h=h.sibling;h=x,h===null?(x=l.child,l.child=null):(x=h.sibling,h.sibling=null),pv(l,!1,x,h,T);break;case"backwards":for(h=null,x=l.child,l.child=null;x!==null;){if(s=x.alternate,s!==null&&Fh(s)===null){l.child=x;break}s=x.sibling,x.sibling=h,h=x,x=s}pv(l,!0,h,null,T);break;case"together":pv(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Hh(s,l){(l.mode&1)===0&&s!==null&&(s.alternate=null,l.alternate=null,l.flags|=2)}function Aa(s,l,h){if(s!==null&&(l.dependencies=s.dependencies),Vo|=l.lanes,(h&l.childLanes)===0)return null;if(s!==null&&l.child!==s.child)throw Error(r(153));if(l.child!==null){for(s=l.child,h=Ss(s,s.pendingProps),l.child=h,h.return=l;s.sibling!==null;)s=s.sibling,h=h.sibling=Ss(s,s.pendingProps),h.return=l;h.sibling=null}return l.child}function D4(s,l,h){switch(l.tag){case 3:DS(l),dc();break;case 5:ZE(l);break;case 1:Jr(l.type)&&Nh(l);break;case 4:Gy(l,l.stateNode.containerInfo);break;case 10:var y=l.type._context,x=l.memoizedProps.value;ht(Dh,y._currentValue),y._currentValue=x;break;case 13:if(y=l.memoizedState,y!==null)return y.dehydrated!==null?(ht(It,It.current&1),l.flags|=128,null):(h&l.child.childLanes)!==0?LS(s,l,h):(ht(It,It.current&1),s=Aa(s,l,h),s!==null?s.sibling:null);ht(It,It.current&1);break;case 19:if(y=(h&l.childLanes)!==0,(s.flags&128)!==0){if(y)return FS(s,l,h);l.flags|=128}if(x=l.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),ht(It,It.current),y)break;return null;case 22:case 23:return l.lanes=0,jS(s,l,h)}return Aa(s,l,h)}var $S,gv,US,BS;$S=function(s,l){for(var h=l.child;h!==null;){if(h.tag===5||h.tag===6)s.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===l)break;for(;h.sibling===null;){if(h.return===null||h.return===l)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},gv=function(){},US=function(s,l,h,y){var x=s.memoizedProps;if(x!==y){s=l.stateNode,Mo(Vi.current);var T=null;switch(h){case"input":x=Ge(s,x),y=Ge(s,y),T=[];break;case"select":x=ue({},x,{value:void 0}),y=ue({},y,{value:void 0}),T=[];break;case"textarea":x=_u(s,x),y=_u(s,y),T=[];break;default:typeof x.onClick!="function"&&typeof y.onClick=="function"&&(s.onclick=Th)}Iu(h,y);var O;h=null;for(X in x)if(!y.hasOwnProperty(X)&&x.hasOwnProperty(X)&&x[X]!=null)if(X==="style"){var z=x[X];for(O in z)z.hasOwnProperty(O)&&(h||(h={}),h[O]="")}else X!=="dangerouslySetInnerHTML"&&X!=="children"&&X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&X!=="autoFocus"&&(i.hasOwnProperty(X)?T||(T=[]):(T=T||[]).push(X,null));for(X in y){var q=y[X];if(z=x?.[X],y.hasOwnProperty(X)&&q!==z&&(q!=null||z!=null))if(X==="style")if(z){for(O in z)!z.hasOwnProperty(O)||q&&q.hasOwnProperty(O)||(h||(h={}),h[O]="");for(O in q)q.hasOwnProperty(O)&&z[O]!==q[O]&&(h||(h={}),h[O]=q[O])}else h||(T||(T=[]),T.push(X,h)),h=q;else X==="dangerouslySetInnerHTML"?(q=q?q.__html:void 0,z=z?z.__html:void 0,q!=null&&z!==q&&(T=T||[]).push(X,q)):X==="children"?typeof q!="string"&&typeof q!="number"||(T=T||[]).push(X,""+q):X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&(i.hasOwnProperty(X)?(q!=null&&X==="onScroll"&&yt("scroll",s),T||z===q||(T=[])):(T=T||[]).push(X,q))}h&&(T=T||[]).push("style",h);var X=T;(l.updateQueue=X)&&(l.flags|=4)}},BS=function(s,l,h,y){h!==y&&(l.flags|=4)};function ld(s,l){if(!St)switch(s.tailMode){case"hidden":l=s.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?s.tail=null:h.sibling=null;break;case"collapsed":h=s.tail;for(var y=null;h!==null;)h.alternate!==null&&(y=h),h=h.sibling;y===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:y.sibling=null}}function kr(s){var l=s.alternate!==null&&s.alternate.child===s.child,h=0,y=0;if(l)for(var x=s.child;x!==null;)h|=x.lanes|x.childLanes,y|=x.subtreeFlags&14680064,y|=x.flags&14680064,x.return=s,x=x.sibling;else for(x=s.child;x!==null;)h|=x.lanes|x.childLanes,y|=x.subtreeFlags,y|=x.flags,x.return=s,x=x.sibling;return s.subtreeFlags|=y,s.childLanes=h,l}function M4(s,l,h){var y=l.pendingProps;switch(Vy(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kr(l),null;case 1:return Jr(l.type)&&Ih(),kr(l),null;case 3:return y=l.stateNode,pc(),vt(Xr),vt(Nr),Xy(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(s===null||s.child===null)&&(Rh(l)?l.flags|=4:s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,ui!==null&&(Pv(ui),ui=null))),gv(s,l),kr(l),null;case 5:Yy(l);var x=Mo(nd.current);if(h=l.type,s!==null&&l.stateNode!=null)US(s,l,h,y,x),s.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!y){if(l.stateNode===null)throw Error(r(166));return kr(l),null}if(s=Mo(Vi.current),Rh(l)){y=l.stateNode,h=l.type;var T=l.memoizedProps;switch(y[Li]=l,y[Ju]=T,s=(l.mode&1)!==0,h){case"dialog":yt("cancel",y),yt("close",y);break;case"iframe":case"object":case"embed":yt("load",y);break;case"video":case"audio":for(x=0;x<Yu.length;x++)yt(Yu[x],y);break;case"source":yt("error",y);break;case"img":case"image":case"link":yt("error",y),yt("load",y);break;case"details":yt("toggle",y);break;case"input":Bt(y,T),yt("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!T.multiple},yt("invalid",y);break;case"textarea":jl(y,T),yt("invalid",y)}Iu(h,T),x=null;for(var O in T)if(T.hasOwnProperty(O)){var z=T[O];O==="children"?typeof z=="string"?y.textContent!==z&&(T.suppressHydrationWarning!==!0&&Ah(y.textContent,z,s),x=["children",z]):typeof z=="number"&&y.textContent!==""+z&&(T.suppressHydrationWarning!==!0&&Ah(y.textContent,z,s),x=["children",""+z]):i.hasOwnProperty(O)&&z!=null&&O==="onScroll"&&yt("scroll",y)}switch(h){case"input":Fe(y),po(y,T,!0);break;case"textarea":Fe(y),Eu(y);break;case"select":case"option":break;default:typeof T.onClick=="function"&&(y.onclick=Th)}y=x,l.updateQueue=y,y!==null&&(l.flags|=4)}else{O=x.nodeType===9?x:x.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=Jt(h)),s==="http://www.w3.org/1999/xhtml"?h==="script"?(s=O.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof y.is=="string"?s=O.createElement(h,{is:y.is}):(s=O.createElement(h),h==="select"&&(O=s,y.multiple?O.multiple=!0:y.size&&(O.size=y.size))):s=O.createElementNS(s,h),s[Li]=l,s[Ju]=y,$S(s,l,!1,!1),l.stateNode=s;e:{switch(O=Nu(h,y),h){case"dialog":yt("cancel",s),yt("close",s),x=y;break;case"iframe":case"object":case"embed":yt("load",s),x=y;break;case"video":case"audio":for(x=0;x<Yu.length;x++)yt(Yu[x],s);x=y;break;case"source":yt("error",s),x=y;break;case"img":case"image":case"link":yt("error",s),yt("load",s),x=y;break;case"details":yt("toggle",s),x=y;break;case"input":Bt(s,y),x=Ge(s,y),yt("invalid",s);break;case"option":x=y;break;case"select":s._wrapperState={wasMultiple:!!y.multiple},x=ue({},y,{value:void 0}),yt("invalid",s);break;case"textarea":jl(s,y),x=_u(s,y),yt("invalid",s);break;default:x=y}Iu(h,x),z=x;for(T in z)if(z.hasOwnProperty(T)){var q=z[T];T==="style"?Tu(s,q):T==="dangerouslySetInnerHTML"?(q=q?q.__html:void 0,q!=null&&Su(s,q)):T==="children"?typeof q=="string"?(h!=="textarea"||q!=="")&&rs(s,q):typeof q=="number"&&rs(s,""+q):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(i.hasOwnProperty(T)?q!=null&&T==="onScroll"&&yt("scroll",s):q!=null&&C(s,T,q,O))}switch(h){case"input":Fe(s),po(s,y,!1);break;case"textarea":Fe(s),Eu(s);break;case"option":y.value!=null&&s.setAttribute("value",""+Je(y.value));break;case"select":s.multiple=!!y.multiple,T=y.value,T!=null?da(s,!!y.multiple,T,!1):y.defaultValue!=null&&da(s,!!y.multiple,y.defaultValue,!0);break;default:typeof x.onClick=="function"&&(s.onclick=Th)}switch(h){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return kr(l),null;case 6:if(s&&l.stateNode!=null)BS(s,l,s.memoizedProps,y);else{if(typeof y!="string"&&l.stateNode===null)throw Error(r(166));if(h=Mo(nd.current),Mo(Vi.current),Rh(l)){if(y=l.stateNode,h=l.memoizedProps,y[Li]=l,(T=y.nodeValue!==h)&&(s=mn,s!==null))switch(s.tag){case 3:Ah(y.nodeValue,h,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Ah(y.nodeValue,h,(s.mode&1)!==0)}T&&(l.flags|=4)}else y=(h.nodeType===9?h:h.ownerDocument).createTextNode(y),y[Li]=l,l.stateNode=y}return kr(l),null;case 13:if(vt(It),y=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(St&&pn!==null&&(l.mode&1)!==0&&(l.flags&128)===0)KE(),dc(),l.flags|=98560,T=!1;else if(T=Rh(l),y!==null&&y.dehydrated!==null){if(s===null){if(!T)throw Error(r(318));if(T=l.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(r(317));T[Li]=l}else dc(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;kr(l),T=!1}else ui!==null&&(Pv(ui),ui=null),T=!0;if(!T)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=h,l):(y=y!==null,y!==(s!==null&&s.memoizedState!==null)&&y&&(l.child.flags|=8192,(l.mode&1)!==0&&(s===null||(It.current&1)!==0?rr===0&&(rr=3):Cv())),l.updateQueue!==null&&(l.flags|=4),kr(l),null);case 4:return pc(),gv(s,l),s===null&&Qu(l.stateNode.containerInfo),kr(l),null;case 10:return qy(l.type._context),kr(l),null;case 17:return Jr(l.type)&&Ih(),kr(l),null;case 19:if(vt(It),T=l.memoizedState,T===null)return kr(l),null;if(y=(l.flags&128)!==0,O=T.rendering,O===null)if(y)ld(T,!1);else{if(rr!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(O=Fh(s),O!==null){for(l.flags|=128,ld(T,!1),y=O.updateQueue,y!==null&&(l.updateQueue=y,l.flags|=4),l.subtreeFlags=0,y=h,h=l.child;h!==null;)T=h,s=y,T.flags&=14680066,O=T.alternate,O===null?(T.childLanes=0,T.lanes=s,T.child=null,T.subtreeFlags=0,T.memoizedProps=null,T.memoizedState=null,T.updateQueue=null,T.dependencies=null,T.stateNode=null):(T.childLanes=O.childLanes,T.lanes=O.lanes,T.child=O.child,T.subtreeFlags=0,T.deletions=null,T.memoizedProps=O.memoizedProps,T.memoizedState=O.memoizedState,T.updateQueue=O.updateQueue,T.type=O.type,s=O.dependencies,T.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),h=h.sibling;return ht(It,It.current&1|2),l.child}s=s.sibling}T.tail!==null&&ft()>xc&&(l.flags|=128,y=!0,ld(T,!1),l.lanes=4194304)}else{if(!y)if(s=Fh(O),s!==null){if(l.flags|=128,y=!0,h=s.updateQueue,h!==null&&(l.updateQueue=h,l.flags|=4),ld(T,!0),T.tail===null&&T.tailMode==="hidden"&&!O.alternate&&!St)return kr(l),null}else 2*ft()-T.renderingStartTime>xc&&h!==1073741824&&(l.flags|=128,y=!0,ld(T,!1),l.lanes=4194304);T.isBackwards?(O.sibling=l.child,l.child=O):(h=T.last,h!==null?h.sibling=O:l.child=O,T.last=O)}return T.tail!==null?(l=T.tail,T.rendering=l,T.tail=l.sibling,T.renderingStartTime=ft(),l.sibling=null,h=It.current,ht(It,y?h&1|2:h&1),l):(kr(l),null);case 22:case 23:return Nv(),y=l.memoizedState!==null,s!==null&&s.memoizedState!==null!==y&&(l.flags|=8192),y&&(l.mode&1)!==0?(gn&1073741824)!==0&&(kr(l),l.subtreeFlags&6&&(l.flags|=8192)):kr(l),null;case 24:return null;case 25:return null}throw Error(r(156,l.tag))}function L4(s,l){switch(Vy(l),l.tag){case 1:return Jr(l.type)&&Ih(),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return pc(),vt(Xr),vt(Nr),Xy(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 5:return Yy(l),null;case 13:if(vt(It),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(r(340));dc()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return vt(It),null;case 4:return pc(),null;case 10:return qy(l.type._context),null;case 22:case 23:return Nv(),null;case 24:return null;default:return null}}var Gh=!1,jr=!1,V4=typeof WeakSet=="function"?WeakSet:Set,ve=null;function yc(s,l){var h=s.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(y){jt(s,l,y)}else h.current=null}function yv(s,l,h){try{h()}catch(y){jt(s,l,y)}}var zS=!1;function F4(s,l){if(Ny=us,s=bE(),by(s)){if("selectionStart"in s)var h={start:s.selectionStart,end:s.selectionEnd};else e:{h=(h=s.ownerDocument)&&h.defaultView||window;var y=h.getSelection&&h.getSelection();if(y&&y.rangeCount!==0){h=y.anchorNode;var x=y.anchorOffset,T=y.focusNode;y=y.focusOffset;try{h.nodeType,T.nodeType}catch{h=null;break e}var O=0,z=-1,q=-1,X=0,ne=0,se=s,re=null;t:for(;;){for(var ge;se!==h||x!==0&&se.nodeType!==3||(z=O+x),se!==T||y!==0&&se.nodeType!==3||(q=O+y),se.nodeType===3&&(O+=se.nodeValue.length),(ge=se.firstChild)!==null;)re=se,se=ge;for(;;){if(se===s)break t;if(re===h&&++X===x&&(z=O),re===T&&++ne===y&&(q=O),(ge=se.nextSibling)!==null)break;se=re,re=se.parentNode}se=ge}h=z===-1||q===-1?null:{start:z,end:q}}else h=null}h=h||{start:0,end:0}}else h=null;for(Cy={focusedElem:s,selectionRange:h},us=!1,ve=l;ve!==null;)if(l=ve,s=l.child,(l.subtreeFlags&1028)!==0&&s!==null)s.return=l,ve=s;else for(;ve!==null;){l=ve;try{var be=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(be!==null){var _e=be.memoizedProps,Lt=be.memoizedState,G=l.stateNode,K=G.getSnapshotBeforeUpdate(l.elementType===l.type?_e:di(l.type,_e),Lt);G.__reactInternalSnapshotBeforeUpdate=K}break;case 3:var Q=l.stateNode.containerInfo;Q.nodeType===1?Q.textContent="":Q.nodeType===9&&Q.documentElement&&Q.removeChild(Q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(le){jt(l,l.return,le)}if(s=l.sibling,s!==null){s.return=l.return,ve=s;break}ve=l.return}return be=zS,zS=!1,be}function cd(s,l,h){var y=l.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var x=y=y.next;do{if((x.tag&s)===s){var T=x.destroy;x.destroy=void 0,T!==void 0&&yv(l,h,T)}x=x.next}while(x!==y)}}function Yh(s,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var h=l=l.next;do{if((h.tag&s)===s){var y=h.create;h.destroy=y()}h=h.next}while(h!==l)}}function vv(s){var l=s.ref;if(l!==null){var h=s.stateNode;switch(s.tag){case 5:s=h;break;default:s=h}typeof l=="function"?l(s):l.current=s}}function qS(s){var l=s.alternate;l!==null&&(s.alternate=null,qS(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&(delete l[Li],delete l[Ju],delete l[Oy],delete l[b4],delete l[_4])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function KS(s){return s.tag===5||s.tag===3||s.tag===4}function WS(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||KS(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function xv(s,l,h){var y=s.tag;if(y===5||y===6)s=s.stateNode,l?h.nodeType===8?h.parentNode.insertBefore(s,l):h.insertBefore(s,l):(h.nodeType===8?(l=h.parentNode,l.insertBefore(s,h)):(l=h,l.appendChild(s)),h=h._reactRootContainer,h!=null||l.onclick!==null||(l.onclick=Th));else if(y!==4&&(s=s.child,s!==null))for(xv(s,l,h),s=s.sibling;s!==null;)xv(s,l,h),s=s.sibling}function wv(s,l,h){var y=s.tag;if(y===5||y===6)s=s.stateNode,l?h.insertBefore(s,l):h.appendChild(s);else if(y!==4&&(s=s.child,s!==null))for(wv(s,l,h),s=s.sibling;s!==null;)wv(s,l,h),s=s.sibling}var wr=null,fi=!1;function xs(s,l,h){for(h=h.child;h!==null;)HS(s,l,h),h=h.sibling}function HS(s,l,h){if(un&&typeof un.onCommitFiberUnmount=="function")try{un.onCommitFiberUnmount(So,h)}catch{}switch(h.tag){case 5:jr||yc(h,l);case 6:var y=wr,x=fi;wr=null,xs(s,l,h),wr=y,fi=x,wr!==null&&(fi?(s=wr,h=h.stateNode,s.nodeType===8?s.parentNode.removeChild(h):s.removeChild(h)):wr.removeChild(h.stateNode));break;case 18:wr!==null&&(fi?(s=wr,h=h.stateNode,s.nodeType===8?Ry(s.parentNode,h):s.nodeType===1&&Ry(s,h),oi(s)):Ry(wr,h.stateNode));break;case 4:y=wr,x=fi,wr=h.stateNode.containerInfo,fi=!0,xs(s,l,h),wr=y,fi=x;break;case 0:case 11:case 14:case 15:if(!jr&&(y=h.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){x=y=y.next;do{var T=x,O=T.destroy;T=T.tag,O!==void 0&&((T&2)!==0||(T&4)!==0)&&yv(h,l,O),x=x.next}while(x!==y)}xs(s,l,h);break;case 1:if(!jr&&(yc(h,l),y=h.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=h.memoizedProps,y.state=h.memoizedState,y.componentWillUnmount()}catch(z){jt(h,l,z)}xs(s,l,h);break;case 21:xs(s,l,h);break;case 22:h.mode&1?(jr=(y=jr)||h.memoizedState!==null,xs(s,l,h),jr=y):xs(s,l,h);break;default:xs(s,l,h)}}function GS(s){var l=s.updateQueue;if(l!==null){s.updateQueue=null;var h=s.stateNode;h===null&&(h=s.stateNode=new V4),l.forEach(function(y){var x=G4.bind(null,s,y);h.has(y)||(h.add(y),y.then(x,x))})}}function hi(s,l){var h=l.deletions;if(h!==null)for(var y=0;y<h.length;y++){var x=h[y];try{var T=s,O=l,z=O;e:for(;z!==null;){switch(z.tag){case 5:wr=z.stateNode,fi=!1;break e;case 3:wr=z.stateNode.containerInfo,fi=!0;break e;case 4:wr=z.stateNode.containerInfo,fi=!0;break e}z=z.return}if(wr===null)throw Error(r(160));HS(T,O,x),wr=null,fi=!1;var q=x.alternate;q!==null&&(q.return=null),x.return=null}catch(X){jt(x,l,X)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)YS(l,s),l=l.sibling}function YS(s,l){var h=s.alternate,y=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(hi(l,s),$i(s),y&4){try{cd(3,s,s.return),Yh(3,s)}catch(_e){jt(s,s.return,_e)}try{cd(5,s,s.return)}catch(_e){jt(s,s.return,_e)}}break;case 1:hi(l,s),$i(s),y&512&&h!==null&&yc(h,h.return);break;case 5:if(hi(l,s),$i(s),y&512&&h!==null&&yc(h,h.return),s.flags&32){var x=s.stateNode;try{rs(x,"")}catch(_e){jt(s,s.return,_e)}}if(y&4&&(x=s.stateNode,x!=null)){var T=s.memoizedProps,O=h!==null?h.memoizedProps:T,z=s.type,q=s.updateQueue;if(s.updateQueue=null,q!==null)try{z==="input"&&T.type==="radio"&&T.name!=null&&Xt(x,T),Nu(z,O);var X=Nu(z,T);for(O=0;O<q.length;O+=2){var ne=q[O],se=q[O+1];ne==="style"?Tu(x,se):ne==="dangerouslySetInnerHTML"?Su(x,se):ne==="children"?rs(x,se):C(x,ne,se,X)}switch(z){case"input":cn(x,T);break;case"textarea":Rl(x,T);break;case"select":var re=x._wrapperState.wasMultiple;x._wrapperState.wasMultiple=!!T.multiple;var ge=T.value;ge!=null?da(x,!!T.multiple,ge,!1):re!==!!T.multiple&&(T.defaultValue!=null?da(x,!!T.multiple,T.defaultValue,!0):da(x,!!T.multiple,T.multiple?[]:"",!1))}x[Ju]=T}catch(_e){jt(s,s.return,_e)}}break;case 6:if(hi(l,s),$i(s),y&4){if(s.stateNode===null)throw Error(r(162));x=s.stateNode,T=s.memoizedProps;try{x.nodeValue=T}catch(_e){jt(s,s.return,_e)}}break;case 3:if(hi(l,s),$i(s),y&4&&h!==null&&h.memoizedState.isDehydrated)try{oi(l.containerInfo)}catch(_e){jt(s,s.return,_e)}break;case 4:hi(l,s),$i(s);break;case 13:hi(l,s),$i(s),x=s.child,x.flags&8192&&(T=x.memoizedState!==null,x.stateNode.isHidden=T,!T||x.alternate!==null&&x.alternate.memoizedState!==null||(Ev=ft())),y&4&&GS(s);break;case 22:if(ne=h!==null&&h.memoizedState!==null,s.mode&1?(jr=(X=jr)||ne,hi(l,s),jr=X):hi(l,s),$i(s),y&8192){if(X=s.memoizedState!==null,(s.stateNode.isHidden=X)&&!ne&&(s.mode&1)!==0)for(ve=s,ne=s.child;ne!==null;){for(se=ve=ne;ve!==null;){switch(re=ve,ge=re.child,re.tag){case 0:case 11:case 14:case 15:cd(4,re,re.return);break;case 1:yc(re,re.return);var be=re.stateNode;if(typeof be.componentWillUnmount=="function"){y=re,h=re.return;try{l=y,be.props=l.memoizedProps,be.state=l.memoizedState,be.componentWillUnmount()}catch(_e){jt(y,h,_e)}}break;case 5:yc(re,re.return);break;case 22:if(re.memoizedState!==null){JS(se);continue}}ge!==null?(ge.return=re,ve=ge):JS(se)}ne=ne.sibling}e:for(ne=null,se=s;;){if(se.tag===5){if(ne===null){ne=se;try{x=se.stateNode,X?(T=x.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none"):(z=se.stateNode,q=se.memoizedProps.style,O=q!=null&&q.hasOwnProperty("display")?q.display:null,z.style.display=Au("display",O))}catch(_e){jt(s,s.return,_e)}}}else if(se.tag===6){if(ne===null)try{se.stateNode.nodeValue=X?"":se.memoizedProps}catch(_e){jt(s,s.return,_e)}}else if((se.tag!==22&&se.tag!==23||se.memoizedState===null||se===s)&&se.child!==null){se.child.return=se,se=se.child;continue}if(se===s)break e;for(;se.sibling===null;){if(se.return===null||se.return===s)break e;ne===se&&(ne=null),se=se.return}ne===se&&(ne=null),se.sibling.return=se.return,se=se.sibling}}break;case 19:hi(l,s),$i(s),y&4&&GS(s);break;case 21:break;default:hi(l,s),$i(s)}}function $i(s){var l=s.flags;if(l&2){try{e:{for(var h=s.return;h!==null;){if(KS(h)){var y=h;break e}h=h.return}throw Error(r(160))}switch(y.tag){case 5:var x=y.stateNode;y.flags&32&&(rs(x,""),y.flags&=-33);var T=WS(s);wv(s,T,x);break;case 3:case 4:var O=y.stateNode.containerInfo,z=WS(s);xv(s,z,O);break;default:throw Error(r(161))}}catch(q){jt(s,s.return,q)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function $4(s,l,h){ve=s,QS(s)}function QS(s,l,h){for(var y=(s.mode&1)!==0;ve!==null;){var x=ve,T=x.child;if(x.tag===22&&y){var O=x.memoizedState!==null||Gh;if(!O){var z=x.alternate,q=z!==null&&z.memoizedState!==null||jr;z=Gh;var X=jr;if(Gh=O,(jr=q)&&!X)for(ve=x;ve!==null;)O=ve,q=O.child,O.tag===22&&O.memoizedState!==null?ZS(x):q!==null?(q.return=O,ve=q):ZS(x);for(;T!==null;)ve=T,QS(T),T=T.sibling;ve=x,Gh=z,jr=X}XS(s)}else(x.subtreeFlags&8772)!==0&&T!==null?(T.return=x,ve=T):XS(s)}}function XS(s){for(;ve!==null;){var l=ve;if((l.flags&8772)!==0){var h=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:jr||Yh(5,l);break;case 1:var y=l.stateNode;if(l.flags&4&&!jr)if(h===null)y.componentDidMount();else{var x=l.elementType===l.type?h.memoizedProps:di(l.type,h.memoizedProps);y.componentDidUpdate(x,h.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var T=l.updateQueue;T!==null&&JE(l,T,y);break;case 3:var O=l.updateQueue;if(O!==null){if(h=null,l.child!==null)switch(l.child.tag){case 5:h=l.child.stateNode;break;case 1:h=l.child.stateNode}JE(l,O,h)}break;case 5:var z=l.stateNode;if(h===null&&l.flags&4){h=z;var q=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":q.autoFocus&&h.focus();break;case"img":q.src&&(h.src=q.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var X=l.alternate;if(X!==null){var ne=X.memoizedState;if(ne!==null){var se=ne.dehydrated;se!==null&&oi(se)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}jr||l.flags&512&&vv(l)}catch(re){jt(l,l.return,re)}}if(l===s){ve=null;break}if(h=l.sibling,h!==null){h.return=l.return,ve=h;break}ve=l.return}}function JS(s){for(;ve!==null;){var l=ve;if(l===s){ve=null;break}var h=l.sibling;if(h!==null){h.return=l.return,ve=h;break}ve=l.return}}function ZS(s){for(;ve!==null;){var l=ve;try{switch(l.tag){case 0:case 11:case 15:var h=l.return;try{Yh(4,l)}catch(q){jt(l,h,q)}break;case 1:var y=l.stateNode;if(typeof y.componentDidMount=="function"){var x=l.return;try{y.componentDidMount()}catch(q){jt(l,x,q)}}var T=l.return;try{vv(l)}catch(q){jt(l,T,q)}break;case 5:var O=l.return;try{vv(l)}catch(q){jt(l,O,q)}}}catch(q){jt(l,l.return,q)}if(l===s){ve=null;break}var z=l.sibling;if(z!==null){z.return=l.return,ve=z;break}ve=l.return}}var U4=Math.ceil,Qh=R.ReactCurrentDispatcher,bv=R.ReactCurrentOwner,Vn=R.ReactCurrentBatchConfig,Ze=0,ur=null,qt=null,br=0,gn=0,vc=ms(0),rr=0,ud=null,Vo=0,Xh=0,_v=0,dd=null,en=null,Ev=0,xc=1/0,Ta=null,Jh=!1,Sv=null,ws=null,Zh=!1,bs=null,em=0,fd=0,Av=null,tm=-1,rm=0;function qr(){return(Ze&6)!==0?ft():tm!==-1?tm:tm=ft()}function _s(s){return(s.mode&1)===0?1:(Ze&2)!==0&&br!==0?br&-br:S4.transition!==null?(rm===0&&(rm=To()),rm):(s=We,s!==0||(s=window.event,s=s===void 0?16:$u(s.type)),s)}function mi(s,l,h,y){if(50<fd)throw fd=0,Av=null,Error(r(185));ss(s,h,y),((Ze&2)===0||s!==ur)&&(s===ur&&((Ze&2)===0&&(Xh|=h),rr===4&&Es(s,br)),tn(s,y),h===1&&Ze===0&&(l.mode&1)===0&&(xc=ft()+500,Ch&&gs()))}function tn(s,l){var h=s.callbackNode;ma(s,l);var y=Ao(s,s===ur?br:0);if(y===0)h!==null&&Du(h),s.callbackNode=null,s.callbackPriority=0;else if(l=y&-y,s.callbackPriority!==l){if(h!=null&&Du(h),l===1)s.tag===0?E4(tA.bind(null,s)):$E(tA.bind(null,s)),x4(function(){(Ze&6)===0&&gs()}),h=null;else{switch(ls(y)){case 1:h=Eo;break;case 4:h=ns;break;case 16:h=kn;break;case 536870912:h=rh;break;default:h=kn}h=cA(h,eA.bind(null,s))}s.callbackPriority=l,s.callbackNode=h}}function eA(s,l){if(tm=-1,rm=0,(Ze&6)!==0)throw Error(r(327));var h=s.callbackNode;if(wc()&&s.callbackNode!==h)return null;var y=Ao(s,s===ur?br:0);if(y===0)return null;if((y&30)!==0||(y&s.expiredLanes)!==0||l)l=nm(s,y);else{l=y;var x=Ze;Ze|=2;var T=nA();(ur!==s||br!==l)&&(Ta=null,xc=ft()+500,$o(s,l));do try{q4();break}catch(z){rA(s,z)}while(!0);zy(),Qh.current=T,Ze=x,qt!==null?l=0:(ur=null,br=0,l=rr)}if(l!==0){if(l===2&&(x=dn(s),x!==0&&(y=x,l=Tv(s,x))),l===1)throw h=ud,$o(s,0),Es(s,y),tn(s,ft()),h;if(l===6)Es(s,y);else{if(x=s.current.alternate,(y&30)===0&&!B4(x)&&(l=nm(s,y),l===2&&(T=dn(s),T!==0&&(y=T,l=Tv(s,T))),l===1))throw h=ud,$o(s,0),Es(s,y),tn(s,ft()),h;switch(s.finishedWork=x,s.finishedLanes=y,l){case 0:case 1:throw Error(r(345));case 2:Uo(s,en,Ta);break;case 3:if(Es(s,y),(y&130023424)===y&&(l=Ev+500-ft(),10<l)){if(Ao(s,0)!==0)break;if(x=s.suspendedLanes,(x&y)!==y){qr(),s.pingedLanes|=s.suspendedLanes&x;break}s.timeoutHandle=jy(Uo.bind(null,s,en,Ta),l);break}Uo(s,en,Ta);break;case 4:if(Es(s,y),(y&4194240)===y)break;for(l=s.eventTimes,x=-1;0<y;){var O=31-Ur(y);T=1<<O,O=l[O],O>x&&(x=O),y&=~T}if(y=x,y=ft()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*U4(y/1960))-y,10<y){s.timeoutHandle=jy(Uo.bind(null,s,en,Ta),y);break}Uo(s,en,Ta);break;case 5:Uo(s,en,Ta);break;default:throw Error(r(329))}}}return tn(s,ft()),s.callbackNode===h?eA.bind(null,s):null}function Tv(s,l){var h=dd;return s.current.memoizedState.isDehydrated&&($o(s,l).flags|=256),s=nm(s,l),s!==2&&(l=en,en=h,l!==null&&Pv(l)),s}function Pv(s){en===null?en=s:en.push.apply(en,s)}function B4(s){for(var l=s;;){if(l.flags&16384){var h=l.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var y=0;y<h.length;y++){var x=h[y],T=x.getSnapshot;x=x.value;try{if(!ci(T(),x))return!1}catch{return!1}}}if(h=l.child,l.subtreeFlags&16384&&h!==null)h.return=l,l=h;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Es(s,l){for(l&=~_v,l&=~Xh,s.suspendedLanes|=l,s.pingedLanes&=~l,s=s.expirationTimes;0<l;){var h=31-Ur(l),y=1<<h;s[h]=-1,l&=~y}}function tA(s){if((Ze&6)!==0)throw Error(r(327));wc();var l=Ao(s,0);if((l&1)===0)return tn(s,ft()),null;var h=nm(s,l);if(s.tag!==0&&h===2){var y=dn(s);y!==0&&(l=y,h=Tv(s,y))}if(h===1)throw h=ud,$o(s,0),Es(s,l),tn(s,ft()),h;if(h===6)throw Error(r(345));return s.finishedWork=s.current.alternate,s.finishedLanes=l,Uo(s,en,Ta),tn(s,ft()),null}function Iv(s,l){var h=Ze;Ze|=1;try{return s(l)}finally{Ze=h,Ze===0&&(xc=ft()+500,Ch&&gs())}}function Fo(s){bs!==null&&bs.tag===0&&(Ze&6)===0&&wc();var l=Ze;Ze|=1;var h=Vn.transition,y=We;try{if(Vn.transition=null,We=1,s)return s()}finally{We=y,Vn.transition=h,Ze=l,(Ze&6)===0&&gs()}}function Nv(){gn=vc.current,vt(vc)}function $o(s,l){s.finishedWork=null,s.finishedLanes=0;var h=s.timeoutHandle;if(h!==-1&&(s.timeoutHandle=-1,v4(h)),qt!==null)for(h=qt.return;h!==null;){var y=h;switch(Vy(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&Ih();break;case 3:pc(),vt(Xr),vt(Nr),Xy();break;case 5:Yy(y);break;case 4:pc();break;case 13:vt(It);break;case 19:vt(It);break;case 10:qy(y.type._context);break;case 22:case 23:Nv()}h=h.return}if(ur=s,qt=s=Ss(s.current,null),br=gn=l,rr=0,ud=null,_v=Xh=Vo=0,en=dd=null,Do!==null){for(l=0;l<Do.length;l++)if(h=Do[l],y=h.interleaved,y!==null){h.interleaved=null;var x=y.next,T=h.pending;if(T!==null){var O=T.next;T.next=x,y.next=O}h.pending=y}Do=null}return s}function rA(s,l){do{var h=qt;try{if(zy(),$h.current=qh,Uh){for(var y=Nt.memoizedState;y!==null;){var x=y.queue;x!==null&&(x.pending=null),y=y.next}Uh=!1}if(Lo=0,cr=tr=Nt=null,id=!1,ad=0,bv.current=null,h===null||h.return===null){rr=1,ud=l,qt=null;break}e:{var T=s,O=h.return,z=h,q=l;if(l=br,z.flags|=32768,q!==null&&typeof q=="object"&&typeof q.then=="function"){var X=q,ne=z,se=ne.tag;if((ne.mode&1)===0&&(se===0||se===11||se===15)){var re=ne.alternate;re?(ne.updateQueue=re.updateQueue,ne.memoizedState=re.memoizedState,ne.lanes=re.lanes):(ne.updateQueue=null,ne.memoizedState=null)}var ge=PS(O);if(ge!==null){ge.flags&=-257,IS(ge,O,z,T,l),ge.mode&1&&TS(T,X,l),l=ge,q=X;var be=l.updateQueue;if(be===null){var _e=new Set;_e.add(q),l.updateQueue=_e}else be.add(q);break e}else{if((l&1)===0){TS(T,X,l),Cv();break e}q=Error(r(426))}}else if(St&&z.mode&1){var Lt=PS(O);if(Lt!==null){(Lt.flags&65536)===0&&(Lt.flags|=256),IS(Lt,O,z,T,l),Uy(gc(q,z));break e}}T=q=gc(q,z),rr!==4&&(rr=2),dd===null?dd=[T]:dd.push(T),T=O;do{switch(T.tag){case 3:T.flags|=65536,l&=-l,T.lanes|=l;var G=SS(T,q,l);XE(T,G);break e;case 1:z=q;var K=T.type,Q=T.stateNode;if((T.flags&128)===0&&(typeof K.getDerivedStateFromError=="function"||Q!==null&&typeof Q.componentDidCatch=="function"&&(ws===null||!ws.has(Q)))){T.flags|=65536,l&=-l,T.lanes|=l;var le=AS(T,z,l);XE(T,le);break e}}T=T.return}while(T!==null)}aA(h)}catch(Ee){l=Ee,qt===h&&h!==null&&(qt=h=h.return);continue}break}while(!0)}function nA(){var s=Qh.current;return Qh.current=qh,s===null?qh:s}function Cv(){(rr===0||rr===3||rr===2)&&(rr=4),ur===null||(Vo&268435455)===0&&(Xh&268435455)===0||Es(ur,br)}function nm(s,l){var h=Ze;Ze|=2;var y=nA();(ur!==s||br!==l)&&(Ta=null,$o(s,l));do try{z4();break}catch(x){rA(s,x)}while(!0);if(zy(),Ze=h,Qh.current=y,qt!==null)throw Error(r(261));return ur=null,br=0,rr}function z4(){for(;qt!==null;)iA(qt)}function q4(){for(;qt!==null&&!eh();)iA(qt)}function iA(s){var l=lA(s.alternate,s,gn);s.memoizedProps=s.pendingProps,l===null?aA(s):qt=l,bv.current=null}function aA(s){var l=s;do{var h=l.alternate;if(s=l.return,(l.flags&32768)===0){if(h=M4(h,l,gn),h!==null){qt=h;return}}else{if(h=L4(h,l),h!==null){h.flags&=32767,qt=h;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{rr=6,qt=null;return}}if(l=l.sibling,l!==null){qt=l;return}qt=l=s}while(l!==null);rr===0&&(rr=5)}function Uo(s,l,h){var y=We,x=Vn.transition;try{Vn.transition=null,We=1,K4(s,l,h,y)}finally{Vn.transition=x,We=y}return null}function K4(s,l,h,y){do wc();while(bs!==null);if((Ze&6)!==0)throw Error(r(327));h=s.finishedWork;var x=s.finishedLanes;if(h===null)return null;if(s.finishedWork=null,s.finishedLanes=0,h===s.current)throw Error(r(177));s.callbackNode=null,s.callbackPriority=0;var T=h.lanes|h.childLanes;if(ct(s,T),s===ur&&(qt=ur=null,br=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||Zh||(Zh=!0,cA(kn,function(){return wc(),null})),T=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||T){T=Vn.transition,Vn.transition=null;var O=We;We=1;var z=Ze;Ze|=4,bv.current=null,F4(s,h),YS(h,s),d4(Cy),us=!!Ny,Cy=Ny=null,s.current=h,$4(h),hy(),Ze=z,We=O,Vn.transition=T}else s.current=h;if(Zh&&(Zh=!1,bs=s,em=x),T=s.pendingLanes,T===0&&(ws=null),nh(h.stateNode),tn(s,ft()),l!==null)for(y=s.onRecoverableError,h=0;h<l.length;h++)x=l[h],y(x.value,{componentStack:x.stack,digest:x.digest});if(Jh)throw Jh=!1,s=Sv,Sv=null,s;return(em&1)!==0&&s.tag!==0&&wc(),T=s.pendingLanes,(T&1)!==0?s===Av?fd++:(fd=0,Av=s):fd=0,gs(),null}function wc(){if(bs!==null){var s=ls(em),l=Vn.transition,h=We;try{if(Vn.transition=null,We=16>s?16:s,bs===null)var y=!1;else{if(s=bs,bs=null,em=0,(Ze&6)!==0)throw Error(r(331));var x=Ze;for(Ze|=4,ve=s.current;ve!==null;){var T=ve,O=T.child;if((ve.flags&16)!==0){var z=T.deletions;if(z!==null){for(var q=0;q<z.length;q++){var X=z[q];for(ve=X;ve!==null;){var ne=ve;switch(ne.tag){case 0:case 11:case 15:cd(8,ne,T)}var se=ne.child;if(se!==null)se.return=ne,ve=se;else for(;ve!==null;){ne=ve;var re=ne.sibling,ge=ne.return;if(qS(ne),ne===X){ve=null;break}if(re!==null){re.return=ge,ve=re;break}ve=ge}}}var be=T.alternate;if(be!==null){var _e=be.child;if(_e!==null){be.child=null;do{var Lt=_e.sibling;_e.sibling=null,_e=Lt}while(_e!==null)}}ve=T}}if((T.subtreeFlags&2064)!==0&&O!==null)O.return=T,ve=O;else e:for(;ve!==null;){if(T=ve,(T.flags&2048)!==0)switch(T.tag){case 0:case 11:case 15:cd(9,T,T.return)}var G=T.sibling;if(G!==null){G.return=T.return,ve=G;break e}ve=T.return}}var K=s.current;for(ve=K;ve!==null;){O=ve;var Q=O.child;if((O.subtreeFlags&2064)!==0&&Q!==null)Q.return=O,ve=Q;else e:for(O=K;ve!==null;){if(z=ve,(z.flags&2048)!==0)try{switch(z.tag){case 0:case 11:case 15:Yh(9,z)}}catch(Ee){jt(z,z.return,Ee)}if(z===O){ve=null;break e}var le=z.sibling;if(le!==null){le.return=z.return,ve=le;break e}ve=z.return}}if(Ze=x,gs(),un&&typeof un.onPostCommitFiberRoot=="function")try{un.onPostCommitFiberRoot(So,s)}catch{}y=!0}return y}finally{We=h,Vn.transition=l}}return!1}function sA(s,l,h){l=gc(h,l),l=SS(s,l,1),s=vs(s,l,1),l=qr(),s!==null&&(ss(s,1,l),tn(s,l))}function jt(s,l,h){if(s.tag===3)sA(s,s,h);else for(;l!==null;){if(l.tag===3){sA(l,s,h);break}else if(l.tag===1){var y=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(ws===null||!ws.has(y))){s=gc(h,s),s=AS(l,s,1),l=vs(l,s,1),s=qr(),l!==null&&(ss(l,1,s),tn(l,s));break}}l=l.return}}function W4(s,l,h){var y=s.pingCache;y!==null&&y.delete(l),l=qr(),s.pingedLanes|=s.suspendedLanes&h,ur===s&&(br&h)===h&&(rr===4||rr===3&&(br&130023424)===br&&500>ft()-Ev?$o(s,0):_v|=h),tn(s,l)}function oA(s,l){l===0&&((s.mode&1)===0?l=1:(l=zl,zl<<=1,(zl&130023424)===0&&(zl=4194304)));var h=qr();s=Ea(s,l),s!==null&&(ss(s,l,h),tn(s,h))}function H4(s){var l=s.memoizedState,h=0;l!==null&&(h=l.retryLane),oA(s,h)}function G4(s,l){var h=0;switch(s.tag){case 13:var y=s.stateNode,x=s.memoizedState;x!==null&&(h=x.retryLane);break;case 19:y=s.stateNode;break;default:throw Error(r(314))}y!==null&&y.delete(l),oA(s,h)}var lA;lA=function(s,l,h){if(s!==null)if(s.memoizedProps!==l.pendingProps||Xr.current)Zr=!0;else{if((s.lanes&h)===0&&(l.flags&128)===0)return Zr=!1,D4(s,l,h);Zr=(s.flags&131072)!==0}else Zr=!1,St&&(l.flags&1048576)!==0&&UE(l,jh,l.index);switch(l.lanes=0,l.tag){case 2:var y=l.type;Hh(s,l),s=l.pendingProps;var x=lc(l,Nr.current);mc(l,h),x=ev(null,l,y,s,x,h);var T=tv();return l.flags|=1,typeof x=="object"&&x!==null&&typeof x.render=="function"&&x.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,Jr(y)?(T=!0,Nh(l)):T=!1,l.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,Hy(l),x.updater=Kh,l.stateNode=x,x._reactInternals=l,ov(l,y,s,h),l=dv(null,l,y,!0,T,h)):(l.tag=0,St&&T&&Ly(l),zr(null,l,x,h),l=l.child),l;case 16:y=l.elementType;e:{switch(Hh(s,l),s=l.pendingProps,x=y._init,y=x(y._payload),l.type=y,x=l.tag=Q4(y),s=di(y,s),x){case 0:l=uv(null,l,y,s,h);break e;case 1:l=OS(null,l,y,s,h);break e;case 11:l=NS(null,l,y,s,h);break e;case 14:l=CS(null,l,y,di(y.type,s),h);break e}throw Error(r(306,y,""))}return l;case 0:return y=l.type,x=l.pendingProps,x=l.elementType===y?x:di(y,x),uv(s,l,y,x,h);case 1:return y=l.type,x=l.pendingProps,x=l.elementType===y?x:di(y,x),OS(s,l,y,x,h);case 3:e:{if(DS(l),s===null)throw Error(r(387));y=l.pendingProps,T=l.memoizedState,x=T.element,QE(s,l),Vh(l,y,null,h);var O=l.memoizedState;if(y=O.element,T.isDehydrated)if(T={element:y,isDehydrated:!1,cache:O.cache,pendingSuspenseBoundaries:O.pendingSuspenseBoundaries,transitions:O.transitions},l.updateQueue.baseState=T,l.memoizedState=T,l.flags&256){x=gc(Error(r(423)),l),l=MS(s,l,y,h,x);break e}else if(y!==x){x=gc(Error(r(424)),l),l=MS(s,l,y,h,x);break e}else for(pn=hs(l.stateNode.containerInfo.firstChild),mn=l,St=!0,ui=null,h=GE(l,null,y,h),l.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(dc(),y===x){l=Aa(s,l,h);break e}zr(s,l,y,h)}l=l.child}return l;case 5:return ZE(l),s===null&&$y(l),y=l.type,x=l.pendingProps,T=s!==null?s.memoizedProps:null,O=x.children,ky(y,x)?O=null:T!==null&&ky(y,T)&&(l.flags|=32),RS(s,l),zr(s,l,O,h),l.child;case 6:return s===null&&$y(l),null;case 13:return LS(s,l,h);case 4:return Gy(l,l.stateNode.containerInfo),y=l.pendingProps,s===null?l.child=fc(l,null,y,h):zr(s,l,y,h),l.child;case 11:return y=l.type,x=l.pendingProps,x=l.elementType===y?x:di(y,x),NS(s,l,y,x,h);case 7:return zr(s,l,l.pendingProps,h),l.child;case 8:return zr(s,l,l.pendingProps.children,h),l.child;case 12:return zr(s,l,l.pendingProps.children,h),l.child;case 10:e:{if(y=l.type._context,x=l.pendingProps,T=l.memoizedProps,O=x.value,ht(Dh,y._currentValue),y._currentValue=O,T!==null)if(ci(T.value,O)){if(T.children===x.children&&!Xr.current){l=Aa(s,l,h);break e}}else for(T=l.child,T!==null&&(T.return=l);T!==null;){var z=T.dependencies;if(z!==null){O=T.child;for(var q=z.firstContext;q!==null;){if(q.context===y){if(T.tag===1){q=Sa(-1,h&-h),q.tag=2;var X=T.updateQueue;if(X!==null){X=X.shared;var ne=X.pending;ne===null?q.next=q:(q.next=ne.next,ne.next=q),X.pending=q}}T.lanes|=h,q=T.alternate,q!==null&&(q.lanes|=h),Ky(T.return,h,l),z.lanes|=h;break}q=q.next}}else if(T.tag===10)O=T.type===l.type?null:T.child;else if(T.tag===18){if(O=T.return,O===null)throw Error(r(341));O.lanes|=h,z=O.alternate,z!==null&&(z.lanes|=h),Ky(O,h,l),O=T.sibling}else O=T.child;if(O!==null)O.return=T;else for(O=T;O!==null;){if(O===l){O=null;break}if(T=O.sibling,T!==null){T.return=O.return,O=T;break}O=O.return}T=O}zr(s,l,x.children,h),l=l.child}return l;case 9:return x=l.type,y=l.pendingProps.children,mc(l,h),x=Mn(x),y=y(x),l.flags|=1,zr(s,l,y,h),l.child;case 14:return y=l.type,x=di(y,l.pendingProps),x=di(y.type,x),CS(s,l,y,x,h);case 15:return kS(s,l,l.type,l.pendingProps,h);case 17:return y=l.type,x=l.pendingProps,x=l.elementType===y?x:di(y,x),Hh(s,l),l.tag=1,Jr(y)?(s=!0,Nh(l)):s=!1,mc(l,h),_S(l,y,x),ov(l,y,x,h),dv(null,l,y,!0,s,h);case 19:return FS(s,l,h);case 22:return jS(s,l,h)}throw Error(r(156,l.tag))};function cA(s,l){return Ul(s,l)}function Y4(s,l,h,y){this.tag=s,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fn(s,l,h,y){return new Y4(s,l,h,y)}function kv(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Q4(s){if(typeof s=="function")return kv(s)?1:0;if(s!=null){if(s=s.$$typeof,s===U)return 11;if(s===Pe)return 14}return 2}function Ss(s,l){var h=s.alternate;return h===null?(h=Fn(s.tag,l,s.key,s.mode),h.elementType=s.elementType,h.type=s.type,h.stateNode=s.stateNode,h.alternate=s,s.alternate=h):(h.pendingProps=l,h.type=s.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=s.flags&14680064,h.childLanes=s.childLanes,h.lanes=s.lanes,h.child=s.child,h.memoizedProps=s.memoizedProps,h.memoizedState=s.memoizedState,h.updateQueue=s.updateQueue,l=s.dependencies,h.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},h.sibling=s.sibling,h.index=s.index,h.ref=s.ref,h}function im(s,l,h,y,x,T){var O=2;if(y=s,typeof s=="function")kv(s)&&(O=1);else if(typeof s=="string")O=5;else e:switch(s){case I:return Bo(h.children,x,T,l);case j:O=8,x|=8;break;case D:return s=Fn(12,h,l,x|2),s.elementType=D,s.lanes=T,s;case F:return s=Fn(13,h,l,x),s.elementType=F,s.lanes=T,s;case me:return s=Fn(19,h,l,x),s.elementType=me,s.lanes=T,s;case pe:return am(h,x,T,l);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case $:O=10;break e;case M:O=9;break e;case U:O=11;break e;case Pe:O=14;break e;case De:O=16,y=null;break e}throw Error(r(130,s==null?s:typeof s,""))}return l=Fn(O,h,l,x),l.elementType=s,l.type=y,l.lanes=T,l}function Bo(s,l,h,y){return s=Fn(7,s,y,l),s.lanes=h,s}function am(s,l,h,y){return s=Fn(22,s,y,l),s.elementType=pe,s.lanes=h,s.stateNode={isHidden:!1},s}function jv(s,l,h){return s=Fn(6,s,null,l),s.lanes=h,s}function Rv(s,l,h){return l=Fn(4,s.children!==null?s.children:[],s.key,l),l.lanes=h,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}function X4(s,l,h,y,x){this.tag=l,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=as(0),this.expirationTimes=as(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=as(0),this.identifierPrefix=y,this.onRecoverableError=x,this.mutableSourceEagerHydrationData=null}function Ov(s,l,h,y,x,T,O,z,q){return s=new X4(s,l,h,z,q),l===1?(l=1,T===!0&&(l|=8)):l=0,T=Fn(3,null,null,l),s.current=T,T.stateNode=s,T.memoizedState={element:y,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hy(T),s}function J4(s,l,h){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:B,key:y==null?null:""+y,children:s,containerInfo:l,implementation:h}}function uA(s){if(!s)return ps;s=s._reactInternals;e:{if(ri(s)!==s||s.tag!==1)throw Error(r(170));var l=s;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(Jr(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(r(171))}if(s.tag===1){var h=s.type;if(Jr(h))return VE(s,h,l)}return l}function dA(s,l,h,y,x,T,O,z,q){return s=Ov(h,y,!0,s,x,T,O,z,q),s.context=uA(null),h=s.current,y=qr(),x=_s(h),T=Sa(y,x),T.callback=l??null,vs(h,T,x),s.current.lanes=x,ss(s,x,y),tn(s,y),s}function sm(s,l,h,y){var x=l.current,T=qr(),O=_s(x);return h=uA(h),l.context===null?l.context=h:l.pendingContext=h,l=Sa(T,O),l.payload={element:s},y=y===void 0?null:y,y!==null&&(l.callback=y),s=vs(x,l,O),s!==null&&(mi(s,x,O,T),Lh(s,x,O)),O}function om(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function fA(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var h=s.retryLane;s.retryLane=h!==0&&h<l?h:l}}function Dv(s,l){fA(s,l),(s=s.alternate)&&fA(s,l)}function Z4(){return null}var hA=typeof reportError=="function"?reportError:function(s){console.error(s)};function Mv(s){this._internalRoot=s}lm.prototype.render=Mv.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(r(409));sm(s,l,null,null)},lm.prototype.unmount=Mv.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;Fo(function(){sm(null,s,null,null)}),l[xa]=null}};function lm(s){this._internalRoot=s}lm.prototype.unstable_scheduleHydration=function(s){if(s){var l=lh();s={blockedOn:null,target:s,priority:l};for(var h=0;h<Ri.length&&l!==0&&l<Ri[h].priority;h++);Ri.splice(h,0,s),h===0&&dh(s)}};function Lv(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function cm(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function mA(){}function e3(s,l,h,y,x){if(x){if(typeof y=="function"){var T=y;y=function(){var X=om(O);T.call(X)}}var O=dA(l,y,s,0,null,!1,!1,"",mA);return s._reactRootContainer=O,s[xa]=O.current,Qu(s.nodeType===8?s.parentNode:s),Fo(),O}for(;x=s.lastChild;)s.removeChild(x);if(typeof y=="function"){var z=y;y=function(){var X=om(q);z.call(X)}}var q=Ov(s,0,!1,null,null,!1,!1,"",mA);return s._reactRootContainer=q,s[xa]=q.current,Qu(s.nodeType===8?s.parentNode:s),Fo(function(){sm(l,q,h,y)}),q}function um(s,l,h,y,x){var T=h._reactRootContainer;if(T){var O=T;if(typeof x=="function"){var z=x;x=function(){var q=om(O);z.call(q)}}sm(l,O,s,x)}else O=e3(h,l,s,x,y);return om(O)}sh=function(s){switch(s.tag){case 3:var l=s.stateNode;if(l.current.memoizedState.isDehydrated){var h=is(l.pendingLanes);h!==0&&(os(l,h|1),tn(l,ft()),(Ze&6)===0&&(xc=ft()+500,gs()))}break;case 13:Fo(function(){var y=Ea(s,1);if(y!==null){var x=qr();mi(y,s,1,x)}}),Dv(s,1)}},ql=function(s){if(s.tag===13){var l=Ea(s,134217728);if(l!==null){var h=qr();mi(l,s,134217728,h)}Dv(s,134217728)}},oh=function(s){if(s.tag===13){var l=_s(s),h=Ea(s,l);if(h!==null){var y=qr();mi(h,s,l,y)}Dv(s,l)}},lh=function(){return We},ch=function(s,l){var h=We;try{return We=s,l()}finally{We=h}},Dl=function(s,l,h){switch(l){case"input":if(cn(s,h),l=h.name,h.type==="radio"&&l!=null){for(h=s;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<h.length;l++){var y=h[l];if(y!==s&&y.form===s.form){var x=Ph(y);if(!x)throw Error(r(90));ae(y),cn(y,x)}}}break;case"textarea":Rl(s,h);break;case"select":l=h.value,l!=null&&da(s,!!h.multiple,l,!1)}},xo=Iv,ku=Fo;var t3={usingClientEntryPoint:!1,Events:[Zu,sc,Ph,ki,Cu,Iv]},hd={findFiberByHostInstance:ko,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},r3={bundleType:hd.bundleType,version:hd.version,rendererPackageName:hd.rendererPackageName,rendererConfig:hd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:R.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=Ou(s),s===null?null:s.stateNode},findFiberByHostInstance:hd.findFiberByHostInstance||Z4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dm.isDisabled&&dm.supportsFiber)try{So=dm.inject(r3),un=dm}catch{}}return rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=t3,rn.createPortal=function(s,l){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Lv(l))throw Error(r(200));return J4(s,l,null,h)},rn.createRoot=function(s,l){if(!Lv(s))throw Error(r(299));var h=!1,y="",x=hA;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(x=l.onRecoverableError)),l=Ov(s,1,!1,null,null,h,!1,y,x),s[xa]=l.current,Qu(s.nodeType===8?s.parentNode:s),new Mv(l)},rn.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=Ou(l),s=s===null?null:s.stateNode,s},rn.flushSync=function(s){return Fo(s)},rn.hydrate=function(s,l,h){if(!cm(l))throw Error(r(200));return um(null,s,l,!0,h)},rn.hydrateRoot=function(s,l,h){if(!Lv(s))throw Error(r(405));var y=h!=null&&h.hydratedSources||null,x=!1,T="",O=hA;if(h!=null&&(h.unstable_strictMode===!0&&(x=!0),h.identifierPrefix!==void 0&&(T=h.identifierPrefix),h.onRecoverableError!==void 0&&(O=h.onRecoverableError)),l=dA(l,null,s,1,h??null,x,!1,T,O),s[xa]=l.current,Qu(s),y)for(s=0;s<y.length;s++)h=y[s],x=h._getVersion,x=x(h._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[h,x]:l.mutableSourceEagerHydrationData.push(h,x);return new lm(l)},rn.render=function(s,l,h){if(!cm(l))throw Error(r(200));return um(null,s,l,!1,h)},rn.unmountComponentAtNode=function(s){if(!cm(s))throw Error(r(40));return s._reactRootContainer?(Fo(function(){um(null,null,s,!1,function(){s._reactRootContainer=null,s[xa]=null})}),!0):!1},rn.unstable_batchedUpdates=Iv,rn.unstable_renderSubtreeIntoContainer=function(s,l,h,y){if(!cm(h))throw Error(r(200));if(s==null||s._reactInternals===void 0)throw Error(r(38));return um(s,l,h,!1,y)},rn.version="18.3.1-next-f1338f8080-20240426",rn}var _A;function mk(){if(_A)return $v.exports;_A=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),$v.exports=c3(),$v.exports}var EA;function u3(){if(EA)return fm;EA=1;var t=mk();return fm.createRoot=t.createRoot,fm.hydrateRoot=t.hydrateRoot,fm}var d3=u3();const f3=Pi(d3);/**
 * react-router v7.7.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var SA="popstate";function h3(t={}){function e(n,i){let{pathname:a,search:o,hash:c}=n.location;return Fx("",{pathname:a,search:o,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:Bd(i)}return p3(e,r,null,t)}function Tt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ei(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function m3(){return Math.random().toString(36).substring(2,10)}function AA(t,e){return{usr:t.state,key:t.key,idx:e}}function Fx(t,e,r=null,n){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?ru(e):e,state:r,key:e&&e.key||n||m3()}}function Bd({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function ru(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substring(n),t=t.substring(0,n)),t&&(e.pathname=t)}return e}function p3(t,e,r,n={}){let{window:i=document.defaultView,v5Compat:a=!1}=n,o=i.history,c="POP",u=null,d=m();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function m(){return(o.state||{idx:null}).idx}function p(){c="POP";let S=m(),P=S==null?null:S-d;d=S,u&&u({action:c,location:E.location,delta:P})}function v(S,P){c="PUSH";let k=Fx(E.location,S,P);d=m()+1;let C=AA(k,d),R=E.createHref(k);try{o.pushState(C,"",R)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;i.location.assign(R)}a&&u&&u({action:c,location:E.location,delta:1})}function w(S,P){c="REPLACE";let k=Fx(E.location,S,P);d=m();let C=AA(k,d),R=E.createHref(k);o.replaceState(C,"",R),a&&u&&u({action:c,location:E.location,delta:0})}function b(S){return g3(S)}let E={get action(){return c},get location(){return t(i,o)},listen(S){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(SA,p),u=S,()=>{i.removeEventListener(SA,p),u=null}},createHref(S){return e(i,S)},createURL:b,encodeLocation(S){let P=b(S);return{pathname:P.pathname,search:P.search,hash:P.hash}},push:v,replace:w,go(S){return o.go(S)}};return E}function g3(t,e=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Tt(r,"No window.location.(origin|href) available to create URL");let n=typeof t=="string"?t:Bd(t);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function pk(t,e,r="/"){return y3(t,e,r,!1)}function y3(t,e,r,n){let i=typeof e=="string"?ru(e):e,a=$a(i.pathname||"/",r);if(a==null)return null;let o=gk(t);v3(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let d=N3(a);c=P3(o[u],d,n)}return c}function gk(t,e=[],r=[],n=""){let i=(a,o,c)=>{let u={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};u.relativePath.startsWith("/")&&(Tt(u.relativePath.startsWith(n),`Absolute route path "${u.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(n.length));let d=Da([n,u.relativePath]),m=r.concat(u);a.children&&a.children.length>0&&(Tt(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),gk(a.children,e,m,d)),!(a.path==null&&!a.index)&&e.push({path:d,score:A3(d,a.index),routesMeta:m})};return t.forEach((a,o)=>{if(a.path===""||!a.path?.includes("?"))i(a,o);else for(let c of yk(a.path))i(a,o,c)}),e}function yk(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,i=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return i?[a,""]:[a];let o=yk(n.join("/")),c=[];return c.push(...o.map(u=>u===""?a:[a,u].join("/"))),i&&c.push(...o),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function v3(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:T3(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var x3=/^:[\w-]+$/,w3=3,b3=2,_3=1,E3=10,S3=-2,TA=t=>t==="*";function A3(t,e){let r=t.split("/"),n=r.length;return r.some(TA)&&(n+=S3),e&&(n+=b3),r.filter(i=>!TA(i)).reduce((i,a)=>i+(x3.test(a)?w3:a===""?_3:E3),n)}function T3(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function P3(t,e,r=!1){let{routesMeta:n}=t,i={},a="/",o=[];for(let c=0;c<n.length;++c){let u=n[c],d=c===n.length-1,m=a==="/"?e:e.slice(a.length)||"/",p=Gm({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},m),v=u.route;if(!p&&d&&r&&!n[n.length-1].route.index&&(p=Gm({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},m)),!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:Da([a,p.pathname]),pathnameBase:R3(Da([a,p.pathnameBase])),route:v}),p.pathnameBase!=="/"&&(a=Da([a,p.pathnameBase]))}return o}function Gm(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=I3(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:n.reduce((d,{paramName:m,isOptional:p},v)=>{if(m==="*"){let b=c[v]||"";o=a.slice(0,a.length-b.length).replace(/(.)\/+$/,"$1")}const w=c[v];return p&&!w?d[m]=void 0:d[m]=(w||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:o,pattern:t}}function I3(t,e=!1,r=!0){Ei(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(n.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function N3(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ei(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function $a(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function C3(t,e="/"){let{pathname:r,search:n="",hash:i=""}=typeof t=="string"?ru(t):t;return{pathname:r?r.startsWith("/")?r:k3(r,e):e,search:O3(n),hash:D3(i)}}function k3(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function zv(t,e,r,n){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function j3(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function ub(t){let e=j3(t);return e.map((r,n)=>n===e.length-1?r.pathname:r.pathnameBase)}function db(t,e,r,n=!1){let i;typeof t=="string"?i=ru(t):(i={...t},Tt(!i.pathname||!i.pathname.includes("?"),zv("?","pathname","search",i)),Tt(!i.pathname||!i.pathname.includes("#"),zv("#","pathname","hash",i)),Tt(!i.search||!i.search.includes("#"),zv("#","search","hash",i)));let a=t===""||i.pathname==="",o=a?"/":i.pathname,c;if(o==null)c=r;else{let p=e.length-1;if(!n&&o.startsWith("..")){let v=o.split("/");for(;v[0]==="..";)v.shift(),p-=1;i.pathname=v.join("/")}c=p>=0?e[p]:"/"}let u=C3(i,c),d=o&&o!=="/"&&o.endsWith("/"),m=(a||o===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(d||m)&&(u.pathname+="/"),u}var Da=t=>t.join("/").replace(/\/\/+/g,"/"),R3=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),O3=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,D3=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function M3(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var vk=["POST","PUT","PATCH","DELETE"];new Set(vk);var L3=["GET",...vk];new Set(L3);var nu=_.createContext(null);nu.displayName="DataRouter";var Qp=_.createContext(null);Qp.displayName="DataRouterState";_.createContext(!1);var xk=_.createContext({isTransitioning:!1});xk.displayName="ViewTransition";var V3=_.createContext(new Map);V3.displayName="Fetchers";var F3=_.createContext(null);F3.displayName="Await";var Ii=_.createContext(null);Ii.displayName="Navigation";var xf=_.createContext(null);xf.displayName="Location";var oa=_.createContext({outlet:null,matches:[],isDataRoute:!1});oa.displayName="Route";var fb=_.createContext(null);fb.displayName="RouteError";function $3(t,{relative:e}={}){Tt(iu(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=_.useContext(Ii),{hash:i,pathname:a,search:o}=wf(t,{relative:e}),c=a;return r!=="/"&&(c=a==="/"?r:Da([r,a])),n.createHref({pathname:c,search:o,hash:i})}function iu(){return _.useContext(xf)!=null}function Qn(){return Tt(iu(),"useLocation() may be used only in the context of a <Router> component."),_.useContext(xf).location}var wk="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function bk(t){_.useContext(Ii).static||_.useLayoutEffect(t)}function au(){let{isDataRoute:t}=_.useContext(oa);return t?Z3():U3()}function U3(){Tt(iu(),"useNavigate() may be used only in the context of a <Router> component.");let t=_.useContext(nu),{basename:e,navigator:r}=_.useContext(Ii),{matches:n}=_.useContext(oa),{pathname:i}=Qn(),a=JSON.stringify(ub(n)),o=_.useRef(!1);return bk(()=>{o.current=!0}),_.useCallback((u,d={})=>{if(Ei(o.current,wk),!o.current)return;if(typeof u=="number"){r.go(u);return}let m=db(u,JSON.parse(a),i,d.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Da([e,m.pathname])),(d.replace?r.replace:r.push)(m,d.state,d)},[e,r,a,i,t])}_.createContext(null);function wf(t,{relative:e}={}){let{matches:r}=_.useContext(oa),{pathname:n}=Qn(),i=JSON.stringify(ub(r));return _.useMemo(()=>db(t,JSON.parse(i),n,e==="path"),[t,i,n,e])}function B3(t,e){return _k(t,e)}function _k(t,e,r,n){Tt(iu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=_.useContext(Ii),{matches:a}=_.useContext(oa),o=a[a.length-1],c=o?o.params:{},u=o?o.pathname:"/",d=o?o.pathnameBase:"/",m=o&&o.route;{let P=m&&m.path||"";Ek(u,!m||P.endsWith("*")||P.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${P}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${P}"> to <Route path="${P==="/"?"*":`${P}/*`}">.`)}let p=Qn(),v;if(e){let P=typeof e=="string"?ru(e):e;Tt(d==="/"||P.pathname?.startsWith(d),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${P.pathname}" was given in the \`location\` prop.`),v=P}else v=p;let w=v.pathname||"/",b=w;if(d!=="/"){let P=d.replace(/^\//,"").split("/");b="/"+w.replace(/^\//,"").split("/").slice(P.length).join("/")}let E=pk(t,{pathname:b});Ei(m||E!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),Ei(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let S=H3(E&&E.map(P=>Object.assign({},P,{params:Object.assign({},c,P.params),pathname:Da([d,i.encodeLocation?i.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?d:Da([d,i.encodeLocation?i.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),a,r,n);return e&&S?_.createElement(xf.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},S):S}function z3(){let t=J3(),e=M3(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},a={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=_.createElement(_.Fragment,null,_.createElement("p",null,"💿 Hey developer 👋"),_.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",_.createElement("code",{style:a},"ErrorBoundary")," or"," ",_.createElement("code",{style:a},"errorElement")," prop on your route.")),_.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),r?_.createElement("pre",{style:i},r):null,o)}var q3=_.createElement(z3,null),K3=class extends _.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?_.createElement(oa.Provider,{value:this.props.routeContext},_.createElement(fb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function W3({routeContext:t,match:e,children:r}){let n=_.useContext(nu);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),_.createElement(oa.Provider,{value:t},r)}function H3(t,e=[],r=null,n=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let i=t,a=r?.errors;if(a!=null){let u=i.findIndex(d=>d.route.id&&a?.[d.route.id]!==void 0);Tt(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,u+1))}let o=!1,c=-1;if(r)for(let u=0;u<i.length;u++){let d=i[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:m,errors:p}=r,v=d.route.loader&&!m.hasOwnProperty(d.route.id)&&(!p||p[d.route.id]===void 0);if(d.route.lazy||v){o=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((u,d,m)=>{let p,v=!1,w=null,b=null;r&&(p=a&&d.route.id?a[d.route.id]:void 0,w=d.route.errorElement||q3,o&&(c<0&&m===0?(Ek("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,b=null):c===m&&(v=!0,b=d.route.hydrateFallbackElement||null)));let E=e.concat(i.slice(0,m+1)),S=()=>{let P;return p?P=w:v?P=b:d.route.Component?P=_.createElement(d.route.Component,null):d.route.element?P=d.route.element:P=u,_.createElement(W3,{match:d,routeContext:{outlet:u,matches:E,isDataRoute:r!=null},children:P})};return r&&(d.route.ErrorBoundary||d.route.errorElement||m===0)?_.createElement(K3,{location:r.location,revalidation:r.revalidation,component:w,error:p,children:S(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):S()},null)}function hb(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function G3(t){let e=_.useContext(nu);return Tt(e,hb(t)),e}function Y3(t){let e=_.useContext(Qp);return Tt(e,hb(t)),e}function Q3(t){let e=_.useContext(oa);return Tt(e,hb(t)),e}function mb(t){let e=Q3(t),r=e.matches[e.matches.length-1];return Tt(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function X3(){return mb("useRouteId")}function J3(){let t=_.useContext(fb),e=Y3("useRouteError"),r=mb("useRouteError");return t!==void 0?t:e.errors?.[r]}function Z3(){let{router:t}=G3("useNavigate"),e=mb("useNavigate"),r=_.useRef(!1);return bk(()=>{r.current=!0}),_.useCallback(async(i,a={})=>{Ei(r.current,wk),r.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...a}))},[t,e])}var PA={};function Ek(t,e,r){!e&&!PA[t]&&(PA[t]=!0,Ei(!1,r))}_.memo(e6);function e6({routes:t,future:e,state:r}){return _k(t,void 0,r,e)}function zi({to:t,replace:e,state:r,relative:n}){Tt(iu(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=_.useContext(Ii);Ei(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=_.useContext(oa),{pathname:o}=Qn(),c=au(),u=db(t,ub(a),o,n==="path"),d=JSON.stringify(u);return _.useEffect(()=>{c(JSON.parse(d),{replace:e,state:r,relative:n})},[c,d,n,e,r]),null}function Rt(t){Tt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function t6({basename:t="/",children:e=null,location:r,navigationType:n="POP",navigator:i,static:a=!1}){Tt(!iu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),c=_.useMemo(()=>({basename:o,navigator:i,static:a,future:{}}),[o,i,a]);typeof r=="string"&&(r=ru(r));let{pathname:u="/",search:d="",hash:m="",state:p=null,key:v="default"}=r,w=_.useMemo(()=>{let b=$a(u,o);return b==null?null:{location:{pathname:b,search:d,hash:m,state:p,key:v},navigationType:n}},[o,u,d,m,p,v,n]);return Ei(w!=null,`<Router basename="${o}"> is not able to match the URL "${u}${d}${m}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:_.createElement(Ii.Provider,{value:c},_.createElement(xf.Provider,{children:e,value:w}))}function r6({children:t,location:e}){return B3($x(t),e)}function $x(t,e=[]){let r=[];return _.Children.forEach(t,(n,i)=>{if(!_.isValidElement(n))return;let a=[...e,i];if(n.type===_.Fragment){r.push.apply(r,$x(n.props.children,a));return}Tt(n.type===Rt,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Tt(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=$x(n.props.children,a)),r.push(o)}),r}var Dm="get",Mm="application/x-www-form-urlencoded";function Xp(t){return t!=null&&typeof t.tagName=="string"}function n6(t){return Xp(t)&&t.tagName.toLowerCase()==="button"}function i6(t){return Xp(t)&&t.tagName.toLowerCase()==="form"}function a6(t){return Xp(t)&&t.tagName.toLowerCase()==="input"}function s6(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function o6(t,e){return t.button===0&&(!e||e==="_self")&&!s6(t)}var hm=null;function l6(){if(hm===null)try{new FormData(document.createElement("form"),0),hm=!1}catch{hm=!0}return hm}var c6=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function qv(t){return t!=null&&!c6.has(t)?(Ei(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Mm}"`),null):t}function u6(t,e){let r,n,i,a,o;if(i6(t)){let c=t.getAttribute("action");n=c?$a(c,e):null,r=t.getAttribute("method")||Dm,i=qv(t.getAttribute("enctype"))||Mm,a=new FormData(t)}else if(n6(t)||a6(t)&&(t.type==="submit"||t.type==="image")){let c=t.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||c.getAttribute("action");if(n=u?$a(u,e):null,r=t.getAttribute("formmethod")||c.getAttribute("method")||Dm,i=qv(t.getAttribute("formenctype"))||qv(c.getAttribute("enctype"))||Mm,a=new FormData(c,t),!l6()){let{name:d,type:m,value:p}=t;if(m==="image"){let v=d?`${d}.`:"";a.append(`${v}x`,"0"),a.append(`${v}y`,"0")}else d&&a.append(d,p)}}else{if(Xp(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Dm,n=null,i=Mm,o=t}return a&&i==="text/plain"&&(o=a,a=void 0),{action:n,method:r.toLowerCase(),encType:i,formData:a,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function pb(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function d6(t,e,r){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname=`_root.${r}`:e&&$a(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function f6(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function h6(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function m6(t,e,r){let n=await Promise.all(t.map(async i=>{let a=e.routes[i.route.id];if(a){let o=await f6(a,r);return o.links?o.links():[]}return[]}));return v6(n.flat(1).filter(h6).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function IA(t,e,r,n,i,a){let o=(u,d)=>r[d]?u.route.id!==r[d].route.id:!0,c=(u,d)=>r[d].pathname!==u.pathname||r[d].route.path?.endsWith("*")&&r[d].params["*"]!==u.params["*"];return a==="assets"?e.filter((u,d)=>o(u,d)||c(u,d)):a==="data"?e.filter((u,d)=>{let m=n.routes[u.route.id];if(!m||!m.hasLoader)return!1;if(o(u,d)||c(u,d))return!0;if(u.route.shouldRevalidate){let p=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function p6(t,e,{includeHydrateFallback:r}={}){return g6(t.map(n=>{let i=e.routes[n.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),r&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function g6(t){return[...new Set(t)]}function y6(t){let e={},r=Object.keys(t).sort();for(let n of r)e[n]=t[n];return e}function v6(t,e){let r=new Set;return new Set(e),t.reduce((n,i)=>{let a=JSON.stringify(y6(i));return r.has(a)||(r.add(a),n.push({key:a,link:i})),n},[])}function Sk(){let t=_.useContext(nu);return pb(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function x6(){let t=_.useContext(Qp);return pb(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var gb=_.createContext(void 0);gb.displayName="FrameworkContext";function Ak(){let t=_.useContext(gb);return pb(t,"You must render this element inside a <HydratedRouter> element"),t}function w6(t,e){let r=_.useContext(gb),[n,i]=_.useState(!1),[a,o]=_.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:d,onMouseLeave:m,onTouchStart:p}=e,v=_.useRef(null);_.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let E=P=>{P.forEach(k=>{o(k.isIntersecting)})},S=new IntersectionObserver(E,{threshold:.5});return v.current&&S.observe(v.current),()=>{S.disconnect()}}},[t]),_.useEffect(()=>{if(n){let E=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(E)}}},[n]);let w=()=>{i(!0)},b=()=>{i(!1),o(!1)};return r?t!=="intent"?[a,v,{}]:[a,v,{onFocus:pd(c,w),onBlur:pd(u,b),onMouseEnter:pd(d,w),onMouseLeave:pd(m,b),onTouchStart:pd(p,w)}]:[!1,v,{}]}function pd(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function b6({page:t,...e}){let{router:r}=Sk(),n=_.useMemo(()=>pk(r.routes,t,r.basename),[r.routes,t,r.basename]);return n?_.createElement(E6,{page:t,matches:n,...e}):null}function _6(t){let{manifest:e,routeModules:r}=Ak(),[n,i]=_.useState([]);return _.useEffect(()=>{let a=!1;return m6(t,e,r).then(o=>{a||i(o)}),()=>{a=!0}},[t,e,r]),n}function E6({page:t,matches:e,...r}){let n=Qn(),{manifest:i,routeModules:a}=Ak(),{basename:o}=Sk(),{loaderData:c,matches:u}=x6(),d=_.useMemo(()=>IA(t,e,u,i,n,"data"),[t,e,u,i,n]),m=_.useMemo(()=>IA(t,e,u,i,n,"assets"),[t,e,u,i,n]),p=_.useMemo(()=>{if(t===n.pathname+n.search+n.hash)return[];let b=new Set,E=!1;if(e.forEach(P=>{let k=i.routes[P.route.id];!k||!k.hasLoader||(!d.some(C=>C.route.id===P.route.id)&&P.route.id in c&&a[P.route.id]?.shouldRevalidate||k.hasClientLoader?E=!0:b.add(P.route.id))}),b.size===0)return[];let S=d6(t,o,"data");return E&&b.size>0&&S.searchParams.set("_routes",e.filter(P=>b.has(P.route.id)).map(P=>P.route.id).join(",")),[S.pathname+S.search]},[o,c,n,i,d,e,t,a]),v=_.useMemo(()=>p6(m,i),[m,i]),w=_6(m);return _.createElement(_.Fragment,null,p.map(b=>_.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...r})),v.map(b=>_.createElement("link",{key:b,rel:"modulepreload",href:b,...r})),w.map(({key:b,link:E})=>_.createElement("link",{key:b,...E})))}function S6(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var Tk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Tk&&(window.__reactRouterVersion="7.7.0")}catch{}function A6({basename:t,children:e,window:r}){let n=_.useRef();n.current==null&&(n.current=h3({window:r,v5Compat:!0}));let i=n.current,[a,o]=_.useState({action:i.action,location:i.location}),c=_.useCallback(u=>{_.startTransition(()=>o(u))},[o]);return _.useLayoutEffect(()=>i.listen(c),[i,c]),_.createElement(t6,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:i})}var Pk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bf=_.forwardRef(function({onClick:e,discover:r="render",prefetch:n="none",relative:i,reloadDocument:a,replace:o,state:c,target:u,to:d,preventScrollReset:m,viewTransition:p,...v},w){let{basename:b}=_.useContext(Ii),E=typeof d=="string"&&Pk.test(d),S,P=!1;if(typeof d=="string"&&E&&(S=d,Tk))try{let D=new URL(window.location.href),$=d.startsWith("//")?new URL(D.protocol+d):new URL(d),M=$a($.pathname,b);$.origin===D.origin&&M!=null?d=M+$.search+$.hash:P=!0}catch{Ei(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let k=$3(d,{relative:i}),[C,R,V]=w6(n,v),B=I6(d,{replace:o,state:c,target:u,preventScrollReset:m,relative:i,viewTransition:p});function I(D){e&&e(D),D.defaultPrevented||B(D)}let j=_.createElement("a",{...v,...V,href:S||k,onClick:P||a?e:I,ref:S6(w,R),target:u,"data-discover":!E&&r==="render"?"true":void 0});return C&&!E?_.createElement(_.Fragment,null,j,_.createElement(b6,{page:k})):j});bf.displayName="Link";var Ik=_.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:n="",end:i=!1,style:a,to:o,viewTransition:c,children:u,...d},m){let p=wf(o,{relative:d.relative}),v=Qn(),w=_.useContext(Qp),{navigator:b,basename:E}=_.useContext(Ii),S=w!=null&&R6(p)&&c===!0,P=b.encodeLocation?b.encodeLocation(p).pathname:p.pathname,k=v.pathname,C=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;r||(k=k.toLowerCase(),C=C?C.toLowerCase():null,P=P.toLowerCase()),C&&E&&(C=$a(C,E)||C);const R=P!=="/"&&P.endsWith("/")?P.length-1:P.length;let V=k===P||!i&&k.startsWith(P)&&k.charAt(R)==="/",B=C!=null&&(C===P||!i&&C.startsWith(P)&&C.charAt(P.length)==="/"),I={isActive:V,isPending:B,isTransitioning:S},j=V?e:void 0,D;typeof n=="function"?D=n(I):D=[n,V?"active":null,B?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let $=typeof a=="function"?a(I):a;return _.createElement(bf,{...d,"aria-current":j,className:D,ref:m,style:$,to:o,viewTransition:c},typeof u=="function"?u(I):u)});Ik.displayName="NavLink";var T6=_.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:n,replace:i,state:a,method:o=Dm,action:c,onSubmit:u,relative:d,preventScrollReset:m,viewTransition:p,...v},w)=>{let b=k6(),E=j6(c,{relative:d}),S=o.toLowerCase()==="get"?"get":"post",P=typeof c=="string"&&Pk.test(c),k=C=>{if(u&&u(C),C.defaultPrevented)return;C.preventDefault();let R=C.nativeEvent.submitter,V=R?.getAttribute("formmethod")||o;b(R||C.currentTarget,{fetcherKey:e,method:V,navigate:r,replace:i,state:a,relative:d,preventScrollReset:m,viewTransition:p})};return _.createElement("form",{ref:w,method:S,action:E,onSubmit:n?u:k,...v,"data-discover":!P&&t==="render"?"true":void 0})});T6.displayName="Form";function P6(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Nk(t){let e=_.useContext(nu);return Tt(e,P6(t)),e}function I6(t,{target:e,replace:r,state:n,preventScrollReset:i,relative:a,viewTransition:o}={}){let c=au(),u=Qn(),d=wf(t,{relative:a});return _.useCallback(m=>{if(o6(m,e)){m.preventDefault();let p=r!==void 0?r:Bd(u)===Bd(d);c(t,{replace:p,state:n,preventScrollReset:i,relative:a,viewTransition:o})}},[u,c,d,r,n,e,t,i,a,o])}var N6=0,C6=()=>`__${String(++N6)}__`;function k6(){let{router:t}=Nk("useSubmit"),{basename:e}=_.useContext(Ii),r=X3();return _.useCallback(async(n,i={})=>{let{action:a,method:o,encType:c,formData:u,body:d}=u6(n,e);if(i.navigate===!1){let m=i.fetcherKey||C6();await t.fetch(m,r,i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:d,formMethod:i.method||o,formEncType:i.encType||c,flushSync:i.flushSync})}else await t.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:d,formMethod:i.method||o,formEncType:i.encType||c,replace:i.replace,state:i.state,fromRouteId:r,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,r])}function j6(t,{relative:e}={}){let{basename:r}=_.useContext(Ii),n=_.useContext(oa);Tt(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),a={...wf(t||".",{relative:e})},o=Qn();if(t==null){a.search=o.search;let c=new URLSearchParams(a.search),u=c.getAll("index");if(u.some(m=>m==="")){c.delete("index"),u.filter(p=>p).forEach(p=>c.append("index",p));let m=c.toString();a.search=m?`?${m}`:""}}return(!t||t===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(a.pathname=a.pathname==="/"?r:Da([r,a.pathname])),Bd(a)}function R6(t,e={}){let r=_.useContext(xk);Tt(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=Nk("useViewTransitionState"),i=wf(t,{relative:e.relative});if(!r.isTransitioning)return!1;let a=$a(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=$a(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Gm(i.pathname,o)!=null||Gm(i.pathname,a)!=null}var O6=mk();const D6=()=>{};var NA={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ck=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e},M6=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const i=t[r++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[r++];e[n++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[r++],o=t[r++],c=t[r++],u=((i&7)<<18|(a&63)<<12|(o&63)<<6|c&63)-65536;e[n++]=String.fromCharCode(55296+(u>>10)),e[n++]=String.fromCharCode(56320+(u&1023))}else{const a=t[r++],o=t[r++];e[n++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},kk={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<t.length;i+=3){const a=t[i],o=i+1<t.length,c=o?t[i+1]:0,u=i+2<t.length,d=u?t[i+2]:0,m=a>>2,p=(a&3)<<4|c>>4;let v=(c&15)<<2|d>>6,w=d&63;u||(w=64,o||(v=64)),n.push(r[m],r[p],r[v],r[w])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Ck(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):M6(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<t.length;){const a=r[t.charAt(i++)],c=i<t.length?r[t.charAt(i)]:0;++i;const d=i<t.length?r[t.charAt(i)]:64;++i;const p=i<t.length?r[t.charAt(i)]:64;if(++i,a==null||c==null||d==null||p==null)throw new L6;const v=a<<2|c>>4;if(n.push(v),d!==64){const w=c<<4&240|d>>2;if(n.push(w),p!==64){const b=d<<6&192|p;n.push(b)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class L6 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const V6=function(t){const e=Ck(t);return kk.encodeByteArray(e,!0)},Ym=function(t){return V6(t).replace(/\./g,"")},jk=function(t){try{return kk.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F6(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $6=()=>F6().__FIREBASE_DEFAULTS__,U6=()=>{if(typeof process>"u"||typeof NA>"u")return;const t=NA.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},B6=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&jk(t[1]);return e&&JSON.parse(e)},Jp=()=>{try{return D6()||$6()||U6()||B6()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Rk=t=>Jp()?.emulatorHosts?.[t],yb=t=>{const e=Rk(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},Ok=()=>Jp()?.config,Dk=t=>Jp()?.[`_${t}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z6{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function to(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Zp(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mk(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Ym(JSON.stringify(r)),Ym(JSON.stringify(o)),""].join(".")}const Od={};function q6(){const t={prod:[],emulator:[]};for(const e of Object.keys(Od))Od[e]?t.emulator.push(e):t.prod.push(e);return t}function K6(t){let e=document.getElementById(t),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),r=!0),{created:r,element:e}}let CA=!1;function eg(t,e){if(typeof window>"u"||typeof document>"u"||!to(window.location.host)||Od[t]===e||Od[t]||CA)return;Od[t]=e;function r(v){return`__firebase__banner__${v}`}const n="__firebase__banner",a=q6().prod.length>0;function o(){const v=document.getElementById(n);v&&v.remove()}function c(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function u(v,w){v.setAttribute("width","24"),v.setAttribute("id",w),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function d(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{CA=!0,o()},v}function m(v,w){v.setAttribute("id",w),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function p(){const v=K6(n),w=r("text"),b=document.getElementById(w)||document.createElement("span"),E=r("learnmore"),S=document.getElementById(E)||document.createElement("a"),P=r("preprendIcon"),k=document.getElementById(P)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const C=v.element;c(C),m(S,E);const R=d();u(k,P),C.append(k,b,S,R),document.body.appendChild(C)}a?(b.innerText="Preview backend disconnected.",k.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(k.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function W6(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fr())}function H6(){const t=Jp()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function G6(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Y6(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Q6(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function X6(){const t=Fr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function J6(){return!H6()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Z6(){try{return typeof indexedDB=="object"}catch{return!1}}function eV(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tV="FirebaseError";class la extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=tV,Object.setPrototypeOf(this,la.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_f.prototype.create)}}class _f{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?rV(a,n):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new la(i,c,n)}}function rV(t,e){return t.replace(nV,(r,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const nV=/\{\$([^}]+)}/g;function iV(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ll(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const i of r){if(!n.includes(i))return!1;const a=t[i],o=e[i];if(kA(a)&&kA(o)){if(!ll(a,o))return!1}else if(a!==o)return!1}for(const i of n)if(!r.includes(i))return!1;return!0}function kA(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ef(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Ad(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[i,a]=n.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function Td(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function aV(t,e){const r=new sV(t,e);return r.subscribe.bind(r)}class sV{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let i;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");oV(e,["next","error","complete"])?i=e:i={next:e,error:r,complete:n},i.next===void 0&&(i.next=Kv),i.error===void 0&&(i.error=Kv),i.complete===void 0&&(i.complete=Kv);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function oV(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function Kv(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(t){return t&&t._delegate?t._delegate:t}class Ua{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lV=class{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new z6;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:r});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){const r=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(n)return null;throw i}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(uV(e))try{this.getOrInitializeService({instanceIdentifier:qo})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(r);try{const a=this.getOrInitializeService({instanceIdentifier:i});n.resolve(a)}catch{}}}}clearInstance(e=qo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qo){return this.instances.has(e)}getOptions(e=qo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[a,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);n===c&&o.resolve(i)}return i}onInit(e,r){const n=this.normalizeInstanceIdentifier(r),i=this.onInitCallbacks.get(n)??new Set;i.add(e),this.onInitCallbacks.set(n,i);const a=this.instances.get(n);return a&&e(a,n),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const i of n)try{i(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:cV(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=qo){return this.component?this.component.multipleInstances?e:qo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function cV(t){return t===qo?void 0:t}function uV(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dV{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new lV(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ze||(ze={}));const fV={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},hV=ze.INFO,mV={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},pV=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),i=mV[e];if(i)console[i](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class vb{constructor(e){this.name=e,this._logLevel=hV,this._logHandler=pV,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?fV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...e),this._logHandler(this,ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...e),this._logHandler(this,ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...e),this._logHandler(this,ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...e),this._logHandler(this,ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...e),this._logHandler(this,ze.ERROR,...e)}}const gV=(t,e)=>e.some(r=>t instanceof r);let jA,RA;function yV(){return jA||(jA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vV(){return RA||(RA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Lk=new WeakMap,Ux=new WeakMap,Vk=new WeakMap,Wv=new WeakMap,xb=new WeakMap;function xV(t){const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{r(Vs(t.result)),i()},o=()=>{n(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(r=>{r instanceof IDBCursor&&Lk.set(r,t)}).catch(()=>{}),xb.set(e,t),e}function wV(t){if(Ux.has(t))return;const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{r(),i()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});Ux.set(t,e)}let Bx={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return Ux.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Vk.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Vs(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function bV(t){Bx=t(Bx)}function _V(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(Hv(this),e,...r);return Vk.set(n,e.sort?e.sort():[e]),Vs(n)}:vV().includes(t)?function(...e){return t.apply(Hv(this),e),Vs(Lk.get(this))}:function(...e){return Vs(t.apply(Hv(this),e))}}function EV(t){return typeof t=="function"?_V(t):(t instanceof IDBTransaction&&wV(t),gV(t,yV())?new Proxy(t,Bx):t)}function Vs(t){if(t instanceof IDBRequest)return xV(t);if(Wv.has(t))return Wv.get(t);const e=EV(t);return e!==t&&(Wv.set(t,e),xb.set(e,t)),e}const Hv=t=>xb.get(t);function SV(t,e,{blocked:r,upgrade:n,blocking:i,terminated:a}={}){const o=indexedDB.open(t,e),c=Vs(o);return n&&o.addEventListener("upgradeneeded",u=>{n(Vs(o.result),u.oldVersion,u.newVersion,Vs(o.transaction),u)}),r&&o.addEventListener("blocked",u=>r(u.oldVersion,u.newVersion,u)),c.then(u=>{a&&u.addEventListener("close",()=>a()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const AV=["get","getKey","getAll","getAllKeys","count"],TV=["put","add","delete","clear"],Gv=new Map;function OA(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Gv.get(e))return Gv.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,i=TV.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||AV.includes(r)))return;const a=async function(o,...c){const u=this.transaction(o,i?"readwrite":"readonly");let d=u.store;return n&&(d=d.index(c.shift())),(await Promise.all([d[r](...c),i&&u.done]))[0]};return Gv.set(e,a),a}bV(t=>({...t,get:(e,r,n)=>OA(e,r)||t.get(e,r,n),has:(e,r)=>!!OA(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(IV(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function IV(t){return t.getComponent()?.type==="VERSION"}const zx="@firebase/app",DA="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ba=new vb("@firebase/app"),NV="@firebase/app-compat",CV="@firebase/analytics-compat",kV="@firebase/analytics",jV="@firebase/app-check-compat",RV="@firebase/app-check",OV="@firebase/auth",DV="@firebase/auth-compat",MV="@firebase/database",LV="@firebase/data-connect",VV="@firebase/database-compat",FV="@firebase/functions",$V="@firebase/functions-compat",UV="@firebase/installations",BV="@firebase/installations-compat",zV="@firebase/messaging",qV="@firebase/messaging-compat",KV="@firebase/performance",WV="@firebase/performance-compat",HV="@firebase/remote-config",GV="@firebase/remote-config-compat",YV="@firebase/storage",QV="@firebase/storage-compat",XV="@firebase/firestore",JV="@firebase/ai",ZV="@firebase/firestore-compat",eF="firebase",tF="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx="[DEFAULT]",rF={[zx]:"fire-core",[NV]:"fire-core-compat",[kV]:"fire-analytics",[CV]:"fire-analytics-compat",[RV]:"fire-app-check",[jV]:"fire-app-check-compat",[OV]:"fire-auth",[DV]:"fire-auth-compat",[MV]:"fire-rtdb",[LV]:"fire-data-connect",[VV]:"fire-rtdb-compat",[FV]:"fire-fn",[$V]:"fire-fn-compat",[UV]:"fire-iid",[BV]:"fire-iid-compat",[zV]:"fire-fcm",[qV]:"fire-fcm-compat",[KV]:"fire-perf",[WV]:"fire-perf-compat",[HV]:"fire-rc",[GV]:"fire-rc-compat",[YV]:"fire-gcs",[QV]:"fire-gcs-compat",[XV]:"fire-fst",[ZV]:"fire-fst-compat",[JV]:"fire-vertex","fire-js":"fire-js",[eF]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qm=new Map,nF=new Map,Kx=new Map;function MA(t,e){try{t.container.addComponent(e)}catch(r){Ba.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function qs(t){const e=t.name;if(Kx.has(e))return Ba.debug(`There were multiple attempts to register component ${e}.`),!1;Kx.set(e,t);for(const r of Qm.values())MA(r,t);for(const r of nF.values())MA(r,t);return!0}function Sf(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function sn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iF={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fs=new _f("app","Firebase",iF);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aF{constructor(e,r,n){this._isDeleted=!1,this._options={...e},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Ua("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bl=tF;function Fk(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n={name:qx,automaticDataCollectionEnabled:!0,...e},i=n.name;if(typeof i!="string"||!i)throw Fs.create("bad-app-name",{appName:String(i)});if(r||(r=Ok()),!r)throw Fs.create("no-options");const a=Qm.get(i);if(a){if(ll(r,a.options)&&ll(n,a.config))return a;throw Fs.create("duplicate-app",{appName:i})}const o=new dV(i);for(const u of Kx.values())o.addComponent(u);const c=new aF(r,n,o);return Qm.set(i,c),c}function tg(t=qx){const e=Qm.get(t);if(!e&&t===qx&&Ok())return Fk();if(!e)throw Fs.create("no-app",{appName:t});return e}function Wn(t,e,r){let n=rF[t]??t;r&&(n+=`-${r}`);const i=n.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const o=[`Unable to register library "${n}" with version "${e}":`];i&&o.push(`library name "${n}" contains illegal characters (whitespace or "/")`),i&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ba.warn(o.join(" "));return}qs(new Ua(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sF="firebase-heartbeat-database",oF=1,zd="firebase-heartbeat-store";let Yv=null;function $k(){return Yv||(Yv=SV(sF,oF,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(zd)}catch(r){console.warn(r)}}}}).catch(t=>{throw Fs.create("idb-open",{originalErrorMessage:t.message})})),Yv}async function lF(t){try{const r=(await $k()).transaction(zd),n=await r.objectStore(zd).get(Uk(t));return await r.done,n}catch(e){if(e instanceof la)Ba.warn(e.message);else{const r=Fs.create("idb-get",{originalErrorMessage:e?.message});Ba.warn(r.message)}}}async function LA(t,e){try{const n=(await $k()).transaction(zd,"readwrite");await n.objectStore(zd).put(e,Uk(t)),await n.done}catch(r){if(r instanceof la)Ba.warn(r.message);else{const n=Fs.create("idb-set",{originalErrorMessage:r?.message});Ba.warn(n.message)}}}function Uk(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cF=1024,uF=30;class dF{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new hF(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=VA();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(i=>i.date===n))return;if(this._heartbeatsCache.heartbeats.push({date:n,agent:r}),this._heartbeatsCache.heartbeats.length>uF){const i=mF(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ba.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=VA(),{heartbeatsToSend:r,unsentEntries:n}=fF(this._heartbeatsCache.heartbeats),i=Ym(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Ba.warn(e),""}}}function VA(){return new Date().toISOString().substring(0,10)}function fF(t,e=cF){const r=[];let n=t.slice();for(const i of t){const a=r.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),FA(r)>e){a.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),FA(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class hF{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Z6()?eV().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await lF(this.app);return r?.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return LA(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return LA(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function FA(t){return Ym(JSON.stringify({version:2,heartbeats:t})).length}function mF(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let n=1;n<t.length;n++)t[n].date<r&&(r=t[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pF(t){qs(new Ua("platform-logger",e=>new PV(e),"PRIVATE")),qs(new Ua("heartbeat",e=>new dF(e),"PRIVATE")),Wn(zx,DA,t),Wn(zx,DA,"esm2020"),Wn("fire-js","")}pF("");function Bk(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const gF=Bk,zk=new _f("auth","Firebase",Bk());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xm=new vb("@firebase/auth");function yF(t,...e){Xm.logLevel<=ze.WARN&&Xm.warn(`Auth (${bl}): ${t}`,...e)}function Lm(t,...e){Xm.logLevel<=ze.ERROR&&Xm.error(`Auth (${bl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Si(t,...e){throw wb(t,...e)}function Ki(t,...e){return wb(t,...e)}function qk(t,e,r){const n={...gF(),[e]:r};return new _f("auth","Firebase",n).create(e,{appName:t.name})}function Ma(t){return qk(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function wb(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return zk.create(t,...e)}function ke(t,e,...r){if(!t)throw wb(e,...r)}function Ca(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Lm(e),new Error(e)}function za(t,e){t||Ca(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wx(){return typeof self<"u"&&self.location?.href||""}function vF(){return $A()==="http:"||$A()==="https:"}function $A(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(vF()||Y6()||"connection"in navigator)?navigator.onLine:!0}function wF(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,r){this.shortDelay=e,this.longDelay=r,za(r>e,"Short delay should be less than long delay!"),this.isMobile=W6()||Q6()}get(){return xF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bb(t,e){za(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ca("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ca("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ca("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _F=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],EF=new Af(3e4,6e4);function ro(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function no(t,e,r,n,i={}){return Wk(t,i,async()=>{let a={},o={};n&&(e==="GET"?o=n:a={body:JSON.stringify(n)});const c=Ef({key:t.config.apiKey,...o}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:u,...a};return G6()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&to(t.emulatorConfig.host)&&(d.credentials="include"),Kk.fetch()(await Hk(t,t.config.apiHost,r,c),d)})}async function Wk(t,e,r){t._canInitEmulator=!1;const n={...bF,...e};try{const i=new AF(t),a=await Promise.race([r(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw mm(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const c=a.ok?o.errorMessage:o.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw mm(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw mm(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw mm(t,"user-disabled",o);const m=n[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw qk(t,m,d);Si(t,m)}}catch(i){if(i instanceof la)throw i;Si(t,"network-request-failed",{message:String(i)})}}async function Tf(t,e,r,n,i={}){const a=await no(t,e,r,n,i);return"mfaPendingCredential"in a&&Si(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function Hk(t,e,r,n){const i=`${e}${r}?${n}`,a=t,o=a.config.emulator?bb(t.config,i):`${t.config.apiScheme}://${i}`;return _F.includes(r)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(o).toString():o}function SF(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class AF{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Ki(this.auth,"network-request-failed")),EF.get())})}}function mm(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const i=Ki(t,e,n);return i.customData._tokenResponse=r,i}function UA(t){return t!==void 0&&t.enterprise!==void 0}class TF{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return SF(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function PF(t,e){return no(t,"GET","/v2/recaptchaConfig",ro(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IF(t,e){return no(t,"POST","/v1/accounts:delete",e)}async function Jm(t,e){return no(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dd(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function NF(t,e=!1){const r=Ct(t),n=await r.getIdToken(e),i=_b(n);ke(i&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a?.sign_in_provider;return{claims:i,token:n,authTime:Dd(Qv(i.auth_time)),issuedAtTime:Dd(Qv(i.iat)),expirationTime:Dd(Qv(i.exp)),signInProvider:o||null,signInSecondFactor:a?.sign_in_second_factor||null}}function Qv(t){return Number(t)*1e3}function _b(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return Lm("JWT malformed, contained fewer than 3 sections"),null;try{const i=jk(r);return i?JSON.parse(i):(Lm("Failed to decode base64 JWT payload"),null)}catch(i){return Lm("Caught error parsing JWT payload as JSON",i?.toString()),null}}function BA(t){const e=_b(t);return ke(e,"internal-error"),ke(typeof e.exp<"u","internal-error"),ke(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qd(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof la&&CF(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function CF({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kF{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Dd(this.lastLoginAt),this.creationTime=Dd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zm(t){const e=t.auth,r=await t.getIdToken(),n=await qd(t,Jm(e,{idToken:r}));ke(n?.users.length,e,"internal-error");const i=n.users[0];t._notifyReloadListener(i);const a=i.providerUserInfo?.length?Gk(i.providerUserInfo):[],o=RF(t.providerData,a),c=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!o?.length,d=c?u:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Hx(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,m)}async function jF(t){const e=Ct(t);await Zm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function RF(t,e){return[...t.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function Gk(t){return t.map(({providerId:e,...r})=>({providerId:e,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OF(t,e){const r=await Wk(t,{},async()=>{const n=Ef({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,o=await Hk(t,i,"/v1/token",`key=${a}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:c,body:n};return t.emulatorConfig&&to(t.emulatorConfig.host)&&(u.credentials="include"),Kk.fetch()(o,u)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function DF(t,e){return no(t,"POST","/v2/accounts:revokeToken",ro(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ke(e.idToken,"internal-error"),ke(typeof e.idToken<"u","internal-error"),ke(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):BA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){ke(e.length!==0,"internal-error");const r=BA(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(ke(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:i,expiresIn:a}=await OF(e,r);this.updateTokensAndExpiration(n,i,Number(a))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:i,expirationTime:a}=r,o=new Cc;return n&&(ke(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),i&&(ke(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),a&&(ke(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Cc,this.toJSON())}_performRefresh(){return Ca("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ts(t,e){ke(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class wi{constructor({uid:e,auth:r,stsTokenManager:n,...i}){this.providerId="firebase",this.proactiveRefresh=new kF(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Hx(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const r=await qd(this,this.stsTokenManager.getToken(this.auth,e));return ke(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return NF(this,e)}reload(){return jF(this)}_assign(e){this!==e&&(ke(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>({...r})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new wi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(e){ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await Zm(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(sn(this.auth.app))return Promise.reject(Ma(this.auth));const e=await this.getIdToken();return await qd(this,IF(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){const n=r.displayName??void 0,i=r.email??void 0,a=r.phoneNumber??void 0,o=r.photoURL??void 0,c=r.tenantId??void 0,u=r._redirectEventId??void 0,d=r.createdAt??void 0,m=r.lastLoginAt??void 0,{uid:p,emailVerified:v,isAnonymous:w,providerData:b,stsTokenManager:E}=r;ke(p&&E,e,"internal-error");const S=Cc.fromJSON(this.name,E);ke(typeof p=="string",e,"internal-error"),Ts(n,e.name),Ts(i,e.name),ke(typeof v=="boolean",e,"internal-error"),ke(typeof w=="boolean",e,"internal-error"),Ts(a,e.name),Ts(o,e.name),Ts(c,e.name),Ts(u,e.name),Ts(d,e.name),Ts(m,e.name);const P=new wi({uid:p,auth:e,email:i,emailVerified:v,displayName:n,isAnonymous:w,photoURL:o,phoneNumber:a,tenantId:c,stsTokenManager:S,createdAt:d,lastLoginAt:m});return b&&Array.isArray(b)&&(P.providerData=b.map(k=>({...k}))),u&&(P._redirectEventId=u),P}static async _fromIdTokenResponse(e,r,n=!1){const i=new Cc;i.updateFromServerResponse(r);const a=new wi({uid:r.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await Zm(a),a}static async _fromGetAccountInfoResponse(e,r,n){const i=r.users[0];ke(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?Gk(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!a?.length,c=new Cc;c.updateFromIdToken(n);const u=new wi({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Hx(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA=new Map;function ka(t){za(t instanceof Function,"Expected a class definition");let e=zA.get(t);return e?(za(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,zA.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}Yk.type="NONE";const qA=Yk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vm(t,e,r){return`firebase:${t}:${e}:${r}`}class kc{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:i,name:a}=this.auth;this.fullUserKey=Vm(this.userKey,i.apiKey,a),this.fullPersistenceKey=Vm("persistence",i.apiKey,a),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const r=await Jm(this.auth,{idToken:e}).catch(()=>{});return r?wi._fromGetAccountInfoResponse(this.auth,r,e):null}return wi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new kc(ka(qA),e,n);const i=(await Promise.all(r.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let a=i[0]||ka(qA);const o=Vm(n,e.config.apiKey,e.name);let c=null;for(const d of r)try{const m=await d._get(o);if(m){let p;if(typeof m=="string"){const v=await Jm(e,{idToken:m}).catch(()=>{});if(!v)break;p=await wi._fromGetAccountInfoResponse(e,v,m)}else p=wi._fromJSON(e,m);d!==a&&(c=p),a=d;break}}catch{}const u=i.filter(d=>d._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new kc(a,e,n):(a=u[0],c&&await a._set(o,c.toJSON()),await Promise.all(r.map(async d=>{if(d!==a)try{await d._remove(o)}catch{}})),new kc(a,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KA(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Zk(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Qk(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(tj(e))return"Blackberry";if(rj(e))return"Webos";if(Xk(e))return"Safari";if((e.includes("chrome/")||Jk(e))&&!e.includes("edge/"))return"Chrome";if(ej(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if(n?.length===2)return n[1]}return"Other"}function Qk(t=Fr()){return/firefox\//i.test(t)}function Xk(t=Fr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Jk(t=Fr()){return/crios\//i.test(t)}function Zk(t=Fr()){return/iemobile/i.test(t)}function ej(t=Fr()){return/android/i.test(t)}function tj(t=Fr()){return/blackberry/i.test(t)}function rj(t=Fr()){return/webos/i.test(t)}function Eb(t=Fr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function MF(t=Fr()){return Eb(t)&&!!window.navigator?.standalone}function LF(){return X6()&&document.documentMode===10}function nj(t=Fr()){return Eb(t)||ej(t)||rj(t)||tj(t)||/windows phone/i.test(t)||Zk(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ij(t,e=[]){let r;switch(t){case"Browser":r=KA(Fr());break;case"Worker":r=`${KA(Fr())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${bl}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VF{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=a=>new Promise((o,c)=>{try{const u=e(a);o(u)}catch(u){c(u)}});n.onAbort=r,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const i of r)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FF(t,e={}){return no(t,"GET","/v2/passwordPolicy",ro(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $F=6;class UF{constructor(e){const r=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??$F,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,r),this.validatePasswordCharacterOptions(e,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),i&&(r.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BF{constructor(e,r,n,i){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new WA(this),this.idTokenSubscription=new WA(this),this.beforeStateQueue=new VF(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=zk,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=ka(r)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await kc.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await Jm(this,{idToken:e}),n=await wi._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(sn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,o=n?._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===o)&&c?.user&&(n=c.user,i=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(n)}catch(a){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return ke(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await Zm(e)}catch(r){if(r?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=wF()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(sn(this.app))return Promise.reject(Ma(this));const r=e?Ct(e):null;return r&&ke(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&ke(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return sn(this.app)?Promise.reject(Ma(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return sn(this.app)?Promise.reject(Ma(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ka(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await FF(this),r=new UF(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new _f("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await DF(this,n)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&ka(e)||this._popupRedirectResolver;ke(r,this,"argument-error"),this.redirectPersistenceManager=await kc.create(this,[ka(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,i){if(this._deleted)return()=>{};const a=typeof r=="function"?r:r.next.bind(r);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(ke(c,this,"internal-error"),c.then(()=>{o||a(this.currentUser)}),typeof r=="function"){const u=e.addObserver(r,n,i);return()=>{o=!0,u()}}else{const u=e.addObserver(r);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ij(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const r=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();r&&(e["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){if(sn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&yF(`Error while retrieving App Check token: ${e.error}`),e?.token}}function _l(t){return Ct(t)}class WA{constructor(e){this.auth=e,this.observer=null,this.addObserver=aV(r=>this.observer=r)}get next(){return ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function zF(t){rg=t}function aj(t){return rg.loadJS(t)}function qF(){return rg.recaptchaEnterpriseScript}function KF(){return rg.gapiScript}function WF(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class HF{constructor(){this.enterprise=new GF}ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}class GF{ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}const YF="recaptcha-enterprise",sj="NO_RECAPTCHA";class QF{constructor(e){this.type=YF,this.auth=_l(e)}async verify(e="verify",r=!1){async function n(a){if(!r){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,c)=>{PF(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new TF(u);return a.tenantId==null?a._agentRecaptchaConfig=d:a._tenantRecaptchaConfigs[a.tenantId]=d,o(d.siteKey)}}).catch(u=>{c(u)})})}function i(a,o,c){const u=window.grecaptcha;UA(u)?u.enterprise.ready(()=>{u.enterprise.execute(a,{action:e}).then(d=>{o(d)}).catch(()=>{o(sj)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new HF().execute("siteKey",{action:"verify"}):new Promise((a,o)=>{n(this.auth).then(c=>{if(!r&&UA(window.grecaptcha))i(c,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=qF();u.length!==0&&(u+=c),aj(u).then(()=>{i(c,a,o)}).catch(d=>{o(d)})}}).catch(c=>{o(c)})})}}async function HA(t,e,r,n=!1,i=!1){const a=new QF(t);let o;if(i)o=sj;else try{o=await a.verify(r)}catch{o=await a.verify(r,!0)}const c={...e};if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const u=c.phoneEnrollmentInfo.phoneNumber,d=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return n?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function Gx(t,e,r,n,i){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await HA(t,e,r,r==="getOobCode");return n(t,a)}else return n(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await HA(t,e,r,r==="getOobCode");return n(t,o)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XF(t,e){const r=Sf(t,"auth");if(r.isInitialized()){const i=r.getImmediate(),a=r.getOptions();if(ll(a,e??{}))return i;Si(i,"already-initialized")}return r.initialize({options:e})}function JF(t,e){const r=e?.persistence||[],n=(Array.isArray(r)?r:[r]).map(ka);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e?.popupRedirectResolver)}function ZF(t,e,r){const n=_l(t);ke(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!1,a=oj(e),{host:o,port:c}=e5(e),u=c===null?"":`:${c}`,d={url:`${a}//${o}${u}/`},m=Object.freeze({host:o,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!n._canInitEmulator){ke(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),ke(ll(d,n.config.emulator)&&ll(m,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=d,n.emulatorConfig=m,n.settings.appVerificationDisabledForTesting=!0,to(o)?(Zp(`${a}//${o}${u}`),eg("Auth",!0)):t5()}function oj(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function e5(t){const e=oj(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const a=i[1];return{host:a,port:GA(n.substr(a.length+1))}}else{const[a,o]=n.split(":");return{host:a,port:GA(o)}}}function GA(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function t5(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Ca("not implemented")}_getIdTokenResponse(e){return Ca("not implemented")}_linkToIdToken(e,r){return Ca("not implemented")}_getReauthenticationResolver(e){return Ca("not implemented")}}async function r5(t,e){return no(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n5(t,e){return Tf(t,"POST","/v1/accounts:signInWithPassword",ro(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i5(t,e){return Tf(t,"POST","/v1/accounts:signInWithEmailLink",ro(t,e))}async function a5(t,e){return Tf(t,"POST","/v1/accounts:signInWithEmailLink",ro(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd extends Sb{constructor(e,r,n,i=null){super("password",n),this._email=e,this._password=r,this._tenantId=i}static _fromEmailAndPassword(e,r){return new Kd(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new Kd(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r?.email&&r?.password){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gx(e,r,"signInWithPassword",n5);case"emailLink":return i5(e,{email:this._email,oobCode:this._password});default:Si(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gx(e,n,"signUpPassword",r5);case"emailLink":return a5(e,{idToken:r,email:this._email,oobCode:this._password});default:Si(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jc(t,e){return Tf(t,"POST","/v1/accounts:signInWithIdp",ro(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s5="http://localhost";class cl extends Sb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new cl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Si("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i,...a}=r;if(!n||!i)return null;const o=new cl(n,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const r=this.buildRequest();return jc(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,jc(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,jc(e,r)}buildRequest(){const e={requestUri:s5,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Ef(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o5(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function l5(t){const e=Ad(Td(t)).link,r=e?Ad(Td(e)).deep_link_id:null,n=Ad(Td(t)).deep_link_id;return(n?Ad(Td(n)).link:null)||n||r||e||t}class Ab{constructor(e){const r=Ad(Td(e)),n=r.apiKey??null,i=r.oobCode??null,a=o5(r.mode??null);ke(n&&i&&a,"argument-error"),this.apiKey=n,this.operation=a,this.code=i,this.continueUrl=r.continueUrl??null,this.languageCode=r.lang??null,this.tenantId=r.tenantId??null}static parseLink(e){const r=l5(e);try{return new Ab(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(){this.providerId=su.PROVIDER_ID}static credential(e,r){return Kd._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=Ab.parseLink(r);return ke(n,"argument-error"),Kd._fromEmailAndCode(e,n.code,n.tenantId)}}su.PROVIDER_ID="password";su.EMAIL_PASSWORD_SIGN_IN_METHOD="password";su.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf extends lj{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks extends Pf{constructor(){super("facebook.com")}static credential(e){return cl._fromParams({providerId:ks.PROVIDER_ID,signInMethod:ks.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ks.credentialFromTaggedObject(e)}static credentialFromError(e){return ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ks.credential(e.oauthAccessToken)}catch{return null}}}ks.FACEBOOK_SIGN_IN_METHOD="facebook.com";ks.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js extends Pf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return cl._fromParams({providerId:js.PROVIDER_ID,signInMethod:js.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return js.credentialFromTaggedObject(e)}static credentialFromError(e){return js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return js.credential(r,n)}catch{return null}}}js.GOOGLE_SIGN_IN_METHOD="google.com";js.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs extends Pf{constructor(){super("github.com")}static credential(e){return cl._fromParams({providerId:Rs.PROVIDER_ID,signInMethod:Rs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Rs.credentialFromTaggedObject(e)}static credentialFromError(e){return Rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Rs.credential(e.oauthAccessToken)}catch{return null}}}Rs.GITHUB_SIGN_IN_METHOD="github.com";Rs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os extends Pf{constructor(){super("twitter.com")}static credential(e,r){return cl._fromParams({providerId:Os.PROVIDER_ID,signInMethod:Os.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return Os.credentialFromTaggedObject(e)}static credentialFromError(e){return Os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return Os.credential(r,n)}catch{return null}}}Os.TWITTER_SIGN_IN_METHOD="twitter.com";Os.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c5(t,e){return Tf(t,"POST","/v1/accounts:signUp",ro(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,i=!1){const a=await wi._fromIdTokenResponse(e,n,i),o=YA(n);return new ul({user:a,providerId:o,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const i=YA(n);return new ul({user:e,providerId:i,_tokenResponse:n,operationType:r})}}function YA(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep extends la{constructor(e,r,n,i){super(r.code,r.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,ep.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,i){return new ep(e,r,n,i)}}function cj(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?ep._fromErrorAndOperation(t,a,e,n):a})}async function u5(t,e,r=!1){const n=await qd(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return ul._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d5(t,e,r=!1){const{auth:n}=t;if(sn(n.app))return Promise.reject(Ma(n));const i="reauthenticate";try{const a=await qd(t,cj(n,i,e,t),r);ke(a.idToken,n,"internal-error");const o=_b(a.idToken);ke(o,n,"internal-error");const{sub:c}=o;return ke(t.uid===c,n,"user-mismatch"),ul._forOperation(t,i,a)}catch(a){throw a?.code==="auth/user-not-found"&&Si(n,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uj(t,e,r=!1){if(sn(t.app))return Promise.reject(Ma(t));const n="signIn",i=await cj(t,n,e),a=await ul._fromIdTokenResponse(t,n,i);return r||await t._updateCurrentUser(a.user),a}async function f5(t,e){return uj(_l(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dj(t){const e=_l(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function h5(t,e,r){if(sn(t.app))return Promise.reject(Ma(t));const n=_l(t),o=await Gx(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",c5).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&dj(t),u}),c=await ul._fromIdTokenResponse(n,"signIn",o);return await n._updateCurrentUser(c.user),c}function m5(t,e,r){return sn(t.app)?Promise.reject(Ma(t)):f5(Ct(t),su.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&dj(t),n})}function p5(t,e,r,n){return Ct(t).onIdTokenChanged(e,r,n)}function g5(t,e,r){return Ct(t).beforeAuthStateChanged(e,r)}function y5(t,e,r,n){return Ct(t).onAuthStateChanged(e,r,n)}function v5(t){return Ct(t).signOut()}const tp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(tp,"1"),this.storage.removeItem(tp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x5=1e3,w5=10;class hj extends fj{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=nj(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),i=this.localCache[r];n!==i&&e(r,i,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const n=e.key;r?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(n);!r&&this.localCache[n]===o||this.notifyListeners(n,o)},a=this.storage.getItem(n);LF()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,w5):i()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},x5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}hj.type="LOCAL";const b5=hj;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj extends fj{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}mj.type="SESSION";const pj=mj;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _5(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(i=>i.isListeningto(e));if(r)return r;const n=new ng(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:i,data:a}=r.data,o=this.handlersMap[i];if(!o?.size)return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const c=Array.from(o).map(async d=>d(r.origin,a)),u=await _5(c);r.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:u})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ng.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tb(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,o;return new Promise((c,u)=>{const d=Tb("",20);i.port1.start();const m=setTimeout(()=>{u(new Error("unsupported_event"))},n);o={messageChannel:i,onMessage(p){const v=p;if(v.data.eventId===d)switch(v.data.status){case"ack":clearTimeout(m),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(v.data.response);break;default:clearTimeout(m),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:r},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wi(){return window}function S5(t){Wi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gj(){return typeof Wi().WorkerGlobalScope<"u"&&typeof Wi().importScripts=="function"}async function A5(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function T5(){return navigator?.serviceWorker?.controller||null}function P5(){return gj()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yj="firebaseLocalStorageDb",I5=1,rp="firebaseLocalStorage",vj="fbase_key";class If{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function ig(t,e){return t.transaction([rp],e?"readwrite":"readonly").objectStore(rp)}function N5(){const t=indexedDB.deleteDatabase(yj);return new If(t).toPromise()}function Yx(){const t=indexedDB.open(yj,I5);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(rp,{keyPath:vj})}catch(i){r(i)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(rp)?e(n):(n.close(),await N5(),e(await Yx()))})})}async function QA(t,e,r){const n=ig(t,!0).put({[vj]:e,value:r});return new If(n).toPromise()}async function C5(t,e){const r=ig(t,!1).get(e),n=await new If(r).toPromise();return n===void 0?null:n.value}function XA(t,e){const r=ig(t,!0).delete(e);return new If(r).toPromise()}const k5=800,j5=3;class xj{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Yx(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>j5)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return gj()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ng._getInstance(P5()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await A5(),!this.activeServiceWorker)return;this.sender=new E5(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||T5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Yx();return await QA(e,tp,"1"),await XA(e,tp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>QA(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>C5(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>XA(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=ig(i,!1).getAll();return new If(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),r.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),r.push(i));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),k5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}xj.type="LOCAL";const R5=xj;new Af(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O5(t,e){return e?ka(e):(ke(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb extends Sb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return jc(e,this._buildIdpRequest())}_linkToIdToken(e,r){return jc(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return jc(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function D5(t){return uj(t.auth,new Pb(t),t.bypassAuthState)}function M5(t){const{auth:e,user:r}=t;return ke(r,e,"internal-error"),d5(r,new Pb(t),t.bypassAuthState)}async function L5(t){const{auth:e,user:r}=t;return ke(r,e,"internal-error"),u5(r,new Pb(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wj{constructor(e,r,n,i,a=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:i,tenantId:a,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:r,sessionId:n,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return D5;case"linkViaPopup":case"linkViaRedirect":return L5;case"reauthViaPopup":case"reauthViaRedirect":return M5;default:Si(this.auth,"internal-error")}}resolve(e){za(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){za(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V5=new Af(2e3,1e4);class Pc extends wj{constructor(e,r,n,i,a){super(e,r,i,a),this.provider=n,this.authWindow=null,this.pollId=null,Pc.currentPopupAction&&Pc.currentPopupAction.cancel(),Pc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ke(e,this.auth,"internal-error"),e}async onExecution(){za(this.filter.length===1,"Popup operations only handle one event");const e=Tb();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Ki(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ki(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Pc.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ki(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,V5.get())};e()}}Pc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F5="pendingRedirect",Fm=new Map;class $5 extends wj{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=Fm.get(this.auth._key());if(!e){try{const n=await U5(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}Fm.set(this.auth._key(),e)}return this.bypassAuthState||Fm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function U5(t,e){const r=q5(e),n=z5(t);if(!await n._isAvailable())return!1;const i=await n._get(r)==="true";return await n._remove(r),i}function B5(t,e){Fm.set(t._key(),e)}function z5(t){return ka(t._redirectPersistence)}function q5(t){return Vm(F5,t.config.apiKey,t.name)}async function K5(t,e,r=!1){if(sn(t.app))return Promise.reject(Ma(t));const n=_l(t),i=O5(n,e),o=await new $5(n,i,r).execute();return o&&!r&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W5=600*1e3;class H5{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!G5(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){if(e.error&&!bj(e)){const n=e.error.code?.split("auth/")[1]||"internal-error";r.onError(Ki(this.auth,n))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=W5&&this.cachedEventUids.clear(),this.cachedEventUids.has(JA(e))}saveEventToCache(e){this.cachedEventUids.add(JA(e)),this.lastProcessedEventTime=Date.now()}}function JA(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function bj({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function G5(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bj(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y5(t,e={}){return no(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q5=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,X5=/^https?/;async function J5(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Y5(t);for(const r of e)try{if(Z5(r))return}catch{}Si(t,"unauthorized-domain")}function Z5(t){const e=Wx(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===n}if(!X5.test(r))return!1;if(Q5.test(t))return n===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e$=new Af(3e4,6e4);function ZA(){const t=Wi().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function t$(t){return new Promise((e,r)=>{function n(){ZA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ZA(),r(Ki(t,"network-request-failed"))},timeout:e$.get()})}if(Wi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Wi().gapi?.load)n();else{const i=WF("iframefcb");return Wi()[i]=()=>{gapi.load?n():r(Ki(t,"network-request-failed"))},aj(`${KF()}?onload=${i}`).catch(a=>r(a))}}).catch(e=>{throw $m=null,e})}let $m=null;function r$(t){return $m=$m||t$(t),$m}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n$=new Af(5e3,15e3),i$="__/auth/iframe",a$="emulator/auth/iframe",s$={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},o$=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function l$(t){const e=t.config;ke(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?bb(e,a$):`https://${t.config.authDomain}/${i$}`,n={apiKey:e.apiKey,appName:t.name,v:bl},i=o$.get(t.config.apiHost);i&&(n.eid=i);const a=t._getFrameworks();return a.length&&(n.fw=a.join(",")),`${r}?${Ef(n).slice(1)}`}async function c$(t){const e=await r$(t),r=Wi().gapi;return ke(r,t,"internal-error"),e.open({where:document.body,url:l$(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:s$,dontclear:!0},n=>new Promise(async(i,a)=>{await n.restyle({setHideOnLeave:!1});const o=Ki(t,"network-request-failed"),c=Wi().setTimeout(()=>{a(o)},n$.get());function u(){Wi().clearTimeout(c),i(n)}n.ping(u).then(u,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u$={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},d$=500,f$=600,h$="_blank",m$="http://localhost";class eT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function p$(t,e,r,n=d$,i=f$){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let c="";const u={...u$,width:n.toString(),height:i.toString(),top:a,left:o},d=Fr().toLowerCase();r&&(c=Jk(d)?h$:r),Qk(d)&&(e=e||m$,u.scrollbars="yes");const m=Object.entries(u).reduce((v,[w,b])=>`${v}${w}=${b},`,"");if(MF(d)&&c!=="_self")return g$(e||"",c),new eT(null);const p=window.open(e||"",c,m);ke(p,t,"popup-blocked");try{p.focus()}catch{}return new eT(p)}function g$(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y$="__/auth/handler",v$="emulator/auth/handler",x$=encodeURIComponent("fac");async function tT(t,e,r,n,i,a){ke(t.config.authDomain,t,"auth-domain-config-required"),ke(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:bl,eventId:i};if(e instanceof lj){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",iV(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,p]of Object.entries({}))o[m]=p}if(e instanceof Pf){const m=e.getScopes().filter(p=>p!=="");m.length>0&&(o.scopes=m.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const u=await t._getAppCheckToken(),d=u?`#${x$}=${encodeURIComponent(u)}`:"";return`${w$(t)}?${Ef(c).slice(1)}${d}`}function w$({config:t}){return t.emulator?bb(t,v$):`https://${t.authDomain}/${y$}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv="webStorageSupport";class b${constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pj,this._completeRedirectFn=K5,this._overrideRedirectResult=B5}async _openPopup(e,r,n,i){za(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await tT(e,r,n,Wx(),i);return p$(e,a,Tb())}async _openRedirect(e,r,n,i){await this._originValidation(e);const a=await tT(e,r,n,Wx(),i);return S5(a),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:i,promise:a}=this.eventManagers[r];return i?Promise.resolve(i):(za(a,"If manager is not set, promise should be"),a)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await c$(e),n=new H5(e);return r.register("authEvent",i=>(ke(i?.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(Xv,{type:Xv},i=>{const a=i?.[0]?.[Xv];a!==void 0&&r(!!a),Si(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=J5(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return nj()||Xk()||Eb()}}const _$=b$;var rT="@firebase/auth",nT="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E${constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e(n?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S$(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function A$(t){qs(new Ua("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=n.options;ke(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ij(t)},d=new BF(n,i,a,u);return JF(d,r),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),qs(new Ua("auth-internal",e=>{const r=_l(e.getProvider("auth").getImmediate());return(n=>new E$(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Wn(rT,nT,S$(t)),Wn(rT,nT,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T$=300,P$=Dk("authIdTokenMaxAge")||T$;let iT=null;const I$=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>P$)return;const i=r?.token;iT!==i&&(iT=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function _j(t=tg()){const e=Sf(t,"auth");if(e.isInitialized())return e.getImmediate();const r=XF(t,{popupRedirectResolver:_$,persistence:[R5,b5,pj]}),n=Dk("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(n,location.origin);if(location.origin===a.origin){const o=I$(a.toString());g5(r,o,()=>o(r.currentUser)),p5(r,c=>o(c))}}const i=Rk("auth");return i&&ZF(r,`http://${i}`),r}function N$(){return document.getElementsByTagName("head")?.[0]??document}zF({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=i=>{const a=Ki("internal-error");a.customData=i,r(a)},n.type="text/javascript",n.charset="UTF-8",N$().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});A$("Browser");var C$="firebase",k$="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wn(C$,k$,"app");var aT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $s,Ej;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,j){function D(){}D.prototype=j.prototype,I.D=j.prototype,I.prototype=new D,I.prototype.constructor=I,I.C=function($,M,U){for(var F=Array(arguments.length-2),me=2;me<arguments.length;me++)F[me-2]=arguments[me];return j.prototype[M].apply($,F)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,j,D){D||(D=0);var $=Array(16);if(typeof j=="string")for(var M=0;16>M;++M)$[M]=j.charCodeAt(D++)|j.charCodeAt(D++)<<8|j.charCodeAt(D++)<<16|j.charCodeAt(D++)<<24;else for(M=0;16>M;++M)$[M]=j[D++]|j[D++]<<8|j[D++]<<16|j[D++]<<24;j=I.g[0],D=I.g[1],M=I.g[2];var U=I.g[3],F=j+(U^D&(M^U))+$[0]+3614090360&4294967295;j=D+(F<<7&4294967295|F>>>25),F=U+(M^j&(D^M))+$[1]+3905402710&4294967295,U=j+(F<<12&4294967295|F>>>20),F=M+(D^U&(j^D))+$[2]+606105819&4294967295,M=U+(F<<17&4294967295|F>>>15),F=D+(j^M&(U^j))+$[3]+3250441966&4294967295,D=M+(F<<22&4294967295|F>>>10),F=j+(U^D&(M^U))+$[4]+4118548399&4294967295,j=D+(F<<7&4294967295|F>>>25),F=U+(M^j&(D^M))+$[5]+1200080426&4294967295,U=j+(F<<12&4294967295|F>>>20),F=M+(D^U&(j^D))+$[6]+2821735955&4294967295,M=U+(F<<17&4294967295|F>>>15),F=D+(j^M&(U^j))+$[7]+4249261313&4294967295,D=M+(F<<22&4294967295|F>>>10),F=j+(U^D&(M^U))+$[8]+1770035416&4294967295,j=D+(F<<7&4294967295|F>>>25),F=U+(M^j&(D^M))+$[9]+2336552879&4294967295,U=j+(F<<12&4294967295|F>>>20),F=M+(D^U&(j^D))+$[10]+4294925233&4294967295,M=U+(F<<17&4294967295|F>>>15),F=D+(j^M&(U^j))+$[11]+2304563134&4294967295,D=M+(F<<22&4294967295|F>>>10),F=j+(U^D&(M^U))+$[12]+1804603682&4294967295,j=D+(F<<7&4294967295|F>>>25),F=U+(M^j&(D^M))+$[13]+4254626195&4294967295,U=j+(F<<12&4294967295|F>>>20),F=M+(D^U&(j^D))+$[14]+2792965006&4294967295,M=U+(F<<17&4294967295|F>>>15),F=D+(j^M&(U^j))+$[15]+1236535329&4294967295,D=M+(F<<22&4294967295|F>>>10),F=j+(M^U&(D^M))+$[1]+4129170786&4294967295,j=D+(F<<5&4294967295|F>>>27),F=U+(D^M&(j^D))+$[6]+3225465664&4294967295,U=j+(F<<9&4294967295|F>>>23),F=M+(j^D&(U^j))+$[11]+643717713&4294967295,M=U+(F<<14&4294967295|F>>>18),F=D+(U^j&(M^U))+$[0]+3921069994&4294967295,D=M+(F<<20&4294967295|F>>>12),F=j+(M^U&(D^M))+$[5]+3593408605&4294967295,j=D+(F<<5&4294967295|F>>>27),F=U+(D^M&(j^D))+$[10]+38016083&4294967295,U=j+(F<<9&4294967295|F>>>23),F=M+(j^D&(U^j))+$[15]+3634488961&4294967295,M=U+(F<<14&4294967295|F>>>18),F=D+(U^j&(M^U))+$[4]+3889429448&4294967295,D=M+(F<<20&4294967295|F>>>12),F=j+(M^U&(D^M))+$[9]+568446438&4294967295,j=D+(F<<5&4294967295|F>>>27),F=U+(D^M&(j^D))+$[14]+3275163606&4294967295,U=j+(F<<9&4294967295|F>>>23),F=M+(j^D&(U^j))+$[3]+4107603335&4294967295,M=U+(F<<14&4294967295|F>>>18),F=D+(U^j&(M^U))+$[8]+1163531501&4294967295,D=M+(F<<20&4294967295|F>>>12),F=j+(M^U&(D^M))+$[13]+2850285829&4294967295,j=D+(F<<5&4294967295|F>>>27),F=U+(D^M&(j^D))+$[2]+4243563512&4294967295,U=j+(F<<9&4294967295|F>>>23),F=M+(j^D&(U^j))+$[7]+1735328473&4294967295,M=U+(F<<14&4294967295|F>>>18),F=D+(U^j&(M^U))+$[12]+2368359562&4294967295,D=M+(F<<20&4294967295|F>>>12),F=j+(D^M^U)+$[5]+4294588738&4294967295,j=D+(F<<4&4294967295|F>>>28),F=U+(j^D^M)+$[8]+2272392833&4294967295,U=j+(F<<11&4294967295|F>>>21),F=M+(U^j^D)+$[11]+1839030562&4294967295,M=U+(F<<16&4294967295|F>>>16),F=D+(M^U^j)+$[14]+4259657740&4294967295,D=M+(F<<23&4294967295|F>>>9),F=j+(D^M^U)+$[1]+2763975236&4294967295,j=D+(F<<4&4294967295|F>>>28),F=U+(j^D^M)+$[4]+1272893353&4294967295,U=j+(F<<11&4294967295|F>>>21),F=M+(U^j^D)+$[7]+4139469664&4294967295,M=U+(F<<16&4294967295|F>>>16),F=D+(M^U^j)+$[10]+3200236656&4294967295,D=M+(F<<23&4294967295|F>>>9),F=j+(D^M^U)+$[13]+681279174&4294967295,j=D+(F<<4&4294967295|F>>>28),F=U+(j^D^M)+$[0]+3936430074&4294967295,U=j+(F<<11&4294967295|F>>>21),F=M+(U^j^D)+$[3]+3572445317&4294967295,M=U+(F<<16&4294967295|F>>>16),F=D+(M^U^j)+$[6]+76029189&4294967295,D=M+(F<<23&4294967295|F>>>9),F=j+(D^M^U)+$[9]+3654602809&4294967295,j=D+(F<<4&4294967295|F>>>28),F=U+(j^D^M)+$[12]+3873151461&4294967295,U=j+(F<<11&4294967295|F>>>21),F=M+(U^j^D)+$[15]+530742520&4294967295,M=U+(F<<16&4294967295|F>>>16),F=D+(M^U^j)+$[2]+3299628645&4294967295,D=M+(F<<23&4294967295|F>>>9),F=j+(M^(D|~U))+$[0]+4096336452&4294967295,j=D+(F<<6&4294967295|F>>>26),F=U+(D^(j|~M))+$[7]+1126891415&4294967295,U=j+(F<<10&4294967295|F>>>22),F=M+(j^(U|~D))+$[14]+2878612391&4294967295,M=U+(F<<15&4294967295|F>>>17),F=D+(U^(M|~j))+$[5]+4237533241&4294967295,D=M+(F<<21&4294967295|F>>>11),F=j+(M^(D|~U))+$[12]+1700485571&4294967295,j=D+(F<<6&4294967295|F>>>26),F=U+(D^(j|~M))+$[3]+2399980690&4294967295,U=j+(F<<10&4294967295|F>>>22),F=M+(j^(U|~D))+$[10]+4293915773&4294967295,M=U+(F<<15&4294967295|F>>>17),F=D+(U^(M|~j))+$[1]+2240044497&4294967295,D=M+(F<<21&4294967295|F>>>11),F=j+(M^(D|~U))+$[8]+1873313359&4294967295,j=D+(F<<6&4294967295|F>>>26),F=U+(D^(j|~M))+$[15]+4264355552&4294967295,U=j+(F<<10&4294967295|F>>>22),F=M+(j^(U|~D))+$[6]+2734768916&4294967295,M=U+(F<<15&4294967295|F>>>17),F=D+(U^(M|~j))+$[13]+1309151649&4294967295,D=M+(F<<21&4294967295|F>>>11),F=j+(M^(D|~U))+$[4]+4149444226&4294967295,j=D+(F<<6&4294967295|F>>>26),F=U+(D^(j|~M))+$[11]+3174756917&4294967295,U=j+(F<<10&4294967295|F>>>22),F=M+(j^(U|~D))+$[2]+718787259&4294967295,M=U+(F<<15&4294967295|F>>>17),F=D+(U^(M|~j))+$[9]+3951481745&4294967295,I.g[0]=I.g[0]+j&4294967295,I.g[1]=I.g[1]+(M+(F<<21&4294967295|F>>>11))&4294967295,I.g[2]=I.g[2]+M&4294967295,I.g[3]=I.g[3]+U&4294967295}n.prototype.u=function(I,j){j===void 0&&(j=I.length);for(var D=j-this.blockSize,$=this.B,M=this.h,U=0;U<j;){if(M==0)for(;U<=D;)i(this,I,U),U+=this.blockSize;if(typeof I=="string"){for(;U<j;)if($[M++]=I.charCodeAt(U++),M==this.blockSize){i(this,$),M=0;break}}else for(;U<j;)if($[M++]=I[U++],M==this.blockSize){i(this,$),M=0;break}}this.h=M,this.o+=j},n.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var j=1;j<I.length-8;++j)I[j]=0;var D=8*this.o;for(j=I.length-8;j<I.length;++j)I[j]=D&255,D/=256;for(this.u(I),I=Array(16),j=D=0;4>j;++j)for(var $=0;32>$;$+=8)I[D++]=this.g[j]>>>$&255;return I};function a(I,j){var D=c;return Object.prototype.hasOwnProperty.call(D,I)?D[I]:D[I]=j(I)}function o(I,j){this.h=j;for(var D=[],$=!0,M=I.length-1;0<=M;M--){var U=I[M]|0;$&&U==j||(D[M]=U,$=!1)}this.g=D}var c={};function u(I){return-128<=I&&128>I?a(I,function(j){return new o([j|0],0>j?-1:0)}):new o([I|0],0>I?-1:0)}function d(I){if(isNaN(I)||!isFinite(I))return p;if(0>I)return S(d(-I));for(var j=[],D=1,$=0;I>=D;$++)j[$]=I/D|0,D*=4294967296;return new o(j,0)}function m(I,j){if(I.length==0)throw Error("number format error: empty string");if(j=j||10,2>j||36<j)throw Error("radix out of range: "+j);if(I.charAt(0)=="-")return S(m(I.substring(1),j));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=d(Math.pow(j,8)),$=p,M=0;M<I.length;M+=8){var U=Math.min(8,I.length-M),F=parseInt(I.substring(M,M+U),j);8>U?(U=d(Math.pow(j,U)),$=$.j(U).add(d(F))):($=$.j(D),$=$.add(d(F)))}return $}var p=u(0),v=u(1),w=u(16777216);t=o.prototype,t.m=function(){if(E(this))return-S(this).m();for(var I=0,j=1,D=0;D<this.g.length;D++){var $=this.i(D);I+=(0<=$?$:4294967296+$)*j,j*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(b(this))return"0";if(E(this))return"-"+S(this).toString(I);for(var j=d(Math.pow(I,6)),D=this,$="";;){var M=R(D,j).g;D=P(D,M.j(j));var U=((0<D.g.length?D.g[0]:D.h)>>>0).toString(I);if(D=M,b(D))return U+$;for(;6>U.length;)U="0"+U;$=U+$}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function b(I){if(I.h!=0)return!1;for(var j=0;j<I.g.length;j++)if(I.g[j]!=0)return!1;return!0}function E(I){return I.h==-1}t.l=function(I){return I=P(this,I),E(I)?-1:b(I)?0:1};function S(I){for(var j=I.g.length,D=[],$=0;$<j;$++)D[$]=~I.g[$];return new o(D,~I.h).add(v)}t.abs=function(){return E(this)?S(this):this},t.add=function(I){for(var j=Math.max(this.g.length,I.g.length),D=[],$=0,M=0;M<=j;M++){var U=$+(this.i(M)&65535)+(I.i(M)&65535),F=(U>>>16)+(this.i(M)>>>16)+(I.i(M)>>>16);$=F>>>16,U&=65535,F&=65535,D[M]=F<<16|U}return new o(D,D[D.length-1]&-2147483648?-1:0)};function P(I,j){return I.add(S(j))}t.j=function(I){if(b(this)||b(I))return p;if(E(this))return E(I)?S(this).j(S(I)):S(S(this).j(I));if(E(I))return S(this.j(S(I)));if(0>this.l(w)&&0>I.l(w))return d(this.m()*I.m());for(var j=this.g.length+I.g.length,D=[],$=0;$<2*j;$++)D[$]=0;for($=0;$<this.g.length;$++)for(var M=0;M<I.g.length;M++){var U=this.i($)>>>16,F=this.i($)&65535,me=I.i(M)>>>16,Pe=I.i(M)&65535;D[2*$+2*M]+=F*Pe,k(D,2*$+2*M),D[2*$+2*M+1]+=U*Pe,k(D,2*$+2*M+1),D[2*$+2*M+1]+=F*me,k(D,2*$+2*M+1),D[2*$+2*M+2]+=U*me,k(D,2*$+2*M+2)}for($=0;$<j;$++)D[$]=D[2*$+1]<<16|D[2*$];for($=j;$<2*j;$++)D[$]=0;return new o(D,0)};function k(I,j){for(;(I[j]&65535)!=I[j];)I[j+1]+=I[j]>>>16,I[j]&=65535,j++}function C(I,j){this.g=I,this.h=j}function R(I,j){if(b(j))throw Error("division by zero");if(b(I))return new C(p,p);if(E(I))return j=R(S(I),j),new C(S(j.g),S(j.h));if(E(j))return j=R(I,S(j)),new C(S(j.g),j.h);if(30<I.g.length){if(E(I)||E(j))throw Error("slowDivide_ only works with positive integers.");for(var D=v,$=j;0>=$.l(I);)D=V(D),$=V($);var M=B(D,1),U=B($,1);for($=B($,2),D=B(D,2);!b($);){var F=U.add($);0>=F.l(I)&&(M=M.add(D),U=F),$=B($,1),D=B(D,1)}return j=P(I,M.j(j)),new C(M,j)}for(M=p;0<=I.l(j);){for(D=Math.max(1,Math.floor(I.m()/j.m())),$=Math.ceil(Math.log(D)/Math.LN2),$=48>=$?1:Math.pow(2,$-48),U=d(D),F=U.j(j);E(F)||0<F.l(I);)D-=$,U=d(D),F=U.j(j);b(U)&&(U=v),M=M.add(U),I=P(I,F)}return new C(M,I)}t.A=function(I){return R(this,I).h},t.and=function(I){for(var j=Math.max(this.g.length,I.g.length),D=[],$=0;$<j;$++)D[$]=this.i($)&I.i($);return new o(D,this.h&I.h)},t.or=function(I){for(var j=Math.max(this.g.length,I.g.length),D=[],$=0;$<j;$++)D[$]=this.i($)|I.i($);return new o(D,this.h|I.h)},t.xor=function(I){for(var j=Math.max(this.g.length,I.g.length),D=[],$=0;$<j;$++)D[$]=this.i($)^I.i($);return new o(D,this.h^I.h)};function V(I){for(var j=I.g.length+1,D=[],$=0;$<j;$++)D[$]=I.i($)<<1|I.i($-1)>>>31;return new o(D,I.h)}function B(I,j){var D=j>>5;j%=32;for(var $=I.g.length-D,M=[],U=0;U<$;U++)M[U]=0<j?I.i(U+D)>>>j|I.i(U+D+1)<<32-j:I.i(U+D);return new o(M,I.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,Ej=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=m,$s=o}).apply(typeof aT<"u"?aT:typeof self<"u"?self:typeof window<"u"?window:{});var pm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Sj,Pd,Aj,Um,Qx,Tj,Pj,Ij;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(g,A,N){return g==Array.prototype||g==Object.prototype||(g[A]=N.value),g};function r(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof pm=="object"&&pm];for(var A=0;A<g.length;++A){var N=g[A];if(N&&N.Math==Math)return N}throw Error("Cannot find global object")}var n=r(this);function i(g,A){if(A)e:{var N=n;g=g.split(".");for(var L=0;L<g.length-1;L++){var H=g[L];if(!(H in N))break e;N=N[H]}g=g[g.length-1],L=N[g],A=A(L),A!=L&&A!=null&&e(N,g,{configurable:!0,writable:!0,value:A})}}function a(g,A){g instanceof String&&(g+="");var N=0,L=!1,H={next:function(){if(!L&&N<g.length){var Z=N++;return{value:A(Z,g[Z]),done:!1}}return L=!0,{done:!0,value:void 0}}};return H[Symbol.iterator]=function(){return H},H}i("Array.prototype.values",function(g){return g||function(){return a(this,function(A,N){return N})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function u(g){var A=typeof g;return A=A!="object"?A:g?Array.isArray(g)?"array":A:"null",A=="array"||A=="object"&&typeof g.length=="number"}function d(g){var A=typeof g;return A=="object"&&g!=null||A=="function"}function m(g,A,N){return g.call.apply(g.bind,arguments)}function p(g,A,N){if(!g)throw Error();if(2<arguments.length){var L=Array.prototype.slice.call(arguments,2);return function(){var H=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(H,L),g.apply(A,H)}}return function(){return g.apply(A,arguments)}}function v(g,A,N){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:p,v.apply(null,arguments)}function w(g,A){var N=Array.prototype.slice.call(arguments,1);return function(){var L=N.slice();return L.push.apply(L,arguments),g.apply(this,L)}}function b(g,A){function N(){}N.prototype=A.prototype,g.aa=A.prototype,g.prototype=new N,g.prototype.constructor=g,g.Qb=function(L,H,Z){for(var ce=Array(arguments.length-2),at=2;at<arguments.length;at++)ce[at-2]=arguments[at];return A.prototype[H].apply(L,ce)}}function E(g){const A=g.length;if(0<A){const N=Array(A);for(let L=0;L<A;L++)N[L]=g[L];return N}return[]}function S(g,A){for(let N=1;N<arguments.length;N++){const L=arguments[N];if(u(L)){const H=g.length||0,Z=L.length||0;g.length=H+Z;for(let ce=0;ce<Z;ce++)g[H+ce]=L[ce]}else g.push(L)}}class P{constructor(A,N){this.i=A,this.j=N,this.h=0,this.g=null}get(){let A;return 0<this.h?(this.h--,A=this.g,this.g=A.next,A.next=null):A=this.i(),A}}function k(g){return/^[\s\xa0]*$/.test(g)}function C(){var g=c.navigator;return g&&(g=g.userAgent)?g:""}function R(g){return R[" "](g),g}R[" "]=function(){};var V=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function B(g,A,N){for(const L in g)A.call(N,g[L],L,g)}function I(g,A){for(const N in g)A.call(void 0,g[N],N,g)}function j(g){const A={};for(const N in g)A[N]=g[N];return A}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $(g,A){let N,L;for(let H=1;H<arguments.length;H++){L=arguments[H];for(N in L)g[N]=L[N];for(let Z=0;Z<D.length;Z++)N=D[Z],Object.prototype.hasOwnProperty.call(L,N)&&(g[N]=L[N])}}function M(g){var A=1;g=g.split(":");const N=[];for(;0<A&&g.length;)N.push(g.shift()),A--;return g.length&&N.push(g.join(":")),N}function U(g){c.setTimeout(()=>{throw g},0)}function F(){var g=fe;let A=null;return g.g&&(A=g.g,g.g=g.g.next,g.g||(g.h=null),A.next=null),A}class me{constructor(){this.h=this.g=null}add(A,N){const L=Pe.get();L.set(A,N),this.h?this.h.next=L:this.g=L,this.h=L}}var Pe=new P(()=>new De,g=>g.reset());class De{constructor(){this.next=this.g=this.h=null}set(A,N){this.h=A,this.g=N,this.next=null}reset(){this.next=this.g=this.h=null}}let pe,ie=!1,fe=new me,ue=()=>{const g=c.Promise.resolve(void 0);pe=()=>{g.then(W)}};var W=()=>{for(var g;g=F();){try{g.h.call(g.g)}catch(N){U(N)}var A=Pe;A.j(g),100>A.h&&(A.h++,g.next=A.g,A.g=g)}ie=!1};function Y(){this.s=this.s,this.C=this.C}Y.prototype.s=!1,Y.prototype.ma=function(){this.s||(this.s=!0,this.N())},Y.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function he(g,A){this.type=g,this.g=this.target=A,this.defaultPrevented=!1}he.prototype.h=function(){this.defaultPrevented=!0};var Re=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var g=!1,A=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const N=()=>{};c.addEventListener("test",N,A),c.removeEventListener("test",N,A)}catch{}return g}();function Ce(g,A){if(he.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g){var N=this.type=g.type,L=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;if(this.target=g.target||g.srcElement,this.g=A,A=g.relatedTarget){if(V){e:{try{R(A.nodeName);var H=!0;break e}catch{}H=!1}H||(A=null)}}else N=="mouseover"?A=g.fromElement:N=="mouseout"&&(A=g.toElement);this.relatedTarget=A,L?(this.clientX=L.clientX!==void 0?L.clientX:L.pageX,this.clientY=L.clientY!==void 0?L.clientY:L.pageY,this.screenX=L.screenX||0,this.screenY=L.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=typeof g.pointerType=="string"?g.pointerType:Be[g.pointerType]||"",this.state=g.state,this.i=g,g.defaultPrevented&&Ce.aa.h.call(this)}}b(Ce,he);var Be={2:"touch",3:"pen",4:"mouse"};Ce.prototype.h=function(){Ce.aa.h.call(this);var g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var Xe="closure_listenable_"+(1e6*Math.random()|0),Je=0;function oe(g,A,N,L,H){this.listener=g,this.proxy=null,this.src=A,this.type=N,this.capture=!!L,this.ha=H,this.key=++Je,this.da=this.fa=!1}function Ae(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function Fe(g){this.src=g,this.g={},this.h=0}Fe.prototype.add=function(g,A,N,L,H){var Z=g.toString();g=this.g[Z],g||(g=this.g[Z]=[],this.h++);var ce=Pt(g,A,L,H);return-1<ce?(A=g[ce],N||(A.fa=!1)):(A=new oe(A,this.src,Z,!!L,H),A.fa=N,g.push(A)),A};function ae(g,A){var N=A.type;if(N in g.g){var L=g.g[N],H=Array.prototype.indexOf.call(L,A,void 0),Z;(Z=0<=H)&&Array.prototype.splice.call(L,H,1),Z&&(Ae(A),g.g[N].length==0&&(delete g.g[N],g.h--))}}function Pt(g,A,N,L){for(var H=0;H<g.length;++H){var Z=g[H];if(!Z.da&&Z.listener==A&&Z.capture==!!N&&Z.ha==L)return H}return-1}var Ge="closure_lm_"+(1e6*Math.random()|0),Bt={};function Xt(g,A,N,L,H){if(Array.isArray(A)){for(var Z=0;Z<A.length;Z++)Xt(g,A[Z],N,L,H);return null}return N=Eu(N),g&&g[Xe]?g.K(A,N,d(L)?!!L.capture:!1,H):cn(g,A,N,!1,L,H)}function cn(g,A,N,L,H,Z){if(!A)throw Error("Invalid event type");var ce=d(H)?!!H.capture:!!H,at=jl(g);if(at||(g[Ge]=at=new Fe(g)),N=at.add(A,N,L,ce,Z),N.proxy)return N;if(L=po(),N.proxy=L,L.src=g,L.listener=N,g.addEventListener)Re||(H=ce),H===void 0&&(H=!1),g.addEventListener(A.toString(),L,H);else if(g.attachEvent)g.attachEvent(da(A.toString()),L);else if(g.addListener&&g.removeListener)g.addListener(L);else throw Error("addEventListener and attachEvent are unavailable.");return N}function po(){function g(N){return A.call(g.src,g.listener,N)}const A=_u;return g}function kl(g,A,N,L,H){if(Array.isArray(A))for(var Z=0;Z<A.length;Z++)kl(g,A[Z],N,L,H);else L=d(L)?!!L.capture:!!L,N=Eu(N),g&&g[Xe]?(g=g.i,A=String(A).toString(),A in g.g&&(Z=g.g[A],N=Pt(Z,N,L,H),-1<N&&(Ae(Z[N]),Array.prototype.splice.call(Z,N,1),Z.length==0&&(delete g.g[A],g.h--)))):g&&(g=jl(g))&&(A=g.g[A.toString()],g=-1,A&&(g=Pt(A,N,L,H)),(N=-1<g?A[g]:null)&&ua(N))}function ua(g){if(typeof g!="number"&&g&&!g.da){var A=g.src;if(A&&A[Xe])ae(A.i,g);else{var N=g.type,L=g.proxy;A.removeEventListener?A.removeEventListener(N,L,g.capture):A.detachEvent?A.detachEvent(da(N),L):A.addListener&&A.removeListener&&A.removeListener(L),(N=jl(A))?(ae(N,g),N.h==0&&(N.src=null,A[Ge]=null)):Ae(g)}}}function da(g){return g in Bt?Bt[g]:Bt[g]="on"+g}function _u(g,A){if(g.da)g=!0;else{A=new Ce(A,this);var N=g.listener,L=g.ha||g.src;g.fa&&ua(g),g=N.call(L,A)}return g}function jl(g){return g=g[Ge],g instanceof Fe?g:null}var Rl="__closure_events_fn_"+(1e9*Math.random()>>>0);function Eu(g){return typeof g=="function"?g:(g[Rl]||(g[Rl]=function(A){return g.handleEvent(A)}),g[Rl])}function Jt(){Y.call(this),this.i=new Fe(this),this.M=this,this.F=null}b(Jt,Y),Jt.prototype[Xe]=!0,Jt.prototype.removeEventListener=function(g,A,N,L){kl(this,g,A,N,L)};function Zt(g,A){var N,L=g.F;if(L)for(N=[];L;L=L.F)N.push(L);if(g=g.M,L=A.type||A,typeof A=="string")A=new he(A,g);else if(A instanceof he)A.target=A.target||g;else{var H=A;A=new he(L,g),$(A,H)}if(H=!0,N)for(var Z=N.length-1;0<=Z;Z--){var ce=A.g=N[Z];H=fa(ce,L,!0,A)&&H}if(ce=A.g=g,H=fa(ce,L,!0,A)&&H,H=fa(ce,L,!1,A)&&H,N)for(Z=0;Z<N.length;Z++)ce=A.g=N[Z],H=fa(ce,L,!1,A)&&H}Jt.prototype.N=function(){if(Jt.aa.N.call(this),this.i){var g=this.i,A;for(A in g.g){for(var N=g.g[A],L=0;L<N.length;L++)Ae(N[L]);delete g.g[A],g.h--}}this.F=null},Jt.prototype.K=function(g,A,N,L){return this.i.add(String(g),A,!1,N,L)},Jt.prototype.L=function(g,A,N,L){return this.i.add(String(g),A,!0,N,L)};function fa(g,A,N,L){if(A=g.i.g[String(A)],!A)return!0;A=A.concat();for(var H=!0,Z=0;Z<A.length;++Z){var ce=A[Z];if(ce&&!ce.da&&ce.capture==N){var at=ce.listener,er=ce.ha||ce.src;ce.fa&&ae(g.i,ce),H=at.call(er,L)!==!1&&H}}return H&&!L.defaultPrevented}function Su(g,A,N){if(typeof g=="function")N&&(g=v(g,N));else if(g&&typeof g.handleEvent=="function")g=v(g.handleEvent,g);else throw Error("Invalid listener argument");return 2147483647<Number(A)?-1:c.setTimeout(g,A||0)}function rs(g){g.g=Su(()=>{g.g=null,g.i&&(g.i=!1,rs(g))},g.l);const A=g.h;g.h=null,g.m.apply(null,A)}class go extends Y{constructor(A,N){super(),this.m=A,this.l=N,this.h=null,this.i=!1,this.g=null}j(A){this.h=arguments,this.g?this.i=!0:rs(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yo(g){Y.call(this),this.h=g,this.g={}}b(yo,Y);var Au=[];function Tu(g){B(g.g,function(A,N){this.g.hasOwnProperty(N)&&ua(A)},g),g.g={}}yo.prototype.N=function(){yo.aa.N.call(this),Tu(this)},yo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Pu=c.JSON.stringify,Iu=c.JSON.parse,Nu=class{stringify(g){return c.JSON.stringify(g,void 0)}parse(g){return c.JSON.parse(g,void 0)}};function vo(){}vo.prototype.h=null;function Ol(g){return g.h||(g.h=g.i())}function Dl(){}var Cn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ci(){he.call(this,"d")}b(Ci,he);function Ml(){he.call(this,"c")}b(Ml,he);var ki={},Cu=null;function xo(){return Cu=Cu||new Jt}ki.La="serverreachability";function ku(g){he.call(this,ki.La,g)}b(ku,he);function ha(g){const A=xo();Zt(A,new ku(A))}ki.STAT_EVENT="statevent";function ju(g,A){he.call(this,ki.STAT_EVENT,g),this.stat=A}b(ju,he);function Mt(g){const A=xo();Zt(A,new ju(A,g))}ki.Ma="timingevent";function Ll(g,A){he.call(this,ki.Ma,g),this.size=A}b(Ll,he);function ei(g,A){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){g()},A)}function wo(){this.g=!0}wo.prototype.xa=function(){this.g=!1};function bo(g,A,N,L,H,Z){g.info(function(){if(g.g)if(Z)for(var ce="",at=Z.split("&"),er=0;er<at.length;er++){var Ye=at[er].split("=");if(1<Ye.length){var lr=Ye[0];Ye=Ye[1];var zt=lr.split("_");ce=2<=zt.length&&zt[1]=="type"?ce+(lr+"="+Ye+"&"):ce+(lr+"=redacted&")}}else ce=null;else ce=Z;return"XMLHTTP REQ ("+L+") [attempt "+H+"]: "+A+`
`+N+`
`+ce})}function Vl(g,A,N,L,H,Z,ce){g.info(function(){return"XMLHTTP RESP ("+L+") [ attempt "+H+"]: "+A+`
`+N+`
`+Z+" "+ce})}function ti(g,A,N,L){g.info(function(){return"XMLHTTP TEXT ("+A+"): "+fy(g,N)+(L?" "+L:"")})}function Ru(g,A){g.info(function(){return"TIMEOUT: "+A})}wo.prototype.info=function(){};function fy(g,A){if(!g.g)return A;if(!A)return null;try{var N=JSON.parse(A);if(N){for(g=0;g<N.length;g++)if(Array.isArray(N[g])){var L=N[g];if(!(2>L.length)){var H=L[1];if(Array.isArray(H)&&!(1>H.length)){var Z=H[0];if(Z!="noop"&&Z!="stop"&&Z!="close")for(var ce=1;ce<H.length;ce++)H[ce]=""}}}}return Pu(N)}catch{return A}}var Fl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Jf={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ri;function _o(){}b(_o,vo),_o.prototype.g=function(){return new XMLHttpRequest},_o.prototype.i=function(){return{}},ri=new _o;function ni(g,A,N,L){this.j=g,this.i=A,this.l=N,this.R=L||1,this.U=new yo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Zf}function Zf(){this.i=null,this.g="",this.h=!1}var Ou={},$l={};function Ul(g,A,N){g.L=1,g.v=os(dn(A)),g.m=N,g.P=!0,Du(g,null)}function Du(g,A){g.F=Date.now(),ft(g),g.A=dn(g.v);var N=g.A,L=g.R;Array.isArray(L)||(L=[String(L)]),cs(N.i,"t",L),g.C=0,N=g.j.J,g.h=new Zf,g.g=yh(g.j,N?A:null,!g.m),0<g.O&&(g.M=new go(v(g.Y,g,g.g),g.O)),A=g.U,N=g.g,L=g.ca;var H="readystatechange";Array.isArray(H)||(H&&(Au[0]=H.toString()),H=Au);for(var Z=0;Z<H.length;Z++){var ce=Xt(N,H[Z],L||A.handleEvent,!1,A.h||A);if(!ce)break;A.g[ce.key]=ce}A=g.H?j(g.H):{},g.m?(g.u||(g.u="POST"),A["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.A,g.u,g.m,A)):(g.u="GET",g.g.ea(g.A,g.u,null,A)),ha(),bo(g.i,g.u,g.A,g.l,g.R,g.m)}ni.prototype.ca=function(g){g=g.target;const A=this.M;A&&Qr(g)==3?A.j():this.Y(g)},ni.prototype.Y=function(g){try{if(g==this.g)e:{const zt=Qr(this.g);var A=this.g.Ba();const Rn=this.g.Z();if(!(3>zt)&&(zt!=3||this.g&&(this.h.h||this.g.oa()||Uu(this.g)))){this.J||zt!=4||A==7||(A==8||0>=Rn?ha(3):ha(2)),Eo(this);var N=this.g.Z();this.X=N;t:if(eh(this)){var L=Uu(this.g);g="";var H=L.length,Z=Qr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){kn(this),ns(this);var ce="";break t}this.h.i=new c.TextDecoder}for(A=0;A<H;A++)this.h.h=!0,g+=this.h.i.decode(L[A],{stream:!(Z&&A==H-1)});L.length=0,this.h.g+=g,this.C=0,ce=this.h.g}else ce=this.g.oa();if(this.o=N==200,Vl(this.i,this.u,this.A,this.l,this.R,zt,N),this.o){if(this.T&&!this.K){t:{if(this.g){var at,er=this.g;if((at=er.g?er.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(at)){var Ye=at;break t}}Ye=null}if(N=Ye)ti(this.i,this.l,N,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Mu(this,N);else{this.o=!1,this.s=3,Mt(12),kn(this),ns(this);break e}}if(this.P){N=!0;let hn;for(;!this.J&&this.C<ce.length;)if(hn=hy(this,ce),hn==$l){zt==4&&(this.s=4,Mt(14),N=!1),ti(this.i,this.l,null,"[Incomplete Response]");break}else if(hn==Ou){this.s=4,Mt(15),ti(this.i,this.l,ce,"[Invalid Chunk]"),N=!1;break}else ti(this.i,this.l,hn,null),Mu(this,hn);if(eh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),zt!=4||ce.length!=0||this.h.h||(this.s=1,Mt(16),N=!1),this.o=this.o&&N,!N)ti(this.i,this.l,ce,"[Invalid Chunked Response]"),kn(this),ns(this);else if(0<ce.length&&!this.W){this.W=!0;var lr=this.j;lr.g==this&&lr.ba&&!lr.M&&(lr.j.info("Great, no buffering proxy detected. Bytes received: "+ce.length),zu(lr),lr.M=!0,Mt(11))}}else ti(this.i,this.l,ce,null),Mu(this,ce);zt==4&&kn(this),this.o&&!this.J&&(zt==4?Jl(this.j,this):(this.o=!1,ft(this)))}else Hl(this.g),N==400&&0<ce.indexOf("Unknown SID")?(this.s=3,Mt(12)):(this.s=0,Mt(13)),kn(this),ns(this)}}}catch{}finally{}};function eh(g){return g.g?g.u=="GET"&&g.L!=2&&g.j.Ca:!1}function hy(g,A){var N=g.C,L=A.indexOf(`
`,N);return L==-1?$l:(N=Number(A.substring(N,L)),isNaN(N)?Ou:(L+=1,L+N>A.length?$l:(A=A.slice(L,L+N),g.C=L+N,A)))}ni.prototype.cancel=function(){this.J=!0,kn(this)};function ft(g){g.S=Date.now()+g.I,th(g,g.I)}function th(g,A){if(g.B!=null)throw Error("WatchDog timer not null");g.B=ei(v(g.ba,g),A)}function Eo(g){g.B&&(c.clearTimeout(g.B),g.B=null)}ni.prototype.ba=function(){this.B=null;const g=Date.now();0<=g-this.S?(Ru(this.i,this.A),this.L!=2&&(ha(),Mt(17)),kn(this),this.s=2,ns(this)):th(this,this.S-g)};function ns(g){g.j.G==0||g.J||Jl(g.j,g)}function kn(g){Eo(g);var A=g.M;A&&typeof A.ma=="function"&&A.ma(),g.M=null,Tu(g.U),g.g&&(A=g.g,g.g=null,A.abort(),A.ma())}function Mu(g,A){try{var N=g.j;if(N.G!=0&&(N.g==g||Ur(N.h,g))){if(!g.K&&Ur(N.h,g)&&N.G==3){try{var L=N.Da.g.parse(A)}catch{L=null}if(Array.isArray(L)&&L.length==3){var H=L;if(H[0]==0){e:if(!N.u){if(N.g)if(N.g.F+3e3<g.F)Xl(N),li(N);else break e;Ql(N),Mt(18)}}else N.za=H[1],0<N.za-N.T&&37500>H[2]&&N.F&&N.v==0&&!N.C&&(N.C=ei(v(N.Za,N),6e3));if(1>=nh(N.h)&&N.ca){try{N.ca()}catch{}N.ca=void 0}}else va(N,11)}else if((g.K||N.g==g)&&Xl(N),!k(A))for(H=N.Da.g.parse(A),A=0;A<H.length;A++){let Ye=H[A];if(N.T=Ye[0],Ye=Ye[1],N.G==2)if(Ye[0]=="c"){N.K=Ye[1],N.ia=Ye[2];const lr=Ye[3];lr!=null&&(N.la=lr,N.j.info("VER="+N.la));const zt=Ye[4];zt!=null&&(N.Aa=zt,N.j.info("SVER="+N.Aa));const Rn=Ye[5];Rn!=null&&typeof Rn=="number"&&0<Rn&&(L=1.5*Rn,N.L=L,N.j.info("backChannelRequestTimeoutMs_="+L)),L=N;const hn=g.g;if(hn){const Co=hn.g?hn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Co){var Z=L.h;Z.g||Co.indexOf("spdy")==-1&&Co.indexOf("quic")==-1&&Co.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(Lu(Z,Z.h),Z.h=null))}if(L.D){const ec=hn.g?hn.g.getResponseHeader("X-HTTP-Session-Id"):null;ec&&(L.ya=ec,ct(L.I,L.D,ec))}}N.G=3,N.l&&N.l.ua(),N.ba&&(N.R=Date.now()-g.F,N.j.info("Handshake RTT: "+N.R+"ms")),L=N;var ce=g;if(L.qa=gh(L,L.J?L.ia:null,L.W),ce.K){ih(L.h,ce);var at=ce,er=L.L;er&&(at.I=er),at.B&&(Eo(at),ft(at)),L.g=ce}else No(L);0<N.i.length&&Di(N)}else Ye[0]!="stop"&&Ye[0]!="close"||va(N,7);else N.G==3&&(Ye[0]=="stop"||Ye[0]=="close"?Ye[0]=="stop"?va(N,7):xr(N):Ye[0]!="noop"&&N.l&&N.l.ta(Ye),N.v=0)}}ha(4)}catch{}}var rh=class{constructor(g,A){this.g=g,this.map=A}};function So(g){this.l=g||10,c.PerformanceNavigationTiming?(g=c.performance.getEntriesByType("navigation"),g=0<g.length&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function un(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function nh(g){return g.h?1:g.g?g.g.size:0}function Ur(g,A){return g.h?g.h==A:g.g?g.g.has(A):!1}function Lu(g,A){g.g?g.g.add(A):g.h=A}function ih(g,A){g.h&&g.h==A?g.h=null:g.g&&g.g.has(A)&&g.g.delete(A)}So.prototype.cancel=function(){if(this.i=ah(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function ah(g){if(g.h!=null)return g.i.concat(g.h.D);if(g.g!=null&&g.g.size!==0){let A=g.i;for(const N of g.g.values())A=A.concat(N.D);return A}return E(g.i)}function Bl(g){if(g.V&&typeof g.V=="function")return g.V();if(typeof Map<"u"&&g instanceof Map||typeof Set<"u"&&g instanceof Set)return Array.from(g.values());if(typeof g=="string")return g.split("");if(u(g)){for(var A=[],N=g.length,L=0;L<N;L++)A.push(g[L]);return A}A=[],N=0;for(L in g)A[N++]=g[L];return A}function zl(g){if(g.na&&typeof g.na=="function")return g.na();if(!g.V||typeof g.V!="function"){if(typeof Map<"u"&&g instanceof Map)return Array.from(g.keys());if(!(typeof Set<"u"&&g instanceof Set)){if(u(g)||typeof g=="string"){var A=[];g=g.length;for(var N=0;N<g;N++)A.push(N);return A}A=[],N=0;for(const L in g)A[N++]=L;return A}}}function is(g,A){if(g.forEach&&typeof g.forEach=="function")g.forEach(A,void 0);else if(u(g)||typeof g=="string")Array.prototype.forEach.call(g,A,void 0);else for(var N=zl(g),L=Bl(g),H=L.length,Z=0;Z<H;Z++)A.call(void 0,L[Z],N&&N[Z],g)}var Ao=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function my(g,A){if(g){g=g.split("&");for(var N=0;N<g.length;N++){var L=g[N].indexOf("="),H=null;if(0<=L){var Z=g[N].substring(0,L);H=g[N].substring(L+1)}else Z=g[N];A(Z,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function ma(g){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,g instanceof ma){this.h=g.h,To(this,g.j),this.o=g.o,this.g=g.g,as(this,g.s),this.l=g.l;var A=g.i,N=new ji;N.i=A.i,A.g&&(N.g=new Map(A.g),N.h=A.h),ss(this,N),this.m=g.m}else g&&(A=String(g).match(Ao))?(this.h=!1,To(this,A[1]||"",!0),this.o=We(A[2]||""),this.g=We(A[3]||"",!0),as(this,A[4]),this.l=We(A[5]||"",!0),ss(this,A[6]||"",!0),this.m=We(A[7]||"")):(this.h=!1,this.i=new ji(null,this.h))}ma.prototype.toString=function(){var g=[],A=this.j;A&&g.push(ls(A,ql,!0),":");var N=this.g;return(N||A=="file")&&(g.push("//"),(A=this.o)&&g.push(ls(A,ql,!0),"@"),g.push(encodeURIComponent(String(N)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),N=this.s,N!=null&&g.push(":",String(N))),(N=this.l)&&(this.g&&N.charAt(0)!="/"&&g.push("/"),g.push(ls(N,N.charAt(0)=="/"?lh:oh,!0))),(N=this.i.toString())&&g.push("?",N),(N=this.m)&&g.push("#",ls(N,Vu)),g.join("")};function dn(g){return new ma(g)}function To(g,A,N){g.j=N?We(A,!0):A,g.j&&(g.j=g.j.replace(/:$/,""))}function as(g,A){if(A){if(A=Number(A),isNaN(A)||0>A)throw Error("Bad port number "+A);g.s=A}else g.s=null}function ss(g,A,N){A instanceof ji?(g.i=A,Ri(g.i,g.h)):(N||(A=ls(A,ch)),g.i=new ji(A,g.h))}function ct(g,A,N){g.i.set(A,N)}function os(g){return ct(g,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),g}function We(g,A){return g?A?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function ls(g,A,N){return typeof g=="string"?(g=encodeURI(g).replace(A,sh),N&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function sh(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var ql=/[#\/\?@]/g,oh=/[#\?:]/g,lh=/[#\?]/g,ch=/[#\?@]/g,Vu=/#/g;function ji(g,A){this.h=this.g=null,this.i=g||null,this.j=!!A}function vr(g){g.g||(g.g=new Map,g.h=0,g.i&&my(g.i,function(A,N){g.add(decodeURIComponent(A.replace(/\+/g," ")),N)}))}t=ji.prototype,t.add=function(g,A){vr(this),this.i=null,g=jn(this,g);var N=this.g.get(g);return N||this.g.set(g,N=[]),N.push(A),this.h+=1,this};function ii(g,A){vr(g),A=jn(g,A),g.g.has(A)&&(g.i=null,g.h-=g.g.get(A).length,g.g.delete(A))}function ai(g,A){return vr(g),A=jn(g,A),g.g.has(A)}t.forEach=function(g,A){vr(this),this.g.forEach(function(N,L){N.forEach(function(H){g.call(A,H,L,this)},this)},this)},t.na=function(){vr(this);const g=Array.from(this.g.values()),A=Array.from(this.g.keys()),N=[];for(let L=0;L<A.length;L++){const H=g[L];for(let Z=0;Z<H.length;Z++)N.push(A[L])}return N},t.V=function(g){vr(this);let A=[];if(typeof g=="string")ai(this,g)&&(A=A.concat(this.g.get(jn(this,g))));else{g=Array.from(this.g.values());for(let N=0;N<g.length;N++)A=A.concat(g[N])}return A},t.set=function(g,A){return vr(this),this.i=null,g=jn(this,g),ai(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[A]),this.h+=1,this},t.get=function(g,A){return g?(g=this.V(g),0<g.length?String(g[0]):A):A};function cs(g,A,N){ii(g,A),0<N.length&&(g.i=null,g.g.set(jn(g,A),E(N)),g.h+=N.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],A=Array.from(this.g.keys());for(var N=0;N<A.length;N++){var L=A[N];const Z=encodeURIComponent(String(L)),ce=this.V(L);for(L=0;L<ce.length;L++){var H=Z;ce[L]!==""&&(H+="="+encodeURIComponent(String(ce[L]))),g.push(H)}}return this.i=g.join("&")};function jn(g,A){return A=String(A),g.j&&(A=A.toLowerCase()),A}function Ri(g,A){A&&!g.j&&(vr(g),g.i=null,g.g.forEach(function(N,L){var H=L.toLowerCase();L!=H&&(ii(this,L),cs(this,H,N))},g)),g.j=A}function py(g,A){const N=new wo;if(c.Image){const L=new Image;L.onload=w(Yr,N,"TestLoadImage: loaded",!0,A,L),L.onerror=w(Yr,N,"TestLoadImage: error",!1,A,L),L.onabort=w(Yr,N,"TestLoadImage: abort",!1,A,L),L.ontimeout=w(Yr,N,"TestLoadImage: timeout",!1,A,L),c.setTimeout(function(){L.ontimeout&&L.ontimeout()},1e4),L.src=g}else A(!1)}function uh(g,A){const N=new wo,L=new AbortController,H=setTimeout(()=>{L.abort(),Yr(N,"TestPingServer: timeout",!1,A)},1e4);fetch(g,{signal:L.signal}).then(Z=>{clearTimeout(H),Z.ok?Yr(N,"TestPingServer: ok",!0,A):Yr(N,"TestPingServer: server error",!1,A)}).catch(()=>{clearTimeout(H),Yr(N,"TestPingServer: error",!1,A)})}function Yr(g,A,N,L,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),L(N)}catch{}}function gy(){this.g=new Nu}function dh(g,A,N){const L=N||"";try{is(g,function(H,Z){let ce=H;d(H)&&(ce=Pu(H)),A.push(L+Z+"="+encodeURIComponent(ce))})}catch(H){throw A.push(L+"type="+encodeURIComponent("_badmap")),H}}function pa(g){this.l=g.Ub||null,this.j=g.eb||!1}b(pa,vo),pa.prototype.g=function(){return new Po(this.l,this.j)},pa.prototype.i=function(g){return function(){return g}}({});function Po(g,A){Jt.call(this),this.D=g,this.o=A,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(Po,Jt),t=Po.prototype,t.open=function(g,A){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=g,this.A=A,this.readyState=1,oi(this)},t.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const A={headers:this.u,method:this.B,credentials:this.m,cache:void 0};g&&(A.body=g),(this.D||c).fetch(new Request(this.A,A)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,si(this)),this.readyState=0},t.Sa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,oi(this)),this.g&&(this.readyState=3,oi(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;fh(this)}else g.text().then(this.Ra.bind(this),this.ga.bind(this))};function fh(g){g.j.read().then(g.Pa.bind(g)).catch(g.ga.bind(g))}t.Pa=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var A=g.value?g.value:new Uint8Array(0);(A=this.v.decode(A,{stream:!g.done}))&&(this.response=this.responseText+=A)}g.done?si(this):oi(this),this.readyState==3&&fh(this)}},t.Ra=function(g){this.g&&(this.response=this.responseText=g,si(this))},t.Qa=function(g){this.g&&(this.response=g,si(this))},t.ga=function(){this.g&&si(this)};function si(g){g.readyState=4,g.l=null,g.j=null,g.v=null,oi(g)}t.setRequestHeader=function(g,A){this.u.append(g,A)},t.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],A=this.h.entries();for(var N=A.next();!N.done;)N=N.value,g.push(N[0]+": "+N[1]),N=A.next();return g.join(`\r
`)};function oi(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(Po.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function ga(g){let A="";return B(g,function(N,L){A+=L,A+=":",A+=N,A+=`\r
`}),A}function us(g,A,N){e:{for(L in N){var L=!1;break e}L=!0}L||(N=ga(N),typeof g=="string"?N!=null&&encodeURIComponent(String(N)):ct(g,A,N))}function Et(g){Jt.call(this),this.headers=new Map,this.o=g||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Et,Jt);var yy=/^https?$/i,Fu=["POST","PUT"];t=Et.prototype,t.Ha=function(g){this.J=g},t.ea=function(g,A,N,L){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);A=A?A.toUpperCase():"GET",this.D=g,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ri.g(),this.v=this.o?Ol(this.o):Ol(ri),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(A,String(g),!0),this.B=!1}catch(Z){Io(this,Z);return}if(g=N||"",N=new Map(this.headers),L)if(Object.getPrototypeOf(L)===Object.prototype)for(var H in L)N.set(H,L[H]);else if(typeof L.keys=="function"&&typeof L.get=="function")for(const Z of L.keys())N.set(Z,L.get(Z));else throw Error("Unknown input type for opt_headers: "+String(L));L=Array.from(N.keys()).find(Z=>Z.toLowerCase()=="content-type"),H=c.FormData&&g instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Fu,A,void 0))||L||H||N.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,ce]of N)this.g.setRequestHeader(Z,ce);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Wl(this),this.u=!0,this.g.send(g),this.u=!1}catch(Z){Io(this,Z)}};function Io(g,A){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=A,g.m=5,Kl(g),fn(g)}function Kl(g){g.A||(g.A=!0,Zt(g,"complete"),Zt(g,"error"))}t.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=g||7,Zt(this,"complete"),Zt(this,"abort"),fn(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),fn(this,!0)),Et.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?$u(this):this.bb())},t.bb=function(){$u(this)};function $u(g){if(g.h&&typeof o<"u"&&(!g.v[1]||Qr(g)!=4||g.Z()!=2)){if(g.u&&Qr(g)==4)Su(g.Ea,0,g);else if(Zt(g,"readystatechange"),Qr(g)==4){g.h=!1;try{const ce=g.Z();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var A=!0;break e;default:A=!1}var N;if(!(N=A)){var L;if(L=ce===0){var H=String(g.D).match(Ao)[1]||null;!H&&c.self&&c.self.location&&(H=c.self.location.protocol.slice(0,-1)),L=!yy.test(H?H.toLowerCase():"")}N=L}if(N)Zt(g,"complete"),Zt(g,"success");else{g.m=6;try{var Z=2<Qr(g)?g.g.statusText:""}catch{Z=""}g.l=Z+" ["+g.Z()+"]",Kl(g)}}finally{fn(g)}}}}function fn(g,A){if(g.g){Wl(g);const N=g.g,L=g.v[0]?()=>{}:null;g.g=null,g.v=null,A||Zt(g,"ready");try{N.onreadystatechange=L}catch{}}}function Wl(g){g.I&&(c.clearTimeout(g.I),g.I=null)}t.isActive=function(){return!!this.g};function Qr(g){return g.g?g.g.readyState:0}t.Z=function(){try{return 2<Qr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(g){if(this.g){var A=this.g.responseText;return g&&A.indexOf(g)==0&&(A=A.substring(g.length)),Iu(A)}};function Uu(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.H){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function Hl(g){const A={};g=(g.g&&2<=Qr(g)&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let L=0;L<g.length;L++){if(k(g[L]))continue;var N=M(g[L]);const H=N[0];if(N=N[1],typeof N!="string")continue;N=N.trim();const Z=A[H]||[];A[H]=Z,Z.push(N)}I(A,function(L){return L.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Oi(g,A,N){return N&&N.internalChannelParams&&N.internalChannelParams[g]||A}function Bu(g){this.Aa=0,this.i=[],this.j=new wo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Oi("failFast",!1,g),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Oi("baseRetryDelayMs",5e3,g),this.cb=Oi("retryDelaySeedMs",1e4,g),this.Wa=Oi("forwardChannelMaxRetries",2,g),this.wa=Oi("forwardChannelRequestTimeoutMs",2e4,g),this.pa=g&&g.xmlHttpFactory||void 0,this.Xa=g&&g.Tb||void 0,this.Ca=g&&g.useFetchStreams||!1,this.L=void 0,this.J=g&&g.supportsCrossDomainXhr||!1,this.K="",this.h=new So(g&&g.concurrentRequestLimit),this.Da=new gy,this.P=g&&g.fastHandshake||!1,this.O=g&&g.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=g&&g.Rb||!1,g&&g.xa&&this.j.xa(),g&&g.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&g&&g.detectBufferingProxy||!1,this.ja=void 0,g&&g.longPollingTimeout&&0<g.longPollingTimeout&&(this.ja=g.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Bu.prototype,t.la=8,t.G=1,t.connect=function(g,A,N,L){Mt(0),this.W=g,this.H=A||{},N&&L!==void 0&&(this.H.OSID=N,this.H.OAID=L),this.F=this.X,this.I=gh(this,null,this.W),Di(this)};function xr(g){if(Gl(g),g.G==3){var A=g.U++,N=dn(g.I);if(ct(N,"SID",g.K),ct(N,"RID",A),ct(N,"TYPE","terminate"),ya(g,N),A=new ni(g,g.j,A),A.L=2,A.v=os(dn(N)),N=!1,c.navigator&&c.navigator.sendBeacon)try{N=c.navigator.sendBeacon(A.v.toString(),"")}catch{}!N&&c.Image&&(new Image().src=A.v,N=!0),N||(A.g=yh(A.j,null),A.g.ea(A.v)),A.F=Date.now(),ft(A)}ph(g)}function li(g){g.g&&(zu(g),g.g.cancel(),g.g=null)}function Gl(g){li(g),g.u&&(c.clearTimeout(g.u),g.u=null),Xl(g),g.h.cancel(),g.s&&(typeof g.s=="number"&&c.clearTimeout(g.s),g.s=null)}function Di(g){if(!un(g.h)&&!g.s){g.s=!0;var A=g.Ga;pe||ue(),ie||(pe(),ie=!0),fe.add(A,g),g.B=0}}function vy(g,A){return nh(g.h)>=g.h.j-(g.s?1:0)?!1:g.s?(g.i=A.D.concat(g.i),!0):g.G==1||g.G==2||g.B>=(g.Va?0:g.Wa)?!1:(g.s=ei(v(g.Ga,g,A),mh(g,g.B)),g.B++,!0)}t.Ga=function(g){if(this.s)if(this.s=null,this.G==1){if(!g){this.U=Math.floor(1e5*Math.random()),g=this.U++;const H=new ni(this,this.j,g);let Z=this.o;if(this.S&&(Z?(Z=j(Z),$(Z,this.S)):Z=this.S),this.m!==null||this.O||(H.H=Z,Z=null),this.P)e:{for(var A=0,N=0;N<this.i.length;N++){t:{var L=this.i[N];if("__data__"in L.map&&(L=L.map.__data__,typeof L=="string")){L=L.length;break t}L=void 0}if(L===void 0)break;if(A+=L,4096<A){A=N;break e}if(A===4096||N===this.i.length-1){A=N+1;break e}}A=1e3}else A=1e3;A=ds(this,H,A),N=dn(this.I),ct(N,"RID",g),ct(N,"CVER",22),this.D&&ct(N,"X-HTTP-Session-Id",this.D),ya(this,N),Z&&(this.O?A="headers="+encodeURIComponent(String(ga(Z)))+"&"+A:this.m&&us(N,this.m,Z)),Lu(this.h,H),this.Ua&&ct(N,"TYPE","init"),this.P?(ct(N,"$req",A),ct(N,"SID","null"),H.T=!0,Ul(H,N,null)):Ul(H,N,A),this.G=2}}else this.G==3&&(g?Yl(this,g):this.i.length==0||un(this.h)||Yl(this))};function Yl(g,A){var N;A?N=A.l:N=g.U++;const L=dn(g.I);ct(L,"SID",g.K),ct(L,"RID",N),ct(L,"AID",g.T),ya(g,L),g.m&&g.o&&us(L,g.m,g.o),N=new ni(g,g.j,N,g.B+1),g.m===null&&(N.H=g.o),A&&(g.i=A.D.concat(g.i)),A=ds(g,N,1e3),N.I=Math.round(.5*g.wa)+Math.round(.5*g.wa*Math.random()),Lu(g.h,N),Ul(N,L,A)}function ya(g,A){g.H&&B(g.H,function(N,L){ct(A,L,N)}),g.l&&is({},function(N,L){ct(A,L,N)})}function ds(g,A,N){N=Math.min(g.i.length,N);var L=g.l?v(g.l.Na,g.l,g):null;e:{var H=g.i;let Z=-1;for(;;){const ce=["count="+N];Z==-1?0<N?(Z=H[0].g,ce.push("ofs="+Z)):Z=0:ce.push("ofs="+Z);let at=!0;for(let er=0;er<N;er++){let Ye=H[er].g;const lr=H[er].map;if(Ye-=Z,0>Ye)Z=Math.max(0,H[er].g-100),at=!1;else try{dh(lr,ce,"req"+Ye+"_")}catch{L&&L(lr)}}if(at){L=ce.join("&");break e}}}return g=g.i.splice(0,N),A.D=g,L}function No(g){if(!g.g&&!g.u){g.Y=1;var A=g.Fa;pe||ue(),ie||(pe(),ie=!0),fe.add(A,g),g.v=0}}function Ql(g){return g.g||g.u||3<=g.v?!1:(g.Y++,g.u=ei(v(g.Fa,g),mh(g,g.v)),g.v++,!0)}t.Fa=function(){if(this.u=null,hh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var g=2*this.R;this.j.info("BP detection timer enabled: "+g),this.A=ei(v(this.ab,this),g)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Mt(10),li(this),hh(this))};function zu(g){g.A!=null&&(c.clearTimeout(g.A),g.A=null)}function hh(g){g.g=new ni(g,g.j,"rpc",g.Y),g.m===null&&(g.g.H=g.o),g.g.O=0;var A=dn(g.qa);ct(A,"RID","rpc"),ct(A,"SID",g.K),ct(A,"AID",g.T),ct(A,"CI",g.F?"0":"1"),!g.F&&g.ja&&ct(A,"TO",g.ja),ct(A,"TYPE","xmlhttp"),ya(g,A),g.m&&g.o&&us(A,g.m,g.o),g.L&&(g.g.I=g.L);var N=g.g;g=g.ia,N.L=1,N.v=os(dn(A)),N.m=null,N.P=!0,Du(N,g)}t.Za=function(){this.C!=null&&(this.C=null,li(this),Ql(this),Mt(19))};function Xl(g){g.C!=null&&(c.clearTimeout(g.C),g.C=null)}function Jl(g,A){var N=null;if(g.g==A){Xl(g),zu(g),g.g=null;var L=2}else if(Ur(g.h,A))N=A.D,ih(g.h,A),L=1;else return;if(g.G!=0){if(A.o)if(L==1){N=A.m?A.m.length:0,A=Date.now()-A.F;var H=g.B;L=xo(),Zt(L,new Ll(L,N)),Di(g)}else No(g);else if(H=A.s,H==3||H==0&&0<A.X||!(L==1&&vy(g,A)||L==2&&Ql(g)))switch(N&&0<N.length&&(A=g.h,A.i=A.i.concat(N)),H){case 1:va(g,5);break;case 4:va(g,10);break;case 3:va(g,6);break;default:va(g,2)}}}function mh(g,A){let N=g.Ta+Math.floor(Math.random()*g.cb);return g.isActive()||(N*=2),N*A}function va(g,A){if(g.j.info("Error code "+A),A==2){var N=v(g.fb,g),L=g.Xa;const H=!L;L=new ma(L||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||To(L,"https"),os(L),H?py(L.toString(),N):uh(L.toString(),N)}else Mt(2);g.G=0,g.l&&g.l.sa(A),ph(g),Gl(g)}t.fb=function(g){g?(this.j.info("Successfully pinged google.com"),Mt(2)):(this.j.info("Failed to ping google.com"),Mt(1))};function ph(g){if(g.G=0,g.ka=[],g.l){const A=ah(g.h);(A.length!=0||g.i.length!=0)&&(S(g.ka,A),S(g.ka,g.i),g.h.i.length=0,E(g.i),g.i.length=0),g.l.ra()}}function gh(g,A,N){var L=N instanceof ma?dn(N):new ma(N);if(L.g!="")A&&(L.g=A+"."+L.g),as(L,L.s);else{var H=c.location;L=H.protocol,A=A?A+"."+H.hostname:H.hostname,H=+H.port;var Z=new ma(null);L&&To(Z,L),A&&(Z.g=A),H&&as(Z,H),N&&(Z.l=N),L=Z}return N=g.D,A=g.ya,N&&A&&ct(L,N,A),ct(L,"VER",g.la),ya(g,L),L}function yh(g,A,N){if(A&&!g.J)throw Error("Can't create secondary domain capable XhrIo object.");return A=g.Ca&&!g.pa?new Et(new pa({eb:N})):new Et(g.pa),A.Ha(g.J),A}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function qu(){}t=qu.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Zl(){}Zl.prototype.g=function(g,A){return new Br(g,A)};function Br(g,A){Jt.call(this),this.g=new Bu(A),this.l=g,this.h=A&&A.messageUrlParams||null,g=A&&A.messageHeaders||null,A&&A.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=A&&A.initMessageHeaders||null,A&&A.messageContentType&&(g?g["X-WebChannel-Content-Type"]=A.messageContentType:g={"X-WebChannel-Content-Type":A.messageContentType}),A&&A.va&&(g?g["X-WebChannel-Client-Profile"]=A.va:g={"X-WebChannel-Client-Profile":A.va}),this.g.S=g,(g=A&&A.Sb)&&!k(g)&&(this.g.m=g),this.v=A&&A.supportsCrossDomainXhr||!1,this.u=A&&A.sendRawJson||!1,(A=A&&A.httpSessionIdParam)&&!k(A)&&(this.g.D=A,g=this.h,g!==null&&A in g&&(g=this.h,A in g&&delete g[A])),this.j=new Mi(this)}b(Br,Jt),Br.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Br.prototype.close=function(){xr(this.g)},Br.prototype.o=function(g){var A=this.g;if(typeof g=="string"){var N={};N.__data__=g,g=N}else this.u&&(N={},N.__data__=Pu(g),g=N);A.i.push(new rh(A.Ya++,g)),A.G==3&&Di(A)},Br.prototype.N=function(){this.g.l=null,delete this.j,xr(this.g),delete this.g,Br.aa.N.call(this)};function vh(g){Ci.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var A=g.__sm__;if(A){e:{for(const N in A){g=N;break e}g=void 0}(this.i=g)&&(g=this.i,A=A!==null&&g in A?A[g]:void 0),this.data=A}else this.data=g}b(vh,Ci);function xh(){Ml.call(this),this.status=1}b(xh,Ml);function Mi(g){this.g=g}b(Mi,qu),Mi.prototype.ua=function(){Zt(this.g,"a")},Mi.prototype.ta=function(g){Zt(this.g,new vh(g))},Mi.prototype.sa=function(g){Zt(this.g,new xh)},Mi.prototype.ra=function(){Zt(this.g,"b")},Zl.prototype.createWebChannel=Zl.prototype.g,Br.prototype.send=Br.prototype.o,Br.prototype.open=Br.prototype.m,Br.prototype.close=Br.prototype.close,Ij=function(){return new Zl},Pj=function(){return xo()},Tj=ki,Qx={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Fl.NO_ERROR=0,Fl.TIMEOUT=8,Fl.HTTP_ERROR=6,Um=Fl,Jf.COMPLETE="complete",Aj=Jf,Dl.EventType=Cn,Cn.OPEN="a",Cn.CLOSE="b",Cn.ERROR="c",Cn.MESSAGE="d",Jt.prototype.listen=Jt.prototype.K,Pd=Dl,Et.prototype.listenOnce=Et.prototype.L,Et.prototype.getLastError=Et.prototype.Ka,Et.prototype.getLastErrorCode=Et.prototype.Ba,Et.prototype.getStatus=Et.prototype.Z,Et.prototype.getResponseJson=Et.prototype.Oa,Et.prototype.getResponseText=Et.prototype.oa,Et.prototype.send=Et.prototype.ea,Et.prototype.setWithCredentials=Et.prototype.Ha,Sj=Et}).apply(typeof pm<"u"?pm:typeof self<"u"?self:typeof window<"u"?window:{});const sT="@firebase/firestore",oT="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dr=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Dr.UNAUTHENTICATED=new Dr(null),Dr.GOOGLE_CREDENTIALS=new Dr("google-credentials-uid"),Dr.FIRST_PARTY=new Dr("first-party-uid"),Dr.MOCK_USER=new Dr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ou="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dl=new vb("@firebase/firestore");function Ec(){return dl.logLevel}function ye(t,...e){if(dl.logLevel<=ze.DEBUG){const r=e.map(Ib);dl.debug(`Firestore (${ou}): ${t}`,...r)}}function qa(t,...e){if(dl.logLevel<=ze.ERROR){const r=e.map(Ib);dl.error(`Firestore (${ou}): ${t}`,...r)}}function Lc(t,...e){if(dl.logLevel<=ze.WARN){const r=e.map(Ib);dl.warn(`Firestore (${ou}): ${t}`,...r)}}function Ib(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function je(t,e,r){let n="Unexpected state";typeof e=="string"?n=e:r=e,Nj(t,n,r)}function Nj(t,e,r){let n=`FIRESTORE (${ou}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw qa(n),new Error(n)}function it(t,e,r,n){let i="Unexpected state";typeof r=="string"?i=r:n=r,t||Nj(e,i,n)}function Ve(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends la{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cj{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class j${getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Dr.UNAUTHENTICATED))}shutdown(){}}class R${constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class O${constructor(e){this.t=e,this.currentUser=Dr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){it(this.o===void 0,42304);let n=this.i;const i=u=>this.i!==n?(n=this.i,r(u)):Promise.resolve();let a=new La;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new La,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=a;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},c=u=>{ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new La)}},0),o()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(it(typeof n.accessToken=="string",31837,{l:n}),new Cj(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return it(e===null||typeof e=="string",2055,{h:e}),new Dr(e)}}class D${constructor(e,r,n){this.P=e,this.T=r,this.I=n,this.type="FirstParty",this.user=Dr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class M${constructor(e,r,n){this.P=e,this.T=r,this.I=n}getToken(){return Promise.resolve(new D$(this.P,this.T,this.I))}start(e,r){e.enqueueRetryable(()=>r(Dr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class lT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class L${constructor(e,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,sn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,r){it(this.o===void 0,3512);const n=a=>{a.error!=null&&ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.m;return this.m=a.token,ye("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>n(a))};const i=a=>{ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new lT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(it(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new lT(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V$(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const i=V$(40);for(let a=0;a<i.length;++a)n.length<20&&i[a]<r&&(n+=e.charAt(i[a]%62))}return n}}function qe(t,e){return t<e?-1:t>e?1:0}function Xx(t,e){const r=Math.min(t.length,e.length);for(let n=0;n<r;n++){const i=t.charAt(n),a=e.charAt(n);if(i!==a)return Jv(i)===Jv(a)?qe(i,a):Jv(i)?1:-1}return qe(t.length,e.length)}const F$=55296,$$=57343;function Jv(t){const e=t.charCodeAt(0);return e>=F$&&e<=$$}function Vc(t,e,r){return t.length===e.length&&t.every((n,i)=>r(n,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT="__name__";class Bi{constructor(e,r,n){r===void 0?r=0:r>e.length&&je(637,{offset:r,range:e.length}),n===void 0?n=e.length-r:n>e.length-r&&je(1746,{length:n,range:e.length-r}),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return Bi.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Bi?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let i=0;i<n;i++){const a=Bi.compareSegments(e.get(i),r.get(i));if(a!==0)return a}return qe(e.length,r.length)}static compareSegments(e,r){const n=Bi.isNumericId(e),i=Bi.isNumericId(r);return n&&!i?-1:!n&&i?1:n&&i?Bi.extractNumericId(e).compare(Bi.extractNumericId(r)):Xx(e,r)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return $s.fromString(e.substring(4,e.length-2))}}class pt extends Bi{construct(e,r,n){return new pt(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new de(ee.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(i=>i.length>0))}return new pt(r)}static emptyPath(){return new pt([])}}const U$=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ar extends Bi{construct(e,r,n){return new Ar(e,r,n)}static isValidIdentifier(e){return U$.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ar.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===cT}static keyField(){return new Ar([cT])}static fromServerFormat(e){const r=[];let n="",i=0;const a=()=>{if(n.length===0)throw new de(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let o=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new de(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new de(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=u,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(n+=c,i++):(a(),i++)}if(a(),o)throw new de(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ar(r)}static emptyPath(){return new Ar([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.path=e}static fromPath(e){return new Te(pt.fromString(e))}static fromName(e){return new Te(pt.fromString(e).popFirst(5))}static empty(){return new Te(pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return pt.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new pt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kj(t,e,r){if(!r)throw new de(ee.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function B$(t,e,r,n){if(e===!0&&n===!0)throw new de(ee.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function uT(t){if(!Te.isDocumentKey(t))throw new de(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function dT(t){if(Te.isDocumentKey(t))throw new de(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function jj(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function ag(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":je(12329,{type:typeof t})}function Hn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new de(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=ag(t);throw new de(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function z$(t,e){if(e<=0)throw new de(ee.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(t,e){const r={typeString:t};return e&&(r.value=e),r}function Nf(t,e){if(!jj(t))throw new de(ee.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in e)if(e[n]){const i=e[n].typeString,a="value"in e[n]?{value:e[n].value}:void 0;if(!(n in t)){r=`JSON missing required field: '${n}'`;break}const o=t[n];if(i&&typeof o!==i){r=`JSON field '${n}' must be a ${i}.`;break}if(a!==void 0&&o!==a.value){r=`Expected '${n}' field to equal '${a.value}'`;break}}if(r)throw new de(ee.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT=-62135596800,hT=1e6;class bt{static now(){return bt.fromMillis(Date.now())}static fromDate(e){return bt.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor((e-1e3*r)*hT);return new bt(r,n)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new de(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new de(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<fT)throw new de(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/hT}_compareTo(e){return this.seconds===e.seconds?qe(this.nanoseconds,e.nanoseconds):qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:bt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Nf(e,bt._jsonSchema))return new bt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-fT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}bt._jsonSchemaVersion="firestore/timestamp/1.0",bt._jsonSchema={type:Gt("string",bt._jsonSchemaVersion),seconds:Gt("number"),nanoseconds:Gt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{static fromTimestamp(e){return new Me(e)}static min(){return new Me(new bt(0,0))}static max(){return new Me(new bt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wd=-1;function q$(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,i=Me.fromTimestamp(n===1e9?new bt(r+1,0):new bt(r,n));return new Ks(i,Te.empty(),e)}function K$(t){return new Ks(t.readTime,t.key,Wd)}class Ks{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new Ks(Me.min(),Te.empty(),Wd)}static max(){return new Ks(Me.max(),Te.empty(),Wd)}}function W$(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=Te.comparator(t.documentKey,e.documentKey),r!==0?r:qe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H$="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class G${constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lu(t){if(t.code!==ee.FAILED_PRECONDITION||t.message!==H$)throw t;ye("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&je(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new te((n,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(n,i)},this.catchCallback=a=>{this.wrapFailure(r,a).next(n,i)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof te?r:te.resolve(r)}catch(r){return te.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):te.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):te.reject(r)}static resolve(e){return new te((r,n)=>{r(e)})}static reject(e){return new te((r,n)=>{n(e)})}static waitFor(e){return new te((r,n)=>{let i=0,a=0,o=!1;e.forEach(c=>{++i,c.next(()=>{++a,o&&a===i&&r()},u=>n(u))}),o=!0,a===i&&r()})}static or(e){let r=te.resolve(!1);for(const n of e)r=r.next(i=>i?te.resolve(i):n());return r}static forEach(e,r){const n=[];return e.forEach((i,a)=>{n.push(r.call(this,i,a))}),this.waitFor(n)}static mapArray(e,r){return new te((n,i)=>{const a=e.length,o=new Array(a);let c=0;for(let u=0;u<a;u++){const d=u;r(e[d]).next(m=>{o[d]=m,++c,c===a&&n(o)},m=>i(m))}})}static doWhile(e,r){return new te((n,i)=>{const a=()=>{e()===!0?r().next(()=>{a()},i):n()};a()})}}function Y$(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function cu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>r.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}sg.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cb=-1;function og(t){return t==null}function np(t){return t===0&&1/t==-1/0}function Q$(t){return typeof t=="number"&&Number.isInteger(t)&&!np(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rj="";function X$(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=mT(e)),e=J$(t.get(r),e);return mT(e)}function J$(t,e){let r=e;const n=t.length;for(let i=0;i<n;i++){const a=t.charAt(i);switch(a){case"\0":r+="";break;case Rj:r+="";break;default:r+=a}}return r}function mT(t){return t+Rj+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pT(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function io(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function Oj(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e,r){this.comparator=e,this.root=r||Er.EMPTY}insert(e,r){return new kt(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Er.BLACK,null,null))}remove(e){return new kt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Er.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return r+n.left.size;i<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new gm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new gm(this.root,e,this.comparator,!1)}getReverseIterator(){return new gm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new gm(this.root,e,this.comparator,!0)}}class gm{constructor(e,r,n,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=r?n(e.key,r):1,r&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Er{constructor(e,r,n,i,a){this.key=e,this.value=r,this.color=n??Er.RED,this.left=i??Er.EMPTY,this.right=a??Er.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,i,a){return new Er(e??this.key,r??this.value,n??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let i=this;const a=n(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,r,n),null):a===0?i.copy(null,r,null,null,null):i.copy(null,null,null,null,i.right.insert(e,r,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Er.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,i=this;if(r(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),r(e,i.key)===0){if(i.right.isEmpty())return Er.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Er.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Er.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw je(43730,{key:this.key,value:this.value});if(this.right.isRed())throw je(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw je(27949);return e+(this.isRed()?0:1)}}Er.EMPTY=null,Er.RED=!0,Er.BLACK=!1;Er.EMPTY=new class{constructor(){this.size=0}get key(){throw je(57766)}get value(){throw je(16141)}get color(){throw je(16727)}get left(){throw je(29726)}get right(){throw je(36894)}copy(e,r,n,i,a){return this}insert(e,r,n){return new Er(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e){this.comparator=e,this.data=new kt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;r(i.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new gT(this.data.getIterator())}getIteratorFrom(e){return new gT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof ir)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const i=r.getNext().key,a=n.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new ir(this.comparator);return r.data=e,r}}class gT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.fields=e,e.sort(Ar.comparator)}static empty(){return new Sn([])}unionWith(e){let r=new ir(Ar.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new Sn(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Vc(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Dj("Invalid base64 string: "+a):a}}(e);return new Pr(r)}static fromUint8Array(e){const r=function(i){let a="";for(let o=0;o<i.length;++o)a+=String.fromCharCode(i[o]);return a}(e);return new Pr(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pr.EMPTY_BYTE_STRING=new Pr("");const Z$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ws(t){if(it(!!t,39018),typeof t=="string"){let e=0;const r=Z$.exec(t);if(it(!!r,46558,{timestamp:t}),r[1]){let i=r[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Vt(t.seconds),nanos:Vt(t.nanos)}}function Vt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Hs(t){return typeof t=="string"?Pr.fromBase64String(t):Pr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mj="server_timestamp",Lj="__type__",Vj="__previous_value__",Fj="__local_write_time__";function kb(t){return(t?.mapValue?.fields||{})[Lj]?.stringValue===Mj}function lg(t){const e=t.mapValue.fields[Vj];return kb(e)?lg(e):e}function Hd(t){const e=Ws(t.mapValue.fields[Fj].timestampValue);return new bt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eU{constructor(e,r,n,i,a,o,c,u,d,m){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=m}}const ip="(default)";class Gd{constructor(e,r){this.projectId=e,this.database=r||ip}static empty(){return new Gd("","")}get isDefaultDatabase(){return this.database===ip}isEqual(e){return e instanceof Gd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $j="__type__",tU="__max__",ym={mapValue:{}},Uj="__vector__",ap="value";function Gs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?kb(t)?4:nU(t)?9007199254740991:rU(t)?10:11:je(28295,{value:t})}function Zi(t,e){if(t===e)return!0;const r=Gs(t);if(r!==Gs(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Hd(t).isEqual(Hd(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const o=Ws(i.timestampValue),c=Ws(a.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,a){return Hs(i.bytesValue).isEqual(Hs(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,a){return Vt(i.geoPointValue.latitude)===Vt(a.geoPointValue.latitude)&&Vt(i.geoPointValue.longitude)===Vt(a.geoPointValue.longitude)}(t,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return Vt(i.integerValue)===Vt(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const o=Vt(i.doubleValue),c=Vt(a.doubleValue);return o===c?np(o)===np(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return Vc(t.arrayValue.values||[],e.arrayValue.values||[],Zi);case 10:case 11:return function(i,a){const o=i.mapValue.fields||{},c=a.mapValue.fields||{};if(pT(o)!==pT(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!Zi(o[u],c[u])))return!1;return!0}(t,e);default:return je(52216,{left:t})}}function Yd(t,e){return(t.values||[]).find(r=>Zi(r,e))!==void 0}function Fc(t,e){if(t===e)return 0;const r=Gs(t),n=Gs(e);if(r!==n)return qe(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return qe(t.booleanValue,e.booleanValue);case 2:return function(a,o){const c=Vt(a.integerValue||a.doubleValue),u=Vt(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return yT(t.timestampValue,e.timestampValue);case 4:return yT(Hd(t),Hd(e));case 5:return Xx(t.stringValue,e.stringValue);case 6:return function(a,o){const c=Hs(a),u=Hs(o);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(a,o){const c=a.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){const m=qe(c[d],u[d]);if(m!==0)return m}return qe(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,o){const c=qe(Vt(a.latitude),Vt(o.latitude));return c!==0?c:qe(Vt(a.longitude),Vt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return vT(t.arrayValue,e.arrayValue);case 10:return function(a,o){const c=a.fields||{},u=o.fields||{},d=c[ap]?.arrayValue,m=u[ap]?.arrayValue,p=qe(d?.values?.length||0,m?.values?.length||0);return p!==0?p:vT(d,m)}(t.mapValue,e.mapValue);case 11:return function(a,o){if(a===ym.mapValue&&o===ym.mapValue)return 0;if(a===ym.mapValue)return 1;if(o===ym.mapValue)return-1;const c=a.fields||{},u=Object.keys(c),d=o.fields||{},m=Object.keys(d);u.sort(),m.sort();for(let p=0;p<u.length&&p<m.length;++p){const v=Xx(u[p],m[p]);if(v!==0)return v;const w=Fc(c[u[p]],d[m[p]]);if(w!==0)return w}return qe(u.length,m.length)}(t.mapValue,e.mapValue);default:throw je(23264,{he:r})}}function yT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return qe(t,e);const r=Ws(t),n=Ws(e),i=qe(r.seconds,n.seconds);return i!==0?i:qe(r.nanos,n.nanos)}function vT(t,e){const r=t.values||[],n=e.values||[];for(let i=0;i<r.length&&i<n.length;++i){const a=Fc(r[i],n[i]);if(a)return a}return qe(r.length,n.length)}function $c(t){return Jx(t)}function Jx(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=Ws(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return Hs(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return Te.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",i=!0;for(const a of r.values||[])i?i=!1:n+=",",n+=Jx(a);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let i="{",a=!0;for(const o of n)a?a=!1:i+=",",i+=`${o}:${Jx(r.fields[o])}`;return i+"}"}(t.mapValue):je(61005,{value:t})}function Bm(t){switch(Gs(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=lg(t);return e?16+Bm(e):16;case 5:return 2*t.stringValue.length;case 6:return Hs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((i,a)=>i+Bm(a),0)}(t.arrayValue);case 10:case 11:return function(n){let i=0;return io(n.fields,(a,o)=>{i+=a.length+Bm(o)}),i}(t.mapValue);default:throw je(13486,{value:t})}}function xT(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Zx(t){return!!t&&"integerValue"in t}function jb(t){return!!t&&"arrayValue"in t}function wT(t){return!!t&&"nullValue"in t}function bT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function zm(t){return!!t&&"mapValue"in t}function rU(t){return(t?.mapValue?.fields||{})[$j]?.stringValue===Uj}function Md(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return io(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=Md(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Md(t.arrayValue.values[r]);return e}return{...t}}function nU(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===tU}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.value=e}static empty(){return new on({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!zm(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Md(r)}setAll(e){let r=Ar.emptyPath(),n={},i=[];e.forEach((o,c)=>{if(!r.isImmediateParentOf(c)){const u=this.getFieldsMap(r);this.applyChanges(u,n,i),n={},i=[],r=c.popLast()}o?n[c.lastSegment()]=Md(o):i.push(c.lastSegment())});const a=this.getFieldsMap(r);this.applyChanges(a,n,i)}delete(e){const r=this.field(e.popLast());zm(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Zi(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=r.mapValue.fields[e.get(n)];zm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=i),r=i}return r.mapValue.fields}applyChanges(e,r,n){io(r,(i,a)=>e[i]=a);for(const i of n)delete e[i]}clone(){return new on(Md(this.value))}}function Bj(t){const e=[];return io(t.fields,(r,n)=>{const i=new Ar([r]);if(zm(n)){const a=Bj(n.mapValue).fields;if(a.length===0)e.push(i);else for(const o of a)e.push(i.child(o))}else e.push(i)}),new Sn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e,r,n,i,a,o,c){this.key=e,this.documentType=r,this.version=n,this.readTime=i,this.createTime=a,this.data=o,this.documentState=c}static newInvalidDocument(e){return new Mr(e,0,Me.min(),Me.min(),Me.min(),on.empty(),0)}static newFoundDocument(e,r,n,i){return new Mr(e,1,r,Me.min(),n,i,0)}static newNoDocument(e,r){return new Mr(e,2,r,Me.min(),Me.min(),on.empty(),0)}static newUnknownDocument(e,r){return new Mr(e,3,r,Me.min(),Me.min(),on.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=on.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=on.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Mr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Mr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(e,r){this.position=e,this.inclusive=r}}function _T(t,e,r){let n=0;for(let i=0;i<t.position.length;i++){const a=e[i],o=t.position[i];if(a.field.isKeyField()?n=Te.comparator(Te.fromName(o.referenceValue),r.key):n=Fc(o,r.data.field(a.field)),a.dir==="desc"&&(n*=-1),n!==0)break}return n}function ET(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Zi(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e,r="asc"){this.field=e,this.dir=r}}function iU(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{}class Ht extends zj{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new sU(e,r,n):r==="array-contains"?new cU(e,n):r==="in"?new uU(e,n):r==="not-in"?new dU(e,n):r==="array-contains-any"?new fU(e,n):new Ht(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new oU(e,n):new lU(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(Fc(r,this.value)):r!==null&&Gs(this.value)===Gs(r)&&this.matchesComparison(Fc(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return je(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ai extends zj{constructor(e,r){super(),this.filters=e,this.op=r,this.Pe=null}static create(e,r){return new Ai(e,r)}matches(e){return qj(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function qj(t){return t.op==="and"}function Kj(t){return aU(t)&&qj(t)}function aU(t){for(const e of t.filters)if(e instanceof Ai)return!1;return!0}function ew(t){if(t instanceof Ht)return t.field.canonicalString()+t.op.toString()+$c(t.value);if(Kj(t))return t.filters.map(e=>ew(e)).join(",");{const e=t.filters.map(r=>ew(r)).join(",");return`${t.op}(${e})`}}function Wj(t,e){return t instanceof Ht?function(n,i){return i instanceof Ht&&n.op===i.op&&n.field.isEqual(i.field)&&Zi(n.value,i.value)}(t,e):t instanceof Ai?function(n,i){return i instanceof Ai&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((a,o,c)=>a&&Wj(o,i.filters[c]),!0):!1}(t,e):void je(19439)}function Hj(t){return t instanceof Ht?function(r){return`${r.field.canonicalString()} ${r.op} ${$c(r.value)}`}(t):t instanceof Ai?function(r){return r.op.toString()+" {"+r.getFilters().map(Hj).join(" ,")+"}"}(t):"Filter"}class sU extends Ht{constructor(e,r,n){super(e,r,n),this.key=Te.fromName(n.referenceValue)}matches(e){const r=Te.comparator(e.key,this.key);return this.matchesComparison(r)}}class oU extends Ht{constructor(e,r){super(e,"in",r),this.keys=Gj("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class lU extends Ht{constructor(e,r){super(e,"not-in",r),this.keys=Gj("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function Gj(t,e){return(e.arrayValue?.values||[]).map(r=>Te.fromName(r.referenceValue))}class cU extends Ht{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return jb(r)&&Yd(r.arrayValue,this.value)}}class uU extends Ht{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Yd(this.value.arrayValue,r)}}class dU extends Ht{constructor(e,r){super(e,"not-in",r)}matches(e){if(Yd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&r.nullValue===void 0&&!Yd(this.value.arrayValue,r)}}class fU extends Ht{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!jb(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>Yd(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hU{constructor(e,r=null,n=[],i=[],a=null,o=null,c=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=i,this.limit=a,this.startAt=o,this.endAt=c,this.Te=null}}function ST(t,e=null,r=[],n=[],i=null,a=null,o=null){return new hU(t,e,r,n,i,a,o)}function Rb(t){const e=Ve(t);if(e.Te===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>ew(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(a){return a.field.canonicalString()+a.dir}(n)).join(","),og(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>$c(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>$c(n)).join(",")),e.Te=r}return e.Te}function Ob(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!iU(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!Wj(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ET(t.startAt,e.startAt)&&ET(t.endAt,e.endAt)}function tw(t){return Te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(e,r=null,n=[],i=[],a=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=i,this.limit=a,this.limitType=o,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function mU(t,e,r,n,i,a,o,c){return new uu(t,e,r,n,i,a,o,c)}function Db(t){return new uu(t)}function AT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Yj(t){return t.collectionGroup!==null}function Ld(t){const e=Ve(t);if(e.Ie===null){e.Ie=[];const r=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),r.add(a.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new ir(Ar.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(a=>{r.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Qd(a,n))}),r.has(Ar.keyField().canonicalString())||e.Ie.push(new Qd(Ar.keyField(),n))}return e.Ie}function Hi(t){const e=Ve(t);return e.Ee||(e.Ee=pU(e,Ld(t))),e.Ee}function pU(t,e){if(t.limitType==="F")return ST(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new Qd(i.field,a)});const r=t.endAt?new sp(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new sp(t.startAt.position,t.startAt.inclusive):null;return ST(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function rw(t,e){const r=t.filters.concat([e]);return new uu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function op(t,e,r){return new uu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function cg(t,e){return Ob(Hi(t),Hi(e))&&t.limitType===e.limitType}function Qj(t){return`${Rb(Hi(t))}|lt:${t.limitType}`}function Sc(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(i=>Hj(i)).join(", ")}]`),og(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(i=>$c(i)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(i=>$c(i)).join(",")),`Target(${n})`}(Hi(t))}; limitType=${t.limitType})`}function ug(t,e){return e.isFoundDocument()&&function(n,i){const a=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(a):Te.isDocumentKey(n.path)?n.path.isEqual(a):n.path.isImmediateParentOf(a)}(t,e)&&function(n,i){for(const a of Ld(n))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(t,e)&&function(n,i){for(const a of n.filters)if(!a.matches(i))return!1;return!0}(t,e)&&function(n,i){return!(n.startAt&&!function(o,c,u){const d=_T(o,c,u);return o.inclusive?d<=0:d<0}(n.startAt,Ld(n),i)||n.endAt&&!function(o,c,u){const d=_T(o,c,u);return o.inclusive?d>=0:d>0}(n.endAt,Ld(n),i))}(t,e)}function gU(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Xj(t){return(e,r)=>{let n=!1;for(const i of Ld(t)){const a=yU(i,e,r);if(a!==0)return a;n=n||i.field.isKeyField()}return 0}}function yU(t,e,r){const n=t.field.isKeyField()?Te.comparator(e.key,r.key):function(a,o,c){const u=o.data.field(a),d=c.data.field(a);return u!==null&&d!==null?Fc(u,d):je(42886)}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return je(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[i,a]of n)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,r]);i.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[r]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){io(this.inner,(r,n)=>{for(const[i,a]of n)e(i,a)})}isEmpty(){return Oj(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vU=new kt(Te.comparator);function Ka(){return vU}const Jj=new kt(Te.comparator);function Id(...t){let e=Jj;for(const r of t)e=e.insert(r.key,r);return e}function Zj(t){let e=Jj;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function Go(){return Vd()}function e2(){return Vd()}function Vd(){return new El(t=>t.toString(),(t,e)=>t.isEqual(e))}const xU=new kt(Te.comparator),wU=new ir(Te.comparator);function Ke(...t){let e=wU;for(const r of t)e=e.add(r);return e}const bU=new ir(qe);function _U(){return bU}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mb(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:np(e)?"-0":e}}function t2(t){return{integerValue:""+t}}function EU(t,e){return Q$(e)?t2(e):Mb(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(){this._=void 0}}function SU(t,e,r){return t instanceof Xd?function(i,a){const o={fields:{[Lj]:{stringValue:Mj},[Fj]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&kb(a)&&(a=lg(a)),a&&(o.fields[Vj]=a),{mapValue:o}}(r,e):t instanceof Jd?n2(t,e):t instanceof Zd?i2(t,e):function(i,a){const o=r2(i,a),c=TT(o)+TT(i.Ae);return Zx(o)&&Zx(i.Ae)?t2(c):Mb(i.serializer,c)}(t,e)}function AU(t,e,r){return t instanceof Jd?n2(t,e):t instanceof Zd?i2(t,e):r}function r2(t,e){return t instanceof lp?function(n){return Zx(n)||function(a){return!!a&&"doubleValue"in a}(n)}(e)?e:{integerValue:0}:null}class Xd extends dg{}class Jd extends dg{constructor(e){super(),this.elements=e}}function n2(t,e){const r=a2(e);for(const n of t.elements)r.some(i=>Zi(i,n))||r.push(n);return{arrayValue:{values:r}}}class Zd extends dg{constructor(e){super(),this.elements=e}}function i2(t,e){let r=a2(e);for(const n of t.elements)r=r.filter(i=>!Zi(i,n));return{arrayValue:{values:r}}}class lp extends dg{constructor(e,r){super(),this.serializer=e,this.Ae=r}}function TT(t){return Vt(t.integerValue||t.doubleValue)}function a2(t){return jb(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TU{constructor(e,r){this.field=e,this.transform=r}}function PU(t,e){return t.field.isEqual(e.field)&&function(n,i){return n instanceof Jd&&i instanceof Jd||n instanceof Zd&&i instanceof Zd?Vc(n.elements,i.elements,Zi):n instanceof lp&&i instanceof lp?Zi(n.Ae,i.Ae):n instanceof Xd&&i instanceof Xd}(t.transform,e.transform)}class IU{constructor(e,r){this.version=e,this.transformResults=r}}class Wr{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Wr}static exists(e){return new Wr(void 0,e)}static updateTime(e){return new Wr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qm(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class fg{}function s2(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new hg(t.key,Wr.none()):new Cf(t.key,t.data,Wr.none());{const r=t.data,n=on.empty();let i=new ir(Ar.comparator);for(let a of e.fields)if(!i.has(a)){let o=r.field(a);o===null&&a.length>1&&(a=a.popLast(),o=r.field(a)),o===null?n.delete(a):n.set(a,o),i=i.add(a)}return new ao(t.key,n,new Sn(i.toArray()),Wr.none())}}function NU(t,e,r){t instanceof Cf?function(i,a,o){const c=i.value.clone(),u=IT(i.fieldTransforms,a,o.transformResults);c.setAll(u),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,r):t instanceof ao?function(i,a,o){if(!qm(i.precondition,a))return void a.convertToUnknownDocument(o.version);const c=IT(i.fieldTransforms,a,o.transformResults),u=a.data;u.setAll(o2(i)),u.setAll(c),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,r):function(i,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,r)}function Fd(t,e,r,n){return t instanceof Cf?function(a,o,c,u){if(!qm(a.precondition,o))return c;const d=a.value.clone(),m=NT(a.fieldTransforms,u,o);return d.setAll(m),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,r,n):t instanceof ao?function(a,o,c,u){if(!qm(a.precondition,o))return c;const d=NT(a.fieldTransforms,u,o),m=o.data;return m.setAll(o2(a)),m.setAll(d),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(p=>p.field))}(t,e,r,n):function(a,o,c){return qm(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,r)}function CU(t,e){let r=null;for(const n of t.fieldTransforms){const i=e.data.field(n.field),a=r2(n.transform,i||null);a!=null&&(r===null&&(r=on.empty()),r.set(n.field,a))}return r||null}function PT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&Vc(n,i,(a,o)=>PU(a,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Cf extends fg{constructor(e,r,n,i=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ao extends fg{constructor(e,r,n,i,a=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function o2(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function IT(t,e,r){const n=new Map;it(t.length===r.length,32656,{Re:r.length,Ve:t.length});for(let i=0;i<r.length;i++){const a=t[i],o=a.transform,c=e.data.field(a.field);n.set(a.field,AU(o,c,r[i]))}return n}function NT(t,e,r){const n=new Map;for(const i of t){const a=i.transform,o=r.data.field(i.field);n.set(i.field,SU(a,o,e))}return n}class hg extends fg{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class kU extends fg{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jU{constructor(e,r,n,i){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&NU(a,e,n[i])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=Fd(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=Fd(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=e2();return this.mutations.forEach(i=>{const a=e.get(i.key),o=a.overlayedDocument;let c=this.applyToLocalView(o,a.mutatedFields);c=r.has(i.key)?null:c;const u=s2(o,c);u!==null&&n.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Me.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),Ke())}isEqual(e){return this.batchId===e.batchId&&Vc(this.mutations,e.mutations,(r,n)=>PT(r,n))&&Vc(this.baseMutations,e.baseMutations,(r,n)=>PT(r,n))}}class Lb{constructor(e,r,n,i){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=i}static from(e,r,n){it(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let i=function(){return xU}();const a=e.mutations;for(let o=0;o<a.length;o++)i=i.insert(a[o].key,n[o].version);return new Lb(e,r,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RU{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OU{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wt,Qe;function DU(t){switch(t){case ee.OK:return je(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return je(15467,{code:t})}}function l2(t){if(t===void 0)return qa("GRPC error has no .code"),ee.UNKNOWN;switch(t){case Wt.OK:return ee.OK;case Wt.CANCELLED:return ee.CANCELLED;case Wt.UNKNOWN:return ee.UNKNOWN;case Wt.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case Wt.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case Wt.INTERNAL:return ee.INTERNAL;case Wt.UNAVAILABLE:return ee.UNAVAILABLE;case Wt.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case Wt.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case Wt.NOT_FOUND:return ee.NOT_FOUND;case Wt.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case Wt.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case Wt.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case Wt.ABORTED:return ee.ABORTED;case Wt.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case Wt.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case Wt.DATA_LOSS:return ee.DATA_LOSS;default:return je(39323,{code:t})}}(Qe=Wt||(Wt={}))[Qe.OK=0]="OK",Qe[Qe.CANCELLED=1]="CANCELLED",Qe[Qe.UNKNOWN=2]="UNKNOWN",Qe[Qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qe[Qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qe[Qe.NOT_FOUND=5]="NOT_FOUND",Qe[Qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qe[Qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qe[Qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qe[Qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qe[Qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qe[Qe.ABORTED=10]="ABORTED",Qe[Qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qe[Qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qe[Qe.INTERNAL=13]="INTERNAL",Qe[Qe.UNAVAILABLE=14]="UNAVAILABLE",Qe[Qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MU(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LU=new $s([4294967295,4294967295],0);function CT(t){const e=MU().encode(t),r=new Ej;return r.update(e),new Uint8Array(r.digest())}function kT(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new $s([r,n],0),new $s([i,a],0)]}class Vb{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Nd(`Invalid padding: ${r}`);if(n<0)throw new Nd(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Nd(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new Nd(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*e.length-r,this.pe=$s.fromNumber(this.ge)}ye(e,r,n){let i=e.add(r.multiply($s.fromNumber(n)));return i.compare(LU)===1&&(i=new $s([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const r=CT(e),[n,i]=kT(r);for(let a=0;a<this.hashCount;a++){const o=this.ye(n,i,a);if(!this.we(o))return!1}return!0}static create(e,r,n){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new Vb(a,i,r);return n.forEach(c=>o.insert(c)),o}insert(e){if(this.ge===0)return;const r=CT(e),[n,i]=kT(r);for(let a=0;a<this.hashCount;a++){const o=this.ye(n,i,a);this.Se(o)}}Se(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class Nd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(e,r,n,i,a){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const i=new Map;return i.set(e,kf.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new mg(Me.min(),i,new kt(qe),Ka(),Ke())}}class kf{constructor(e,r,n,i,a){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new kf(n,r,Ke(),Ke(),Ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(e,r,n,i){this.be=e,this.removedTargetIds=r,this.key=n,this.De=i}}class c2{constructor(e,r){this.targetId=e,this.Ce=r}}class u2{constructor(e,r,n=Pr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=i}}class jT{constructor(){this.ve=0,this.Fe=RT(),this.Me=Pr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ke(),r=Ke(),n=Ke();return this.Fe.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:r=r.add(i);break;case 1:n=n.add(i);break;default:je(38017,{changeType:a})}}),new kf(this.Me,this.xe,e,r,n)}qe(){this.Oe=!1,this.Fe=RT()}Qe(e,r){this.Oe=!0,this.Fe=this.Fe.insert(e,r)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,it(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class VU{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ka(),this.Je=vm(),this.He=vm(),this.Ye=new kt(qe)}Ze(e){for(const r of e.be)e.De&&e.De.isFoundDocument()?this.Xe(r,e.De):this.et(r,e.key,e.De);for(const r of e.removedTargetIds)this.et(r,e.key,e.De)}tt(e){this.forEachTarget(e,r=>{const n=this.nt(r);switch(e.state){case 0:this.rt(r)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(r)&&(this.it(r),n.Le(e.resumeToken));break;default:je(56790,{state:e.state})}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.ze.forEach((n,i)=>{this.rt(i)&&r(i)})}st(e){const r=e.targetId,n=e.Ce.count,i=this.ot(r);if(i){const a=i.target;if(tw(a))if(n===0){const o=new Te(a.path);this.et(r,o,Mr.newNoDocument(o,Me.min()))}else it(n===1,20013,{expectedCount:n});else{const o=this._t(r);if(o!==n){const c=this.ut(e),u=c?this.ct(c,e,o):1;if(u!==0){this.it(r);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,d)}}}}}ut(e){const r=e.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:a=0}=r;let o,c;try{o=Hs(n).toUint8Array()}catch(u){if(u instanceof Dj)return Lc("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Vb(o,i,a)}catch(u){return Lc(u instanceof Nd?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,r,n){return r.Ce.count===n-this.Pt(e,r.targetId)?0:2}Pt(e,r){const n=this.Ge.getRemoteKeysForTarget(r);let i=0;return n.forEach(a=>{const o=this.Ge.ht(),c=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.et(r,a,null),i++)}),i}Tt(e){const r=new Map;this.ze.forEach((a,o)=>{const c=this.ot(o);if(c){if(a.current&&tw(c.target)){const u=new Te(c.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,Mr.newNoDocument(u,e))}a.Be&&(r.set(o,a.ke()),a.qe())}});let n=Ke();this.He.forEach((a,o)=>{let c=!0;o.forEachWhile(u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(n=n.add(a))}),this.je.forEach((a,o)=>o.setReadTime(e));const i=new mg(e,r,this.Ye,this.je,n);return this.je=Ka(),this.Je=vm(),this.He=vm(),this.Ye=new kt(qe),i}Xe(e,r){if(!this.rt(e))return;const n=this.Et(e,r.key)?2:0;this.nt(e).Qe(r.key,n),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(e)),this.He=this.He.insert(r.key,this.dt(r.key).add(e))}et(e,r,n){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,r)?i.Qe(r,1):i.$e(r),this.He=this.He.insert(r,this.dt(r).delete(e)),this.He=this.He.insert(r,this.dt(r).add(e)),n&&(this.je=this.je.insert(r,n))}removeTarget(e){this.ze.delete(e)}_t(e){const r=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let r=this.ze.get(e);return r||(r=new jT,this.ze.set(e,r)),r}dt(e){let r=this.He.get(e);return r||(r=new ir(qe),this.He=this.He.insert(e,r)),r}It(e){let r=this.Je.get(e);return r||(r=new ir(qe),this.Je=this.Je.insert(e,r)),r}rt(e){const r=this.ot(e)!==null;return r||ye("WatchChangeAggregator","Detected inactive target",e),r}ot(e){const r=this.ze.get(e);return r&&r.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new jT),this.Ge.getRemoteKeysForTarget(e).forEach(r=>{this.et(e,r,null)})}Et(e,r){return this.Ge.getRemoteKeysForTarget(e).has(r)}}function vm(){return new kt(Te.comparator)}function RT(){return new kt(Te.comparator)}const FU={asc:"ASCENDING",desc:"DESCENDING"},$U={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},UU={and:"AND",or:"OR"};class BU{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function nw(t,e){return t.useProto3Json||og(e)?e:{value:e}}function cp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function d2(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function zU(t,e){return cp(t,e.toTimestamp())}function Gi(t){return it(!!t,49232),Me.fromTimestamp(function(r){const n=Ws(r);return new bt(n.seconds,n.nanos)}(t))}function Fb(t,e){return iw(t,e).canonicalString()}function iw(t,e){const r=function(i){return new pt(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?r:r.child(e)}function f2(t){const e=pt.fromString(t);return it(y2(e),10190,{key:e.toString()}),e}function aw(t,e){return Fb(t.databaseId,e.path)}function Zv(t,e){const r=f2(e);if(r.get(1)!==t.databaseId.projectId)throw new de(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new de(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new Te(m2(r))}function h2(t,e){return Fb(t.databaseId,e)}function qU(t){const e=f2(t);return e.length===4?pt.emptyPath():m2(e)}function sw(t){return new pt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function m2(t){return it(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function OT(t,e,r){return{name:aw(t,e),fields:r.value.mapValue.fields}}function KU(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:je(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(d,m){return d.useProto3Json?(it(m===void 0||typeof m=="string",58123),Pr.fromBase64String(m||"")):(it(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),Pr.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(d){const m=d.code===void 0?ee.UNKNOWN:l2(d.code);return new de(m,d.message||"")}(o);r=new u2(n,i,a,c||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=Zv(t,n.document.name),a=Gi(n.document.updateTime),o=n.document.createTime?Gi(n.document.createTime):Me.min(),c=new on({mapValue:{fields:n.document.fields}}),u=Mr.newFoundDocument(i,a,o,c),d=n.targetIds||[],m=n.removedTargetIds||[];r=new Km(d,m,u.key,u)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=Zv(t,n.document),a=n.readTime?Gi(n.readTime):Me.min(),o=Mr.newNoDocument(i,a),c=n.removedTargetIds||[];r=new Km([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=Zv(t,n.document),a=n.removedTargetIds||[];r=new Km([],a,i,null)}else{if(!("filter"in e))return je(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:a}=n,o=new OU(i,a),c=n.targetId;r=new c2(c,o)}}return r}function WU(t,e){let r;if(e instanceof Cf)r={update:OT(t,e.key,e.value)};else if(e instanceof hg)r={delete:aw(t,e.key)};else if(e instanceof ao)r={update:OT(t,e.key,e.data),updateMask:t9(e.fieldMask)};else{if(!(e instanceof kU))return je(16599,{Vt:e.type});r={verify:aw(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(a,o){const c=o.transform;if(c instanceof Xd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Jd)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Zd)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof lp)return{fieldPath:o.field.canonicalString(),increment:c.Ae};throw je(20930,{transform:o.transform})}(0,n))),e.precondition.isNone||(r.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:zU(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:je(27497)}(t,e.precondition)),r}function HU(t,e){return t&&t.length>0?(it(e!==void 0,14353),t.map(r=>function(i,a){let o=i.updateTime?Gi(i.updateTime):Gi(a);return o.isEqual(Me.min())&&(o=Gi(a)),new IU(o,i.transformResults||[])}(r,e))):[]}function GU(t,e){return{documents:[h2(t,e.path)]}}function YU(t,e){const r={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=h2(t,i);const a=function(d){if(d.length!==0)return g2(Ai.create(d,"and"))}(e.filters);a&&(r.structuredQuery.where=a);const o=function(d){if(d.length!==0)return d.map(m=>function(v){return{field:Ac(v.field),direction:JU(v.dir)}}(m))}(e.orderBy);o&&(r.structuredQuery.orderBy=o);const c=nw(t,e.limit);return c!==null&&(r.structuredQuery.limit=c),e.startAt&&(r.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:r,parent:i}}function QU(t){let e=qU(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let i=null;if(n>0){it(n===1,65062);const m=r.from[0];m.allDescendants?i=m.collectionId:e=e.child(m.collectionId)}let a=[];r.where&&(a=function(p){const v=p2(p);return v instanceof Ai&&Kj(v)?v.getFilters():[v]}(r.where));let o=[];r.orderBy&&(o=function(p){return p.map(v=>function(b){return new Qd(Tc(b.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(v))}(r.orderBy));let c=null;r.limit&&(c=function(p){let v;return v=typeof p=="object"?p.value:p,og(v)?null:v}(r.limit));let u=null;r.startAt&&(u=function(p){const v=!!p.before,w=p.values||[];return new sp(w,v)}(r.startAt));let d=null;return r.endAt&&(d=function(p){const v=!p.before,w=p.values||[];return new sp(w,v)}(r.endAt)),mU(e,i,o,a,c,"F",u,d)}function XU(t,e){const r=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return je(28987,{purpose:i})}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function p2(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Tc(r.unaryFilter.field);return Ht.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=Tc(r.unaryFilter.field);return Ht.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Tc(r.unaryFilter.field);return Ht.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Tc(r.unaryFilter.field);return Ht.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return je(61313);default:return je(60726)}}(t):t.fieldFilter!==void 0?function(r){return Ht.create(Tc(r.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return je(58110);default:return je(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Ai.create(r.compositeFilter.filters.map(n=>p2(n)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return je(1026)}}(r.compositeFilter.op))}(t):je(30097,{filter:t})}function JU(t){return FU[t]}function ZU(t){return $U[t]}function e9(t){return UU[t]}function Ac(t){return{fieldPath:t.canonicalString()}}function Tc(t){return Ar.fromServerFormat(t.fieldPath)}function g2(t){return t instanceof Ht?function(r){if(r.op==="=="){if(bT(r.value))return{unaryFilter:{field:Ac(r.field),op:"IS_NAN"}};if(wT(r.value))return{unaryFilter:{field:Ac(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(bT(r.value))return{unaryFilter:{field:Ac(r.field),op:"IS_NOT_NAN"}};if(wT(r.value))return{unaryFilter:{field:Ac(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ac(r.field),op:ZU(r.op),value:r.value}}}(t):t instanceof Ai?function(r){const n=r.getFilters().map(i=>g2(i));return n.length===1?n[0]:{compositeFilter:{op:e9(r.op),filters:n}}}(t):je(54877,{filter:t})}function t9(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function y2(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e,r,n,i,a=Me.min(),o=Me.min(),c=Pr.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new Ms(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Ms(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ms(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ms(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r9{constructor(e){this.yt=e}}function n9(t){const e=QU({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?op(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i9{constructor(){this.Cn=new a9}addToCollectionParentIndex(e,r){return this.Cn.add(r),te.resolve()}getCollectionParents(e,r){return te.resolve(this.Cn.getEntries(r))}addFieldIndex(e,r){return te.resolve()}deleteFieldIndex(e,r){return te.resolve()}deleteAllFieldIndexes(e){return te.resolve()}createTargetIndexes(e,r){return te.resolve()}getDocumentsMatchingTarget(e,r){return te.resolve(null)}getIndexType(e,r){return te.resolve(0)}getFieldIndexes(e,r){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,r){return te.resolve(Ks.min())}getMinOffsetFromCollectionGroup(e,r){return te.resolve(Ks.min())}updateCollectionGroup(e,r,n){return te.resolve()}updateIndexEntries(e,r){return te.resolve()}}class a9{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r]||new ir(pt.comparator),a=!i.has(n);return this.index[r]=i.add(n),a}has(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r];return i&&i.has(n)}getEntries(e){return(this.index[e]||new ir(pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},v2=41943040;class an{static withCacheSize(e){return new an(e,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */an.DEFAULT_COLLECTION_PERCENTILE=10,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,an.DEFAULT=new an(v2,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),an.DISABLED=new an(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Uc(0)}static cr(){return new Uc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT="LruGarbageCollector",s9=1048576;function LT([t,e],[r,n]){const i=qe(t,r);return i===0?qe(e,n):i}class o9{constructor(e){this.Ir=e,this.buffer=new ir(LT),this.Er=0}dr(){return++this.Er}Ar(e){const r=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();LT(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class l9{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ye(MT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){cu(r)?ye(MT,"Ignoring IndexedDB error during garbage collection: ",r):await lu(r)}await this.Vr(3e5)})}}class c9{constructor(e,r){this.mr=e,this.params=r}calculateTargetCount(e,r){return this.mr.gr(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return te.resolve(sg.ce);const n=new o9(r);return this.mr.forEachTarget(e,i=>n.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>n.Ar(i))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.mr.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.mr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(ye("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve(DT)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(ye("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),DT):this.yr(e,r))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,r){let n,i,a,o,c,u,d;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(ye("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(n=p,c=Date.now(),this.removeTargets(e,n,r))).next(p=>(a=p,u=Date.now(),this.removeOrphanedDocuments(e,n))).next(p=>(d=Date.now(),Ec()<=ze.DEBUG&&ye("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-m}ms
	Determined least recently used ${i} in `+(c-o)+`ms
	Removed ${a} targets in `+(u-c)+`ms
	Removed ${p} documents in `+(d-u)+`ms
Total Duration: ${d-m}ms`),te.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:p})))}}function u9(t,e){return new c9(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d9{constructor(){this.changes=new El(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Mr.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?te.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f9{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h9{constructor(e,r,n,i){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(i=>(n=i,this.remoteDocumentCache.getEntry(e,r))).next(i=>(n!==null&&Fd(n.mutation,i,Sn.empty(),bt.now()),i))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,Ke()).next(()=>n))}getLocalViewOfDocuments(e,r,n=Ke()){const i=Go();return this.populateOverlays(e,i,r).next(()=>this.computeViews(e,r,i,n).next(a=>{let o=Id();return a.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,r){const n=Go();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,Ke()))}populateOverlays(e,r,n){const i=[];return n.forEach(a=>{r.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((o,c)=>{r.set(o,c)})})}computeViews(e,r,n,i){let a=Ka();const o=Vd(),c=function(){return Vd()}();return r.forEach((u,d)=>{const m=n.get(d.key);i.has(d.key)&&(m===void 0||m.mutation instanceof ao)?a=a.insert(d.key,d):m!==void 0?(o.set(d.key,m.mutation.getFieldMask()),Fd(m.mutation,d,m.mutation.getFieldMask(),bt.now())):o.set(d.key,Sn.empty())}),this.recalculateAndSaveOverlays(e,a).next(u=>(u.forEach((d,m)=>o.set(d,m)),r.forEach((d,m)=>c.set(d,new f9(m,o.get(d)??null))),c))}recalculateAndSaveOverlays(e,r){const n=Vd();let i=new kt((o,c)=>o-c),a=Ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(o=>{for(const c of o)c.keys().forEach(u=>{const d=r.get(u);if(d===null)return;let m=n.get(u)||Sn.empty();m=c.applyToLocalView(d,m),n.set(u,m);const p=(i.get(c.batchId)||Ke()).add(u);i=i.insert(c.batchId,p)})}).next(()=>{const o=[],c=i.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,m=u.value,p=e2();m.forEach(v=>{if(!a.has(v)){const w=s2(r.get(v),n.get(v));w!==null&&p.set(v,w),a=a.add(v)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return te.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,i){return function(o){return Te.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):Yj(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,i):this.getDocumentsMatchingCollectionQuery(e,r,n,i)}getNextDocuments(e,r,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,i).next(a=>{const o=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,i-a.size):te.resolve(Go());let c=Wd,u=a;return o.next(d=>te.forEach(d,(m,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),a.get(m)?te.resolve():this.remoteDocumentCache.getEntry(e,m).next(v=>{u=u.insert(m,v)}))).next(()=>this.populateOverlays(e,d,a)).next(()=>this.computeViews(e,u,d,Ke())).next(m=>({batchId:c,changes:Zj(m)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Te(r)).next(n=>{let i=Id();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i})}getDocumentsMatchingCollectionGroupQuery(e,r,n,i){const a=r.collectionGroup;let o=Id();return this.indexManager.getCollectionParents(e,a).next(c=>te.forEach(c,u=>{const d=function(p,v){return new uu(v,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(r,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,d,n,i).next(m=>{m.forEach((p,v)=>{o=o.insert(p,v)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,r,n,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,a,i))).next(o=>{a.forEach((u,d)=>{const m=d.getKey();o.get(m)===null&&(o=o.insert(m,Mr.newInvalidDocument(m)))});let c=Id();return o.forEach((u,d)=>{const m=a.get(u);m!==void 0&&Fd(m.mutation,d,Sn.empty(),bt.now()),ug(r,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m9{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,r){return te.resolve(this.Lr.get(r))}saveBundleMetadata(e,r){return this.Lr.set(r.id,function(i){return{id:i.id,version:i.version,createTime:Gi(i.createTime)}}(r)),te.resolve()}getNamedQuery(e,r){return te.resolve(this.kr.get(r))}saveNamedQuery(e,r){return this.kr.set(r.name,function(i){return{name:i.name,query:n9(i.bundledQuery),readTime:Gi(i.readTime)}}(r)),te.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p9{constructor(){this.overlays=new kt(Te.comparator),this.qr=new Map}getOverlay(e,r){return te.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Go();return te.forEach(r,i=>this.getOverlay(e,i).next(a=>{a!==null&&n.set(i,a)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((i,a)=>{this.St(e,r,a)}),te.resolve()}removeOverlaysForBatchId(e,r,n){const i=this.qr.get(n);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.qr.delete(n)),te.resolve()}getOverlaysForCollection(e,r,n){const i=Go(),a=r.length+1,o=new Te(r.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!r.isPrefixOf(d.path))break;d.path.length===a&&u.largestBatchId>n&&i.set(u.getKey(),u)}return te.resolve(i)}getOverlaysForCollectionGroup(e,r,n,i){let a=new kt((d,m)=>d-m);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===r&&d.largestBatchId>n){let m=a.get(d.largestBatchId);m===null&&(m=Go(),a=a.insert(d.largestBatchId,m)),m.set(d.getKey(),d)}}const c=Go(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,m)=>c.set(d,m)),!(c.size()>=i)););return te.resolve(c)}St(e,r,n){const i=this.overlays.get(n.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(n.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new RU(r,n));let a=this.qr.get(r);a===void 0&&(a=Ke(),this.qr.set(r,a)),this.qr.set(r,a.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g9{constructor(){this.sessionToken=Pr.EMPTY_BYTE_STRING}getSessionToken(e){return te.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,te.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(){this.Qr=new ir(fr.$r),this.Ur=new ir(fr.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,r){const n=new fr(e,r);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Gr(new fr(e,r))}zr(e,r){e.forEach(n=>this.removeReference(n,r))}jr(e){const r=new Te(new pt([])),n=new fr(r,e),i=new fr(r,e+1),a=[];return this.Ur.forEachInRange([n,i],o=>{this.Gr(o),a.push(o.key)}),a}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const r=new Te(new pt([])),n=new fr(r,e),i=new fr(r,e+1);let a=Ke();return this.Ur.forEachInRange([n,i],o=>{a=a.add(o.key)}),a}containsKey(e){const r=new fr(e,0),n=this.Qr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class fr{constructor(e,r){this.key=e,this.Yr=r}static $r(e,r){return Te.comparator(e.key,r.key)||qe(e.Yr,r.Yr)}static Kr(e,r){return qe(e.Yr,r.Yr)||Te.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y9{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new ir(fr.$r)}checkEmpty(e){return te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,i){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new jU(a,r,n,i);this.mutationQueue.push(o);for(const c of i)this.Zr=this.Zr.add(new fr(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return te.resolve(o)}lookupMutationBatch(e,r){return te.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,i=this.ei(n),a=i<0?0:i;return te.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(this.mutationQueue.length===0?Cb:this.tr-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new fr(r,0),i=new fr(r,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([n,i],o=>{const c=this.Xr(o.Yr);a.push(c)}),te.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new ir(qe);return r.forEach(i=>{const a=new fr(i,0),o=new fr(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,o],c=>{n=n.add(c.Yr)})}),te.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,i=n.length+1;let a=n;Te.isDocumentKey(a)||(a=a.child(""));const o=new fr(new Te(a),0);let c=new ir(qe);return this.Zr.forEachWhile(u=>{const d=u.key.path;return!!n.isPrefixOf(d)&&(d.length===i&&(c=c.add(u.Yr)),!0)},o),te.resolve(this.ti(c))}ti(e){const r=[];return e.forEach(n=>{const i=this.Xr(n);i!==null&&r.push(i)}),r}removeMutationBatch(e,r){it(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return te.forEach(r.mutations,i=>{const a=new fr(i.key,r.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,r){const n=new fr(r,0),i=this.Zr.firstAfterOrEqual(n);return te.resolve(r.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,te.resolve()}ni(e,r){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const r=this.ei(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v9{constructor(e){this.ri=e,this.docs=function(){return new kt(Te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,i=this.docs.get(n),a=i?i.size:0,o=this.ri(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return te.resolve(n?n.document.mutableCopy():Mr.newInvalidDocument(r))}getEntries(e,r){let n=Ka();return r.forEach(i=>{const a=this.docs.get(i);n=n.insert(i,a?a.document.mutableCopy():Mr.newInvalidDocument(i))}),te.resolve(n)}getDocumentsMatchingQuery(e,r,n,i){let a=Ka();const o=r.path,c=new Te(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:m}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||W$(K$(m),n)<=0||(i.has(m.key)||ug(r,m))&&(a=a.insert(m.key,m.mutableCopy()))}return te.resolve(a)}getAllFromCollectionGroup(e,r,n,i){je(9500)}ii(e,r){return te.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new x9(this)}getSize(e){return te.resolve(this.size)}}class x9 extends d9{constructor(e){super(),this.Nr=e}applyChanges(e){const r=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?r.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(n)}),te.waitFor(r)}getFromCache(e,r){return this.Nr.getEntry(e,r)}getAllFromCache(e,r){return this.Nr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w9{constructor(e){this.persistence=e,this.si=new El(r=>Rb(r),Ob),this.lastRemoteSnapshotVersion=Me.min(),this.highestTargetId=0,this.oi=0,this._i=new $b,this.targetCount=0,this.ai=Uc.ur()}forEachTarget(e,r){return this.si.forEach((n,i)=>r(i)),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.oi&&(this.oi=r),te.resolve()}Pr(e){this.si.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.ai=new Uc(r),this.highestTargetId=r),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,r){return this.Pr(r),this.targetCount+=1,te.resolve()}updateTargetData(e,r){return this.Pr(r),te.resolve()}removeTargetData(e,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,r,n){let i=0;const a=[];return this.si.forEach((o,c)=>{c.sequenceNumber<=r&&n.get(c.targetId)===null&&(this.si.delete(o),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),te.waitFor(a).next(()=>i)}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,r){const n=this.si.get(r)||null;return te.resolve(n)}addMatchingKeys(e,r,n){return this._i.Wr(r,n),te.resolve()}removeMatchingKeys(e,r,n){this._i.zr(r,n);const i=this.persistence.referenceDelegate,a=[];return i&&r.forEach(o=>{a.push(i.markPotentiallyOrphaned(e,o))}),te.waitFor(a)}removeMatchingKeysForTargetId(e,r){return this._i.jr(r),te.resolve()}getMatchingKeysForTargetId(e,r){const n=this._i.Hr(r);return te.resolve(n)}containsKey(e,r){return te.resolve(this._i.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e,r){this.ui={},this.overlays={},this.ci=new sg(0),this.li=!1,this.li=!0,this.hi=new g9,this.referenceDelegate=e(this),this.Pi=new w9(this),this.indexManager=new i9,this.remoteDocumentCache=function(i){return new v9(i)}(n=>this.referenceDelegate.Ti(n)),this.serializer=new r9(r),this.Ii=new m9(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new p9,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.ui[e.toKey()];return n||(n=new y9(r,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,r,n){ye("MemoryPersistence","Starting transaction:",e);const i=new b9(this.ci.next());return this.referenceDelegate.Ei(),n(i).next(a=>this.referenceDelegate.di(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ai(e,r){return te.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,r)))}}class b9 extends G${constructor(e){super(),this.currentSequenceNumber=e}}class Ub{constructor(e){this.persistence=e,this.Ri=new $b,this.Vi=null}static mi(e){return new Ub(e)}get fi(){if(this.Vi)return this.Vi;throw je(60996)}addReference(e,r,n){return this.Ri.addReference(n,r),this.fi.delete(n.toString()),te.resolve()}removeReference(e,r,n){return this.Ri.removeReference(n,r),this.fi.add(n.toString()),te.resolve()}markPotentiallyOrphaned(e,r){return this.fi.add(r.toString()),te.resolve()}removeTarget(e,r){this.Ri.jr(r.targetId).forEach(i=>this.fi.add(i.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(i=>{i.forEach(a=>this.fi.add(a.toString()))}).next(()=>n.removeTargetData(e,r))}Ei(){this.Vi=new Set}di(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.fi,n=>{const i=Te.fromPath(n);return this.gi(e,i).next(a=>{a||r.removeEntry(i,Me.min())})}).next(()=>(this.Vi=null,r.apply(e)))}updateLimboDocument(e,r){return this.gi(e,r).next(n=>{n?this.fi.delete(r.toString()):this.fi.add(r.toString())})}Ti(e){return 0}gi(e,r){return te.or([()=>te.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ai(e,r)])}}class up{constructor(e,r){this.persistence=e,this.pi=new El(n=>X$(n.path),(n,i)=>n.isEqual(i)),this.garbageCollector=u9(this,r)}static mi(e,r){return new up(e,r)}Ei(){}di(e){return te.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}gr(e){const r=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>r.next(i=>n+i))}wr(e){let r=0;return this.pr(e,n=>{r++}).next(()=>r)}pr(e,r){return te.forEach(this.pi,(n,i)=>this.br(e,n,i).next(a=>a?te.resolve():r(i)))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,r).next(c=>{c||(n++,a.removeEntry(o,Me.min()))})).next(()=>a.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,r){return this.pi.set(r,e.currentSequenceNumber),te.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),te.resolve()}removeReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),te.resolve()}updateLimboDocument(e,r){return this.pi.set(r,e.currentSequenceNumber),te.resolve()}Ti(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=Bm(e.data.value)),r}br(e,r,n){return te.or([()=>this.persistence.Ai(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const i=this.pi.get(r);return te.resolve(i!==void 0&&i>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(e,r,n,i){this.targetId=e,this.fromCache=r,this.Es=n,this.ds=i}static As(e,r){let n=Ke(),i=Ke();for(const a of r.docChanges)switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new Bb(e,r.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _9{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E9{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return J6()?8:Y$(Fr())>0?6:4}()}initialize(e,r){this.ps=e,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(e,r,n,i){const a={result:null};return this.ys(e,r).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.ws(e,r,i,n).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new _9;return this.Ss(e,r,o).next(c=>{if(a.result=c,this.Vs)return this.bs(e,r,o,c.size)})}).next(()=>a.result)}bs(e,r,n,i){return n.documentReadCount<this.fs?(Ec()<=ze.DEBUG&&ye("QueryEngine","SDK will not create cache indexes for query:",Sc(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),te.resolve()):(Ec()<=ze.DEBUG&&ye("QueryEngine","Query:",Sc(r),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.gs*i?(Ec()<=ze.DEBUG&&ye("QueryEngine","The SDK decides to create cache indexes for query:",Sc(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Hi(r))):te.resolve())}ys(e,r){if(AT(r))return te.resolve(null);let n=Hi(r);return this.indexManager.getIndexType(e,n).next(i=>i===0?null:(r.limit!==null&&i===1&&(r=op(r,null,"F"),n=Hi(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(a=>{const o=Ke(...a);return this.ps.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,n).next(u=>{const d=this.Ds(r,c);return this.Cs(r,d,o,u.readTime)?this.ys(e,op(r,null,"F")):this.vs(e,d,r,u)}))})))}ws(e,r,n,i){return AT(r)||i.isEqual(Me.min())?te.resolve(null):this.ps.getDocuments(e,n).next(a=>{const o=this.Ds(r,a);return this.Cs(r,o,n,i)?te.resolve(null):(Ec()<=ze.DEBUG&&ye("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Sc(r)),this.vs(e,o,r,q$(i,Wd)).next(c=>c))})}Ds(e,r){let n=new ir(Xj(e));return r.forEach((i,a)=>{ug(e,a)&&(n=n.add(a))}),n}Cs(e,r,n,i){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const a=e.limitType==="F"?r.last():r.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,r,n){return Ec()<=ze.DEBUG&&ye("QueryEngine","Using full collection scan to execute query:",Sc(r)),this.ps.getDocumentsMatchingQuery(e,r,Ks.min(),n)}vs(e,r,n,i){return this.ps.getDocumentsMatchingQuery(e,n,i).next(a=>(r.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb="LocalStore",S9=3e8;class A9{constructor(e,r,n,i){this.persistence=e,this.Fs=r,this.serializer=i,this.Ms=new kt(qe),this.xs=new El(a=>Rb(a),Ob),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new h9(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.Ms))}}function T9(t,e,r,n){return new A9(t,e,r,n)}async function w2(t,e){const r=Ve(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let i;return r.mutationQueue.getAllMutationBatches(n).next(a=>(i=a,r.Bs(e),r.mutationQueue.getAllMutationBatches(n))).next(a=>{const o=[],c=[];let u=Ke();for(const d of i){o.push(d.batchId);for(const m of d.mutations)u=u.add(m.key)}for(const d of a){c.push(d.batchId);for(const m of d.mutations)u=u.add(m.key)}return r.localDocuments.getDocuments(n,u).next(d=>({Ls:d,removedBatchIds:o,addedBatchIds:c}))})})}function P9(t,e){const r=Ve(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const i=e.batch.keys(),a=r.Ns.newChangeBuffer({trackRemovals:!0});return function(c,u,d,m){const p=d.batch,v=p.keys();let w=te.resolve();return v.forEach(b=>{w=w.next(()=>m.getEntry(u,b)).next(E=>{const S=d.docVersions.get(b);it(S!==null,48541),E.version.compareTo(S)<0&&(p.applyToRemoteDocument(E,d),E.isValidDocument()&&(E.setReadTime(d.commitVersion),m.addEntry(E)))})}),w.next(()=>c.mutationQueue.removeMutationBatch(u,p))}(r,n,e,a).next(()=>a.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(c){let u=Ke();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>r.localDocuments.getDocuments(n,i))})}function b2(t){const e=Ve(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Pi.getLastRemoteSnapshotVersion(r))}function I9(t,e){const r=Ve(t),n=e.snapshotVersion;let i=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=r.Ns.newChangeBuffer({trackRemovals:!0});i=r.Ms;const c=[];e.targetChanges.forEach((m,p)=>{const v=i.get(p);if(!v)return;c.push(r.Pi.removeMatchingKeys(a,m.removedDocuments,p).next(()=>r.Pi.addMatchingKeys(a,m.addedDocuments,p)));let w=v.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(p)!==null?w=w.withResumeToken(Pr.EMPTY_BYTE_STRING,Me.min()).withLastLimboFreeSnapshotVersion(Me.min()):m.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(m.resumeToken,n)),i=i.insert(p,w),function(E,S,P){return E.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=S9?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(v,w,m)&&c.push(r.Pi.updateTargetData(a,w))});let u=Ka(),d=Ke();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&c.push(r.persistence.referenceDelegate.updateLimboDocument(a,m))}),c.push(N9(a,o,e.documentUpdates).next(m=>{u=m.ks,d=m.qs})),!n.isEqual(Me.min())){const m=r.Pi.getLastRemoteSnapshotVersion(a).next(p=>r.Pi.setTargetsMetadata(a,a.currentSequenceNumber,n));c.push(m)}return te.waitFor(c).next(()=>o.apply(a)).next(()=>r.localDocuments.getLocalViewOfDocuments(a,u,d)).next(()=>u)}).then(a=>(r.Ms=i,a))}function N9(t,e,r){let n=Ke(),i=Ke();return r.forEach(a=>n=n.add(a)),e.getEntries(t,n).next(a=>{let o=Ka();return r.forEach((c,u)=>{const d=a.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(Me.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):ye(zb,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{ks:o,qs:i}})}function C9(t,e){const r=Ve(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=Cb),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function k9(t,e){const r=Ve(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let i;return r.Pi.getTargetData(n,e).next(a=>a?(i=a,te.resolve(i)):r.Pi.allocateTargetId(n).next(o=>(i=new Ms(e,o,"TargetPurposeListen",n.currentSequenceNumber),r.Pi.addTargetData(n,i).next(()=>i))))}).then(n=>{const i=r.Ms.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(n.targetId,n),r.xs.set(e,n.targetId)),n})}async function ow(t,e,r){const n=Ve(t),i=n.Ms.get(e),a=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",a,o=>n.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!cu(o))throw o;ye(zb,`Failed to update sequence numbers for target ${e}: ${o}`)}n.Ms=n.Ms.remove(e),n.xs.delete(i.target)}function VT(t,e,r){const n=Ve(t);let i=Me.min(),a=Ke();return n.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,m){const p=Ve(u),v=p.xs.get(m);return v!==void 0?te.resolve(p.Ms.get(v)):p.Pi.getTargetData(d,m)}(n,o,Hi(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(o,c.targetId).next(u=>{a=u})}).next(()=>n.Fs.getDocumentsMatchingQuery(o,e,r?i:Me.min(),r?a:Ke())).next(c=>(j9(n,gU(e),c),{documents:c,Qs:a})))}function j9(t,e,r){let n=t.Os.get(e)||Me.min();r.forEach((i,a)=>{a.readTime.compareTo(n)>0&&(n=a.readTime)}),t.Os.set(e,n)}class FT{constructor(){this.activeTargetIds=_U()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class R9{constructor(){this.Mo=new FT,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,r,n){this.xo[e]=r}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new FT,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O9{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T="ConnectivityMonitor";class UT{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ye($T,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ye($T,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xm=null;function lw(){return xm===null?xm=function(){return 268435456+Math.round(2147483648*Math.random())}():xm++,"0x"+xm.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0="RestConnection",D9={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class M9{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+e.host,this.Ko=`projects/${n}/databases/${i}`,this.Wo=this.databaseId.database===ip?`project_id=${n}`:`project_id=${n}&database_id=${i}`}Go(e,r,n,i,a){const o=lw(),c=this.zo(e,r.toUriEncodedString());ye(e0,`Sending RPC '${e}' ${o}:`,c,n);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,a);const{host:d}=new URL(c),m=to(d);return this.Jo(e,c,u,n,m).then(p=>(ye(e0,`Received RPC '${e}' ${o}: `,p),p),p=>{throw Lc(e0,`RPC '${e}' ${o} failed with error: `,p,"url: ",c,"request:",n),p})}Ho(e,r,n,i,a,o){return this.Go(e,r,n,i,a)}jo(e,r,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ou}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,a)=>e[a]=i),n&&n.headers.forEach((i,a)=>e[a]=i)}zo(e,r){const n=D9[e];return`${this.Uo}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L9{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rr="WebChannelConnection";class V9 extends M9{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,r,n,i,a){const o=lw();return new Promise((c,u)=>{const d=new Sj;d.setWithCredentials(!0),d.listenOnce(Aj.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Um.NO_ERROR:const p=d.getResponseJson();ye(Rr,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),c(p);break;case Um.TIMEOUT:ye(Rr,`RPC '${e}' ${o} timed out`),u(new de(ee.DEADLINE_EXCEEDED,"Request time out"));break;case Um.HTTP_ERROR:const v=d.getStatus();if(ye(Rr,`RPC '${e}' ${o} failed with status:`,v,"response text:",d.getResponseText()),v>0){let w=d.getResponseJson();Array.isArray(w)&&(w=w[0]);const b=w?.error;if(b&&b.status&&b.message){const E=function(P){const k=P.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(k)>=0?k:ee.UNKNOWN}(b.status);u(new de(E,b.message))}else u(new de(ee.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new de(ee.UNAVAILABLE,"Connection failed."));break;default:je(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{ye(Rr,`RPC '${e}' ${o} completed.`)}});const m=JSON.stringify(i);ye(Rr,`RPC '${e}' ${o} sending request:`,i),d.send(r,"POST",m,n,15)})}T_(e,r,n){const i=lw(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Ij(),c=Pj(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,r,n),u.encodeInitMessageHeaders=!0;const m=a.join("");ye(Rr,`Creating RPC '${e}' stream ${i}: ${m}`,u);const p=o.createWebChannel(m,u);this.I_(p);let v=!1,w=!1;const b=new L9({Yo:S=>{w?ye(Rr,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(v||(ye(Rr,`Opening RPC '${e}' stream ${i} transport.`),p.open(),v=!0),ye(Rr,`RPC '${e}' stream ${i} sending:`,S),p.send(S))},Zo:()=>p.close()}),E=(S,P,k)=>{S.listen(P,C=>{try{k(C)}catch(R){setTimeout(()=>{throw R},0)}})};return E(p,Pd.EventType.OPEN,()=>{w||(ye(Rr,`RPC '${e}' stream ${i} transport opened.`),b.o_())}),E(p,Pd.EventType.CLOSE,()=>{w||(w=!0,ye(Rr,`RPC '${e}' stream ${i} transport closed`),b.a_(),this.E_(p))}),E(p,Pd.EventType.ERROR,S=>{w||(w=!0,Lc(Rr,`RPC '${e}' stream ${i} transport errored. Name:`,S.name,"Message:",S.message),b.a_(new de(ee.UNAVAILABLE,"The operation could not be completed")))}),E(p,Pd.EventType.MESSAGE,S=>{if(!w){const P=S.data[0];it(!!P,16349);const k=P,C=k?.error||k[0]?.error;if(C){ye(Rr,`RPC '${e}' stream ${i} received error:`,C);const R=C.status;let V=function(j){const D=Wt[j];if(D!==void 0)return l2(D)}(R),B=C.message;V===void 0&&(V=ee.INTERNAL,B="Unknown error status: "+R+" with message "+C.message),w=!0,b.a_(new de(V,B)),p.close()}else ye(Rr,`RPC '${e}' stream ${i} received:`,P),b.u_(P)}}),E(c,Tj.STAT_EVENT,S=>{S.stat===Qx.PROXY?ye(Rr,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===Qx.NOPROXY&&ye(Rr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.__()},0),b}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(r=>r===e)}}function t0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pg(t){return new BU(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e,r,n=1e3,i=1.5,a=6e4){this.Mi=e,this.timerId=r,this.d_=n,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const r=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),i=Math.max(0,r-n);i>0&&ye("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT="PersistentStream";class E2{constructor(e,r,n,i,a,o,c,u){this.Mi=e,this.S_=n,this.b_=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new _2(e,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():r&&r.code===ee.RESOURCE_EXHAUSTED?(qa(r.toString()),qa("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(r)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,i])=>{this.D_===r&&this.G_(n,i)},n=>{e(()=>{const i=new de(ee.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(i)})})}G_(e,r){const n=this.W_(this.D_);this.stream=this.j_(e,r),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{n(()=>this.z_(i))}),this.stream.onMessage(i=>{n(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ye(BT,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return r=>{this.Mi.enqueueAndForget(()=>this.D_===e?r():(ye(BT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class F9 extends E2{constructor(e,r,n,i,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,i,o),this.serializer=a}j_(e,r){return this.connection.T_("Listen",e,r)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const r=KU(this.serializer,e),n=function(a){if(!("targetChange"in a))return Me.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?Me.min():o.readTime?Gi(o.readTime):Me.min()}(e);return this.listener.H_(r,n)}Y_(e){const r={};r.database=sw(this.serializer),r.addTarget=function(a,o){let c;const u=o.target;if(c=tw(u)?{documents:GU(a,u)}:{query:YU(a,u).ft},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=d2(a,o.resumeToken);const d=nw(a,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(Me.min())>0){c.readTime=cp(a,o.snapshotVersion.toTimestamp());const d=nw(a,o.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const n=XU(this.serializer,e);n&&(r.labels=n),this.q_(r)}Z_(e){const r={};r.database=sw(this.serializer),r.removeTarget=e,this.q_(r)}}class $9 extends E2{constructor(e,r,n,i,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,i,o),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,r){return this.connection.T_("Write",e,r)}J_(e){return it(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,it(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){it(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const r=HU(e.writeResults,e.commitTime),n=Gi(e.commitTime);return this.listener.na(n,r)}ra(){const e={};e.database=sw(this.serializer),this.q_(e)}ea(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>WU(this.serializer,n))};this.q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U9{}class B9 extends U9{constructor(e,r,n,i){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new de(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,r,n,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Go(e,iw(r,n),i,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new de(ee.UNKNOWN,a.toString())})}Ho(e,r,n,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Ho(e,iw(r,n),i,o,c,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new de(ee.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class z9{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(qa(r),this.aa=!1):ye("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fl="RemoteStore";class q9{constructor(e,r,n,i,a){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo(o=>{n.enqueueAndForget(async()=>{Sl(this)&&(ye(fl,"Restarting streams for network reachability change."),await async function(u){const d=Ve(u);d.Ea.add(4),await jf(d),d.Ra.set("Unknown"),d.Ea.delete(4),await gg(d)}(this))})}),this.Ra=new z9(n,i)}}async function gg(t){if(Sl(t))for(const e of t.da)await e(!0)}async function jf(t){for(const e of t.da)await e(!1)}function S2(t,e){const r=Ve(t);r.Ia.has(e.targetId)||(r.Ia.set(e.targetId,e),Hb(r)?Wb(r):du(r).O_()&&Kb(r,e))}function qb(t,e){const r=Ve(t),n=du(r);r.Ia.delete(e),n.O_()&&A2(r,e),r.Ia.size===0&&(n.O_()?n.L_():Sl(r)&&r.Ra.set("Unknown"))}function Kb(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Me.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}du(t).Y_(e)}function A2(t,e){t.Va.Ue(e),du(t).Z_(e)}function Wb(t){t.Va=new VU({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),du(t).start(),t.Ra.ua()}function Hb(t){return Sl(t)&&!du(t).x_()&&t.Ia.size>0}function Sl(t){return Ve(t).Ea.size===0}function T2(t){t.Va=void 0}async function K9(t){t.Ra.set("Online")}async function W9(t){t.Ia.forEach((e,r)=>{Kb(t,e)})}async function H9(t,e){T2(t),Hb(t)?(t.Ra.ha(e),Wb(t)):t.Ra.set("Unknown")}async function G9(t,e,r){if(t.Ra.set("Online"),e instanceof u2&&e.state===2&&e.cause)try{await async function(i,a){const o=a.cause;for(const c of a.targetIds)i.Ia.has(c)&&(await i.remoteSyncer.rejectListen(c,o),i.Ia.delete(c),i.Va.removeTarget(c))}(t,e)}catch(n){ye(fl,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await dp(t,n)}else if(e instanceof Km?t.Va.Ze(e):e instanceof c2?t.Va.st(e):t.Va.tt(e),!r.isEqual(Me.min()))try{const n=await b2(t.localStore);r.compareTo(n)>=0&&await function(a,o){const c=a.Va.Tt(o);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const m=a.Ia.get(d);m&&a.Ia.set(d,m.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,d)=>{const m=a.Ia.get(u);if(!m)return;a.Ia.set(u,m.withResumeToken(Pr.EMPTY_BYTE_STRING,m.snapshotVersion)),A2(a,u);const p=new Ms(m.target,u,d,m.sequenceNumber);Kb(a,p)}),a.remoteSyncer.applyRemoteEvent(c)}(t,r)}catch(n){ye(fl,"Failed to raise snapshot:",n),await dp(t,n)}}async function dp(t,e,r){if(!cu(e))throw e;t.Ea.add(1),await jf(t),t.Ra.set("Offline"),r||(r=()=>b2(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ye(fl,"Retrying IndexedDB access"),await r(),t.Ea.delete(1),await gg(t)})}function P2(t,e){return e().catch(r=>dp(t,r,e))}async function yg(t){const e=Ve(t),r=Ys(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Cb;for(;Y9(e);)try{const i=await C9(e.localStore,n);if(i===null){e.Ta.length===0&&r.L_();break}n=i.batchId,Q9(e,i)}catch(i){await dp(e,i)}I2(e)&&N2(e)}function Y9(t){return Sl(t)&&t.Ta.length<10}function Q9(t,e){t.Ta.push(e);const r=Ys(t);r.O_()&&r.X_&&r.ea(e.mutations)}function I2(t){return Sl(t)&&!Ys(t).x_()&&t.Ta.length>0}function N2(t){Ys(t).start()}async function X9(t){Ys(t).ra()}async function J9(t){const e=Ys(t);for(const r of t.Ta)e.ea(r.mutations)}async function Z9(t,e,r){const n=t.Ta.shift(),i=Lb.from(n,e,r);await P2(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await yg(t)}async function eB(t,e){e&&Ys(t).X_&&await async function(n,i){if(function(o){return DU(o)&&o!==ee.ABORTED}(i.code)){const a=n.Ta.shift();Ys(n).B_(),await P2(n,()=>n.remoteSyncer.rejectFailedWrite(a.batchId,i)),await yg(n)}}(t,e),I2(t)&&N2(t)}async function zT(t,e){const r=Ve(t);r.asyncQueue.verifyOperationInProgress(),ye(fl,"RemoteStore received new credentials");const n=Sl(r);r.Ea.add(3),await jf(r),n&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.Ea.delete(3),await gg(r)}async function tB(t,e){const r=Ve(t);e?(r.Ea.delete(2),await gg(r)):e||(r.Ea.add(2),await jf(r),r.Ra.set("Unknown"))}function du(t){return t.ma||(t.ma=function(r,n,i){const a=Ve(r);return a.sa(),new F9(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Xo:K9.bind(null,t),t_:W9.bind(null,t),r_:H9.bind(null,t),H_:G9.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Hb(t)?Wb(t):t.Ra.set("Unknown")):(await t.ma.stop(),T2(t))})),t.ma}function Ys(t){return t.fa||(t.fa=function(r,n,i){const a=Ve(r);return a.sa(),new $9(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:X9.bind(null,t),r_:eB.bind(null,t),ta:J9.bind(null,t),na:Z9.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await yg(t)):(await t.fa.stop(),t.Ta.length>0&&(ye(fl,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(e,r,n,i,a){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=i,this.removalCallback=a,this.deferred=new La,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,i,a){const o=Date.now()+n,c=new Gb(e,r,o,i,a);return c.start(n),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Yb(t,e){if(qa("AsyncQueue",`${e}: ${t}`),cu(t))return new de(ee.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{static emptySet(e){return new Rc(e.comparator)}constructor(e){this.comparator=e?(r,n)=>e(r,n)||Te.comparator(r.key,n.key):(r,n)=>Te.comparator(r.key,n.key),this.keyedMap=Id(),this.sortedSet=new kt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Rc)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const i=r.getNext().key,a=n.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new Rc;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(){this.ga=new kt(Te.comparator)}track(e){const r=e.doc.key,n=this.ga.get(r);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(r,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(r):e.type===1&&n.type===2?this.ga=this.ga.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):je(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(r,e)}ya(){const e=[];return this.ga.inorderTraversal((r,n)=>{e.push(n)}),e}}class Bc{constructor(e,r,n,i,a,o,c,u,d){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,r,n,i,a){const o=[];return r.forEach(c=>{o.push({type:0,doc:c})}),new Bc(e,r,Rc.emptySet(r),o,n,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&cg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(r[i].type!==n[i].type||!r[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rB{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class nB{constructor(){this.queries=KT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const i=Ve(r),a=i.queries;i.queries=KT(),a.forEach((o,c)=>{for(const u of c.Sa)u.onError(n)})})(this,new de(ee.ABORTED,"Firestore shutting down"))}}function KT(){return new El(t=>Qj(t),cg)}async function C2(t,e){const r=Ve(t);let n=3;const i=e.query;let a=r.queries.get(i);a?!a.ba()&&e.Da()&&(n=2):(a=new rB,n=e.Da()?0:1);try{switch(n){case 0:a.wa=await r.onListen(i,!0);break;case 1:a.wa=await r.onListen(i,!1);break;case 2:await r.onFirstRemoteStoreListen(i)}}catch(o){const c=Yb(o,`Initialization of query '${Sc(e.query)}' failed`);return void e.onError(c)}r.queries.set(i,a),a.Sa.push(e),e.va(r.onlineState),a.wa&&e.Fa(a.wa)&&Qb(r)}async function k2(t,e){const r=Ve(t),n=e.query;let i=3;const a=r.queries.get(n);if(a){const o=a.Sa.indexOf(e);o>=0&&(a.Sa.splice(o,1),a.Sa.length===0?i=e.Da()?0:1:!a.ba()&&e.Da()&&(i=2))}switch(i){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function iB(t,e){const r=Ve(t);let n=!1;for(const i of e){const a=i.query,o=r.queries.get(a);if(o){for(const c of o.Sa)c.Fa(i)&&(n=!0);o.wa=i}}n&&Qb(r)}function aB(t,e,r){const n=Ve(t),i=n.queries.get(e);if(i)for(const a of i.Sa)a.onError(r);n.queries.delete(e)}function Qb(t){t.Ca.forEach(e=>{e.next()})}var cw,WT;(WT=cw||(cw={})).Ma="default",WT.Cache="cache";class j2{constructor(e,r,n){this.query=e,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new Bc(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),r=!0):this.La(e,this.onlineState)&&(this.ka(e),r=!0),this.Na=e,r}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),r=!0),r}La(e,r){if(!e.fromCache||!this.Da())return!0;const n=r!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(e){e=Bc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==cw.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(e){this.key=e}}class O2{constructor(e){this.key=e}}class sB{constructor(e,r){this.query=e,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ke(),this.mutatedKeys=Ke(),this.eu=Xj(e),this.tu=new Rc(this.eu)}get nu(){return this.Ya}ru(e,r){const n=r?r.iu:new qT,i=r?r.tu:this.tu;let a=r?r.mutatedKeys:this.mutatedKeys,o=i,c=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((m,p)=>{const v=i.get(m),w=ug(this.query,p)?p:null,b=!!v&&this.mutatedKeys.has(v.key),E=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let S=!1;v&&w?v.data.isEqual(w.data)?b!==E&&(n.track({type:3,doc:w}),S=!0):this.su(v,w)||(n.track({type:2,doc:w}),S=!0,(u&&this.eu(w,u)>0||d&&this.eu(w,d)<0)&&(c=!0)):!v&&w?(n.track({type:0,doc:w}),S=!0):v&&!w&&(n.track({type:1,doc:v}),S=!0,(u||d)&&(c=!0)),S&&(w?(o=o.add(w),a=E?a.add(m):a.delete(m)):(o=o.delete(m),a=a.delete(m)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const m=this.query.limitType==="F"?o.last():o.first();o=o.delete(m.key),a=a.delete(m.key),n.track({type:1,doc:m})}return{tu:o,iu:n,Cs:c,mutatedKeys:a}}su(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((m,p)=>function(w,b){const E=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return je(20277,{Rt:S})}};return E(w)-E(b)}(m.type,p.type)||this.eu(m.doc,p.doc)),this.ou(n),i=i??!1;const c=r&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,d=u!==this.Za;return this.Za=u,o.length!==0||d?{snapshot:new Bc(this.query,e.tu,a,o,e.mutatedKeys,u===0,d,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new qT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(r=>this.Ya=this.Ya.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ya=this.Ya.delete(r)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ke(),this.tu.forEach(n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))});const r=[];return e.forEach(n=>{this.Xa.has(n)||r.push(new O2(n))}),this.Xa.forEach(n=>{e.has(n)||r.push(new R2(n))}),r}cu(e){this.Ya=e.Qs,this.Xa=Ke();const r=this.ru(e.documents);return this.applyChanges(r,!0)}lu(){return Bc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Xb="SyncEngine";class oB{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class lB{constructor(e){this.key=e,this.hu=!1}}class cB{constructor(e,r,n,i,a,o){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new El(c=>Qj(c),cg),this.Iu=new Map,this.Eu=new Set,this.du=new kt(Te.comparator),this.Au=new Map,this.Ru=new $b,this.Vu={},this.mu=new Map,this.fu=Uc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function uB(t,e,r=!0){const n=$2(t);let i;const a=n.Tu.get(e);return a?(n.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await D2(n,e,r,!0),i}async function dB(t,e){const r=$2(t);await D2(r,e,!0,!1)}async function D2(t,e,r,n){const i=await k9(t.localStore,Hi(e)),a=i.targetId,o=t.sharedClientState.addLocalQueryTarget(a,r);let c;return n&&(c=await fB(t,e,a,o==="current",i.resumeToken)),t.isPrimaryClient&&r&&S2(t.remoteStore,i),c}async function fB(t,e,r,n,i){t.pu=(p,v,w)=>async function(E,S,P,k){let C=S.view.ru(P);C.Cs&&(C=await VT(E.localStore,S.query,!1).then(({documents:I})=>S.view.ru(I,C)));const R=k&&k.targetChanges.get(S.targetId),V=k&&k.targetMismatches.get(S.targetId)!=null,B=S.view.applyChanges(C,E.isPrimaryClient,R,V);return GT(E,S.targetId,B.au),B.snapshot}(t,p,v,w);const a=await VT(t.localStore,e,!0),o=new sB(e,a.Qs),c=o.ru(a.documents),u=kf.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",i),d=o.applyChanges(c,t.isPrimaryClient,u);GT(t,r,d.au);const m=new oB(e,r,o);return t.Tu.set(e,m),t.Iu.has(r)?t.Iu.get(r).push(e):t.Iu.set(r,[e]),d.snapshot}async function hB(t,e,r){const n=Ve(t),i=n.Tu.get(e),a=n.Iu.get(i.targetId);if(a.length>1)return n.Iu.set(i.targetId,a.filter(o=>!cg(o,e))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await ow(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),r&&qb(n.remoteStore,i.targetId),uw(n,i.targetId)}).catch(lu)):(uw(n,i.targetId),await ow(n.localStore,i.targetId,!0))}async function mB(t,e){const r=Ve(t),n=r.Tu.get(e),i=r.Iu.get(n.targetId);r.isPrimaryClient&&i.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),qb(r.remoteStore,n.targetId))}async function pB(t,e,r){const n=_B(t);try{const i=await function(o,c){const u=Ve(o),d=bt.now(),m=c.reduce((w,b)=>w.add(b.key),Ke());let p,v;return u.persistence.runTransaction("Locally write mutations","readwrite",w=>{let b=Ka(),E=Ke();return u.Ns.getEntries(w,m).next(S=>{b=S,b.forEach((P,k)=>{k.isValidDocument()||(E=E.add(P))})}).next(()=>u.localDocuments.getOverlayedDocuments(w,b)).next(S=>{p=S;const P=[];for(const k of c){const C=CU(k,p.get(k.key).overlayedDocument);C!=null&&P.push(new ao(k.key,C,Bj(C.value.mapValue),Wr.exists(!0)))}return u.mutationQueue.addMutationBatch(w,d,P,c)}).next(S=>{v=S;const P=S.applyToLocalDocumentSet(p,E);return u.documentOverlayCache.saveOverlays(w,S.batchId,P)})}).then(()=>({batchId:v.batchId,changes:Zj(p)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),function(o,c,u){let d=o.Vu[o.currentUser.toKey()];d||(d=new kt(qe)),d=d.insert(c,u),o.Vu[o.currentUser.toKey()]=d}(n,i.batchId,r),await Rf(n,i.changes),await yg(n.remoteStore)}catch(i){const a=Yb(i,"Failed to persist write");r.reject(a)}}async function M2(t,e){const r=Ve(t);try{const n=await I9(r.localStore,e);e.targetChanges.forEach((i,a)=>{const o=r.Au.get(a);o&&(it(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?it(o.hu,14607):i.removedDocuments.size>0&&(it(o.hu,42227),o.hu=!1))}),await Rf(r,n,e)}catch(n){await lu(n)}}function HT(t,e,r){const n=Ve(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const i=[];n.Tu.forEach((a,o)=>{const c=o.view.va(e);c.snapshot&&i.push(c.snapshot)}),function(o,c){const u=Ve(o);u.onlineState=c;let d=!1;u.queries.forEach((m,p)=>{for(const v of p.Sa)v.va(c)&&(d=!0)}),d&&Qb(u)}(n.eventManager,e),i.length&&n.Pu.H_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function gB(t,e,r){const n=Ve(t);n.sharedClientState.updateQueryState(e,"rejected",r);const i=n.Au.get(e),a=i&&i.key;if(a){let o=new kt(Te.comparator);o=o.insert(a,Mr.newNoDocument(a,Me.min()));const c=Ke().add(a),u=new mg(Me.min(),new Map,new kt(qe),o,c);await M2(n,u),n.du=n.du.remove(a),n.Au.delete(e),Jb(n)}else await ow(n.localStore,e,!1).then(()=>uw(n,e,r)).catch(lu)}async function yB(t,e){const r=Ve(t),n=e.batch.batchId;try{const i=await P9(r.localStore,e);V2(r,n,null),L2(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Rf(r,i)}catch(i){await lu(i)}}async function vB(t,e,r){const n=Ve(t);try{const i=await function(o,c){const u=Ve(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let m;return u.mutationQueue.lookupMutationBatch(d,c).next(p=>(it(p!==null,37113),m=p.keys(),u.mutationQueue.removeMutationBatch(d,p))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,m,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,m)).next(()=>u.localDocuments.getDocuments(d,m))})}(n.localStore,e);V2(n,e,r),L2(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Rf(n,i)}catch(i){await lu(i)}}function L2(t,e){(t.mu.get(e)||[]).forEach(r=>{r.resolve()}),t.mu.delete(e)}function V2(t,e,r){const n=Ve(t);let i=n.Vu[n.currentUser.toKey()];if(i){const a=i.get(e);a&&(r?a.reject(r):a.resolve(),i=i.remove(e)),n.Vu[n.currentUser.toKey()]=i}}function uw(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Iu.get(e))t.Tu.delete(n),r&&t.Pu.yu(n,r);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(n=>{t.Ru.containsKey(n)||F2(t,n)})}function F2(t,e){t.Eu.delete(e.path.canonicalString());const r=t.du.get(e);r!==null&&(qb(t.remoteStore,r),t.du=t.du.remove(e),t.Au.delete(r),Jb(t))}function GT(t,e,r){for(const n of r)n instanceof R2?(t.Ru.addReference(n.key,e),xB(t,n)):n instanceof O2?(ye(Xb,"Document no longer in limbo: "+n.key),t.Ru.removeReference(n.key,e),t.Ru.containsKey(n.key)||F2(t,n.key)):je(19791,{wu:n})}function xB(t,e){const r=e.key,n=r.path.canonicalString();t.du.get(r)||t.Eu.has(n)||(ye(Xb,"New document in limbo: "+r),t.Eu.add(n),Jb(t))}function Jb(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const r=new Te(pt.fromString(e)),n=t.fu.next();t.Au.set(n,new lB(r)),t.du=t.du.insert(r,n),S2(t.remoteStore,new Ms(Hi(Db(r.path)),n,"TargetPurposeLimboResolution",sg.ce))}}async function Rf(t,e,r){const n=Ve(t),i=[],a=[],o=[];n.Tu.isEmpty()||(n.Tu.forEach((c,u)=>{o.push(n.pu(u,e,r).then(d=>{if((d||r)&&n.isPrimaryClient){const m=d?!d.fromCache:r?.targetChanges.get(u.targetId)?.current;n.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){i.push(d);const m=Bb.As(u.targetId,d);a.push(m)}}))}),await Promise.all(o),n.Pu.H_(i),await async function(u,d){const m=Ve(u);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>te.forEach(d,v=>te.forEach(v.Es,w=>m.persistence.referenceDelegate.addReference(p,v.targetId,w)).next(()=>te.forEach(v.ds,w=>m.persistence.referenceDelegate.removeReference(p,v.targetId,w)))))}catch(p){if(!cu(p))throw p;ye(zb,"Failed to update sequence numbers: "+p)}for(const p of d){const v=p.targetId;if(!p.fromCache){const w=m.Ms.get(v),b=w.snapshotVersion,E=w.withLastLimboFreeSnapshotVersion(b);m.Ms=m.Ms.insert(v,E)}}}(n.localStore,a))}async function wB(t,e){const r=Ve(t);if(!r.currentUser.isEqual(e)){ye(Xb,"User change. New user:",e.toKey());const n=await w2(r.localStore,e);r.currentUser=e,function(a,o){a.mu.forEach(c=>{c.forEach(u=>{u.reject(new de(ee.CANCELLED,o))})}),a.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Rf(r,n.Ls)}}function bB(t,e){const r=Ve(t),n=r.Au.get(e);if(n&&n.hu)return Ke().add(n.key);{let i=Ke();const a=r.Iu.get(e);if(!a)return i;for(const o of a){const c=r.Tu.get(o);i=i.unionWith(c.view.nu)}return i}}function $2(t){const e=Ve(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=M2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=bB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=gB.bind(null,e),e.Pu.H_=iB.bind(null,e.eventManager),e.Pu.yu=aB.bind(null,e.eventManager),e}function _B(t){const e=Ve(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=yB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=vB.bind(null,e),e}class fp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=pg(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,r){return null}Mu(e,r){return null}vu(e){return T9(this.persistence,new E9,e.initialUser,this.serializer)}Cu(e){return new x2(Ub.mi,this.serializer)}Du(e){return new R9}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}fp.provider={build:()=>new fp};class EB extends fp{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,r){it(this.persistence.referenceDelegate instanceof up,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new l9(n,e.asyncQueue,r)}Cu(e){const r=this.cacheSizeBytes!==void 0?an.withCacheSize(this.cacheSizeBytes):an.DEFAULT;return new x2(n=>up.mi(n,r),this.serializer)}}class dw{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>HT(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=wB.bind(null,this.syncEngine),await tB(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new nB}()}createDatastore(e){const r=pg(e.databaseInfo.databaseId),n=function(a){return new V9(a)}(e.databaseInfo);return function(a,o,c,u){return new B9(a,o,c,u)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,i,a,o,c){return new q9(n,i,a,o,c)}(this.localStore,this.datastore,e.asyncQueue,r=>HT(this.syncEngine,r,0),function(){return UT.v()?new UT:new O9}())}createSyncEngine(e,r){return function(i,a,o,c,u,d,m){const p=new cB(i,a,o,c,u,d);return m&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){await async function(r){const n=Ve(r);ye(fl,"RemoteStore shutting down."),n.Ea.add(5),await jf(n),n.Aa.shutdown(),n.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}dw.provider={build:()=>new dw};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):qa("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qs="FirestoreClient";class SB{constructor(e,r,n,i,a){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=i,this.user=Dr.UNAUTHENTICATED,this.clientId=Nb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(n,async o=>{ye(Qs,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(n,o=>(ye(Qs,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new La;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=Yb(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function r0(t,e){t.asyncQueue.verifyOperationInProgress(),ye(Qs,"Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async i=>{n.isEqual(i)||(await w2(e.localStore,i),n=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function YT(t,e){t.asyncQueue.verifyOperationInProgress();const r=await AB(t);ye(Qs,"Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>zT(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,i)=>zT(e.remoteStore,i)),t._onlineComponents=e}async function AB(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ye(Qs,"Using user provided OfflineComponentProvider");try{await r0(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(i){return i.name==="FirebaseError"?i.code===ee.FAILED_PRECONDITION||i.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(r))throw r;Lc("Error using user provided cache. Falling back to memory cache: "+r),await r0(t,new fp)}}else ye(Qs,"Using default OfflineComponentProvider"),await r0(t,new EB(void 0));return t._offlineComponents}async function B2(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ye(Qs,"Using user provided OnlineComponentProvider"),await YT(t,t._uninitializedComponentsProvider._online)):(ye(Qs,"Using default OnlineComponentProvider"),await YT(t,new dw))),t._onlineComponents}function TB(t){return B2(t).then(e=>e.syncEngine)}async function z2(t){const e=await B2(t),r=e.eventManager;return r.onListen=uB.bind(null,e.syncEngine),r.onUnlisten=hB.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=dB.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=mB.bind(null,e.syncEngine),r}function PB(t,e,r={}){const n=new La;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,c,u,d){const m=new U2({next:v=>{m.Nu(),o.enqueueAndForget(()=>k2(a,p));const w=v.docs.has(c);!w&&v.fromCache?d.reject(new de(ee.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&v.fromCache&&u&&u.source==="server"?d.reject(new de(ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(v)},error:v=>d.reject(v)}),p=new j2(Db(c.path),m,{includeMetadataChanges:!0,qa:!0});return C2(a,p)}(await z2(t),t.asyncQueue,e,r,n)),n.promise}function IB(t,e,r={}){const n=new La;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,c,u,d){const m=new U2({next:v=>{m.Nu(),o.enqueueAndForget(()=>k2(a,p)),v.fromCache&&u.source==="server"?d.reject(new de(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(v)},error:v=>d.reject(v)}),p=new j2(c,m,{includeMetadataChanges:!0,qa:!0});return C2(a,p)}(await z2(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q2(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2="firestore.googleapis.com",XT=!0;class JT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new de(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=K2,this.ssl=XT}else this.host=e.host,this.ssl=e.ssl??XT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=v2;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<s9)throw new de(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}B$("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=q2(e.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new de(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new de(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new de(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,i){return n.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vg{constructor(e,r,n,i){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new JT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new JT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new j$;switch(n.type){case"firstParty":return new M$(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new de(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=QT.get(r);n&&(ye("ComponentProvider","Removing Datastore"),QT.delete(r),n.terminate())}(this),Promise.resolve()}}function NB(t,e,r,n={}){t=Hn(t,vg);const i=to(e),a=t._getSettings(),o={...a,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${r}`;i&&(Zp(`https://${c}`),eg("Firestore",!0)),a.host!==K2&&a.host!==c&&Lc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...a,host:c,ssl:i,emulatorOptions:n};if(!ll(u,o)&&(t._setSettings(u),n.mockUserToken)){let d,m;if(typeof n.mockUserToken=="string")d=n.mockUserToken,m=Dr.MOCK_USER;else{d=Mk(n.mockUserToken,t._app?.options.projectId);const p=n.mockUserToken.sub||n.mockUserToken.user_id;if(!p)throw new de(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Dr(p)}t._authCredentials=new R$(new Cj(d,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new so(this.firestore,e,this._query)}}class Ft{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Us(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ft(this.firestore,e,this._key)}toJSON(){return{type:Ft._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,r,n){if(Nf(r,Ft._jsonSchema))return new Ft(e,n||null,new Te(pt.fromString(r.referencePath)))}}Ft._jsonSchemaVersion="firestore/documentReference/1.0",Ft._jsonSchema={type:Gt("string",Ft._jsonSchemaVersion),referencePath:Gt("string")};class Us extends so{constructor(e,r,n){super(e,r,Db(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ft(this.firestore,null,new Te(e))}withConverter(e){return new Us(this.firestore,e,this._path)}}function ar(t,e,...r){if(t=Ct(t),kj("collection","path",e),t instanceof vg){const n=pt.fromString(e,...r);return dT(n),new Us(t,null,n)}{if(!(t instanceof Ft||t instanceof Us))throw new de(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(pt.fromString(e,...r));return dT(n),new Us(t.firestore,null,n)}}function gt(t,e,...r){if(t=Ct(t),arguments.length===1&&(e=Nb.newId()),kj("doc","path",e),t instanceof vg){const n=pt.fromString(e,...r);return uT(n),new Ft(t,null,new Te(n))}{if(!(t instanceof Ft||t instanceof Us))throw new de(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(pt.fromString(e,...r));return uT(n),new Ft(t.firestore,t instanceof Us?t.converter:null,new Te(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT="AsyncQueue";class eP{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new _2(this,"async_queue_retry"),this._c=()=>{const n=t0();n&&ye(ZT,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const r=t0();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const r=t0();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const r=new La;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!cu(e))throw e;ye(ZT,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const r=this.ac.then(()=>(this.rc=!0,e().catch(n=>{throw this.nc=n,this.rc=!1,qa("INTERNAL UNHANDLED ERROR: ",tP(n)),n}).then(n=>(this.rc=!1,n))));return this.ac=r,r}enqueueAfterDelay(e,r,n){this.uc(),this.oc.indexOf(e)>-1&&(r=0);const i=Gb.createAndSchedule(this,e,r,n,a=>this.hc(a));return this.tc.push(i),i}uc(){this.nc&&je(47125,{Pc:tP(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const r of this.tc)if(r.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const r=this.tc.indexOf(e);this.tc.splice(r,1)}}function tP(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class oo extends vg{constructor(e,r,n,i){super(e,r,n,i),this.type="firestore",this._queue=new eP,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new eP(e),this._firestoreClient=void 0,await e}}}function CB(t,e){const r=typeof t=="object"?t:tg(),n=typeof t=="string"?t:ip,i=Sf(r,"firestore").getImmediate({identifier:n});if(!i._initialized){const a=yb("firestore");a&&NB(i,...a)}return i}function xg(t){if(t._terminated)throw new de(ee.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||kB(t),t._firestoreClient}function kB(t){const e=t._freezeSettings(),r=function(i,a,o,c){return new eU(i,a,o,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,q2(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)}(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new SB(t._authCredentials,t._appCheckCredentials,t._queue,r,t._componentsProvider&&function(i){const a=i?._online.build();return{_offline:i?._offline.build(a),_online:a}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qn(Pr.fromBase64String(e))}catch(r){throw new de(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new qn(Pr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:qn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Nf(e,qn._jsonSchema))return qn.fromBase64String(e.bytes)}}qn._jsonSchemaVersion="firestore/bytes/1.0",qn._jsonSchema={type:Gt("string",qn._jsonSchemaVersion),bytes:Gt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new de(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ar(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new de(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new de(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return qe(this._lat,e._lat)||qe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Yi._jsonSchemaVersion}}static fromJSON(e){if(Nf(e,Yi._jsonSchema))return new Yi(e.latitude,e.longitude)}}Yi._jsonSchemaVersion="firestore/geoPoint/1.0",Yi._jsonSchema={type:Gt("string",Yi._jsonSchemaVersion),latitude:Gt("number"),longitude:Gt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,i){if(n.length!==i.length)return!1;for(let a=0;a<n.length;++a)if(n[a]!==i[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Qi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Nf(e,Qi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(r=>typeof r=="number"))return new Qi(e.vectorValues);throw new de(ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Qi._jsonSchemaVersion="firestore/vectorValue/1.0",Qi._jsonSchema={type:Gt("string",Qi._jsonSchemaVersion),vectorValues:Gt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jB=/^__.*__$/;class RB{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new ao(e,this.data,this.fieldMask,r,this.fieldTransforms):new Cf(e,this.data,r,this.fieldTransforms)}}class W2{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new ao(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function H2(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw je(40011,{Ac:t})}}class Zb{constructor(e,r,n,i,a,o){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=i,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Zb({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const r=this.path?.child(e),n=this.Vc({path:r,fc:!1});return n.gc(e),n}yc(e){const r=this.path?.child(e),n=this.Vc({path:r,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return hp(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(H2(this.Ac)&&jB.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class OB{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||pg(e)}Cc(e,r,n,i=!1){return new Zb({Ac:e,methodName:r,Dc:n,path:Ar.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Df(t){const e=t._freezeSettings(),r=pg(t._databaseId);return new OB(t._databaseId,!!e.ignoreUndefinedProperties,r)}function e_(t,e,r,n,i,a={}){const o=t.Cc(a.merge||a.mergeFields?2:0,e,r,i);r_("Data must be an object, but it was:",o,n);const c=Q2(n,o);let u,d;if(a.merge)u=new Sn(o.fieldMask),d=o.fieldTransforms;else if(a.mergeFields){const m=[];for(const p of a.mergeFields){const v=fw(e,p,r);if(!o.contains(v))throw new de(ee.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);J2(m,v)||m.push(v)}u=new Sn(m),d=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,d=o.fieldTransforms;return new RB(new on(c),u,d)}class bg extends wg{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bg}}class t_ extends wg{_toFieldTransform(e){return new TU(e.path,new Xd)}isEqual(e){return e instanceof t_}}function G2(t,e,r,n){const i=t.Cc(1,e,r);r_("Data must be an object, but it was:",i,n);const a=[],o=on.empty();io(n,(u,d)=>{const m=n_(e,u,r);d=Ct(d);const p=i.yc(m);if(d instanceof bg)a.push(m);else{const v=Mf(d,p);v!=null&&(a.push(m),o.set(m,v))}});const c=new Sn(a);return new W2(o,c,i.fieldTransforms)}function Y2(t,e,r,n,i,a){const o=t.Cc(1,e,r),c=[fw(e,n,r)],u=[i];if(a.length%2!=0)throw new de(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<a.length;v+=2)c.push(fw(e,a[v])),u.push(a[v+1]);const d=[],m=on.empty();for(let v=c.length-1;v>=0;--v)if(!J2(d,c[v])){const w=c[v];let b=u[v];b=Ct(b);const E=o.yc(w);if(b instanceof bg)d.push(w);else{const S=Mf(b,E);S!=null&&(d.push(w),m.set(w,S))}}const p=new Sn(d);return new W2(m,p,o.fieldTransforms)}function DB(t,e,r,n=!1){return Mf(r,t.Cc(n?4:3,e))}function Mf(t,e){if(X2(t=Ct(t)))return r_("Unsupported field value:",e,t),Q2(t,e);if(t instanceof wg)return function(n,i){if(!H2(i.Ac))throw i.Sc(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${n._methodName}() is not currently supported inside arrays`);const a=n._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(n,i){const a=[];let o=0;for(const c of n){let u=Mf(c,i.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),o++}return{arrayValue:{values:a}}}(t,e)}return function(n,i){if((n=Ct(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return EU(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const a=bt.fromDate(n);return{timestampValue:cp(i.serializer,a)}}if(n instanceof bt){const a=new bt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:cp(i.serializer,a)}}if(n instanceof Yi)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof qn)return{bytesValue:d2(i.serializer,n._byteString)};if(n instanceof Ft){const a=i.databaseId,o=n.firestore._databaseId;if(!o.isEqual(a))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Fb(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof Qi)return function(o,c){return{mapValue:{fields:{[$j]:{stringValue:Uj},[ap]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw c.Sc("VectorValues must only contain numeric values.");return Mb(c.serializer,d)})}}}}}}(n,i);throw i.Sc(`Unsupported field value: ${ag(n)}`)}(t,e)}function Q2(t,e){const r={};return Oj(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):io(t,(n,i)=>{const a=Mf(i,e.mc(n));a!=null&&(r[n]=a)}),{mapValue:{fields:r}}}function X2(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof bt||t instanceof Yi||t instanceof qn||t instanceof Ft||t instanceof wg||t instanceof Qi)}function r_(t,e,r){if(!X2(r)||!jj(r)){const n=ag(r);throw n==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+n)}}function fw(t,e,r){if((e=Ct(e))instanceof Of)return e._internalPath;if(typeof e=="string")return n_(t,e);throw hp("Field path arguments must be of type string or ",t,!1,void 0,r)}const MB=new RegExp("[~\\*/\\[\\]]");function n_(t,e,r){if(e.search(MB)>=0)throw hp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new Of(...e.split("."))._internalPath}catch{throw hp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function hp(t,e,r,n,i){const a=n&&!n.isEmpty(),o=i!==void 0;let c=`Function ${e}() called with invalid data`;r&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(a||o)&&(u+=" (found",a&&(u+=` in field ${n}`),o&&(u+=` in document ${i}`),u+=")"),new de(ee.INVALID_ARGUMENT,c+t+u)}function J2(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(e,r,n,i,a){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Ft(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new LB(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(_g("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class LB extends Z2{data(){return super.data()}}function _g(t,e){return typeof e=="string"?n_(t,e):e instanceof Of?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VB(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new de(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class i_{}class a_ extends i_{}function wt(t,e,...r){let n=[];e instanceof i_&&n.push(e),n=n.concat(r),function(a){const o=a.filter(u=>u instanceof s_).length,c=a.filter(u=>u instanceof Eg).length;if(o>1||o>0&&c>0)throw new de(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const i of n)t=i._apply(t);return t}class Eg extends a_{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new Eg(e,r,n)}_apply(e){const r=this._parse(e);return eR(e._query,r),new so(e.firestore,e.converter,rw(e._query,r))}_parse(e){const r=Df(e.firestore);return function(a,o,c,u,d,m,p){let v;if(d.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new de(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){nP(p,m);const b=[];for(const E of p)b.push(rP(u,a,E));v={arrayValue:{values:b}}}else v=rP(u,a,p)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||nP(p,m),v=DB(c,o,p,m==="in"||m==="not-in");return Ht.create(d,m,v)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function yi(t,e,r){const n=e,i=_g("where",t);return Eg._create(i,n,r)}class s_ extends i_{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new s_(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Ai.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(i,a){let o=i;const c=a.getFlattenedFilters();for(const u of c)eR(o,u),o=rw(o,u)}(e._query,r),new so(e.firestore,e.converter,rw(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class o_ extends a_{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new o_(e,r)}_apply(e){const r=function(i,a,o){if(i.startAt!==null)throw new de(ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new de(ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Qd(a,o)}(e._query,this._field,this._direction);return new so(e.firestore,e.converter,function(i,a){const o=i.explicitOrderBy.concat([a]);return new uu(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}function ea(t,e="asc"){const r=e,n=_g("orderBy",t);return o_._create(n,r)}class l_ extends a_{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new l_(e,r,n)}_apply(e){return new so(e.firestore,e.converter,op(e._query,this._limit,this._limitType))}}function ta(t){return z$("limit",t),l_._create("limit",t,"F")}function rP(t,e,r){if(typeof(r=Ct(r))=="string"){if(r==="")throw new de(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Yj(e)&&r.indexOf("/")!==-1)throw new de(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(pt.fromString(r));if(!Te.isDocumentKey(n))throw new de(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return xT(t,new Te(n))}if(r instanceof Ft)return xT(t,r._key);throw new de(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ag(r)}.`)}function nP(t,e){if(!Array.isArray(t)||t.length===0)throw new de(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function eR(t,e){const r=function(i,a){for(const o of i)for(const c of o.getFlattenedFilters())if(a.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new de(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class FB{convertValue(e,r="none"){switch(Gs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Hs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw je(62114,{value:e})}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return io(e,(i,a)=>{n[i]=this.convertValue(a,r)}),n}convertVectorValue(e){const r=e.fields?.[ap].arrayValue?.values?.map(n=>Vt(n.doubleValue));return new Qi(r)}convertGeoPoint(e){return new Yi(Vt(e.latitude),Vt(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=lg(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Hd(e));default:return null}}convertTimestamp(e){const r=Ws(e);return new bt(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=pt.fromString(e);it(y2(n),9688,{name:e});const i=new Gd(n.get(1),n.get(3)),a=new Te(n.popFirst(5));return i.isEqual(r)||qa(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c_(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class Cd{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class tl extends Z2{constructor(e,r,n,i,a,o){super(e,r,n,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Wm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(_g("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new de(ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,r={};return r.type=tl._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}tl._jsonSchemaVersion="firestore/documentSnapshot/1.0",tl._jsonSchema={type:Gt("string",tl._jsonSchemaVersion),bundleSource:Gt("string","DocumentSnapshot"),bundleName:Gt("string"),bundle:Gt("string")};class Wm extends tl{data(e={}){return super.data(e)}}class Oc{constructor(e,r,n,i){this._firestore=e,this._userDataWriter=r,this._snapshot=i,this.metadata=new Cd(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new Wm(this._firestore,this._userDataWriter,n.key,n,new Cd(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new de(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(c=>{const u=new Wm(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Cd(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>a||c.type!==3).map(c=>{const u=new Wm(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Cd(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,m=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),m=o.indexOf(c.doc.key)),{type:$B(c.type),doc:u,oldIndex:d,newIndex:m}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new de(ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Oc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Nb.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],i=[];return this.docs.forEach(a=>{a._document!==null&&(r.push(a._document),n.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function $B(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return je(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ef(t){t=Hn(t,Ft);const e=Hn(t.firestore,oo);return PB(xg(e),t._key).then(r=>UB(e,t,r))}Oc._jsonSchemaVersion="firestore/querySnapshot/1.0",Oc._jsonSchema={type:Gt("string",Oc._jsonSchemaVersion),bundleSource:Gt("string","QuerySnapshot"),bundleName:Gt("string"),bundle:Gt("string")};class tR extends FB{constructor(e){super(),this.firestore=e}convertBytes(e){return new qn(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Ft(this.firestore,null,r)}}function ra(t){t=Hn(t,so);const e=Hn(t.firestore,oo),r=xg(e),n=new tR(e);return VB(t._query),IB(r,t._query).then(i=>new Oc(e,n,t,i))}function tf(t,e,r){t=Hn(t,Ft);const n=Hn(t.firestore,oo),i=c_(t.converter,e,r);return Lf(n,[e_(Df(n),"setDoc",t._key,i,t.converter!==null,r).toMutation(t._key,Wr.none())])}function Xi(t,e,r,...n){t=Hn(t,Ft);const i=Hn(t.firestore,oo),a=Df(i);let o;return o=typeof(e=Ct(e))=="string"||e instanceof Of?Y2(a,"updateDoc",t._key,e,r,n):G2(a,"updateDoc",t._key,e),Lf(i,[o.toMutation(t._key,Wr.exists(!0))])}function Sg(t){return Lf(Hn(t.firestore,oo),[new hg(t._key,Wr.none())])}function lo(t,e){const r=Hn(t.firestore,oo),n=gt(t),i=c_(t.converter,e);return Lf(r,[e_(Df(t.firestore),"addDoc",n._key,i,t.converter!==null,{}).toMutation(n._key,Wr.exists(!1))]).then(()=>n)}function Lf(t,e){return function(n,i){const a=new La;return n.asyncQueue.enqueueAndForget(async()=>pB(await TB(n),i,a)),a.promise}(xg(t),e)}function UB(t,e,r){const n=r.docs.get(e._key),i=new tR(t);return new tl(t,i,e._key,n,new Cd(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BB{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Df(e)}set(e,r,n){this._verifyNotCommitted();const i=n0(e,this._firestore),a=c_(i.converter,r,n),o=e_(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,n);return this._mutations.push(o.toMutation(i._key,Wr.none())),this}update(e,r,n,...i){this._verifyNotCommitted();const a=n0(e,this._firestore);let o;return o=typeof(r=Ct(r))=="string"||r instanceof Of?Y2(this._dataReader,"WriteBatch.update",a._key,r,n,i):G2(this._dataReader,"WriteBatch.update",a._key,r),this._mutations.push(o.toMutation(a._key,Wr.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=n0(e,this._firestore);return this._mutations=this._mutations.concat(new hg(r._key,Wr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new de(ee.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function n0(t,e){if((t=Ct(t)).firestore!==e)throw new de(ee.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function ot(){return new t_("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zB(t){return xg(t=Hn(t,oo)),new BB(t,e=>Lf(t,e))}(function(e,r=!0){(function(i){ou=i})(bl),qs(new Ua("firestore",(n,{instanceIdentifier:i,options:a})=>{const o=n.getProvider("app").getImmediate(),c=new oo(new O$(n.getProvider("auth-internal")),new L$(o,n.getProvider("app-check-internal")),function(d,m){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new de(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gd(d.options.projectId,m)}(o,i),o);return a={useFetchStreams:r,...a},c._setSettings(a),c},"PUBLIC").setMultipleInstances(!0)),Wn(sT,oT,e),Wn(sT,oT,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR="firebasestorage.googleapis.com",qB="storageBucket",KB=120*1e3,WB=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca extends la{constructor(e,r,n=0){super(i0(e),`Firebase Storage: ${r} (${i0(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ca.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return i0(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var na;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(na||(na={}));function i0(t){return"storage/"+t}function HB(){const t="An unknown error occurred, please check the error payload for server response.";return new ca(na.UNKNOWN,t)}function GB(){return new ca(na.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function YB(){return new ca(na.CANCELED,"User canceled the upload/download.")}function QB(t){return new ca(na.INVALID_URL,"Invalid URL '"+t+"'.")}function XB(t){return new ca(na.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function iP(t){return new ca(na.INVALID_ARGUMENT,t)}function nR(){return new ca(na.APP_DELETED,"The Firebase app was deleted.")}function JB(t){return new ca(na.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=bi.makeFromUrl(e,r)}catch{return new bi(e,"")}if(n.path==="")return n;throw XB(e)}static makeFromUrl(e,r){let n=null;const i="([A-Za-z0-9.\\-_]+)";function a(R){R.path.charAt(R.path.length-1)==="/"&&(R.path_=R.path_.slice(0,-1))}const o="(/(.*))?$",c=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function d(R){R.path_=decodeURIComponent(R.path)}const m="v[A-Za-z0-9_]+",p=r.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",w=new RegExp(`^https?://${p}/${m}/b/${i}/o${v}`,"i"),b={bucket:1,path:3},E=r===rR?"(?:storage.googleapis.com|storage.cloud.google.com)":r,S="([^?#]*)",P=new RegExp(`^https?://${E}/${i}/${S}`,"i"),C=[{regex:c,indices:u,postModify:a},{regex:w,indices:b,postModify:d},{regex:P,indices:{bucket:1,path:2},postModify:d}];for(let R=0;R<C.length;R++){const V=C[R],B=V.regex.exec(e);if(B){const I=B[V.indices.bucket];let j=B[V.indices.path];j||(j=""),n=new bi(I,j),V.postModify(n);break}}if(n==null)throw QB(e);return n}}class ZB{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e8(t,e,r){let n=1,i=null,a=null,o=!1,c=0;function u(){return c===2}let d=!1;function m(...S){d||(d=!0,e.apply(null,S))}function p(S){i=setTimeout(()=>{i=null,t(w,u())},S)}function v(){a&&clearTimeout(a)}function w(S,...P){if(d){v();return}if(S){v(),m.call(null,S,...P);return}if(u()||o){v(),m.call(null,S,...P);return}n<64&&(n*=2);let C;c===1?(c=2,C=0):C=(n+Math.random())*1e3,p(C)}let b=!1;function E(S){b||(b=!0,v(),!d&&(i!==null?(S||(c=2),clearTimeout(i),p(0)):S||(c=1)))}return p(0),a=setTimeout(()=>{o=!0,E(!0)},r),E}function t8(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r8(t){return t!==void 0}function aP(t,e,r,n){if(n<e)throw iP(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw iP(`Invalid value for '${t}'. Expected ${r} or less.`)}function n8(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const i=e(n)+"="+e(t[n]);r=r+i+"&"}return r=r.slice(0,-1),r}var mp;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(mp||(mp={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i8(t,e){const r=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return r||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a8{constructor(e,r,n,i,a,o,c,u,d,m,p,v=!0,w=!1){this.url_=e,this.method_=r,this.headers_=n,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=m,this.connectionFactory_=p,this.retry=v,this.isUsingEmulator=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,E)=>{this.resolve_=b,this.reject_=E,this.start_()})}start_(){const e=(n,i)=>{if(i){n(!1,new wm(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const o=c=>{const u=c.loaded,d=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&a.addUploadProgressListener(o),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(o),this.pendingConnection_=null;const c=a.getErrorCode()===mp.NO_ERROR,u=a.getStatus();if(!c||i8(u,this.additionalRetryCodes_)&&this.retry){const m=a.getErrorCode()===mp.ABORT;n(!1,new wm(!1,null,m));return}const d=this.successCodes_.indexOf(u)!==-1;n(!0,new wm(d,a))})},r=(n,i)=>{const a=this.resolve_,o=this.reject_,c=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(c,c.getResponse());r8(u)?a(u):a()}catch(u){o(u)}else if(c!==null){const u=HB();u.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,u)):o(u)}else if(i.canceled){const u=this.appDelete_?nR():YB();o(u)}else{const u=GB();o(u)}};this.canceled_?r(!1,new wm(!1,null,!0)):this.backoffId_=e8(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&t8(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class wm{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function s8(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function o8(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function l8(t,e){e&&(t["X-Firebase-GMPID"]=e)}function c8(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function u8(t,e,r,n,i,a,o=!0,c=!1){const u=n8(t.urlParams),d=t.url+u,m=Object.assign({},t.headers);return l8(m,e),s8(m,r),o8(m,a),c8(m,n),new a8(d,t.method,m,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d8(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function f8(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e,r){this._service=e,r instanceof bi?this._location=r:this._location=bi.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new pp(e,r)}get root(){const e=new bi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return f8(this._location.path)}get storage(){return this._service}get parent(){const e=d8(this._location.path);if(e===null)return null;const r=new bi(this._location.bucket,e);return new pp(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw JB(e)}}function sP(t,e){const r=e?.[qB];return r==null?null:bi.makeFromBucketSpec(r,t)}function h8(t,e,r,n={}){t.host=`${e}:${r}`;const i=to(e);i&&(Zp(`https://${t.host}/b`),eg("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:a}=n;a&&(t._overrideAuthToken=typeof a=="string"?a:Mk(a,t.app.options.projectId))}class m8{constructor(e,r,n,i,a,o=!1){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=i,this._firebaseVersion=a,this._isUsingEmulator=o,this._bucket=null,this._host=rR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=KB,this._maxUploadRetryTime=WB,this._requests=new Set,i!=null?this._bucket=bi.makeFromBucketSpec(i,this._host):this._bucket=sP(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=bi.makeFromBucketSpec(this._url,e):this._bucket=sP(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){aP("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){aP("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){if(sn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new pp(this,e)}_makeRequest(e,r,n,i,a=!0){if(this._deleted)return new ZB(nR());{const o=u8(e,this._appId,n,i,r,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,r){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,i).getPromise()}}const oP="@firebase/storage",lP="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR="storage";function p8(t=tg(),e){t=Ct(t);const n=Sf(t,iR).getImmediate({identifier:e}),i=yb("storage");return i&&g8(n,...i),n}function g8(t,e,r,n={}){h8(t,e,r,n)}function y8(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new m8(r,n,i,e,bl)}function v8(){qs(new Ua(iR,y8,"PUBLIC").setMultipleInstances(!0)),Wn(oP,lP,""),Wn(oP,lP,"esm2020")}v8();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x8{constructor(e,r,n,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,sn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=r.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||r.get().then(a=>this.auth=a,()=>{}),this.messaging||n.get().then(a=>this.messaging=a,()=>{}),this.appCheck||i?.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const r=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(e){const r=await this.getAuthToken(),n=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:r,messagingToken:n,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw="us-central1";class w8{constructor(e,r,n,i,a=hw,o=(...c)=>fetch(...c)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new x8(e,r,n,i),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{const c=new URL(a);this.customDomain=c.origin+(c.pathname==="/"?"":c.pathname),this.region=hw}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${r}.cloudfunctions.net/${e}`}}function b8(t,e,r){const n=to(e);t.emulatorOrigin=`http${n?"s":""}://${e}:${r}`,n&&(Zp(t.emulatorOrigin),eg("Functions",!0))}const cP="@firebase/functions",uP="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _8="auth-internal",E8="app-check-internal",S8="messaging-internal";function A8(t){const e=(r,{instanceIdentifier:n})=>{const i=r.getProvider("app").getImmediate(),a=r.getProvider(_8),o=r.getProvider(S8),c=r.getProvider(E8);return new w8(i,a,o,c,n)};qs(new Ua(aR,e,"PUBLIC").setMultipleInstances(!0)),Wn(cP,uP,t),Wn(cP,uP,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T8(t=tg(),e=hw){const n=Sf(Ct(t),aR).getImmediate({identifier:e}),i=yb("functions");return i&&P8(n,...i),n}function P8(t,e,r){b8(Ct(t),e,r)}A8();const I8={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyAqkGp0shvHAaZ5bEl-1C56rqL00FYRdu0",VITE_FIREBASE_APP_ID:"1:421202390803:web:4611dd5f91fb718c2274e6",VITE_FIREBASE_AUTH_DOMAIN:"tenant-f74c7.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"421202390803",VITE_FIREBASE_PROJECT_ID:"tenant-f74c7",VITE_FIREBASE_STORAGE_BUCKET:"tenant-f74c7.firebasestorage.app",VITE_RAZORPAY_KEY_ID:"rzp_test_cLCu5FXzLd5EGW",VITE_RAZORPAY_KEY_SECRET:"wIkK7lt99zR4g2lTxPzN18ii",VITE_WHATSAPP_API_URL:"https://cpaasreseller.notify24x7.com/REST/directApi"},N8=["VITE_FIREBASE_API_KEY","VITE_FIREBASE_AUTH_DOMAIN","VITE_FIREBASE_PROJECT_ID","VITE_FIREBASE_STORAGE_BUCKET","VITE_FIREBASE_MESSAGING_SENDER_ID","VITE_FIREBASE_APP_ID"],a0=N8.filter(t=>!I8[t]);if(a0.length>0)throw console.error("❌ Missing Firebase environment variables:",a0),console.error("Please check your .env file and ensure all Firebase configuration variables are set."),new Error(`Missing required Firebase configuration: ${a0.join(", ")}`);const u_={apiKey:"AIzaSyAqkGp0shvHAaZ5bEl-1C56rqL00FYRdu0",authDomain:"tenant-f74c7.firebaseapp.com",projectId:"tenant-f74c7",storageBucket:"tenant-f74c7.firebasestorage.app",messagingSenderId:"421202390803",appId:"1:421202390803:web:4611dd5f91fb718c2274e6"},C8=t=>{const e=Object.entries(t).filter(([n,i])=>!i||i==="your_actual_api_key_here"||i==="undefined"||i==="null");if(e.length>0)throw console.error("❌ Invalid Firebase configuration values:",e.map(([n])=>n)),new Error("Firebase configuration contains invalid values. Please check your .env file.");if(!/^[a-z0-9-]+$/.test(t.projectId))throw new Error("Invalid Firebase project ID format");console.log("✅ Firebase configuration validated successfully"),console.log("🔗 Project ID:",t.projectId),console.log("🌍 Auth Domain:",t.authDomain)};C8(u_);let gd,kd,Le,k8,j8;try{gd=Fk(u_),console.log("🚀 Firebase app initialized successfully"),kd=_j(gd),Le=CB(gd),k8=p8(gd);const t="us-central1";j8=T8(gd,t),console.log("🔧 Firebase services initialized"),console.log("📍 Functions region:",t)}catch(t){throw console.error("❌ Failed to initialize Firebase:",t),t}u_.projectId;const mw={async getPlatformSettings(){try{const t=await ef(gt(Le,"platformSettings","main"));return t.exists()?t.data():null}catch(t){return console.error("Error fetching platform settings:",t),null}},async updatePlatformSettings(t){try{return await tf(gt(Le,"platformSettings","main"),{...t,updatedAt:ot()},{merge:!0}),!0}catch(e){throw console.error("Error updating platform settings:",e),e}},async createInitialPlatformSettings(){try{const t={razorpayKeyId:"",razorpayKeySecret:"",commissionPercentage:2.5,gstOnCommission:!0,platformName:"SocietyPay",supportEmail:"support@societypay.com",supportPhone:"+91 98765 43210"};return await tf(gt(Le,"platformSettings","main"),{...t,createdAt:ot(),updatedAt:ot()}),t}catch(t){throw console.error("Error creating initial platform settings:",t),t}}},dP={async getCommunitySettings(t){if(!t)throw new Error("Community ID is required");try{const e=await ef(gt(Le,"communitySettings",t));return e.exists()?e.data():null}catch(e){return console.error("Error fetching community settings:",e),null}},async updateCommunitySettings(t,e){if(!t)throw new Error("Community ID is required");try{return await tf(gt(Le,"communitySettings",t),{...e,updatedAt:ot()},{merge:!0}),!0}catch(r){throw console.error("Error updating community settings:",r),r}},async createInitialCommunitySettings(t){if(!t)throw new Error("Community ID is required");try{const e={paymentGateway:{razorpayKeyId:"",razorpayKeySecret:"",webhookSecret:""},whatsapp:{wabaNumber:"",apiKey:"",baseUrl:"https://cpaasreseller.notify24x7.com/REST/directApi"},charges:{gstEnabled:!0,gstPercentage:18,handlingCharges:50},notifications:{emailEnabled:!0,smsEnabled:!1,whatsappEnabled:!0,reminderDays:[3,1]}};return await tf(gt(Le,"communitySettings",t),{...e,createdAt:ot(),updatedAt:ot()}),e}catch(e){throw console.error("Error creating initial community settings:",e),e}}},Tr={async createCommunity(t){try{return(await lo(ar(Le,"communities"),{...t,createdAt:ot(),updatedAt:ot()})).id}catch(e){throw console.error("Error creating community:",e),e}},async getCommunities(t){try{let e=wt(ar(Le,"communities"),ea("createdAt","desc"));return t&&(e=wt(e,ta(t))),(await ra(e)).docs.map(n=>({id:n.id,...n.data(),createdAt:n.data().createdAt?.toDate()??null,updatedAt:n.data().updatedAt?.toDate()??null,subscriptionStartDate:n.data().subscriptionStartDate?.toDate()??null,subscriptionEndDate:n.data().subscriptionEndDate?.toDate()??null}))}catch(e){throw console.error("Error fetching communities:",e),e}},async getCommunity(t){if(!t)throw new Error("Community ID is required");try{const e=await ef(gt(Le,"communities",t));if(e.exists()){const r=e.data();return{id:e.id,...r,createdAt:r.createdAt?.toDate()??null,updatedAt:r.updatedAt?.toDate()??null,subscriptionStartDate:r.subscriptionStartDate?.toDate()??null,subscriptionEndDate:r.subscriptionEndDate?.toDate()??null}}return null}catch(e){throw console.error("Error fetching community:",e),e}},async updateCommunity(t,e){if(!t)throw new Error("Community ID is required");try{await Xi(gt(Le,"communities",t),{...e,updatedAt:ot()})}catch(r){throw console.error("Error updating community:",r),r}},async deleteCommunity(t){if(!t)throw new Error("Community ID is required");try{await Sg(gt(Le,"communities",t))}catch(e){throw console.error("Error deleting community:",e),e}},async toggleCommunityStatus(t){if(!t)throw new Error("Community ID is required");try{const e=await ef(gt(Le,"communities",t));if(e.exists()){const r=e.data().isActive;await Xi(gt(Le,"communities",t),{isActive:!r,updatedAt:ot()})}}catch(e){throw console.error("Error toggling community status:",e),e}},async updateSubscription(t,e,r,n){if(!t)throw new Error("Community ID is required");try{await Xi(gt(Le,"communities",t),{subscriptionId:e,subscriptionStartDate:r,subscriptionEndDate:n,isActive:!0,updatedAt:ot()})}catch(i){throw console.error("Error updating subscription:",i),i}}},rf={async createUser(t){try{return(await lo(ar(Le,"users"),{...t,createdAt:ot(),updatedAt:ot()})).id}catch(e){throw console.error("Error creating user:",e),e}},async createUserWithId(t,e){if(!t)throw new Error("User ID is required");try{return await tf(gt(Le,"users",t),{...e,createdAt:ot(),updatedAt:ot()}),t}catch(r){throw console.error("Error creating user with ID:",r),r}},async getUsers(t){try{let e=wt(ar(Le,"users"),ea("createdAt","desc"));return t&&(e=wt(e,ta(t))),(await ra(e)).docs.map(n=>({id:n.id,...n.data(),createdAt:n.data().createdAt?.toDate()??null,updatedAt:n.data().updatedAt?.toDate()??null}))}catch(e){throw console.error("Error fetching users:",e),e}},async getUser(t){if(!t)throw new Error("User ID is required");try{const e=await ef(gt(Le,"users",t));if(e.exists()){const r=e.data();return{id:e.id,...r,createdAt:r.createdAt?.toDate()??null,updatedAt:r.updatedAt?.toDate()??null}}return null}catch(e){throw console.error("Error fetching user:",e),e}},async getUsersByCommunity(t,e){if(!t)throw new Error("Community ID is required");try{let r=wt(ar(Le,"users"),yi("communityId","==",t),ea("createdAt","desc"));return e&&(r=wt(r,ta(e))),(await ra(r)).docs.map(i=>({id:i.id,...i.data(),createdAt:i.data().createdAt?.toDate()??null,updatedAt:i.data().updatedAt?.toDate()??null}))}catch(r){throw console.error("Error fetching users by community:",r),r}},async updateUser(t,e){if(!t)throw new Error("User ID is required");try{await Xi(gt(Le,"users",t),{...e,updatedAt:ot()})}catch(r){throw console.error("Error updating user:",r),r}}},R8={async createBlock(t){try{return(await lo(ar(Le,"blocks"),{...t,createdAt:ot()})).id}catch(e){throw console.error("Error creating block:",e),e}},async getBlocks(t,e){if(!t)throw new Error("Community ID is required");try{let r=wt(ar(Le,"blocks"),yi("communityId","==",t),ea("createdAt","desc"));return e&&(r=wt(r,ta(e))),(await ra(r)).docs.map(i=>({id:i.id,...i.data(),createdAt:i.data().createdAt?.toDate()??null}))}catch(r){throw console.error("Error fetching blocks:",r),r}},async updateBlock(t,e){if(!t)throw new Error("Block ID is required");try{await Xi(gt(Le,"blocks",t),{...e,updatedAt:ot()})}catch(r){throw console.error("Error updating block:",r),r}},async deleteBlock(t){if(!t)throw new Error("Block ID is required");try{await Sg(gt(Le,"blocks",t))}catch(e){throw console.error("Error deleting block:",e),e}}},ja={async createTenant(t){try{return(await lo(ar(Le,"tenants"),{...t,createdAt:ot()})).id}catch(e){throw console.error("Error creating tenant:",e),e}},async getTenants(t,e){if(!t)throw new Error("Community ID is required");try{let r=wt(ar(Le,"tenants"),yi("communityId","==",t),ea("createdAt","desc"));return e&&(r=wt(r,ta(e))),(await ra(r)).docs.map(i=>({id:i.id,...i.data(),createdAt:i.data().createdAt?.toDate()??null}))}catch(r){throw console.error("Error fetching tenants:",r),r}},async updateTenant(t,e){if(!t)throw new Error("Tenant ID is required");try{await Xi(gt(Le,"tenants",t),{...e,updatedAt:ot()})}catch(r){throw console.error("Error updating tenant:",r),r}},async deleteTenant(t){if(!t)throw new Error("Tenant ID is required");try{await Sg(gt(Le,"tenants",t))}catch(e){throw console.error("Error deleting tenant:",e),e}},async getTenantStats(t){if(!t)throw new Error("Community ID is required");try{const r=(await this.getTenants(t)).filter(i=>i.isActive),n=r.reduce((i,a)=>i+(a.monthlyMaintenance??0),0);return{totalTenants:r.length,totalMonthlyMaintenance:n}}catch(e){throw console.error("Error fetching tenant stats:",e),e}}},pw={async createMaintenanceRecord(t){try{return(await lo(ar(Le,"maintenanceRecords"),{...t,createdAt:ot()})).id}catch(e){throw console.error("Error creating maintenance record:",e),e}},async getMaintenanceRecords(t,e,r){if(!t)throw new Error("Community ID is required");try{let n=wt(ar(Le,"maintenanceRecords"),yi("communityId","==",t));return e?.status&&(n=wt(n,yi("status","==",e.status))),e?.month&&(n=wt(n,yi("month","==",e.month))),e?.year&&(n=wt(n,yi("year","==",e.year))),e?.tenantId&&(n=wt(n,yi("tenantId","==",e.tenantId))),n=wt(n,ea("createdAt","desc")),r&&(n=wt(n,ta(r))),(await ra(n)).docs.map(a=>({id:a.id,...a.data(),dueDate:a.data().dueDate?.toDate()??null,paidDate:a.data().paidDate?.toDate()??null,createdAt:a.data().createdAt?.toDate()??null}))}catch(n){throw console.error("Error fetching maintenance records:",n),n}},async updateMaintenanceRecord(t,e){if(!t)throw new Error("Maintenance Record ID is required");try{await Xi(gt(Le,"maintenanceRecords",t),{...e,updatedAt:ot()})}catch(r){throw console.error("Error updating maintenance record:",r),r}},async generateMonthlyMaintenance(t,e,r){if(!t||!e||!r)throw new Error("Required parameters missing");try{const n=await ja.getTenants(t),i=await Tr.getCommunity(t);if(!i)throw new Error("Community not found");if(!i.settings?.charges)throw new Error("Community settings incomplete");const a=zB(Le),o=[],c=new Date(`${e} 1, ${r}`).getMonth();if(isNaN(c))throw new Error("Invalid month string");for(const u of n.filter(d=>d.isActive)){const d=i.settings.charges.gstEnabled?u.monthlyMaintenance*i.settings.charges.gstPercentage/100:0,m=u.monthlyMaintenance+d+i.settings.charges.handlingCharges,p={communityId:t,tenantId:u.id,month:e,year:r,amount:u.monthlyMaintenance,gstAmount:d,handlingCharges:i.settings.charges.handlingCharges,totalAmount:m,status:"pending",dueDate:new Date(r,c,10),createdAt:ot()},v=gt(ar(Le,"maintenanceRecords"));a.set(v,p),o.push({id:v.id,...p})}if(o.length>500)throw new Error("Too many records for a single batch");return await a.commit(),o}catch(n){throw console.error("Error generating monthly maintenance:",n),n}},async getMaintenanceStats(t,e,r){if(!t)throw new Error("Community ID is required");try{const n=e||new Date().toLocaleString("default",{month:"long"}),i=r||new Date().getFullYear(),a=await this.getMaintenanceRecords(t,{month:n,year:i}),o=a.filter(m=>m.status==="paid").reduce((m,p)=>m+(p.totalAmount??0),0),c=a.filter(m=>m.status==="pending"||m.status==="overdue").reduce((m,p)=>m+(p.totalAmount??0),0),u=a.reduce((m,p)=>m+(p.totalAmount??0),0),d=u>0?o/u*100:0;return{totalPaid:o,totalDue:c,totalAmount:u,collectionRate:d,recordsCount:a.length}}catch(n){throw console.error("Error fetching maintenance stats:",n),n}}},sR={async createPayment(t){try{return(await lo(ar(Le,"payments"),{...t,createdAt:ot()})).id}catch(e){throw console.error("Error creating payment:",e),e}},async getPayments(t,e){if(!t)throw new Error("Community ID is required");try{let r=wt(ar(Le,"payments"),yi("communityId","==",t),ea("createdAt","desc"));return e&&(r=wt(r,ta(e))),(await ra(r)).docs.map(i=>({id:i.id,...i.data(),createdAt:i.data().createdAt?.toDate()??null}))}catch(r){throw console.error("Error fetching payments:",r),r}},async updatePayment(t,e){if(!t)throw new Error("Payment ID is required");try{await Xi(gt(Le,"payments",t),{...e,updatedAt:ot()})}catch(r){throw console.error("Error updating payment:",r),r}}},Yo={async createSubscription(t){try{return(await lo(ar(Le,"subscriptions"),{...t,createdAt:ot()})).id}catch(e){throw console.error("Error creating subscription:",e),e}},async getSubscriptions(t){try{let e=wt(ar(Le,"subscriptions"),ea("price","asc"));return t&&(e=wt(e,ta(t))),(await ra(e)).docs.map(n=>({id:n.id,...n.data(),createdAt:n.data().createdAt?.toDate()??null}))}catch(e){throw console.error("Error fetching subscriptions:",e),e}},async getActiveSubscriptions(t){try{let e=wt(ar(Le,"subscriptions"),yi("isActive","==",!0),ea("price","asc"));return t&&(e=wt(e,ta(t))),(await ra(e)).docs.map(n=>({id:n.id,...n.data(),createdAt:n.data().createdAt?.toDate()??null}))}catch(e){throw console.error("Error fetching active subscriptions:",e),e}},async updateSubscription(t,e){if(!t)throw new Error("Subscription ID is required");try{await Xi(gt(Le,"subscriptions",t),{...e,updatedAt:ot()})}catch(r){throw console.error("Error updating subscription:",r),r}},async deleteSubscription(t){if(!t)throw new Error("Subscription ID is required");try{await Sg(gt(Le,"subscriptions",t))}catch(e){throw console.error("Error deleting subscription:",e),e}}},O8={async createSubscriptionPayment(t){try{return(await lo(ar(Le,"subscriptionPayments"),{...t,createdAt:ot()})).id}catch(e){throw console.error("Error creating subscription payment:",e),e}},async getSubscriptionPayments(t,e){if(!t)throw new Error("Community ID is required");try{let r=wt(ar(Le,"subscriptionPayments"),yi("communityId","==",t),ea("createdAt","desc"));return e&&(r=wt(r,ta(e))),(await ra(r)).docs.map(i=>({id:i.id,...i.data(),startDate:i.data().startDate?.toDate()??null,endDate:i.data().endDate?.toDate()??null,createdAt:i.data().createdAt?.toDate()??null}))}catch(r){throw console.error("Error fetching subscription payments:",r),r}},async updateSubscriptionPayment(t,e){if(!t)throw new Error("Subscription Payment ID is required");try{await Xi(gt(Le,"subscriptionPayments",t),{...e,updatedAt:ot()})}catch(r){throw console.error("Error updating subscription payment:",r),r}}},d_={async getSuperAdminStats(){try{const[t,e]=await Promise.all([Tr.getCommunities(),Yo.getSubscriptions()]),r=t.length,n=t.filter(u=>u.isActive).length,i=t.reduce((u,d)=>u+(d.totalTenants??0),0),a=e.length>0?e.reduce((u,d)=>u+(d.price??0),0)/e.length:0,o=n*a;return{totalCommunities:r,activeCommunities:n,totalTenants:i,monthlyRevenue:o,collectionRate:94.5}}catch(t){throw console.error("Error fetching super admin stats:",t),t}},async getCommunityAdminStats(t){if(!t)throw new Error("Community ID is required");try{const[e,r]=await Promise.all([ja.getTenantStats(t),pw.getMaintenanceStats(t)]);return{...e,...r}}catch(e){throw console.error("Error fetching community admin stats:",e),e}}},oR=_.createContext(void 0);function $r(){const t=_.useContext(oR);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t}function D8({children:t}){const[e,r]=_.useState(null),[n,i]=_.useState(null),[a,o]=_.useState(!0),c=_.useCallback(async w=>{try{return await rf.getUser(w)}catch(b){return console.error("Error fetching user profile:",b),null}},[]),u=_.useCallback(async()=>{if(e){const w=await c(e.uid);i(w)}},[e,c]);_.useEffect(()=>{const w=y5(kd,async b=>{if(r(b),b){const E=await c(b.uid);i(E)}else i(null);o(!1)});return()=>w()},[c]);const d=_.useCallback(async(w,b)=>{await m5(kd,w,b)},[]),m=_.useCallback(async(w,b,E)=>{const S=await h5(kd,w,b);await rf.createUser(S.user.uid,{email:w,...E,role:E.communityId?"tenant":"community_admin",isActive:!0})},[]),p=_.useCallback(async()=>{await v5(kd),i(null),r(null)},[]),v=_.useMemo(()=>({user:e,userProfile:n,loading:a,signIn:d,signUp:m,signOut:p,refreshProfile:u}),[e,n,a,d,m,p,u]);return f.jsx(oR.Provider,{value:v,children:t})}const M8=()=>{const t=localStorage.getItem("recentPaymentSuccess");if(t){const n=parseInt(t);if(Date.now()-n<1e3*60*30)return!0}return sessionStorage.getItem("validSubscriptionDetected")==="true"||sessionStorage.getItem("fromPaymentSuccess")==="true"},lR=t=>{localStorage.setItem("recentPaymentSuccess",Date.now().toString()),sessionStorage.setItem("validSubscriptionDetected","true"),sessionStorage.setItem("fromPaymentSuccess","true"),t&&localStorage.setItem("lastSuccessfulPayment",t),console.log("💰 Payment success recorded in storage")},L8=()=>{sessionStorage.setItem("bypassSubscriptionCheck","true"),console.log("🔓 Subscription check bypassed for this session")},cR=()=>sessionStorage.getItem("bypassSubscriptionCheck")==="true"||M8();function Ns({children:t,requiredRole:e}){const r=$r(),n=r.user,i=r.userProfile,a=r.loading,o=r.refreshUserProfile||(()=>{}),c=Qn(),[u,d]=_.useState(!1),[m,p]=_.useState(!1),v=localStorage.getItem("recentPaymentSuccess"),w=v?parseInt(v):0,b=Date.now()-w<1e3*60*30,E=sessionStorage.getItem("validSubscriptionDetected")==="true",S=cR(),P=c.pathname==="/payment-success"||c.pathname==="/select-subscription"||c.state?.fromPayment===!0||c.state?.fromSubscriptionCheck===!0||b||E||S;if(_.useEffect(()=>{i?.role==="community_admin"&&console.log("🔍 ProtectedRoute Debug:",{path:c.pathname,isPaymentRelated:P,isRecentPayment:b,validSubscriptionDetected:E,bypassCheck:S,paymentTimestamp:w?new Date(w).toISOString():null,fromPaymentState:c.state?.fromPayment,fromSubscriptionCheck:c.state?.fromSubscriptionCheck,hasSubscription:!!i?.subscription,subscriptionStatus:i?.subscription?.status,subscriptionEndDate:i?.subscription?.endDate,bypassingCheck:P,sessionStorageBypass:sessionStorage.getItem("bypassSubscriptionCheck")})},[c,i,P,b,w,E,S]),_.useEffect(()=>{i?.role==="community_admin"&&i?.communityId&&!P&&(async()=>{try{const C=await Tr.getCommunity(i.communityId,!0);console.log("🔍 Direct community subscription check:",{communityId:i.communityId,hasSubscription:!!C?.subscription,status:C?.subscription?.status,endDate:C?.subscription?.endDate}),C?.subscription?.status==="active"?(console.log("✅ Valid subscription found in direct community check"),p(!0),sessionStorage.setItem("validSubscriptionDetected","true")):(console.log("❌ No valid subscription found in direct community check"),p(!1))}catch(C){console.error("🔥 Error in direct community subscription check:",C)}finally{d(!0)}})()},[i?.communityId,i?.role,P]),a)return console.log("🔄 Auth is loading..."),f.jsx("div",{className:"min-h-screen flex items-center justify-center",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})});if(!n)return console.warn("🛑 No Firebase user found. Redirecting to /login"),f.jsx(zi,{to:"/login",replace:!0});if(!i)return console.warn("⚠️ No userProfile found. Redirecting to /login"),f.jsx(zi,{to:"/login",replace:!0});if(e&&i.role!==e)return console.warn(`⛔ Access denied. Required: ${e}, Found: ${i.role}`),f.jsx(zi,{to:"/unauthorized",replace:!0});if(i.role==="community_admin"&&!P){const k=sessionStorage.getItem("lastSubscriptionRedirect"),C=Date.now();if(k&&C-parseInt(k)<5e3)return console.warn("⚠️ Detected potential redirect loop, bypassing subscription check"),f.jsx(f.Fragment,{children:t});if(u&&m)return console.log("✅ Valid subscription confirmed by direct check"),f.jsx(f.Fragment,{children:t});typeof o=="function"&&o();const R=i.subscription;if(console.log("🔍 Subscription check details:",{hasSubscription:!!R,status:R?.status,endDate:R?.endDate,userProfileId:i.id,communityId:i.communityId,directCheckComplete:u,hasValidSubscription:m}),u&&!m&&(!R||R.status!=="active"))return console.warn("🔒 Subscription inactive or missing (confirmed by direct check). Redirecting to /subscription-expired"),sessionStorage.setItem("lastSubscriptionRedirect",C.toString()),f.jsx(zi,{to:"/subscription-expired",replace:!0});if(!u){if(!R||R.status!=="active")return console.warn("🔒 Subscription inactive or missing. Redirecting to /subscription-expired"),sessionStorage.setItem("lastSubscriptionRedirect",C.toString()),f.jsx(zi,{to:"/subscription-expired",replace:!0});let V;try{if(V=new Date(typeof R.endDate=="string"?R.endDate:R.endDate?.toString()),isNaN(V.getTime()))return console.warn("⚠️ Invalid subscription end date"),f.jsx(f.Fragment,{children:t})}catch(I){return console.error("🔥 Error parsing subscription end date:",I),f.jsx(f.Fragment,{children:t})}if(V<new Date)return console.warn(`📅 Subscription expired on ${V.toDateString()}`),sessionStorage.setItem("lastSubscriptionRedirect",C.toString()),f.jsx(zi,{to:"/subscription-expired",replace:!0});console.log(`✅ Subscription valid until ${V.toDateString()}`)}}return f.jsx(f.Fragment,{children:t})}function V8({children:t}){const{userProfile:e}=$r(),[r,n]=_.useState(!0),[i,a]=_.useState(!1),o=Qn(),c=localStorage.getItem("recentPaymentSuccess"),u=c?parseInt(c):0,d=Date.now()-u<1e3*60*30,m=o.pathname==="/payment-success"||o.state?.fromPayment===!0||d;_.useEffect(()=>{e?.communityId&&console.log("🔍 SubscriptionCheck Debug:",{path:o.pathname,isFromPaymentSuccess:m,isRecentPayment:d,paymentTimestamp:new Date(u).toISOString(),fromPaymentState:o.state?.fromPayment,communityId:e.communityId,hasSubscription:!!e?.subscription,subscriptionStatus:e?.subscription?.status,subscriptionEndDate:e?.subscription?.endDate})},[o,e,m,d,u]);const p=_.useCallback(async()=>{if(m){console.log("✅ Bypassing subscription check due to recent payment"),a(!0),n(!1);return}if(!e?.communityId){console.warn("❌ No communityId found in userProfile"),a(!1),n(!1);return}try{const v=await Tr.getCommunity(e.communityId,!0);if(!v||!v.subscription){console.warn("❌ Community or subscription not found"),a(!1);return}const{subscription:w}=v,{status:b,endsAt:E}=w;if(b!=="active"||!E)console.log("🔒 Subscription inactive or missing end date"),a(!1);else{const S=new Date,P=typeof E.toDate=="function"?E.toDate():new Date(E);console.log("📅 Subscription end date:",P),P>=S?a(!0):(console.warn("📅 Subscription has expired:",P),a(!1))}}catch(v){console.error("🔥 Error checking subscription:",v),a(!1)}finally{n(!1)}},[e,m,d]);if(_.useEffect(()=>{p()},[p]),r)return f.jsx("div",{className:"min-h-screen flex items-center justify-center",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})});if(!i&&!m){const v=sessionStorage.getItem("lastSubscriptionRedirect"),w=Date.now();return v&&w-parseInt(v)<5e3?(console.warn("⚠️ Detected potential redirect loop in SubscriptionCheck, bypassing redirect"),f.jsx(f.Fragment,{children:t})):(console.log("🔄 Redirecting to subscription expired page"),sessionStorage.setItem("lastSubscriptionRedirect",w.toString()),f.jsx(zi,{to:"/subscription-expired",replace:!0}))}return f.jsx(f.Fragment,{children:t})}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var F8={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $8=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ue=(t,e)=>{const r=_.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:o,className:c="",children:u,...d},m)=>_.createElement("svg",{ref:m,...F8,width:i,height:i,stroke:n,strokeWidth:o?Number(a)*24/Number(i):a,className:["lucide",`lucide-${$8(t)}`,c].join(" "),...d},[...e.map(([p,v])=>_.createElement(p,v)),...Array.isArray(u)?u:[u]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U8=Ue("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uR=Ue("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dR=Ue("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ag=Ue("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ti=Ue("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fP=Ue("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f_=Ue("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tg=Ue("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B8=Ue("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z8=Ue("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fR=Ue("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hl=Ue("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hR=Ue("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q8=Ue("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _i=Ue("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pg=Ue("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mR=Ue("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zc=Ue("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pR=Ue("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K8=Ue("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nf=Ue("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W8=Ue("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=Ue("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H8=Ue("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vf=Ue("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const af=Ue("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h_=Ue("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G8=Ue("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y8=Ue("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sf=Ue("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gR=Ue("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q8=Ue("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X8=Ue("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J8=Ue("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qc=Ue("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yR=Ue("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z8=Ue("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ig=Ue("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),ez=[{icon:zc,label:"Dashboard",href:"/super-admin"},{icon:Ti,label:"Communities",href:"/super-admin/communities"},{icon:_i,label:"Subscriptions",href:"/super-admin/subscriptions"},{icon:hl,label:"Payments",href:"/super-admin/payments"},{icon:dR,label:"Reports",href:"/super-admin/reports"},{icon:h_,label:"Settings",href:"/super-admin/settings"}],tz=[{icon:zc,label:"Dashboard",href:"/admin"},{icon:Ti,label:"Blocks & Flats",href:"/admin/blocks"},{icon:Ig,label:"Tenants",href:"/admin/tenants"},{icon:hl,label:"Maintenance",href:"/admin/maintenance"},{icon:Ag,label:"Notifications",href:"/admin/notifications"},{icon:dR,label:"Reports",href:"/admin/reports"},{icon:h_,label:"Settings",href:"/admin/settings"}];function rz(){const{userProfile:t}=$r(),e=t?.role==="super_admin"?ez:tz;return f.jsxs("div",{className:"bg-primary h-screen w-64 fixed left-0 top-0 text-white flex flex-col",children:[f.jsxs("div",{className:"p-6 border-b border-primary-light",children:[f.jsx("h1",{className:"text-xl font-bold",children:"SocietyPay"}),f.jsx("p",{className:"text-sm text-gray-300 mt-1",children:"Maintenance Management"})]}),f.jsx("nav",{className:"flex-1 p-4",children:f.jsx("ul",{className:"space-y-2",children:e.map(r=>f.jsx("li",{children:f.jsxs(Ik,{to:r.href,className:({isActive:n})=>`flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors ${n?"bg-secondary text-white":"text-gray-300 hover:bg-primary-light hover:text-white"}`,children:[f.jsx(r.icon,{className:"h-5 w-5"}),f.jsx("span",{children:r.label})]})},r.href))})}),f.jsx("div",{className:"p-4 border-t border-primary-light",children:f.jsxs("div",{className:"flex items-center space-x-3",children:[f.jsx(z8,{className:"h-8 w-8 text-gray-300"}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-medium",children:t?.name}),f.jsx("p",{className:"text-xs text-gray-400 capitalize",children:t?.role?.replace("_"," ")})]})]})})]})}function nz(){const{signOut:t,userProfile:e}=$r(),r=async()=>{try{await t()}catch(n){console.error("Error logging out:",n)}};return f.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200 px-6 py-4 ml-64",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("div",{className:"flex items-center space-x-4",children:f.jsxs("div",{className:"relative",children:[f.jsx(Vf,{className:"h-5 w-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),f.jsx("input",{type:"text",placeholder:"Search...",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-secondary focus:border-transparent"})]})}),f.jsxs("div",{className:"flex items-center space-x-4",children:[f.jsxs("button",{className:"relative p-2 text-gray-400 hover:text-gray-600",children:[f.jsx(Ag,{className:"h-5 w-5"}),f.jsx("span",{className:"absolute top-0 right-0 h-2 w-2 bg-red-500 rounded-full"})]}),f.jsxs("div",{className:"flex items-center space-x-3",children:[f.jsxs("div",{className:"text-right",children:[f.jsx("p",{className:"text-sm font-medium text-gray-900",children:e?.name}),f.jsx("p",{className:"text-xs text-gray-500 capitalize",children:e?.role?.replace("_"," ")})]}),f.jsx("button",{onClick:r,className:"p-2 text-gray-400 hover:text-gray-600",title:"Logout",children:f.jsx(pR,{className:"h-5 w-5"})})]})]})]})})}function iz(){const[t,e]=_.useState(""),[r,n]=_.useState(""),[i,a]=_.useState(!1),[o,c]=_.useState(""),{signIn:u,userProfile:d}=$r();if(d)return f.jsx(zi,{to:d.role==="super_admin"?"/super-admin":"/admin",replace:!0});const m=async p=>{p.preventDefault(),a(!0),c("");try{await u(t,r)}catch(v){c(v.message||"Invalid email or password. Please try again.")}finally{a(!1)}};return f.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary to-secondary flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"max-w-md w-full space-y-8",children:[f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"mx-auto h-12 w-12 bg-white rounded-lg flex items-center justify-center",children:f.jsx(Ti,{className:"h-8 w-8 text-primary"})}),f.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-white",children:"Sign in to SocietyPay"}),f.jsx("p",{className:"mt-2 text-sm text-gray-200",children:"Maintenance Management System"})]}),f.jsxs("form",{className:"mt-8 space-y-6 bg-white rounded-lg shadow-xl p-8",onSubmit:m,children:[o&&f.jsx("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-md text-sm",children:o}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),f.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:t,onChange:p=>e(p.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-secondary focus:border-secondary focus:z-10 sm:text-sm",placeholder:"Enter your email"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),f.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:r,onChange:p=>n(p.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-secondary focus:border-secondary focus:z-10 sm:text-sm",placeholder:"Enter your password"})]})]}),f.jsxs("div",{children:[f.jsx("button",{type:"submit",disabled:i,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-secondary hover:bg-secondary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-secondary disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Signing in...":"Sign in"}),f.jsxs("p",{className:"text-sm text-gray-600 mt-4 text-center",children:["New community?"," ",f.jsx(bf,{to:"/signup",className:"text-secondary hover:text-secondary/80 font-medium",children:"Register here"})]})]})]})]})})}function az(){const[t,e]=_.useState(!1),[r,n]=_.useState(""),i=au(),{signUp:a}=$r(),[o,c]=_.useState({communityName:"",address:"",city:"",state:"",pincode:"",totalBlocks:"",adminName:"",adminEmail:"",adminPhone:"",password:"",confirmPassword:""}),u=m=>{c({...o,[m.target.name]:m.target.value})},d=async m=>{if(m.preventDefault(),!o.communityName||!o.adminName||!o.adminEmail||!o.password){n("Please fill all required fields");return}if(o.password!==o.confirmPassword){n("Passwords do not match");return}if(o.password.length<6){n("Password must be at least 6 characters");return}e(!0),n("");try{const p=await Tr.createCommunity({name:o.communityName,address:o.address,city:o.city,state:o.state,pincode:o.pincode,adminId:"",isActive:!1,totalTenants:0,totalBlocks:parseInt(o.totalBlocks)||0,settings:{paymentGateway:{razorpayKeyId:"",razorpayKeySecret:""},whatsapp:{apiKey:"",phoneNumberId:"",templateId:""},charges:{gstEnabled:!0,gstPercentage:18,handlingCharges:50}}});await a(o.adminEmail,o.password,{name:o.adminName,phone:o.adminPhone,communityId:p}),await Tr.updateCommunity(p,{adminId:o.adminEmail}),i("/select-subscription",{state:{communityId:p,adminEmail:o.adminEmail}})}catch(p){console.error("Error creating account:",p),n(p.message||"Failed to create account. Please try again.")}finally{e(!1)}};return f.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary to-secondary flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"max-w-2xl w-full space-y-8",children:[f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"mx-auto h-12 w-12 bg-white rounded-lg flex items-center justify-center",children:f.jsx(Ti,{className:"h-8 w-8 text-primary"})}),f.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-white",children:"Register Your Community"}),f.jsx("p",{className:"mt-2 text-sm text-gray-200",children:"Join SocietyPay and streamline your maintenance management"})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8",children:[r&&f.jsx("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-md text-sm mb-6",children:r}),f.jsxs("form",{onSubmit:d,className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Community Details"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{className:"md:col-span-2",children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Community Name *"}),f.jsx("input",{type:"text",name:"communityName",required:!0,value:o.communityName,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent",placeholder:"e.g., Green Valley Apartments"})]}),f.jsxs("div",{className:"md:col-span-2",children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address *"}),f.jsx("input",{type:"text",name:"address",required:!0,value:o.address,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent",placeholder:"Complete address"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City *"}),f.jsx("input",{type:"text",name:"city",required:!0,value:o.city,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"State *"}),f.jsxs("select",{name:"state",required:!0,value:o.state,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent",children:[f.jsx("option",{value:"",children:"Select State"}),f.jsx("option",{value:"Maharashtra",children:"Maharashtra"}),f.jsx("option",{value:"Karnataka",children:"Karnataka"}),f.jsx("option",{value:"Tamil Nadu",children:"Tamil Nadu"}),f.jsx("option",{value:"Delhi",children:"Delhi"}),f.jsx("option",{value:"Gujarat",children:"Gujarat"}),f.jsx("option",{value:"Rajasthan",children:"Rajasthan"}),f.jsx("option",{value:"Uttar Pradesh",children:"Uttar Pradesh"}),f.jsx("option",{value:"West Bengal",children:"West Bengal"}),f.jsx("option",{value:"Telangana",children:"Telangana"}),f.jsx("option",{value:"Andhra Pradesh",children:"Andhra Pradesh"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pincode *"}),f.jsx("input",{type:"text",name:"pincode",required:!0,value:o.pincode,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent",pattern:"[0-9]{6}",placeholder:"6-digit pincode"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total Blocks (Optional)"}),f.jsx("input",{type:"number",name:"totalBlocks",value:o.totalBlocks,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent",min:"1"})]})]})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Admin Details"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{className:"md:col-span-2",children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Admin Name *"}),f.jsx("input",{type:"text",name:"adminName",required:!0,value:o.adminName,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),f.jsx("input",{type:"email",name:"adminEmail",required:!0,value:o.adminEmail,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number *"}),f.jsx("input",{type:"tel",name:"adminPhone",required:!0,value:o.adminPhone,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent",placeholder:"+91 98765 43210"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password *"}),f.jsx("input",{type:"password",name:"password",required:!0,value:o.password,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent",minLength:6})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password *"}),f.jsx("input",{type:"password",name:"confirmPassword",required:!0,value:o.confirmPassword,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent",minLength:6})]})]})]}),f.jsx("button",{type:"submit",disabled:t,className:"w-full bg-secondary text-white px-4 py-2 rounded-md hover:bg-secondary/90 disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:t?"Creating Account...":"Create Account"}),f.jsx("div",{className:"text-center",children:f.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",f.jsx(bf,{to:"/login",className:"text-secondary hover:text-secondary/80 font-medium",children:"Sign in here"})]})})]})]})]})})}const hP=()=>"/api";function sz(){const t=Qn(),e=au(),{communityId:r="",adminEmail:n=""}=t.state||{},[i,a]=_.useState([]),[o,c]=_.useState(""),[u,d]=_.useState(!0),[m,p]=_.useState(!1),[v,w]=_.useState(null),b=_.useCallback(async()=>{d(!0);try{const[P,k]=await Promise.all([Yo.getActiveSubscriptions(),mw.getPlatformSettings()]);a(P),w(k)}catch(P){console.error("Error loading subscriptions or platform settings:",P)}finally{d(!1)}},[]);_.useEffect(()=>{if(!r){e("/signup");return}b();const P=document.createElement("script");return P.src="https://checkout.razorpay.com/v1/checkout.js",P.async=!0,document.body.appendChild(P),()=>{document.body.removeChild(P)}},[r,e,b]);const E=async()=>{if(!o||!v){alert("Please select a subscription plan");return}const P=i.find(k=>k.id===o);if(P){p(!0);try{const C=_j().currentUser;if(!C)throw new Error("User not authenticated");const V=await C.getIdToken(),B=await fetch(`${hP()}/create-order`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${V}`},body:JSON.stringify({amount:P.price*100})});if(!B.ok)throw new Error("Failed to create Razorpay order");const I=await B.json(),j={key:v.razorpayKeyId,amount:P.price*100,currency:"INR",name:"SocietyPay",description:`${P.name} Subscription`,order_id:I.order.id,prefill:{email:n},theme:{color:"#309b47"},modal:{ondismiss:()=>p(!1)},handler:async function($){console.log("🧾 Razorpay Response:",$);try{const M=await fetch(`${hP()}/verify-payment`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${V}`},body:JSON.stringify({razorpay_payment_id:$.razorpay_payment_id,razorpay_order_id:$.razorpay_order_id,razorpay_signature:$.razorpay_signature,communityId:r,subscriptionId:o,duration:P.duration,updateSubscription:!0})});if(!M.ok){const F=await M.json();throw new Error(F.message||"Payment verification failed")}const U=await M.json();console.log("✅ Payment verification successful:",U),lR($.razorpay_payment_id),console.log("💰 Payment success recorded using utility function",{paymentId:$.razorpay_payment_id,subscriptionName:P.name}),setTimeout(()=>{e("/payment-success",{state:{paymentId:$.razorpay_payment_id,subscriptionName:P.name,fromPayment:!0,subscriptionData:U.subscription||null},replace:!0})},2e3)}catch(M){console.error("Verification failed:",M),alert(`Payment verification failed: ${M.message}`),p(!1)}}};new window.Razorpay(j).open()}catch(k){console.error("Payment failed:",k),alert("Something went wrong during payment. Try again."),p(!1)}}},S=P=>P.toLowerCase().includes("premium")?gR:P.toLowerCase().includes("enterprise")?hR:Ti;return u?f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary to-secondary",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white"})}):f.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary to-secondary py-12 px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"max-w-4xl mx-auto",children:[f.jsxs("div",{className:"text-center mb-8",children:[f.jsx("h1",{className:"text-3xl font-extrabold text-white mb-4",children:"Choose Your Subscription Plan"}),f.jsx("p",{className:"text-gray-200",children:"Select the perfect plan for your community management needs."})]}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:i.map(P=>{const k=S(P.name),C=o===P.id;return f.jsx("div",{className:`bg-white rounded-lg shadow-xl p-6 cursor-pointer transition-all transform hover:scale-105 ${C?"ring-4 ring-secondary":""}`,onClick:()=>c(P.id),children:f.jsxs("div",{className:"text-center",children:[f.jsx(k,{className:"h-12 w-12 mx-auto mb-4 text-secondary"}),f.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:P.name}),f.jsx("p",{className:"text-gray-600 mb-4",children:P.description}),f.jsxs("div",{className:"mb-6",children:[f.jsxs("span",{className:"text-4xl font-bold text-gray-900",children:["₹",P.price.toLocaleString()]}),f.jsxs("span",{className:"text-gray-500 ml-1",children:["/",P.duration," months"]})]}),f.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Up to"," ",P.maxTenants===999999?"Unlimited":P.maxTenants," tenants"]}),f.jsx("ul",{className:"text-left space-y-2 mb-6",children:P.features.map((R,V)=>f.jsxs("li",{className:"flex items-center text-sm text-gray-600",children:[f.jsx(B8,{className:"h-4 w-4 text-secondary mr-2 flex-shrink-0"}),R]},V))}),C&&f.jsx("div",{className:"bg-secondary/10 border border-secondary rounded-md p-3",children:f.jsx("p",{className:"text-secondary font-medium text-sm",children:"Selected Plan"})})]})},P.id)})}),f.jsx("div",{className:"text-center",children:f.jsx("button",{onClick:E,disabled:!o||m,className:"bg-white text-primary px-8 py-3 rounded-md font-semibold hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Processing...":"Proceed to Payment"})})]})})}function oz(){const t=Qn(),e=au(),r=$r(),n=r.userProfile,i=r.refreshUserProfile||(()=>Promise.resolve()),[a,o]=_.useState(5),[c,u]=_.useState(null),{paymentId:d="",subscriptionName:m="",subscriptionData:p=null}=t.state||{};return _.useEffect(()=>{lR(d||""),console.log("💰 Payment success recorded using utility function",{paymentId:d}),(async()=>{try{typeof i=="function"&&(console.log("🔄 Refreshing user profile after payment"),await i(),console.log("✅ User profile refreshed successfully")),p?(console.log("📋 Using subscription details from payment response:",p),u(p)):n?.subscription?(console.log("📋 Using subscription details from user profile:",n.subscription),u(n.subscription)):console.warn("⚠️ No subscription details found")}catch(b){console.error("🔥 Error refreshing profile:",b)}})();const w=setInterval(()=>{o(b=>b<=1?(clearInterval(w),sessionStorage.setItem("fromPaymentSuccess","true"),e("/admin",{replace:!0,state:{fromPayment:!0,fromPaymentSuccess:!0}}),0):b-1)},1e3);return()=>clearInterval(w)},[e,i,n,r,p]),f.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary to-secondary flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white p-8 rounded-lg shadow-xl",children:[f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"mx-auto h-16 w-16 bg-green-100 rounded-full flex items-center justify-center",children:f.jsx(Tg,{className:"h-10 w-10 text-green-600"})}),f.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Payment Successful!"}),f.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Your subscription has been activated successfully."})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsx("div",{className:"bg-gray-50 p-4 rounded-md",children:f.jsxs("div",{className:"flex items-start",children:[f.jsx(hl,{className:"h-5 w-5 text-gray-500 mt-0.5 mr-3"}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Payment Details"}),f.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Payment ID: ",f.jsx("span",{className:"font-medium",children:d})]}),f.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Plan: ",f.jsx("span",{className:"font-medium",children:m})]})]})]})}),c&&f.jsx("div",{className:"bg-blue-50 p-4 rounded-md",children:f.jsxs("div",{className:"flex items-start",children:[f.jsx(f_,{className:"h-5 w-5 text-blue-500 mt-0.5 mr-3"}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-medium text-blue-900",children:"Subscription Details"}),f.jsxs("p",{className:"text-sm text-blue-700 mt-1",children:["Status: ",f.jsx("span",{className:"font-medium capitalize",children:c.status||"Active"})]}),c.endDate&&f.jsxs("p",{className:"text-sm text-blue-700 mt-1",children:["Valid until: ",f.jsx("span",{className:"font-medium",children:new Date(c.endDate).toLocaleDateString()})]})]})]})}),f.jsx("div",{className:"bg-green-50 p-4 rounded-md",children:f.jsxs("p",{className:"text-sm text-green-700",children:["Your subscription is now active. You will be redirected to the admin dashboard in ",a," seconds."]})}),f.jsx("button",{onClick:()=>{sessionStorage.setItem("fromPaymentSuccess","true"),e("/admin",{replace:!0,state:{fromPayment:!0,fromPaymentSuccess:!0}})},className:"w-full bg-primary text-white px-4 py-2 rounded-md hover:bg-primary/90 flex items-center justify-center font-medium",children:"Go to Dashboard Now"})]})]})})}function mP(t){return t?t instanceof Date?t:typeof t.toDate=="function"?t.toDate():new Date(t):null}function lz(){const t=au(),{userProfile:e}=$r(),[r,n]=_.useState(null),[i,a]=_.useState(!0),[o,c]=_.useState(!1);_.useEffect(()=>{const m=localStorage.getItem("recentPaymentSuccess"),p=m?parseInt(m):0;if(Date.now()-p<1e3*60*30){console.log("💰 Recent payment detected, redirecting to admin dashboard"),t("/admin",{replace:!0,state:{fromPayment:!0}});return}if(!e?.communityId)return;(async()=>{try{const b=await Tr.getCommunity(e.communityId,!0);if(console.log("📋 Community data:",b),!b){console.error("❌ No community data found"),c(!0),a(!1);return}if(console.log("🔍 Subscription details from community:",{subscriptionEndDate:b?.subscriptionEndDate,subscription:b?.subscription,hasSubscription:!!b?.subscription,status:b?.subscription?.status}),b.subscription&&b.subscription.status==="active"){console.log("✅ Active subscription found in community data"),sessionStorage.setItem("validSubscriptionDetected","true"),console.log("✅ Subscription is active, redirecting to admin"),t("/admin",{replace:!0,state:{fromSubscriptionCheck:!0}});return}const E=mP(b?.subscriptionEndDate);E&&new Date<=E?(console.log("✅ Subscription is still valid based on end date, redirecting to admin"),sessionStorage.setItem("validSubscriptionDetected","true"),t("/admin",{replace:!0,state:{fromSubscriptionCheck:!0}})):(console.log("❌ Subscription has expired or is missing"),c(!0),n(b))}catch(b){console.error("🔥 Error fetching community:",b)}finally{a(!1)}})()},[e?.communityId,t]);const u=()=>{t("/select-subscription",{state:{communityId:e?.communityId,adminEmail:e?.email,isRenewal:!0}})};if(i)return f.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary to-secondary flex items-center justify-center",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white"})});if(!o)return null;const d=mP(r?.subscriptionEndDate)?.toLocaleDateString()||"an unknown date";return f.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary to-secondary flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"max-w-md w-full space-y-8",children:[f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"mx-auto h-16 w-16 bg-yellow-100 rounded-full flex items-center justify-center",children:f.jsx(uR,{className:"h-10 w-10 text-yellow-600"})}),f.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-white",children:"Subscription Expired"}),f.jsx("p",{className:"mt-2 text-sm text-gray-200",children:"Your subscription has expired. Please renew to continue using SocietyPay."})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8 space-y-6",children:[f.jsx("div",{className:"text-center",children:f.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:r?.name||"Your Community"})}),f.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-4",children:f.jsxs("div",{className:"flex",children:[f.jsx(f_,{className:"h-5 w-5 text-yellow-400 mt-0.5"}),f.jsxs("div",{className:"ml-3",children:[f.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Subscription Status"}),f.jsxs("p",{className:"mt-1 text-sm text-yellow-700",children:["Your subscription expired on ",f.jsx("strong",{children:d}),"."]}),f.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"Renew now to regain access to all features."})]})]})}),f.jsxs("div",{className:"space-y-4",children:[f.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Features you'll regain:"}),f.jsx("ul",{className:"text-sm text-gray-600 space-y-2",children:["Tenant management system","Maintenance bill generation","WhatsApp notifications","Payment tracking & reports","Complete analytics dashboard"].map((m,p)=>f.jsxs("li",{className:"flex items-center",children:[f.jsx("div",{className:"w-2 h-2 bg-secondary rounded-full mr-3"}),m]},p))})]}),f.jsxs("button",{onClick:u,className:"w-full bg-secondary text-white px-4 py-2 rounded-md hover:bg-secondary/90 flex items-center justify-center font-medium",children:[f.jsx(hl,{className:"h-4 w-4 mr-2"}),"Renew Subscription"]}),f.jsxs("button",{onClick:()=>{L8(),t("/admin",{replace:!0})},className:"w-full mt-2 bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300 flex items-center justify-center font-medium",children:[f.jsx(G8,{className:"h-4 w-4 mr-2"}),"Temporarily Access Dashboard"]}),f.jsx("div",{className:"text-center",children:f.jsxs("p",{className:"text-xs text-gray-500",children:["Need help? Contact our support team at"," ",f.jsx("a",{href:"mailto:support@societypay.com",className:"text-secondary hover:text-secondary/80",children:"support@societypay.com"})]})})]})]})})}function cz(){const{signOut:t,userProfile:e}=$r(),r=async()=>{try{await t()}catch(n){console.error("Error logging out:",n)}};return f.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary to-secondary flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"max-w-md w-full space-y-8",children:[f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"mx-auto h-16 w-16 bg-red-100 rounded-full flex items-center justify-center",children:f.jsx(uR,{className:"h-10 w-10 text-red-600"})}),f.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-white",children:"Access Denied"}),f.jsx("p",{className:"mt-2 text-sm text-gray-200",children:"You don't have permission to access this page"})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8 space-y-6",children:[f.jsxs("div",{className:"text-center",children:[f.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Unauthorized Access"}),f.jsxs("p",{className:"text-gray-600 mb-4",children:["Your current role (",e?.role?.replace("_"," "),") doesn't have access to the requested page."]})]}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs(bf,{to:e?.role==="super_admin"?"/super-admin":"/admin",className:"w-full bg-secondary text-white px-4 py-2 rounded-md hover:bg-secondary/90 flex items-center justify-center",children:[f.jsx(zc,{className:"h-4 w-4 mr-2"}),"Go to Dashboard"]}),f.jsxs("button",{onClick:r,className:"w-full bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700 flex items-center justify-center",children:[f.jsx(pR,{className:"h-4 w-4 mr-2"}),"Logout"]})]}),f.jsx("div",{className:"text-center",children:f.jsx("p",{className:"text-xs text-gray-500",children:"If you believe this is an error, please contact your administrator."})})]})]})})}function vR(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(r=vR(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function et(){for(var t,e,r=0,n="",i=arguments.length;r<i;r++)(t=arguments[r])&&(e=vR(t))&&(n&&(n+=" "),n+=e);return n}function Ls({title:t,value:e,icon:r,change:n,changeType:i="neutral",bgColor:a="bg-white"}){return f.jsx("div",{className:et("p-6 rounded-lg shadow-sm border border-gray-200",a),children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-medium text-gray-600",children:t}),f.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:e}),n&&f.jsx("p",{className:et("text-sm mt-1",i==="positive"&&"text-green-600",i==="negative"&&"text-red-600",i==="neutral"&&"text-gray-500"),children:n})]}),f.jsx("div",{className:"p-3 bg-primary/10 rounded-lg",children:f.jsx(r,{className:"h-6 w-6 text-primary"})})]})})}var s0={},o0={},pP;function uz(){return pP||(pP=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==="__proto__"}t.isUnsafeProperty=e}(o0)),o0}var l0={},gP;function xR(){return gP||(gP=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}t.isDeepKey=e}(l0)),l0}var c0={},yP;function wR(){return yP||(yP=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="string"||typeof r=="symbol"?r:Object.is(r?.valueOf?.(),-0)?"-0":String(r)}t.toKey=e}(c0)),c0}var u0={},vP;function m_(){return vP||(vP=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){const n=[],i=r.length;if(i===0)return n;let a=0,o="",c="",u=!1;for(r.charCodeAt(0)===46&&(n.push(""),a++);a<i;){const d=r[a];c?d==="\\"&&a+1<i?(a++,o+=r[a]):d===c?c="":o+=d:u?d==='"'||d==="'"?c=d:d==="]"?(u=!1,n.push(o),o=""):o+=d:d==="["?(u=!0,o&&(n.push(o),o="")):d==="."?o&&(n.push(o),o=""):o+=d,a++}return o&&n.push(o),n}t.toPath=e}(u0)),u0}var xP;function p_(){return xP||(xP=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=uz(),r=xR(),n=wR(),i=m_();function a(c,u,d){if(c==null)return d;switch(typeof u){case"string":{if(e.isUnsafeProperty(u))return d;const m=c[u];return m===void 0?r.isDeepKey(u)?a(c,i.toPath(u),d):d:m}case"number":case"symbol":{typeof u=="number"&&(u=n.toKey(u));const m=c[u];return m===void 0?d:m}default:{if(Array.isArray(u))return o(c,u,d);if(Object.is(u?.valueOf(),-0)?u="-0":u=String(u),e.isUnsafeProperty(u))return d;const m=c[u];return m===void 0?d:m}}}function o(c,u,d){if(u.length===0)return d;let m=c;for(let p=0;p<u.length;p++){if(m==null||e.isUnsafeProperty(u[p]))return d;m=m[u[p]]}return m===void 0?d:m}t.get=a}(s0)),s0}var d0,wP;function dz(){return wP||(wP=1,d0=p_().get),d0}var fz=dz();const Xs=Pi(fz);var f0={exports:{}},lt={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bP;function hz(){if(bP)return lt;bP=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),v=Symbol.for("react.view_transition"),w=Symbol.for("react.client.reference");function b(E){if(typeof E=="object"&&E!==null){var S=E.$$typeof;switch(S){case t:switch(E=E.type,E){case r:case i:case n:case u:case d:case v:return E;default:switch(E=E&&E.$$typeof,E){case o:case c:case p:case m:return E;case a:return E;default:return S}}case e:return S}}}return lt.ContextConsumer=a,lt.ContextProvider=o,lt.Element=t,lt.ForwardRef=c,lt.Fragment=r,lt.Lazy=p,lt.Memo=m,lt.Portal=e,lt.Profiler=i,lt.StrictMode=n,lt.Suspense=u,lt.SuspenseList=d,lt.isContextConsumer=function(E){return b(E)===a},lt.isContextProvider=function(E){return b(E)===o},lt.isElement=function(E){return typeof E=="object"&&E!==null&&E.$$typeof===t},lt.isForwardRef=function(E){return b(E)===c},lt.isFragment=function(E){return b(E)===r},lt.isLazy=function(E){return b(E)===p},lt.isMemo=function(E){return b(E)===m},lt.isPortal=function(E){return b(E)===e},lt.isProfiler=function(E){return b(E)===i},lt.isStrictMode=function(E){return b(E)===n},lt.isSuspense=function(E){return b(E)===u},lt.isSuspenseList=function(E){return b(E)===d},lt.isValidElementType=function(E){return typeof E=="string"||typeof E=="function"||E===r||E===i||E===n||E===u||E===d||typeof E=="object"&&E!==null&&(E.$$typeof===p||E.$$typeof===m||E.$$typeof===o||E.$$typeof===a||E.$$typeof===c||E.$$typeof===w||E.getModuleId!==void 0)},lt.typeOf=b,lt}var _P;function mz(){return _P||(_P=1,f0.exports=hz()),f0.exports}var pz=mz(),mr=t=>t===0?0:t>0?1:-1,Tn=t=>typeof t=="number"&&t!=+t,Qo=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,we=t=>(typeof t=="number"||t instanceof Number)&&!Tn(t),ia=t=>we(t)||typeof t=="string",gz=0,ml=t=>{var e=++gz;return"".concat(t||"").concat(e)},Hr=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!we(e)&&typeof e!="string")return n;var a;if(Qo(e)){if(r==null)return n;var o=e.indexOf("%");a=r*parseFloat(e.slice(0,o))/100}else a=+e;return Tn(a)&&(a=n),i&&r!=null&&a>r&&(a=r),a},bR=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,r={},n=0;n<e;n++)if(!r[t[n]])r[t[n]]=!0;else return!0;return!1},bn=(t,e)=>we(t)&&we(e)?r=>t+r*(e-t):()=>e;function _R(t,e,r){if(!(!t||!t.length))return t.find(n=>n&&(typeof e=="function"?e(n):Xs(n,e))===r)}var dt=t=>t===null||typeof t>"u",Ff=t=>dt(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1)),yz=["viewBox","children"],vz=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],EP=["points","pathLength"],h0={svg:yz,polygon:EP,polyline:EP},g_=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],y_=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(_.isValidElement(t)&&(r=t.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(i=>{g_.includes(i)&&(n[i]=a=>r[i](r,a))}),n},xz=(t,e,r)=>n=>(t(e,r,n),null),Ng=(t,e,r)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var n=null;return Object.keys(t).forEach(i=>{var a=t[i];g_.includes(i)&&typeof a=="function"&&(n||(n={}),n[i]=xz(a,e,r))}),n},SP=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",AP=null,m0=null,ER=t=>{if(t===AP&&Array.isArray(m0))return m0;var e=[];return _.Children.forEach(t,r=>{dt(r)||(pz.isFragment(r)?e=e.concat(ER(r.props.children)):e.push(r))}),m0=e,AP=t,e};function $f(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(i=>SP(i)):n=[SP(e)],ER(t).forEach(i=>{var a=Xs(i,"type.displayName")||Xs(i,"type.name");n.indexOf(a)!==-1&&r.push(i)}),r}var SR=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0,wz=(t,e,r,n)=>{var i,a=(i=n&&h0?.[n])!==null&&i!==void 0?i:[];return e.startsWith("data-")||typeof t!="function"&&(n&&a.includes(e)||vz.includes(e))||r&&g_.includes(e)},He=(t,e,r)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(_.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var i={};return Object.keys(n).forEach(a=>{var o;wz((o=n)===null||o===void 0?void 0:o[a],a,e,r)&&(i[a]=n[a])}),i},bz=["children","width","height","viewBox","className","style","title","desc"];function gw(){return gw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},gw.apply(null,arguments)}function _z(t,e){if(t==null)return{};var r,n,i=Ez(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function Ez(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var AR=_.forwardRef((t,e)=>{var{children:r,width:n,height:i,viewBox:a,className:o,style:c,title:u,desc:d}=t,m=_z(t,bz),p=a||{width:n,height:i,x:0,y:0},v=et("recharts-surface",o);return _.createElement("svg",gw({},He(m,!0,"svg"),{className:v,width:n,height:i,style:c,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height),ref:e}),_.createElement("title",null,u),_.createElement("desc",null,d),r)}),Sz=["children","className"];function yw(){return yw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},yw.apply(null,arguments)}function Az(t,e){if(t==null)return{};var r,n,i=Tz(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function Tz(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var pr=_.forwardRef((t,e)=>{var{children:r,className:n}=t,i=Az(t,Sz),a=et("recharts-layer",n);return _.createElement("g",yw({className:a},He(i,!0),{ref:e}),r)}),Pz=_.createContext(null);function mt(t){return function(){return t}}const TR=Math.cos,gp=Math.sin,Ni=Math.sqrt,yp=Math.PI,Cg=2*yp,vw=Math.PI,xw=2*vw,Ko=1e-6,Iz=xw-Ko;function PR(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function Nz(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return PR;const r=10**e;return function(n){this._+=n[0];for(let i=1,a=n.length;i<a;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class Cz{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?PR:Nz(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,i){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(e,r,n,i,a,o){this._append`C${+e},${+r},${+n},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(e,r,n,i,a){if(e=+e,r=+r,n=+n,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,c=this._y1,u=n-e,d=i-r,m=o-e,p=c-r,v=m*m+p*p;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(v>Ko)if(!(Math.abs(p*u-d*m)>Ko)||!a)this._append`L${this._x1=e},${this._y1=r}`;else{let w=n-o,b=i-c,E=u*u+d*d,S=w*w+b*b,P=Math.sqrt(E),k=Math.sqrt(v),C=a*Math.tan((vw-Math.acos((E+v-S)/(2*P*k)))/2),R=C/k,V=C/P;Math.abs(R-1)>Ko&&this._append`L${e+R*m},${r+R*p}`,this._append`A${a},${a},0,0,${+(p*w>m*b)},${this._x1=e+V*u},${this._y1=r+V*d}`}}arc(e,r,n,i,a,o){if(e=+e,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let c=n*Math.cos(i),u=n*Math.sin(i),d=e+c,m=r+u,p=1^o,v=o?i-a:a-i;this._x1===null?this._append`M${d},${m}`:(Math.abs(this._x1-d)>Ko||Math.abs(this._y1-m)>Ko)&&this._append`L${d},${m}`,n&&(v<0&&(v=v%xw+xw),v>Iz?this._append`A${n},${n},0,1,${p},${e-c},${r-u}A${n},${n},0,1,${p},${this._x1=d},${this._y1=m}`:v>Ko&&this._append`A${n},${n},0,${+(v>=vw)},${p},${this._x1=e+n*Math.cos(a)},${this._y1=r+n*Math.sin(a)}`)}rect(e,r,n,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function v_(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new Cz(e)}function x_(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function IR(t){this._context=t}IR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function kg(t){return new IR(t)}function NR(t){return t[0]}function CR(t){return t[1]}function kR(t,e){var r=mt(!0),n=null,i=kg,a=null,o=v_(c);t=typeof t=="function"?t:t===void 0?NR:mt(t),e=typeof e=="function"?e:e===void 0?CR:mt(e);function c(u){var d,m=(u=x_(u)).length,p,v=!1,w;for(n==null&&(a=i(w=o())),d=0;d<=m;++d)!(d<m&&r(p=u[d],d,u))===v&&((v=!v)?a.lineStart():a.lineEnd()),v&&a.point(+t(p,d,u),+e(p,d,u));if(w)return a=null,w+""||null}return c.x=function(u){return arguments.length?(t=typeof u=="function"?u:mt(+u),c):t},c.y=function(u){return arguments.length?(e=typeof u=="function"?u:mt(+u),c):e},c.defined=function(u){return arguments.length?(r=typeof u=="function"?u:mt(!!u),c):r},c.curve=function(u){return arguments.length?(i=u,n!=null&&(a=i(n)),c):i},c.context=function(u){return arguments.length?(u==null?n=a=null:a=i(n=u),c):n},c}function bm(t,e,r){var n=null,i=mt(!0),a=null,o=kg,c=null,u=v_(d);t=typeof t=="function"?t:t===void 0?NR:mt(+t),e=typeof e=="function"?e:mt(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?CR:mt(+r);function d(p){var v,w,b,E=(p=x_(p)).length,S,P=!1,k,C=new Array(E),R=new Array(E);for(a==null&&(c=o(k=u())),v=0;v<=E;++v){if(!(v<E&&i(S=p[v],v,p))===P)if(P=!P)w=v,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),b=v-1;b>=w;--b)c.point(C[b],R[b]);c.lineEnd(),c.areaEnd()}P&&(C[v]=+t(S,v,p),R[v]=+e(S,v,p),c.point(n?+n(S,v,p):C[v],r?+r(S,v,p):R[v]))}if(k)return c=null,k+""||null}function m(){return kR().defined(i).curve(o).context(a)}return d.x=function(p){return arguments.length?(t=typeof p=="function"?p:mt(+p),n=null,d):t},d.x0=function(p){return arguments.length?(t=typeof p=="function"?p:mt(+p),d):t},d.x1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:mt(+p),d):n},d.y=function(p){return arguments.length?(e=typeof p=="function"?p:mt(+p),r=null,d):e},d.y0=function(p){return arguments.length?(e=typeof p=="function"?p:mt(+p),d):e},d.y1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:mt(+p),d):r},d.lineX0=d.lineY0=function(){return m().x(t).y(e)},d.lineY1=function(){return m().x(t).y(r)},d.lineX1=function(){return m().x(n).y(e)},d.defined=function(p){return arguments.length?(i=typeof p=="function"?p:mt(!!p),d):i},d.curve=function(p){return arguments.length?(o=p,a!=null&&(c=o(a)),d):o},d.context=function(p){return arguments.length?(p==null?a=c=null:c=o(a=p),d):a},d}class jR{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function kz(t){return new jR(t,!0)}function jz(t){return new jR(t,!1)}const w_={draw(t,e){const r=Ni(e/yp);t.moveTo(r,0),t.arc(0,0,r,0,Cg)}},Rz={draw(t,e){const r=Ni(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},RR=Ni(1/3),Oz=RR*2,Dz={draw(t,e){const r=Ni(e/Oz),n=r*RR;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},Mz={draw(t,e){const r=Ni(e),n=-r/2;t.rect(n,n,r,r)}},Lz=.8908130915292852,OR=gp(yp/10)/gp(7*yp/10),Vz=gp(Cg/10)*OR,Fz=-TR(Cg/10)*OR,$z={draw(t,e){const r=Ni(e*Lz),n=Vz*r,i=Fz*r;t.moveTo(0,-r),t.lineTo(n,i);for(let a=1;a<5;++a){const o=Cg*a/5,c=TR(o),u=gp(o);t.lineTo(u*r,-c*r),t.lineTo(c*n-u*i,u*n+c*i)}t.closePath()}},p0=Ni(3),Uz={draw(t,e){const r=-Ni(e/(p0*3));t.moveTo(0,r*2),t.lineTo(-p0*r,-r),t.lineTo(p0*r,-r),t.closePath()}},$n=-.5,Un=Ni(3)/2,ww=1/Ni(12),Bz=(ww/2+1)*3,zz={draw(t,e){const r=Ni(e/Bz),n=r/2,i=r*ww,a=n,o=r*ww+r,c=-a,u=o;t.moveTo(n,i),t.lineTo(a,o),t.lineTo(c,u),t.lineTo($n*n-Un*i,Un*n+$n*i),t.lineTo($n*a-Un*o,Un*a+$n*o),t.lineTo($n*c-Un*u,Un*c+$n*u),t.lineTo($n*n+Un*i,$n*i-Un*n),t.lineTo($n*a+Un*o,$n*o-Un*a),t.lineTo($n*c+Un*u,$n*u-Un*c),t.closePath()}};function qz(t,e){let r=null,n=v_(i);t=typeof t=="function"?t:mt(t||w_),e=typeof e=="function"?e:mt(e===void 0?64:+e);function i(){let a;if(r||(r=a=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),a)return r=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:mt(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:mt(+a),i):e},i.context=function(a){return arguments.length?(r=a??null,i):r},i}function vp(){}function xp(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function DR(t){this._context=t}DR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:xp(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:xp(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Kz(t){return new DR(t)}function MR(t){this._context=t}MR.prototype={areaStart:vp,areaEnd:vp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:xp(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Wz(t){return new MR(t)}function LR(t){this._context=t}LR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:xp(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Hz(t){return new LR(t)}function VR(t){this._context=t}VR.prototype={areaStart:vp,areaEnd:vp,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Gz(t){return new VR(t)}function TP(t){return t<0?-1:1}function PP(t,e,r){var n=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(n||i<0&&-0),o=(r-t._y1)/(i||n<0&&-0),c=(a*i+o*n)/(n+i);return(TP(a)+TP(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(c))||0}function IP(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function g0(t,e,r){var n=t._x0,i=t._y0,a=t._x1,o=t._y1,c=(a-n)/3;t._context.bezierCurveTo(n+c,i+c*e,a-c,o-c*r,a,o)}function wp(t){this._context=t}wp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:g0(this,this._t0,IP(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,g0(this,IP(this,r=PP(this,t,e)),r);break;default:g0(this,this._t0,r=PP(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function FR(t){this._context=new $R(t)}(FR.prototype=Object.create(wp.prototype)).point=function(t,e){wp.prototype.point.call(this,e,t)};function $R(t){this._context=t}$R.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,i,a){this._context.bezierCurveTo(e,t,n,r,a,i)}};function Yz(t){return new wp(t)}function Qz(t){return new FR(t)}function UR(t){this._context=t}UR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=NP(t),i=NP(e),a=0,o=1;o<r;++a,++o)this._context.bezierCurveTo(n[0][a],i[0][a],n[1][a],i[1][a],t[o],e[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function NP(t){var e,r=t.length-1,n,i=new Array(r),a=new Array(r),o=new Array(r);for(i[0]=0,a[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,a[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/a[e-1],a[e]-=n,o[e]-=n*o[e-1];for(i[r-1]=o[r-1]/a[r-1],e=r-2;e>=0;--e)i[e]=(o[e]-i[e+1])/a[e];for(a[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function Xz(t){return new UR(t)}function jg(t,e){this._context=t,this._t=e}jg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function Jz(t){return new jg(t,.5)}function Zz(t){return new jg(t,0)}function e7(t){return new jg(t,1)}function Kc(t,e){if((o=t.length)>1)for(var r=1,n,i,a=t[e[0]],o,c=a.length;r<o;++r)for(i=a,a=t[e[r]],n=0;n<c;++n)a[n][1]+=a[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function bw(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function t7(t,e){return t[e]}function r7(t){const e=[];return e.key=t,e}function n7(){var t=mt([]),e=bw,r=Kc,n=t7;function i(a){var o=Array.from(t.apply(this,arguments),r7),c,u=o.length,d=-1,m;for(const p of a)for(c=0,++d;c<u;++c)(o[c][d]=[0,+n(p,o[c].key,d,a)]).data=p;for(c=0,m=x_(e(o));c<u;++c)o[m[c]].index=c;return r(o,m),o}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:mt(Array.from(a)),i):t},i.value=function(a){return arguments.length?(n=typeof a=="function"?a:mt(+a),i):n},i.order=function(a){return arguments.length?(e=a==null?bw:typeof a=="function"?a:mt(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(r=a??Kc,i):r},i}function i7(t,e){if((n=t.length)>0){for(var r,n,i=0,a=t[0].length,o;i<a;++i){for(o=r=0;r<n;++r)o+=t[r][i][1]||0;if(o)for(r=0;r<n;++r)t[r][i][1]/=o}Kc(t,e)}}function a7(t,e){if((i=t.length)>0){for(var r=0,n=t[e[0]],i,a=n.length;r<a;++r){for(var o=0,c=0;o<i;++o)c+=t[o][r][1]||0;n[r][1]+=n[r][0]=-c/2}Kc(t,e)}}function s7(t,e){if(!(!((o=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var r=0,n=1,i,a,o;n<a;++n){for(var c=0,u=0,d=0;c<o;++c){for(var m=t[e[c]],p=m[n][1]||0,v=m[n-1][1]||0,w=(p-v)/2,b=0;b<c;++b){var E=t[e[b]],S=E[n][1]||0,P=E[n-1][1]||0;w+=S-P}u+=p,d+=w*p}i[n-1][1]+=i[n-1][0]=r,u&&(r-=d/u)}i[n-1][1]+=i[n-1][0]=r,Kc(t,e)}}var o7=["type","size","sizeType"];function _w(){return _w=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_w.apply(null,arguments)}function CP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function kP(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?CP(Object(r),!0).forEach(function(n){l7(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):CP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function l7(t,e,r){return(e=c7(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function c7(t){var e=u7(t,"string");return typeof e=="symbol"?e:e+""}function u7(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function d7(t,e){if(t==null)return{};var r,n,i=f7(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function f7(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var BR={symbolCircle:w_,symbolCross:Rz,symbolDiamond:Dz,symbolSquare:Mz,symbolStar:$z,symbolTriangle:Uz,symbolWye:zz},h7=Math.PI/180,m7=t=>{var e="symbol".concat(Ff(t));return BR[e]||w_},p7=(t,e,r)=>{if(e==="area")return t;switch(r){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var n=18*h7;return 1.25*t*t*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},g7=(t,e)=>{BR["symbol".concat(Ff(t))]=e},zR=t=>{var{type:e="circle",size:r=64,sizeType:n="area"}=t,i=d7(t,o7),a=kP(kP({},i),{},{type:e,size:r,sizeType:n}),o=()=>{var p=m7(e),v=qz().type(p).size(p7(r,n,e));return v()},{className:c,cx:u,cy:d}=a,m=He(a,!0);return u===+u&&d===+d&&r===+r?_.createElement("path",_w({},m,{className:et("recharts-symbols",c),transform:"translate(".concat(u,", ").concat(d,")"),d:o()})):null};zR.registerSymbol=g7;var y0={},v0={},jP;function y7(){return jP||(jP=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n){const i=new Map;for(let a=0;a<r.length;a++){const o=r[a],c=n(o);i.has(c)||i.set(c,o)}return Array.from(i.values())}t.uniqBy=e}(v0)),v0}var x0={},RP;function qR(){return RP||(RP=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r}t.identity=e}(x0)),x0}var w0={},b0={},_0={},OP;function v7(){return OP||(OP=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Number.isSafeInteger(r)&&r>=0}t.isLength=e}(_0)),_0}var DP;function b_(){return DP||(DP=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=v7();function r(n){return n!=null&&typeof n!="function"&&e.isLength(n.length)}t.isArrayLike=r}(b0)),b0}var E0={},MP;function x7(){return MP||(MP=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="object"&&r!==null}t.isObjectLike=e}(E0)),E0}var LP;function w7(){return LP||(LP=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=b_(),r=x7();function n(i){return r.isObjectLike(i)&&e.isArrayLike(i)}t.isArrayLikeObject=n}(w0)),w0}var S0={},A0={},VP;function b7(){return VP||(VP=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=p_();function r(n){return function(i){return e.get(i,n)}}t.property=r}(A0)),A0}var T0={},P0={},I0={},N0={},FP;function KR(){return FP||(FP=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r!==null&&(typeof r=="object"||typeof r=="function")}t.isObject=e}(N0)),N0}var C0={},$P;function WR(){return $P||($P=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==null||typeof r!="object"&&typeof r!="function"}t.isPrimitive=e}(C0)),C0}var k0={},UP;function __(){return UP||(UP=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}t.eq=e}(k0)),k0}var BP;function _7(){return BP||(BP=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=E_(),r=KR(),n=WR(),i=__();function a(p,v,w){return typeof w!="function"?e.isMatch(p,v):o(p,v,function b(E,S,P,k,C,R){const V=w(E,S,P,k,C,R);return V!==void 0?!!V:o(E,S,b,R)},new Map)}function o(p,v,w,b){if(v===p)return!0;switch(typeof v){case"object":return c(p,v,w,b);case"function":return Object.keys(v).length>0?o(p,{...v},w,b):i.eq(p,v);default:return r.isObject(p)?typeof v=="string"?v==="":!0:i.eq(p,v)}}function c(p,v,w,b){if(v==null)return!0;if(Array.isArray(v))return d(p,v,w,b);if(v instanceof Map)return u(p,v,w,b);if(v instanceof Set)return m(p,v,w,b);const E=Object.keys(v);if(p==null)return E.length===0;if(E.length===0)return!0;if(b&&b.has(v))return b.get(v)===p;b&&b.set(v,p);try{for(let S=0;S<E.length;S++){const P=E[S];if(!n.isPrimitive(p)&&!(P in p)||v[P]===void 0&&p[P]!==void 0||v[P]===null&&p[P]!==null||!w(p[P],v[P],P,p,v,b))return!1}return!0}finally{b&&b.delete(v)}}function u(p,v,w,b){if(v.size===0)return!0;if(!(p instanceof Map))return!1;for(const[E,S]of v.entries()){const P=p.get(E);if(w(P,S,E,p,v,b)===!1)return!1}return!0}function d(p,v,w,b){if(v.length===0)return!0;if(!Array.isArray(p))return!1;const E=new Set;for(let S=0;S<v.length;S++){const P=v[S];let k=!1;for(let C=0;C<p.length;C++){if(E.has(C))continue;const R=p[C];let V=!1;if(w(R,P,S,p,v,b)&&(V=!0),V){E.add(C),k=!0;break}}if(!k)return!1}return!0}function m(p,v,w,b){return v.size===0?!0:p instanceof Set?d([...p],[...v],w,b):!1}t.isMatchWith=a,t.isSetMatch=m}(I0)),I0}var zP;function E_(){return zP||(zP=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=_7();function r(n,i){return e.isMatchWith(n,i,()=>{})}t.isMatch=r}(P0)),P0}var j0={},R0={},O0={},qP;function HR(){return qP||(qP=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}t.getSymbols=e}(O0)),O0}var D0={},KP;function S_(){return KP||(KP=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}t.getTag=e}(D0)),D0}var M0={},WP;function A_(){return WP||(WP=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",r="[object String]",n="[object Number]",i="[object Boolean]",a="[object Arguments]",o="[object Symbol]",c="[object Date]",u="[object Map]",d="[object Set]",m="[object Array]",p="[object Function]",v="[object ArrayBuffer]",w="[object Object]",b="[object Error]",E="[object DataView]",S="[object Uint8Array]",P="[object Uint8ClampedArray]",k="[object Uint16Array]",C="[object Uint32Array]",R="[object BigUint64Array]",V="[object Int8Array]",B="[object Int16Array]",I="[object Int32Array]",j="[object BigInt64Array]",D="[object Float32Array]",$="[object Float64Array]";t.argumentsTag=a,t.arrayBufferTag=v,t.arrayTag=m,t.bigInt64ArrayTag=j,t.bigUint64ArrayTag=R,t.booleanTag=i,t.dataViewTag=E,t.dateTag=c,t.errorTag=b,t.float32ArrayTag=D,t.float64ArrayTag=$,t.functionTag=p,t.int16ArrayTag=B,t.int32ArrayTag=I,t.int8ArrayTag=V,t.mapTag=u,t.numberTag=n,t.objectTag=w,t.regexpTag=e,t.setTag=d,t.stringTag=r,t.symbolTag=o,t.uint16ArrayTag=k,t.uint32ArrayTag=C,t.uint8ArrayTag=S,t.uint8ClampedArrayTag=P}(M0)),M0}var L0={},HP;function E7(){return HP||(HP=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}t.isTypedArray=e}(L0)),L0}var GP;function GR(){return GP||(GP=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=HR(),r=S_(),n=A_(),i=WR(),a=E7();function o(m,p){return c(m,void 0,m,new Map,p)}function c(m,p,v,w=new Map,b=void 0){const E=b?.(m,p,v,w);if(E!=null)return E;if(i.isPrimitive(m))return m;if(w.has(m))return w.get(m);if(Array.isArray(m)){const S=new Array(m.length);w.set(m,S);for(let P=0;P<m.length;P++)S[P]=c(m[P],P,v,w,b);return Object.hasOwn(m,"index")&&(S.index=m.index),Object.hasOwn(m,"input")&&(S.input=m.input),S}if(m instanceof Date)return new Date(m.getTime());if(m instanceof RegExp){const S=new RegExp(m.source,m.flags);return S.lastIndex=m.lastIndex,S}if(m instanceof Map){const S=new Map;w.set(m,S);for(const[P,k]of m)S.set(P,c(k,P,v,w,b));return S}if(m instanceof Set){const S=new Set;w.set(m,S);for(const P of m)S.add(c(P,void 0,v,w,b));return S}if(typeof Buffer<"u"&&Buffer.isBuffer(m))return m.subarray();if(a.isTypedArray(m)){const S=new(Object.getPrototypeOf(m)).constructor(m.length);w.set(m,S);for(let P=0;P<m.length;P++)S[P]=c(m[P],P,v,w,b);return S}if(m instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&m instanceof SharedArrayBuffer)return m.slice(0);if(m instanceof DataView){const S=new DataView(m.buffer.slice(0),m.byteOffset,m.byteLength);return w.set(m,S),u(S,m,v,w,b),S}if(typeof File<"u"&&m instanceof File){const S=new File([m],m.name,{type:m.type});return w.set(m,S),u(S,m,v,w,b),S}if(m instanceof Blob){const S=new Blob([m],{type:m.type});return w.set(m,S),u(S,m,v,w,b),S}if(m instanceof Error){const S=new m.constructor;return w.set(m,S),S.message=m.message,S.name=m.name,S.stack=m.stack,S.cause=m.cause,u(S,m,v,w,b),S}if(typeof m=="object"&&d(m)){const S=Object.create(Object.getPrototypeOf(m));return w.set(m,S),u(S,m,v,w,b),S}return m}function u(m,p,v=m,w,b){const E=[...Object.keys(p),...e.getSymbols(p)];for(let S=0;S<E.length;S++){const P=E[S],k=Object.getOwnPropertyDescriptor(m,P);(k==null||k.writable)&&(m[P]=c(p[P],P,v,w,b))}}function d(m){switch(r.getTag(m)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=o,t.cloneDeepWithImpl=c,t.copyProperties=u}(R0)),R0}var YP;function S7(){return YP||(YP=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=GR();function r(n){return e.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}t.cloneDeep=r}(j0)),j0}var QP;function A7(){return QP||(QP=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=E_(),r=S7();function n(i){return i=r.cloneDeep(i),a=>e.isMatch(a,i)}t.matches=n}(T0)),T0}var V0={},F0={},$0={},XP;function T7(){return XP||(XP=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=GR(),r=A_();function n(i,a){return e.cloneDeepWith(i,(o,c,u,d)=>{const m=a?.(o,c,u,d);if(m!=null)return m;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case r.numberTag:case r.stringTag:case r.booleanTag:{const p=new i.constructor(i?.valueOf());return e.copyProperties(p,i),p}case r.argumentsTag:{const p={};return e.copyProperties(p,i),p.length=i.length,p[Symbol.iterator]=i[Symbol.iterator],p}default:return}})}t.cloneDeepWith=n}($0)),$0}var JP;function P7(){return JP||(JP=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=T7();function r(n){return e.cloneDeepWith(n)}t.cloneDeep=r}(F0)),F0}var U0={},B0={},ZP;function YR(){return ZP||(ZP=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function r(n,i=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<i;case"symbol":return!1;case"string":return e.test(n)}}t.isIndex=r}(B0)),B0}var z0={},eI;function I7(){return eI||(eI=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=S_();function r(n){return n!==null&&typeof n=="object"&&e.getTag(n)==="[object Arguments]"}t.isArguments=r}(z0)),z0}var tI;function N7(){return tI||(tI=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=xR(),r=YR(),n=I7(),i=m_();function a(o,c){let u;if(Array.isArray(c)?u=c:typeof c=="string"&&e.isDeepKey(c)&&o?.[c]==null?u=i.toPath(c):u=[c],u.length===0)return!1;let d=o;for(let m=0;m<u.length;m++){const p=u[m];if((d==null||!Object.hasOwn(d,p))&&!((Array.isArray(d)||n.isArguments(d))&&r.isIndex(p)&&p<d.length))return!1;d=d[p]}return!0}t.has=a}(U0)),U0}var rI;function C7(){return rI||(rI=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=E_(),r=wR(),n=P7(),i=p_(),a=N7();function o(c,u){switch(typeof c){case"object":{Object.is(c?.valueOf(),-0)&&(c="-0");break}case"number":{c=r.toKey(c);break}}return u=n.cloneDeep(u),function(d){const m=i.get(d,c);return m===void 0?a.has(d,c):u===void 0?m===void 0:e.isMatch(m,u)}}t.matchesProperty=o}(V0)),V0}var nI;function k7(){return nI||(nI=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=qR(),r=b7(),n=A7(),i=C7();function a(o){if(o==null)return e.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?i.matchesProperty(o[0],o[1]):n.matches(o);case"string":case"symbol":case"number":return r.property(o)}}t.iteratee=a}(S0)),S0}var iI;function j7(){return iI||(iI=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=y7(),r=qR(),n=w7(),i=k7();function a(o,c=r.identity){return n.isArrayLikeObject(o)?e.uniqBy(Array.from(o),i.iteratee(c)):[]}t.uniqBy=a}(y0)),y0}var q0,aI;function R7(){return aI||(aI=1,q0=j7().uniqBy),q0}var O7=R7();const sI=Pi(O7);function D7(t,e,r){return e===!0?sI(t,r):typeof e=="function"?sI(t,e):t}var K0={exports:{}},W0={},H0={exports:{}},G0={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oI;function M7(){if(oI)return G0;oI=1;var t=tu();function e(p,v){return p===v&&(p!==0||1/p===1/v)||p!==p&&v!==v}var r=typeof Object.is=="function"?Object.is:e,n=t.useState,i=t.useEffect,a=t.useLayoutEffect,o=t.useDebugValue;function c(p,v){var w=v(),b=n({inst:{value:w,getSnapshot:v}}),E=b[0].inst,S=b[1];return a(function(){E.value=w,E.getSnapshot=v,u(E)&&S({inst:E})},[p,w,v]),i(function(){return u(E)&&S({inst:E}),p(function(){u(E)&&S({inst:E})})},[p]),o(w),w}function u(p){var v=p.getSnapshot;p=p.value;try{var w=v();return!r(p,w)}catch{return!0}}function d(p,v){return v()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:c;return G0.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:m,G0}var lI;function L7(){return lI||(lI=1,H0.exports=M7()),H0.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cI;function V7(){if(cI)return W0;cI=1;var t=tu(),e=L7();function r(d,m){return d===m&&(d!==0||1/d===1/m)||d!==d&&m!==m}var n=typeof Object.is=="function"?Object.is:r,i=e.useSyncExternalStore,a=t.useRef,o=t.useEffect,c=t.useMemo,u=t.useDebugValue;return W0.useSyncExternalStoreWithSelector=function(d,m,p,v,w){var b=a(null);if(b.current===null){var E={hasValue:!1,value:null};b.current=E}else E=b.current;b=c(function(){function P(B){if(!k){if(k=!0,C=B,B=v(B),w!==void 0&&E.hasValue){var I=E.value;if(w(I,B))return R=I}return R=B}if(I=R,n(C,B))return I;var j=v(B);return w!==void 0&&w(I,j)?(C=B,I):(C=B,R=j)}var k=!1,C,R,V=p===void 0?null:p;return[function(){return P(m())},V===null?void 0:function(){return P(V())}]},[m,p,v,w]);var S=i(d,b[0],b[1]);return o(function(){E.hasValue=!0,E.value=S},[S]),u(S),S},W0}var uI;function F7(){return uI||(uI=1,K0.exports=V7()),K0.exports}var $7=F7(),T_=_.createContext(null),U7=t=>t,Dt=()=>{var t=_.useContext(T_);return t?t.store.dispatch:U7},Hm=()=>{},B7=()=>Hm,z7=(t,e)=>t===e;function Se(t){var e=_.useContext(T_);return $7.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:B7,e?e.store.getState:Hm,e?e.store.getState:Hm,e?t:Hm,z7)}function q7(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function K7(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function W7(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(r=>typeof r=="function")){const r=t.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${e}[${r}]`)}}var dI=t=>Array.isArray(t)?t:[t];function H7(t){const e=Array.isArray(t[0])?t[0]:t;return W7(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function G7(t,e){const r=[],{length:n}=t;for(let i=0;i<n;i++)r.push(t[i].apply(null,e));return r}var Y7=class{constructor(t){this.value=t}deref(){return this.value}},Q7=typeof WeakRef<"u"?WeakRef:Y7,X7=0,fI=1;function _m(){return{s:X7,v:void 0,o:null,p:null}}function QR(t,e={}){let r=_m();const{resultEqualityCheck:n}=e;let i,a=0;function o(){let c=r;const{length:u}=arguments;for(let p=0,v=u;p<v;p++){const w=arguments[p];if(typeof w=="function"||typeof w=="object"&&w!==null){let b=c.o;b===null&&(c.o=b=new WeakMap);const E=b.get(w);E===void 0?(c=_m(),b.set(w,c)):c=E}else{let b=c.p;b===null&&(c.p=b=new Map);const E=b.get(w);E===void 0?(c=_m(),b.set(w,c)):c=E}}const d=c;let m;if(c.s===fI)m=c.v;else if(m=t.apply(null,arguments),a++,n){const p=i?.deref?.()??i;p!=null&&n(p,m)&&(m=p,a!==0&&a--),i=typeof m=="object"&&m!==null||typeof m=="function"?new Q7(m):m}return d.s=fI,d.v=m,m}return o.clearCache=()=>{r=_m(),o.resetResultsCount()},o.resultsCount=()=>a,o.resetResultsCount=()=>{a=0},o}function J7(t,...e){const r=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,n=(...i)=>{let a=0,o=0,c,u={},d=i.pop();typeof d=="object"&&(u=d,d=i.pop()),q7(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const m={...r,...u},{memoize:p,memoizeOptions:v=[],argsMemoize:w=QR,argsMemoizeOptions:b=[]}=m,E=dI(v),S=dI(b),P=H7(i),k=p(function(){return a++,d.apply(null,arguments)},...E),C=w(function(){o++;const V=G7(P,arguments);return c=k.apply(null,V),c},...S);return Object.assign(C,{resultFunc:d,memoizedResultFunc:k,dependencies:P,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>c,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:p,argsMemoize:w})};return Object.assign(n,{withTypes:()=>n}),n}var J=J7(QR),Z7=Object.assign((t,e=J)=>{K7(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const r=Object.keys(t),n=r.map(a=>t[a]);return e(n,(...a)=>a.reduce((o,c,u)=>(o[r[u]]=c,o),{}))},{withTypes:()=>Z7}),Y0={},Q0={},X0={},hI;function eq(){return hI||(hI=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,i,a)=>{if(n!==i){const o=e(n),c=e(i);if(o===c&&o===0){if(n<i)return a==="desc"?1:-1;if(n>i)return a==="desc"?-1:1}return a==="desc"?c-o:o-c}return 0};t.compareValues=r}(X0)),X0}var J0={},Z0={},mI;function XR(){return mI||(mI=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"||r instanceof Symbol}t.isSymbol=e}(Z0)),Z0}var pI;function tq(){return pI||(pI=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=XR(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(a,o){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||e.isSymbol(a)?!0:typeof a=="string"&&(n.test(a)||!r.test(a))||o!=null&&Object.hasOwn(o,a)}t.isKey=i}(J0)),J0}var gI;function rq(){return gI||(gI=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=eq(),r=tq(),n=m_();function i(a,o,c,u){if(a==null)return[];c=u?void 0:c,Array.isArray(a)||(a=Object.values(a)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(c)||(c=c==null?[]:[c]),c=c.map(w=>String(w));const d=(w,b)=>{let E=w;for(let S=0;S<b.length&&E!=null;++S)E=E[b[S]];return E},m=(w,b)=>b==null||w==null?b:typeof w=="object"&&"key"in w?Object.hasOwn(b,w.key)?b[w.key]:d(b,w.path):typeof w=="function"?w(b):Array.isArray(w)?d(b,w):typeof b=="object"?b[w]:b,p=o.map(w=>(Array.isArray(w)&&w.length===1&&(w=w[0]),w==null||typeof w=="function"||Array.isArray(w)||r.isKey(w)?w:{key:w,path:n.toPath(w)}));return a.map(w=>({original:w,criteria:p.map(b=>m(b,w))})).slice().sort((w,b)=>{for(let E=0;E<p.length;E++){const S=e.compareValues(w.criteria[E],b.criteria[E],c[E]);if(S!==0)return S}return 0}).map(w=>w.original)}t.orderBy=i}(Q0)),Q0}var ex={},yI;function nq(){return yI||(yI=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n=1){const i=[],a=Math.floor(n),o=(c,u)=>{for(let d=0;d<c.length;d++){const m=c[d];Array.isArray(m)&&u<a?o(m,u+1):i.push(m)}};return o(r,0),i}t.flatten=e}(ex)),ex}var tx={},vI;function JR(){return vI||(vI=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=YR(),r=b_(),n=KR(),i=__();function a(o,c,u){return n.isObject(u)&&(typeof c=="number"&&r.isArrayLike(u)&&e.isIndex(c)&&c<u.length||typeof c=="string"&&c in u)?i.eq(u[c],o):!1}t.isIterateeCall=a}(tx)),tx}var xI;function iq(){return xI||(xI=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=rq(),r=nq(),n=JR();function i(a,...o){const c=o.length;return c>1&&n.isIterateeCall(a,o[0],o[1])?o=[]:c>2&&n.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),e.orderBy(a,r.flatten(o),["asc"])}t.sortBy=i}(Y0)),Y0}var rx,wI;function aq(){return wI||(wI=1,rx=iq().sortBy),rx}var sq=aq();const Rg=Pi(sq);var ZR=t=>t.legend.settings,oq=t=>t.legend.size,lq=t=>t.legend.payload;J([lq,ZR],(t,e)=>{var{itemSorter:r}=e,n=t.flat(1);return r?Rg(n,r):n});var Em=1;function cq(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,r]=_.useState({height:0,left:0,top:0,width:0}),n=_.useCallback(i=>{if(i!=null){var a=i.getBoundingClientRect(),o={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(o.height-e.height)>Em||Math.abs(o.left-e.left)>Em||Math.abs(o.top-e.top)>Em||Math.abs(o.width-e.width)>Em)&&r({height:o.height,left:o.left,top:o.top,width:o.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,n]}function _r(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var uq=typeof Symbol=="function"&&Symbol.observable||"@@observable",bI=uq,nx=()=>Math.random().toString(36).substring(7).split("").join("."),dq={INIT:`@@redux/INIT${nx()}`,REPLACE:`@@redux/REPLACE${nx()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${nx()}`},bp=dq;function P_(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function eO(t,e,r){if(typeof t!="function")throw new Error(_r(2));if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(_r(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(_r(1));return r(eO)(t,e)}let n=t,i=e,a=new Map,o=a,c=0,u=!1;function d(){o===a&&(o=new Map,a.forEach((S,P)=>{o.set(P,S)}))}function m(){if(u)throw new Error(_r(3));return i}function p(S){if(typeof S!="function")throw new Error(_r(4));if(u)throw new Error(_r(5));let P=!0;d();const k=c++;return o.set(k,S),function(){if(P){if(u)throw new Error(_r(6));P=!1,d(),o.delete(k),a=null}}}function v(S){if(!P_(S))throw new Error(_r(7));if(typeof S.type>"u")throw new Error(_r(8));if(typeof S.type!="string")throw new Error(_r(17));if(u)throw new Error(_r(9));try{u=!0,i=n(i,S)}finally{u=!1}return(a=o).forEach(k=>{k()}),S}function w(S){if(typeof S!="function")throw new Error(_r(10));n=S,v({type:bp.REPLACE})}function b(){const S=p;return{subscribe(P){if(typeof P!="object"||P===null)throw new Error(_r(11));function k(){const R=P;R.next&&R.next(m())}return k(),{unsubscribe:S(k)}},[bI](){return this}}}return v({type:bp.INIT}),{dispatch:v,subscribe:p,getState:m,replaceReducer:w,[bI]:b}}function fq(t){Object.keys(t).forEach(e=>{const r=t[e];if(typeof r(void 0,{type:bp.INIT})>"u")throw new Error(_r(12));if(typeof r(void 0,{type:bp.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(_r(13))})}function tO(t){const e=Object.keys(t),r={};for(let a=0;a<e.length;a++){const o=e[a];typeof t[o]=="function"&&(r[o]=t[o])}const n=Object.keys(r);let i;try{fq(r)}catch(a){i=a}return function(o={},c){if(i)throw i;let u=!1;const d={};for(let m=0;m<n.length;m++){const p=n[m],v=r[p],w=o[p],b=v(w,c);if(typeof b>"u")throw c&&c.type,new Error(_r(14));d[p]=b,u=u||b!==w}return u=u||n.length!==Object.keys(o).length,u?d:o}}function _p(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,r)=>(...n)=>e(r(...n)))}function hq(...t){return e=>(r,n)=>{const i=e(r,n);let a=()=>{throw new Error(_r(15))};const o={getState:i.getState,dispatch:(u,...d)=>a(u,...d)},c=t.map(u=>u(o));return a=_p(...c)(i.dispatch),{...i,dispatch:a}}}function rO(t){return P_(t)&&"type"in t&&typeof t.type=="string"}var nO=Symbol.for("immer-nothing"),_I=Symbol.for("immer-draftable"),Pn=Symbol.for("immer-state");function vi(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Wc=Object.getPrototypeOf;function pl(t){return!!t&&!!t[Pn]}function Ha(t){return t?iO(t)||Array.isArray(t)||!!t[_I]||!!t.constructor?.[_I]||Dg(t)||Mg(t):!1}var mq=Object.prototype.constructor.toString();function iO(t){if(!t||typeof t!="object")return!1;const e=Wc(t);if(e===null)return!0;const r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===mq}function Ep(t,e){Og(t)===0?Reflect.ownKeys(t).forEach(r=>{e(r,t[r],t)}):t.forEach((r,n)=>e(n,r,t))}function Og(t){const e=t[Pn];return e?e.type_:Array.isArray(t)?1:Dg(t)?2:Mg(t)?3:0}function Ew(t,e){return Og(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function aO(t,e,r){const n=Og(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function pq(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Dg(t){return t instanceof Map}function Mg(t){return t instanceof Set}function Wo(t){return t.copy_||t.base_}function Sw(t,e){if(Dg(t))return new Map(t);if(Mg(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const r=iO(t);if(e===!0||e==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(t);delete n[Pn];let i=Reflect.ownKeys(n);for(let a=0;a<i.length;a++){const o=i[a],c=n[o];c.writable===!1&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(n[o]={configurable:!0,writable:!0,enumerable:c.enumerable,value:t[o]})}return Object.create(Wc(t),n)}else{const n=Wc(t);if(n!==null&&r)return{...t};const i=Object.create(n);return Object.assign(i,t)}}function I_(t,e=!1){return Lg(t)||pl(t)||!Ha(t)||(Og(t)>1&&(t.set=t.add=t.clear=t.delete=gq),Object.freeze(t),e&&Object.entries(t).forEach(([r,n])=>I_(n,!0))),t}function gq(){vi(2)}function Lg(t){return Object.isFrozen(t)}var yq={};function gl(t){const e=yq[t];return e||vi(0,t),e}var of;function sO(){return of}function vq(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function EI(t,e){e&&(gl("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function Aw(t){Tw(t),t.drafts_.forEach(xq),t.drafts_=null}function Tw(t){t===of&&(of=t.parent_)}function SI(t){return of=vq(of,t)}function xq(t){const e=t[Pn];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function AI(t,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];return t!==void 0&&t!==r?(r[Pn].modified_&&(Aw(e),vi(4)),Ha(t)&&(t=Sp(e,t),e.parent_||Ap(e,t)),e.patches_&&gl("Patches").generateReplacementPatches_(r[Pn].base_,t,e.patches_,e.inversePatches_)):t=Sp(e,r,[]),Aw(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==nO?t:void 0}function Sp(t,e,r){if(Lg(e))return e;const n=e[Pn];if(!n)return Ep(e,(i,a)=>TI(t,n,e,i,a,r)),e;if(n.scope_!==t)return e;if(!n.modified_)return Ap(t,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const i=n.copy_;let a=i,o=!1;n.type_===3&&(a=new Set(i),i.clear(),o=!0),Ep(a,(c,u)=>TI(t,n,i,c,u,r,o)),Ap(t,i,!1),r&&t.patches_&&gl("Patches").generatePatches_(n,r,t.patches_,t.inversePatches_)}return n.copy_}function TI(t,e,r,n,i,a,o){if(pl(i)){const c=a&&e&&e.type_!==3&&!Ew(e.assigned_,n)?a.concat(n):void 0,u=Sp(t,i,c);if(aO(r,n,u),pl(u))t.canAutoFreeze_=!1;else return}else o&&r.add(i);if(Ha(i)&&!Lg(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;Sp(t,i),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&Ap(t,i)}}function Ap(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&I_(e,r)}function wq(t,e){const r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:sO(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,a=N_;r&&(i=[n],a=lf);const{revoke:o,proxy:c}=Proxy.revocable(i,a);return n.draft_=c,n.revoke_=o,c}var N_={get(t,e){if(e===Pn)return t;const r=Wo(t);if(!Ew(r,e))return bq(t,r,e);const n=r[e];return t.finalized_||!Ha(n)?n:n===ix(t.base_,e)?(ax(t),t.copy_[e]=Iw(n,t)):n},has(t,e){return e in Wo(t)},ownKeys(t){return Reflect.ownKeys(Wo(t))},set(t,e,r){const n=oO(Wo(t),e);if(n?.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){const i=ix(Wo(t),e),a=i?.[Pn];if(a&&a.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(pq(r,i)&&(r!==void 0||Ew(t.base_,e)))return!0;ax(t),Pw(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return ix(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,ax(t),Pw(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const r=Wo(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty(){vi(11)},getPrototypeOf(t){return Wc(t.base_)},setPrototypeOf(){vi(12)}},lf={};Ep(N_,(t,e)=>{lf[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});lf.deleteProperty=function(t,e){return lf.set.call(this,t,e,void 0)};lf.set=function(t,e,r){return N_.set.call(this,t[0],e,r,t[0])};function ix(t,e){const r=t[Pn];return(r?Wo(r):t)[e]}function bq(t,e,r){const n=oO(e,r);return n?"value"in n?n.value:n.get?.call(t.draft_):void 0}function oO(t,e){if(!(e in t))return;let r=Wc(t);for(;r;){const n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=Wc(r)}}function Pw(t){t.modified_||(t.modified_=!0,t.parent_&&Pw(t.parent_))}function ax(t){t.copy_||(t.copy_=Sw(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var _q=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,r,n)=>{if(typeof e=="function"&&typeof r!="function"){const a=r;r=e;const o=this;return function(u=a,...d){return o.produce(u,m=>r.call(this,m,...d))}}typeof r!="function"&&vi(6),n!==void 0&&typeof n!="function"&&vi(7);let i;if(Ha(e)){const a=SI(this),o=Iw(e,void 0);let c=!0;try{i=r(o),c=!1}finally{c?Aw(a):Tw(a)}return EI(a,n),AI(i,a)}else if(!e||typeof e!="object"){if(i=r(e),i===void 0&&(i=e),i===nO&&(i=void 0),this.autoFreeze_&&I_(i,!0),n){const a=[],o=[];gl("Patches").generateReplacementPatches_(e,i,a,o),n(a,o)}return i}else vi(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(o,...c)=>this.produceWithPatches(o,u=>e(u,...c));let n,i;return[this.produce(e,r,(o,c)=>{n=o,i=c}),n,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){Ha(t)||vi(8),pl(t)&&(t=Va(t));const e=SI(this),r=Iw(t,void 0);return r[Pn].isManual_=!0,Tw(e),r}finishDraft(t,e){const r=t&&t[Pn];(!r||!r.isManual_)&&vi(9);const{scope_:n}=r;return EI(n,e),AI(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){const i=e[r];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}r>-1&&(e=e.slice(r+1));const n=gl("Patches").applyPatches_;return pl(t)?n(t,e):this.produce(t,i=>n(i,e))}};function Iw(t,e){const r=Dg(t)?gl("MapSet").proxyMap_(t,e):Mg(t)?gl("MapSet").proxySet_(t,e):wq(t,e);return(e?e.scope_:sO()).drafts_.push(r),r}function Va(t){return pl(t)||vi(10,t),lO(t)}function lO(t){if(!Ha(t)||Lg(t))return t;const e=t[Pn];let r;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=Sw(t,e.scope_.immer_.useStrictShallowCopy_)}else r=Sw(t,!0);return Ep(r,(n,i)=>{aO(r,n,lO(i))}),e&&(e.finalized_=!1),r}var In=new _q,cO=In.produce;In.produceWithPatches.bind(In);In.setAutoFreeze.bind(In);In.setUseStrictShallowCopy.bind(In);In.applyPatches.bind(In);In.createDraft.bind(In);In.finishDraft.bind(In);function uO(t){return({dispatch:r,getState:n})=>i=>a=>typeof a=="function"?a(r,n,t):i(a)}var Eq=uO(),Sq=uO,Aq=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?_p:_p.apply(null,arguments)};function Gn(t,e){function r(...n){if(e){let i=e(...n);if(!i)throw new Error(An(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:n[0]}}return r.toString=()=>`${t}`,r.type=t,r.match=n=>rO(n)&&n.type===t,r}var dO=class jd extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,jd.prototype)}static get[Symbol.species](){return jd}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new jd(...e[0].concat(this)):new jd(...e.concat(this))}};function PI(t){return Ha(t)?cO(t,()=>{}):t}function Sm(t,e,r){return t.has(e)?t.get(e):t.set(e,r(e)).get(e)}function Tq(t){return typeof t=="boolean"}var Pq=()=>function(e){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=e??{};let o=new dO;return r&&(Tq(r)?o.push(Eq):o.push(Sq(r.extraArgument))),o},Iq="RTK_autoBatch",II=t=>e=>{setTimeout(e,t)},Nq=(t={type:"raf"})=>e=>(...r)=>{const n=e(...r);let i=!0,a=!1,o=!1;const c=new Set,u=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:II(10):t.type==="callback"?t.queueNotification:II(t.timeout),d=()=>{o=!1,a&&(a=!1,c.forEach(m=>m()))};return Object.assign({},n,{subscribe(m){const p=()=>i&&m(),v=n.subscribe(p);return c.add(m),()=>{v(),c.delete(m)}},dispatch(m){try{return i=!m?.meta?.[Iq],a=!i,a&&(o||(o=!0,u(d))),n.dispatch(m)}finally{i=!0}}})},Cq=t=>function(r){const{autoBatch:n=!0}=r??{};let i=new dO(t);return n&&i.push(Nq(typeof n=="object"?n:void 0)),i};function kq(t){const e=Pq(),{reducer:r=void 0,middleware:n,devTools:i=!0,preloadedState:a=void 0,enhancers:o=void 0}=t||{};let c;if(typeof r=="function")c=r;else if(P_(r))c=tO(r);else throw new Error(An(1));let u;typeof n=="function"?u=n(e):u=e();let d=_p;i&&(d=Aq({trace:!1,...typeof i=="object"&&i}));const m=hq(...u),p=Cq(m);let v=typeof o=="function"?o(p):p();const w=d(...v);return eO(c,a,w)}function fO(t){const e={},r=[];let n;const i={addCase(a,o){const c=typeof a=="string"?a:a.type;if(!c)throw new Error(An(28));if(c in e)throw new Error(An(29));return e[c]=o,i},addMatcher(a,o){return r.push({matcher:a,reducer:o}),i},addDefaultCase(a){return n=a,i}};return t(i),[e,r,n]}function jq(t){return typeof t=="function"}function Rq(t,e){let[r,n,i]=fO(e),a;if(jq(t))a=()=>PI(t());else{const c=PI(t);a=()=>c}function o(c=a(),u){let d=[r[u.type],...n.filter(({matcher:m})=>m(u)).map(({reducer:m})=>m)];return d.filter(m=>!!m).length===0&&(d=[i]),d.reduce((m,p)=>{if(p)if(pl(m)){const w=p(m,u);return w===void 0?m:w}else{if(Ha(m))return cO(m,v=>p(v,u));{const v=p(m,u);if(v===void 0){if(m===null)return m;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}}return m},c)}return o.getInitialState=a,o}var Oq="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Dq=(t=21)=>{let e="",r=t;for(;r--;)e+=Oq[Math.random()*64|0];return e},Mq=Symbol.for("rtk-slice-createasyncthunk");function Lq(t,e){return`${t}/${e}`}function Vq({creators:t}={}){const e=t?.asyncThunk?.[Mq];return function(n){const{name:i,reducerPath:a=i}=n;if(!i)throw new Error(An(11));const o=(typeof n.reducers=="function"?n.reducers($q()):n.reducers)||{},c=Object.keys(o),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(C,R){const V=typeof C=="string"?C:C.type;if(!V)throw new Error(An(12));if(V in u.sliceCaseReducersByType)throw new Error(An(13));return u.sliceCaseReducersByType[V]=R,d},addMatcher(C,R){return u.sliceMatchers.push({matcher:C,reducer:R}),d},exposeAction(C,R){return u.actionCreators[C]=R,d},exposeCaseReducer(C,R){return u.sliceCaseReducersByName[C]=R,d}};c.forEach(C=>{const R=o[C],V={reducerName:C,type:Lq(i,C),createNotation:typeof n.reducers=="function"};Bq(R)?qq(V,R,d,e):Uq(V,R,d)});function m(){const[C={},R=[],V=void 0]=typeof n.extraReducers=="function"?fO(n.extraReducers):[n.extraReducers],B={...C,...u.sliceCaseReducersByType};return Rq(n.initialState,I=>{for(let j in B)I.addCase(j,B[j]);for(let j of u.sliceMatchers)I.addMatcher(j.matcher,j.reducer);for(let j of R)I.addMatcher(j.matcher,j.reducer);V&&I.addDefaultCase(V)})}const p=C=>C,v=new Map,w=new WeakMap;let b;function E(C,R){return b||(b=m()),b(C,R)}function S(){return b||(b=m()),b.getInitialState()}function P(C,R=!1){function V(I){let j=I[C];return typeof j>"u"&&R&&(j=Sm(w,V,S)),j}function B(I=p){const j=Sm(v,R,()=>new WeakMap);return Sm(j,I,()=>{const D={};for(const[$,M]of Object.entries(n.selectors??{}))D[$]=Fq(M,I,()=>Sm(w,I,S),R);return D})}return{reducerPath:C,getSelectors:B,get selectors(){return B(V)},selectSlice:V}}const k={name:i,reducer:E,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:S,...P(a),injectInto(C,{reducerPath:R,...V}={}){const B=R??a;return C.inject({reducerPath:B,reducer:E},V),{...k,...P(B,!0)}}};return k}}function Fq(t,e,r,n){function i(a,...o){let c=e(a);return typeof c>"u"&&n&&(c=r()),t(c,...o)}return i.unwrapped=t,i}var Xn=Vq();function $q(){function t(e,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...r}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...r){return e(...r)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:r}},asyncThunk:t}}function Uq({type:t,reducerName:e,createNotation:r},n,i){let a,o;if("reducer"in n){if(r&&!zq(n))throw new Error(An(17));a=n.reducer,o=n.prepare}else a=n;i.addCase(t,a).exposeCaseReducer(e,a).exposeAction(e,o?Gn(t,o):Gn(t))}function Bq(t){return t._reducerDefinitionType==="asyncThunk"}function zq(t){return t._reducerDefinitionType==="reducerWithPrepare"}function qq({type:t,reducerName:e},r,n,i){if(!i)throw new Error(An(18));const{payloadCreator:a,fulfilled:o,pending:c,rejected:u,settled:d,options:m}=r,p=i(t,a,m);n.exposeAction(e,p),o&&n.addCase(p.fulfilled,o),c&&n.addCase(p.pending,c),u&&n.addCase(p.rejected,u),d&&n.addMatcher(p.settled,d),n.exposeCaseReducer(e,{fulfilled:o||Am,pending:c||Am,rejected:u||Am,settled:d||Am})}function Am(){}var Kq="task",hO="listener",mO="completed",C_="cancelled",Wq=`task-${C_}`,Hq=`task-${mO}`,Nw=`${hO}-${C_}`,Gq=`${hO}-${mO}`,Vg=class{constructor(t){this.code=t,this.message=`${Kq} ${C_} (reason: ${t})`}name="TaskAbortError";message},k_=(t,e)=>{if(typeof t!="function")throw new TypeError(An(32))},Tp=()=>{},pO=(t,e=Tp)=>(t.catch(e),t),gO=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),rl=(t,e)=>{const r=t.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:e,configurable:!0,writable:!0}),t.abort(e))},nl=t=>{if(t.aborted){const{reason:e}=t;throw new Vg(e)}};function yO(t,e){let r=Tp;return new Promise((n,i)=>{const a=()=>i(new Vg(t.reason));if(t.aborted){a();return}r=gO(t,a),e.finally(()=>r()).then(n,i)}).finally(()=>{r=Tp})}var Yq=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(r){return{status:r instanceof Vg?"cancelled":"rejected",error:r}}finally{e?.()}},Pp=t=>e=>pO(yO(t,e).then(r=>(nl(t),r))),vO=t=>{const e=Pp(t);return r=>e(new Promise(n=>setTimeout(n,r)))},{assign:Dc}=Object,NI={},Fg="listenerMiddleware",Qq=(t,e)=>{const r=n=>gO(t,()=>rl(n,t.reason));return(n,i)=>{k_(n);const a=new AbortController;r(a);const o=Yq(async()=>{nl(t),nl(a.signal);const c=await n({pause:Pp(a.signal),delay:vO(a.signal),signal:a.signal});return nl(a.signal),c},()=>rl(a,Hq));return i?.autoJoin&&e.push(o.catch(Tp)),{result:Pp(t)(o),cancel(){rl(a,Wq)}}}},Xq=(t,e)=>{const r=async(n,i)=>{nl(e);let a=()=>{};const c=[new Promise((u,d)=>{let m=t({predicate:n,effect:(p,v)=>{v.unsubscribe(),u([p,v.getState(),v.getOriginalState()])}});a=()=>{m(),d()}})];i!=null&&c.push(new Promise(u=>setTimeout(u,i,null)));try{const u=await yO(e,Promise.race(c));return nl(e),u}finally{a()}};return(n,i)=>pO(r(n,i))},xO=t=>{let{type:e,actionCreator:r,matcher:n,predicate:i,effect:a}=t;if(e)i=Gn(e).match;else if(r)e=r.type,i=r.match;else if(n)i=n;else if(!i)throw new Error(An(21));return k_(a),{predicate:i,type:e,effect:a}},wO=Dc(t=>{const{type:e,predicate:r,effect:n}=xO(t);return{id:Dq(),effect:n,type:e,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(An(22))}}},{withTypes:()=>wO}),CI=(t,e)=>{const{type:r,effect:n,predicate:i}=xO(e);return Array.from(t.values()).find(a=>(typeof r=="string"?a.type===r:a.predicate===i)&&a.effect===n)},Cw=t=>{t.pending.forEach(e=>{rl(e,Nw)})},Jq=t=>()=>{t.forEach(Cw),t.clear()},kI=(t,e,r)=>{try{t(e,r)}catch(n){setTimeout(()=>{throw n},0)}},bO=Dc(Gn(`${Fg}/add`),{withTypes:()=>bO}),Zq=Gn(`${Fg}/removeAll`),_O=Dc(Gn(`${Fg}/remove`),{withTypes:()=>_O}),eK=(...t)=>{console.error(`${Fg}/error`,...t)},Uf=(t={})=>{const e=new Map,{extra:r,onError:n=eK}=t;k_(n);const i=m=>(m.unsubscribe=()=>e.delete(m.id),e.set(m.id,m),p=>{m.unsubscribe(),p?.cancelActive&&Cw(m)}),a=m=>{const p=CI(e,m)??wO(m);return i(p)};Dc(a,{withTypes:()=>a});const o=m=>{const p=CI(e,m);return p&&(p.unsubscribe(),m.cancelActive&&Cw(p)),!!p};Dc(o,{withTypes:()=>o});const c=async(m,p,v,w)=>{const b=new AbortController,E=Xq(a,b.signal),S=[];try{m.pending.add(b),await Promise.resolve(m.effect(p,Dc({},v,{getOriginalState:w,condition:(P,k)=>E(P,k).then(Boolean),take:E,delay:vO(b.signal),pause:Pp(b.signal),extra:r,signal:b.signal,fork:Qq(b.signal,S),unsubscribe:m.unsubscribe,subscribe:()=>{e.set(m.id,m)},cancelActiveListeners:()=>{m.pending.forEach((P,k,C)=>{P!==b&&(rl(P,Nw),C.delete(P))})},cancel:()=>{rl(b,Nw),m.pending.delete(b)},throwIfCancelled:()=>{nl(b.signal)}})))}catch(P){P instanceof Vg||kI(n,P,{raisedBy:"effect"})}finally{await Promise.all(S),rl(b,Gq),m.pending.delete(b)}},u=Jq(e);return{middleware:m=>p=>v=>{if(!rO(v))return p(v);if(bO.match(v))return a(v.payload);if(Zq.match(v)){u();return}if(_O.match(v))return o(v.payload);let w=m.getState();const b=()=>{if(w===NI)throw new Error(An(23));return w};let E;try{if(E=p(v),e.size>0){const S=m.getState(),P=Array.from(e.values());for(const k of P){let C=!1;try{C=k.predicate(v,S,w)}catch(R){C=!1,kI(n,R,{raisedBy:"predicate"})}C&&c(k,v,m,b)}}}finally{w=NI}return E},startListening:a,stopListening:o,clearListeners:u}};function An(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var tK={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},EO=Xn({name:"chartLayout",initialState:tK,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){t.margin.top=e.payload.top,t.margin.right=e.payload.right,t.margin.bottom=e.payload.bottom,t.margin.left=e.payload.left},setScale(t,e){t.scale=e.payload}}}),{setMargin:rK,setLayout:nK,setChartSize:iK,setScale:aK}=EO.actions,sK=EO.reducer;function jI(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function RI(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?jI(Object(r),!0).forEach(function(n){oK(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jI(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function oK(t,e,r){return(e=lK(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lK(t){var e=cK(t,"string");return typeof e=="symbol"?e:e+""}function cK(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ip=Math.PI/180,uK=t=>t*180/Math.PI,Yt=(t,e,r,n)=>({x:t+Math.cos(-Ip*n)*r,y:e+Math.sin(-Ip*n)*r}),SO=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},dK=(t,e)=>{var{x:r,y:n}=t,{x:i,y:a}=e;return Math.sqrt((r-i)**2+(n-a)**2)},fK=(t,e)=>{var{x:r,y:n}=t,{cx:i,cy:a}=e,o=dK({x:r,y:n},{x:i,y:a});if(o<=0)return{radius:o,angle:0};var c=(r-i)/o,u=Math.acos(c);return n>a&&(u=2*Math.PI-u),{radius:o,angle:uK(u),angleInRadian:u}},hK=t=>{var{startAngle:e,endAngle:r}=t,n=Math.floor(e/360),i=Math.floor(r/360),a=Math.min(n,i);return{startAngle:e-a*360,endAngle:r-a*360}},mK=(t,e)=>{var{startAngle:r,endAngle:n}=e,i=Math.floor(r/360),a=Math.floor(n/360),o=Math.min(i,a);return t+o*360},pK=(t,e)=>{var{x:r,y:n}=t,{radius:i,angle:a}=fK({x:r,y:n},e),{innerRadius:o,outerRadius:c}=e;if(i<o||i>c||i===0)return null;var{startAngle:u,endAngle:d}=hK(e),m=a,p;if(u<=d){for(;m>d;)m-=360;for(;m<u;)m+=360;p=m>=u&&m<=d}else{for(;m>u;)m-=360;for(;m<d;)m+=360;p=m>=d&&m<=u}return p?RI(RI({},e),{},{radius:i,angle:mK(m,e)}):null};function OI(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function zn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?OI(Object(r),!0).forEach(function(n){gK(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):OI(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function gK(t,e,r){return(e=yK(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yK(t){var e=vK(t,"string");return typeof e=="symbol"?e:e+""}function vK(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _t(t,e,r){return dt(t)||dt(e)?r:ia(e)?Xs(t,e,r):typeof e=="function"?e(t):r}var xK=(t,e,r,n,i)=>{var a,o=-1,c=(a=e?.length)!==null&&a!==void 0?a:0;if(c<=1||t==null)return 0;if(n==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var u=0;u<c;u++){var d=u>0?r[u-1].coordinate:r[c-1].coordinate,m=r[u].coordinate,p=u>=c-1?r[0].coordinate:r[u+1].coordinate,v=void 0;if(mr(m-d)!==mr(p-m)){var w=[];if(mr(p-m)===mr(i[1]-i[0])){v=p;var b=m+i[1]-i[0];w[0]=Math.min(b,(b+d)/2),w[1]=Math.max(b,(b+d)/2)}else{v=d;var E=p+i[1]-i[0];w[0]=Math.min(m,(E+m)/2),w[1]=Math.max(m,(E+m)/2)}var S=[Math.min(m,(v+m)/2),Math.max(m,(v+m)/2)];if(t>S[0]&&t<=S[1]||t>=w[0]&&t<=w[1]){({index:o}=r[u]);break}}else{var P=Math.min(d,p),k=Math.max(d,p);if(t>(P+m)/2&&t<=(k+m)/2){({index:o}=r[u]);break}}}else if(e){for(var C=0;C<c;C++)if(C===0&&t<=(e[C].coordinate+e[C+1].coordinate)/2||C>0&&C<c-1&&t>(e[C].coordinate+e[C-1].coordinate)/2&&t<=(e[C].coordinate+e[C+1].coordinate)/2||C===c-1&&t>(e[C].coordinate+e[C-1].coordinate)/2){({index:o}=e[C]);break}}return o},wK=(t,e,r)=>{if(e&&r){var{width:n,height:i}=r,{align:a,verticalAlign:o,layout:c}=e;if((c==="vertical"||c==="horizontal"&&o==="middle")&&a!=="center"&&we(t[a]))return zn(zn({},t),{},{[a]:t[a]+(n||0)});if((c==="horizontal"||c==="vertical"&&a==="center")&&o!=="middle"&&we(t[o]))return zn(zn({},t),{},{[o]:t[o]+(i||0)})}return t},co=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",AO=(t,e,r,n)=>{if(n)return t.map(c=>c.coordinate);var i,a,o=t.map(c=>(c.coordinate===e&&(i=!0),c.coordinate===r&&(a=!0),c.coordinate));return i||o.push(e),a||o.push(r),o},TO=(t,e,r)=>{if(!t)return null;var{duplicateDomain:n,type:i,range:a,scale:o,realScaleType:c,isCategorical:u,categoricalDomain:d,tickCount:m,ticks:p,niceTicks:v,axisType:w}=t;if(!o)return null;var b=c==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,E=i==="category"&&o.bandwidth?o.bandwidth()/b:0;if(E=w==="angleAxis"&&a&&a.length>=2?mr(a[0]-a[1])*2*E:E,p||v){var S=(p||v||[]).map((P,k)=>{var C=n?n.indexOf(P):P;return{coordinate:o(C)+E,value:P,offset:E,index:k}});return S.filter(P=>!Tn(P.coordinate))}return u&&d?d.map((P,k)=>({coordinate:o(P)+E,value:P,index:k,offset:E})):o.ticks&&m!=null?o.ticks(m).map((P,k)=>({coordinate:o(P)+E,value:P,offset:E,index:k})):o.domain().map((P,k)=>({coordinate:o(P)+E,value:n?n[P]:P,index:k,offset:E}))},DI=1e-4,bK=t=>{var e=t.domain();if(!(!e||e.length<=2)){var r=e.length,n=t.range(),i=Math.min(n[0],n[1])-DI,a=Math.max(n[0],n[1])+DI,o=t(e[0]),c=t(e[r-1]);(o<i||o>a||c<i||c>a)&&t.domain([e[0],e[r-1]])}},_K=(t,e)=>{if(!e||e.length!==2||!we(e[0])||!we(e[1]))return t;var r=Math.min(e[0],e[1]),n=Math.max(e[0],e[1]),i=[t[0],t[1]];return(!we(t[0])||t[0]<r)&&(i[0]=r),(!we(t[1])||t[1]>n)&&(i[1]=n),i[0]>n&&(i[0]=n),i[1]<r&&(i[1]=r),i},EK=t=>{var e=t.length;if(!(e<=0))for(var r=0,n=t[0].length;r<n;++r)for(var i=0,a=0,o=0;o<e;++o){var c=Tn(t[o][r][1])?t[o][r][0]:t[o][r][1];c>=0?(t[o][r][0]=i,t[o][r][1]=i+c,i=t[o][r][1]):(t[o][r][0]=a,t[o][r][1]=a+c,a=t[o][r][1])}},SK=t=>{var e=t.length;if(!(e<=0))for(var r=0,n=t[0].length;r<n;++r)for(var i=0,a=0;a<e;++a){var o=Tn(t[a][r][1])?t[a][r][0]:t[a][r][1];o>=0?(t[a][r][0]=i,t[a][r][1]=i+o,i=t[a][r][1]):(t[a][r][0]=0,t[a][r][1]=0)}},AK={sign:EK,expand:i7,none:Kc,silhouette:a7,wiggle:s7,positive:SK},TK=(t,e,r)=>{var n=AK[r],i=n7().keys(e).value((a,o)=>+_t(a,o,0)).order(bw).offset(n);return i(t)};function PO(t){return t==null?void 0:String(t)}function MI(t){var{axis:e,ticks:r,bandSize:n,entry:i,index:a,dataKey:o}=t;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!dt(i[e.dataKey])){var c=_R(r,"value",i[e.dataKey]);if(c)return c.coordinate+n/2}return r[a]?r[a].coordinate+n/2:null}var u=_t(i,dt(o)?e.dataKey:o);return dt(u)?null:e.scale(u)}var LI=t=>{var{axis:e,ticks:r,offset:n,bandSize:i,entry:a,index:o}=t;if(e.type==="category")return r[o]?r[o].coordinate+n:null;var c=_t(a,e.dataKey,e.scale.domain()[o]);return dt(c)?null:e.scale(c)-i/2+n},PK=t=>{var{numericAxis:e}=t,r=e.scale.domain();if(e.type==="number"){var n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return n<=0&&i>=0?0:i<0?i:n}return r[0]},IK=t=>{var e=t.flat(2).filter(we);return[Math.min(...e),Math.max(...e)]},NK=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],CK=(t,e,r)=>{if(t!=null)return NK(Object.keys(t).reduce((n,i)=>{var a=t[i],{stackedData:o}=a,c=o.reduce((u,d)=>{var m=IK(d.slice(e,r+1));return[Math.min(u[0],m[0]),Math.max(u[1],m[1])]},[1/0,-1/0]);return[Math.min(c[0],n[0]),Math.max(c[1],n[1])]},[1/0,-1/0]))},VI=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,FI=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,cf=(t,e,r)=>{if(t&&t.scale&&t.scale.bandwidth){var n=t.scale.bandwidth();if(!r||n>0)return n}if(t&&e&&e.length>=2){for(var i=Rg(e,m=>m.coordinate),a=1/0,o=1,c=i.length;o<c;o++){var u=i[o],d=i[o-1];a=Math.min((u.coordinate||0)-(d.coordinate||0),a)}return a===1/0?0:a}return r?void 0:0};function $I(t){var{tooltipEntrySettings:e,dataKey:r,payload:n,value:i,name:a}=t;return zn(zn({},e),{},{dataKey:r,payload:n,value:i,name:a})}function fu(t,e){if(t)return String(t);if(typeof e=="string")return e}function kK(t,e,r,n,i){if(r==="horizontal"||r==="vertical"){var a=t>=i.left&&t<=i.left+i.width&&e>=i.top&&e<=i.top+i.height;return a?{x:t,y:e}:null}return n?pK({x:t,y:e},n):null}var jK=(t,e,r,n)=>{var i=e.find(d=>d&&d.index===r);if(i){if(t==="horizontal")return{x:i.coordinate,y:n.y};if(t==="vertical")return{x:n.x,y:i.coordinate};if(t==="centric"){var a=i.coordinate,{radius:o}=n;return zn(zn(zn({},n),Yt(n.cx,n.cy,o,a)),{},{angle:a,radius:o})}var c=i.coordinate,{angle:u}=n;return zn(zn(zn({},n),Yt(n.cx,n.cy,c,u)),{},{angle:u,radius:c})}return{x:0,y:0}},RK=(t,e)=>e==="horizontal"?t.x:e==="vertical"?t.y:e==="centric"?t.angle:t.radius,Xa=t=>t.layout.width,Ja=t=>t.layout.height,OK=t=>t.layout.scale,IO=t=>t.layout.margin,j_=J(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),R_=J(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),NO="data-recharts-item-index",CO="data-recharts-item-data-key",$g=60;function UI(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ps(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?UI(Object(r),!0).forEach(function(n){DK(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):UI(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function DK(t,e,r){return(e=MK(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function MK(t){var e=LK(t,"string");return typeof e=="symbol"?e:e+""}function LK(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var VK=t=>t.brush.height,sr=J([Xa,Ja,IO,VK,j_,R_,ZR,oq],(t,e,r,n,i,a,o,c)=>{var u=a.reduce((b,E)=>{var{orientation:S}=E;if(!E.mirror&&!E.hide){var P=typeof E.width=="number"?E.width:$g;return Ps(Ps({},b),{},{[S]:b[S]+P})}return b},{left:r.left||0,right:r.right||0}),d=i.reduce((b,E)=>{var{orientation:S}=E;return!E.mirror&&!E.hide?Ps(Ps({},b),{},{[S]:Xs(b,"".concat(S))+E.height}):b},{top:r.top||0,bottom:r.bottom||0}),m=Ps(Ps({},d),u),p=m.bottom;m.bottom+=n,m=wK(m,o,c);var v=t-m.left-m.right,w=e-m.top-m.bottom;return Ps(Ps({brushBottom:p},m),{},{width:Math.max(v,0),height:Math.max(w,0)})}),FK=J(sr,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),kO=J(Xa,Ja,(t,e)=>({x:0,y:0,width:t,height:e})),$K=_.createContext(null),Gr=()=>_.useContext($K)!=null,Ug=t=>t.brush,Bg=J([Ug,sr,IO],(t,e,r)=>({height:t.height,x:we(t.x)?t.x:e.left,y:we(t.y)?t.y:e.top+e.height+e.brushBottom-(r?.bottom||0),width:we(t.width)?t.width:e.width})),O_=()=>{var t,e=Gr(),r=Se(FK),n=Se(Bg),i=(t=Se(Ug))===null||t===void 0?void 0:t.padding;return!e||!n||!i?r:{width:n.width-i.left-i.right,height:n.height-i.top-i.bottom,x:i.left,y:i.top}},UK={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},jO=()=>{var t;return(t=Se(sr))!==null&&t!==void 0?t:UK},RO=()=>Se(Xa),OO=()=>Se(Ja),nt=t=>t.layout.layoutType,zg=()=>Se(nt),BK={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},DO=Xn({name:"legend",initialState:BK,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload(t,e){t.payload.push(e.payload)},removeLegendPayload(t,e){var r=Va(t).payload.indexOf(e.payload);r>-1&&t.payload.splice(r,1)}}}),{setLegendSize:yae,setLegendSettings:vae,addLegendPayload:MO,removeLegendPayload:LO}=DO.actions,zK=DO.reducer;function kw(){return kw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},kw.apply(null,arguments)}function BI(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function sx(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?BI(Object(r),!0).forEach(function(n){qK(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):BI(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function qK(t,e,r){return(e=KK(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function KK(t){var e=WK(t,"string");return typeof e=="symbol"?e:e+""}function WK(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function HK(t){return Array.isArray(t)&&ia(t[0])&&ia(t[1])?t.join(" ~ "):t}var GK=t=>{var{separator:e=" : ",contentStyle:r={},itemStyle:n={},labelStyle:i={},payload:a,formatter:o,itemSorter:c,wrapperClassName:u,labelClassName:d,label:m,labelFormatter:p,accessibilityLayer:v=!1}=t,w=()=>{if(a&&a.length){var V={padding:0,margin:0},B=(c?Rg(a,c):a).map((I,j)=>{if(I.type==="none")return null;var D=I.formatter||o||HK,{value:$,name:M}=I,U=$,F=M;if(D){var me=D($,M,I,j,a);if(Array.isArray(me))[U,F]=me;else if(me!=null)U=me;else return null}var Pe=sx({display:"block",paddingTop:4,paddingBottom:4,color:I.color||"#000"},n);return _.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(j),style:Pe},ia(F)?_.createElement("span",{className:"recharts-tooltip-item-name"},F):null,ia(F)?_.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,_.createElement("span",{className:"recharts-tooltip-item-value"},U),_.createElement("span",{className:"recharts-tooltip-item-unit"},I.unit||""))});return _.createElement("ul",{className:"recharts-tooltip-item-list",style:V},B)}return null},b=sx({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),E=sx({margin:0},i),S=!dt(m),P=S?m:"",k=et("recharts-default-tooltip",u),C=et("recharts-tooltip-label",d);S&&p&&a!==void 0&&a!==null&&(P=p(m,a));var R=v?{role:"status","aria-live":"assertive"}:{};return _.createElement("div",kw({className:k,style:b},R),_.createElement("p",{className:C,style:E},_.isValidElement(P)?P:"".concat(P)),w())},yd="recharts-tooltip-wrapper",YK={visibility:"hidden"};function QK(t){var{coordinate:e,translateX:r,translateY:n}=t;return et(yd,{["".concat(yd,"-right")]:we(r)&&e&&we(e.x)&&r>=e.x,["".concat(yd,"-left")]:we(r)&&e&&we(e.x)&&r<e.x,["".concat(yd,"-bottom")]:we(n)&&e&&we(e.y)&&n>=e.y,["".concat(yd,"-top")]:we(n)&&e&&we(e.y)&&n<e.y})}function zI(t){var{allowEscapeViewBox:e,coordinate:r,key:n,offsetTopLeft:i,position:a,reverseDirection:o,tooltipDimension:c,viewBox:u,viewBoxDimension:d}=t;if(a&&we(a[n]))return a[n];var m=r[n]-c-(i>0?i:0),p=r[n]+i;if(e[n])return o[n]?m:p;var v=u[n];if(v==null)return 0;if(o[n]){var w=m,b=v;return w<b?Math.max(p,v):Math.max(m,v)}if(d==null)return 0;var E=p+c,S=v+d;return E>S?Math.max(m,v):Math.max(p,v)}function XK(t){var{translateX:e,translateY:r,useTranslate3d:n}=t;return{transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function JK(t){var{allowEscapeViewBox:e,coordinate:r,offsetTopLeft:n,position:i,reverseDirection:a,tooltipBox:o,useTranslate3d:c,viewBox:u}=t,d,m,p;return o.height>0&&o.width>0&&r?(m=zI({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:i,reverseDirection:a,tooltipDimension:o.width,viewBox:u,viewBoxDimension:u.width}),p=zI({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:i,reverseDirection:a,tooltipDimension:o.height,viewBox:u,viewBoxDimension:u.height}),d=XK({translateX:m,translateY:p,useTranslate3d:c})):d=YK,{cssProperties:d,cssClasses:QK({translateX:m,translateY:p,coordinate:r})}}function qI(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Tm(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?qI(Object(r),!0).forEach(function(n){jw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qI(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function jw(t,e,r){return(e=ZK(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ZK(t){var e=eW(t,"string");return typeof e=="symbol"?e:e+""}function eW(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class tW extends _.PureComponent{constructor(){super(...arguments),jw(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),jw(this,"handleKeyDown",e=>{if(e.key==="Escape"){var r,n,i,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(i=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,r;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:r,animationDuration:n,animationEasing:i,children:a,coordinate:o,hasPayload:c,isAnimationActive:u,offset:d,position:m,reverseDirection:p,useTranslate3d:v,viewBox:w,wrapperStyle:b,lastBoundingBox:E,innerRef:S,hasPortalFromProps:P}=this.props,{cssClasses:k,cssProperties:C}=JK({allowEscapeViewBox:r,coordinate:o,offsetTopLeft:d,position:m,reverseDirection:p,tooltipBox:{height:E.height,width:E.width},useTranslate3d:v,viewBox:w}),R=P?{}:Tm(Tm({transition:u&&e?"transform ".concat(n,"ms ").concat(i):void 0},C),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&c?"visible":"hidden",position:"absolute",top:0,left:0}),V=Tm(Tm({},R),{},{visibility:!this.state.dismissed&&e&&c?"visible":"hidden"},b);return _.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:k,style:V,ref:S},a)}}var rW=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Al={isSsr:rW()},VO=()=>Se(t=>t.rootProps.accessibilityLayer);function Nn(t){return Number.isFinite(t)}function Hc(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function Rw(){return Rw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Rw.apply(null,arguments)}function KI(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function WI(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?KI(Object(r),!0).forEach(function(n){nW(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):KI(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function nW(t,e,r){return(e=iW(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function iW(t){var e=aW(t,"string");return typeof e=="symbol"?e:e+""}function aW(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var HI={curveBasisClosed:Wz,curveBasisOpen:Hz,curveBasis:Kz,curveBumpX:kz,curveBumpY:jz,curveLinearClosed:Gz,curveLinear:kg,curveMonotoneX:Yz,curveMonotoneY:Qz,curveNatural:Xz,curveStep:Jz,curveStepAfter:e7,curveStepBefore:Zz},Pm=t=>Nn(t.x)&&Nn(t.y),vd=t=>t.x,xd=t=>t.y,sW=(t,e)=>{if(typeof t=="function")return t;var r="curve".concat(Ff(t));return(r==="curveMonotone"||r==="curveBump")&&e?HI["".concat(r).concat(e==="vertical"?"Y":"X")]:HI[r]||kg},oW=t=>{var{type:e="linear",points:r=[],baseLine:n,layout:i,connectNulls:a=!1}=t,o=sW(e,i),c=a?r.filter(Pm):r,u;if(Array.isArray(n)){var d=a?n.filter(p=>Pm(p)):n,m=c.map((p,v)=>WI(WI({},p),{},{base:d[v]}));return i==="vertical"?u=bm().y(xd).x1(vd).x0(p=>p.base.x):u=bm().x(vd).y1(xd).y0(p=>p.base.y),u.defined(Pm).curve(o),u(m)}return i==="vertical"&&we(n)?u=bm().y(xd).x1(vd).x0(n):we(n)?u=bm().x(vd).y1(xd).y0(n):u=kR().x(vd).y(xd),u.defined(Pm).curve(o),u(c)},D_=t=>{var{className:e,points:r,path:n,pathRef:i}=t;if((!r||!r.length)&&!n)return null;var a=r&&r.length?oW(t):n;return _.createElement("path",Rw({},He(t,!1),y_(t),{className:et("recharts-curve",e),d:a===null?void 0:a,ref:i}))},lW=["x","y","top","left","width","height","className"];function Ow(){return Ow=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ow.apply(null,arguments)}function GI(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function cW(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?GI(Object(r),!0).forEach(function(n){uW(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):GI(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function uW(t,e,r){return(e=dW(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dW(t){var e=fW(t,"string");return typeof e=="symbol"?e:e+""}function fW(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hW(t,e){if(t==null)return{};var r,n,i=mW(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function mW(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var pW=(t,e,r,n,i,a)=>"M".concat(t,",").concat(i,"v").concat(n,"M").concat(a,",").concat(e,"h").concat(r),gW=t=>{var{x:e=0,y:r=0,top:n=0,left:i=0,width:a=0,height:o=0,className:c}=t,u=hW(t,lW),d=cW({x:e,y:r,top:n,left:i,width:a,height:o},u);return!we(e)||!we(r)||!we(a)||!we(o)||!we(n)||!we(i)?null:_.createElement("path",Ow({},He(d,!0),{className:et("recharts-cross",c),d:pW(e,r,a,o,n,i)}))};function yW(t,e,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-i,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function YI(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function vW(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?YI(Object(r),!0).forEach(function(n){xW(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):YI(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function xW(t,e,r){return(e=wW(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wW(t){var e=bW(t,"string");return typeof e=="symbol"?e:e+""}function bW(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Jn(t,e){var r=vW({},t),n=e,i=Object.keys(e),a=i.reduce((o,c)=>(o[c]===void 0&&n[c]!==void 0&&(o[c]=n[c]),o),r);return a}var ox={},lx={},cx={},QI;function _W(){return QI||(QI=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){if(!r||typeof r!="object")return!1;const n=Object.getPrototypeOf(r);return n===null||n===Object.prototype||Object.getPrototypeOf(n)===null?Object.prototype.toString.call(r)==="[object Object]":!1}t.isPlainObject=e}(cx)),cx}var XI;function EW(){return XI||(XI=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=_W(),r=HR(),n=S_(),i=A_(),a=__();function o(d,m,p){return c(d,m,void 0,void 0,void 0,void 0,p)}function c(d,m,p,v,w,b,E){const S=E(d,m,p,v,w,b);if(S!==void 0)return S;if(typeof d==typeof m)switch(typeof d){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return d===m;case"number":return d===m||Object.is(d,m);case"function":return d===m;case"object":return u(d,m,b,E)}return u(d,m,b,E)}function u(d,m,p,v){if(Object.is(d,m))return!0;let w=n.getTag(d),b=n.getTag(m);if(w===i.argumentsTag&&(w=i.objectTag),b===i.argumentsTag&&(b=i.objectTag),w!==b)return!1;switch(w){case i.stringTag:return d.toString()===m.toString();case i.numberTag:{const P=d.valueOf(),k=m.valueOf();return a.eq(P,k)}case i.booleanTag:case i.dateTag:case i.symbolTag:return Object.is(d.valueOf(),m.valueOf());case i.regexpTag:return d.source===m.source&&d.flags===m.flags;case i.functionTag:return d===m}p=p??new Map;const E=p.get(d),S=p.get(m);if(E!=null&&S!=null)return E===m;p.set(d,m),p.set(m,d);try{switch(w){case i.mapTag:{if(d.size!==m.size)return!1;for(const[P,k]of d.entries())if(!m.has(P)||!c(k,m.get(P),P,d,m,p,v))return!1;return!0}case i.setTag:{if(d.size!==m.size)return!1;const P=Array.from(d.values()),k=Array.from(m.values());for(let C=0;C<P.length;C++){const R=P[C],V=k.findIndex(B=>c(R,B,void 0,d,m,p,v));if(V===-1)return!1;k.splice(V,1)}return!0}case i.arrayTag:case i.uint8ArrayTag:case i.uint8ClampedArrayTag:case i.uint16ArrayTag:case i.uint32ArrayTag:case i.bigUint64ArrayTag:case i.int8ArrayTag:case i.int16ArrayTag:case i.int32ArrayTag:case i.bigInt64ArrayTag:case i.float32ArrayTag:case i.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(d)!==Buffer.isBuffer(m)||d.length!==m.length)return!1;for(let P=0;P<d.length;P++)if(!c(d[P],m[P],P,d,m,p,v))return!1;return!0}case i.arrayBufferTag:return d.byteLength!==m.byteLength?!1:u(new Uint8Array(d),new Uint8Array(m),p,v);case i.dataViewTag:return d.byteLength!==m.byteLength||d.byteOffset!==m.byteOffset?!1:u(new Uint8Array(d),new Uint8Array(m),p,v);case i.errorTag:return d.name===m.name&&d.message===m.message;case i.objectTag:{if(!(u(d.constructor,m.constructor,p,v)||e.isPlainObject(d)&&e.isPlainObject(m)))return!1;const k=[...Object.keys(d),...r.getSymbols(d)],C=[...Object.keys(m),...r.getSymbols(m)];if(k.length!==C.length)return!1;for(let R=0;R<k.length;R++){const V=k[R],B=d[V];if(!Object.hasOwn(m,V))return!1;const I=m[V];if(!c(B,I,V,d,m,p,v))return!1}return!0}default:return!1}}finally{p.delete(d),p.delete(m)}}t.isEqualWith=o}(lx)),lx}var ux={},JI;function SW(){return JI||(JI=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(){}t.noop=e}(ux)),ux}var ZI;function AW(){return ZI||(ZI=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=EW(),r=SW();function n(i,a){return e.isEqualWith(i,a,r.noop)}t.isEqual=n}(ox)),ox}var dx,eN;function TW(){return eN||(eN=1,dx=AW().isEqual),dx}var PW=TW();const IW=Pi(PW);function NW(t){var e={},r=()=>null,n=!1,i=null,a=o=>{if(!n){if(Array.isArray(o)){if(!o.length)return;var c=o,[u,...d]=c;if(typeof u=="number"){i=t.setTimeout(a.bind(null,d),u);return}a(u),i=t.setTimeout(a.bind(null,d));return}typeof o=="object"&&(e=o,r(e)),typeof o=="function"&&o()}};return{stop:()=>{n=!0},start:o=>{n=!1,i&&(i(),i=null),a(o)},subscribe:o=>(r=o,()=>{r=()=>null}),getTimeoutController:()=>t}}var Np=1e-4,FO=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],$O=(t,e)=>t.map((r,n)=>r*e**n).reduce((r,n)=>r+n),tN=(t,e)=>r=>{var n=FO(t,e);return $O(n,r)},CW=(t,e)=>r=>{var n=FO(t,e),i=[...n.map((a,o)=>a*o).slice(1),0];return $O(i,r)},rN=function(){for(var e,r,n,i,a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];if(o.length===1)switch(o[0]){case"linear":[e,n,r,i]=[0,0,1,1];break;case"ease":[e,n,r,i]=[.25,.1,.25,1];break;case"ease-in":[e,n,r,i]=[.42,0,1,1];break;case"ease-out":[e,n,r,i]=[.42,0,.58,1];break;case"ease-in-out":[e,n,r,i]=[0,0,.58,1];break;default:{var u=o[0].split("(");u[0]==="cubic-bezier"&&u[1].split(")")[0].split(",").length===4&&([e,n,r,i]=u[1].split(")")[0].split(",").map(b=>parseFloat(b)))}}else o.length===4&&([e,n,r,i]=o);var d=tN(e,r),m=tN(n,i),p=CW(e,r),v=b=>b>1?1:b<0?0:b,w=b=>{for(var E=b>1?1:b,S=E,P=0;P<8;++P){var k=d(S)-E,C=p(S);if(Math.abs(k-E)<Np||C<Np)return m(S);S=v(S-k/C)}return m(S)};return w.isStepper=!1,w},kW=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:i=17}=e,a=(o,c,u)=>{var d=-(o-c)*r,m=u*n,p=u+(d-m)*i/1e3,v=u*i/1e3+o;return Math.abs(v-c)<Np&&Math.abs(p)<Np?[c,0]:[v,p]};return a.isStepper=!0,a.dt=i,a},jW=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return rN(t);case"spring":return kW();default:if(t.split("(")[0]==="cubic-bezier")return rN(t)}return typeof t=="function"?t:null};function nN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function iN(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?nN(Object(r),!0).forEach(function(n){RW(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function RW(t,e,r){return(e=OW(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function OW(t){var e=DW(t,"string");return typeof e=="symbol"?e:e+""}function DW(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var MW=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),LW=(t,e,r)=>t.map(n=>"".concat(MW(n)," ").concat(e,"ms ").concat(r)).join(","),VW=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((r,n)=>r.filter(i=>n.includes(i))),uf=(t,e)=>Object.keys(e).reduce((r,n)=>iN(iN({},r),{},{[n]:t(n,e[n])}),{});function aN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Sr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?aN(Object(r),!0).forEach(function(n){FW(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):aN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function FW(t,e,r){return(e=$W(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $W(t){var e=UW(t,"string");return typeof e=="symbol"?e:e+""}function UW(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Cp=(t,e,r)=>t+(e-t)*r,Dw=t=>{var{from:e,to:r}=t;return e!==r},UO=(t,e,r)=>{var n=uf((i,a)=>{if(Dw(a)){var[o,c]=t(a.from,a.to,a.velocity);return Sr(Sr({},a),{},{from:o,velocity:c})}return a},e);return r<1?uf((i,a)=>Dw(a)?Sr(Sr({},a),{},{velocity:Cp(a.velocity,n[i].velocity,r),from:Cp(a.from,n[i].from,r)}):a,e):UO(t,n,r-1)};function BW(t,e,r,n,i,a){var o,c=n.reduce((v,w)=>Sr(Sr({},v),{},{[w]:{from:t[w],velocity:0,to:e[w]}}),{}),u=()=>uf((v,w)=>w.from,c),d=()=>!Object.values(c).filter(Dw).length,m=null,p=v=>{o||(o=v);var w=v-o,b=w/r.dt;c=UO(r,c,b),i(Sr(Sr(Sr({},t),e),u())),o=v,d()||(m=a.setTimeout(p))};return()=>(m=a.setTimeout(p),()=>{m()})}function zW(t,e,r,n,i,a,o){var c=null,u=i.reduce((p,v)=>Sr(Sr({},p),{},{[v]:[t[v],e[v]]}),{}),d,m=p=>{d||(d=p);var v=(p-d)/n,w=uf((E,S)=>Cp(...S,r(v)),u);if(a(Sr(Sr(Sr({},t),e),w)),v<1)c=o.setTimeout(m);else{var b=uf((E,S)=>Cp(...S,r(1)),u);a(Sr(Sr(Sr({},t),e),b))}};return()=>(c=o.setTimeout(m),()=>{c()})}const qW=(t,e,r,n,i,a)=>{var o=VW(t,e);return r.isStepper===!0?BW(t,e,r,o,i,a):zW(t,e,r,n,o,i,a)};class KW{setTimeout(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),i=null,a=o=>{o-n>=r?e(o):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(a))};return i=requestAnimationFrame(a),()=>{cancelAnimationFrame(i)}}}var WW=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function Mw(){return Mw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Mw.apply(null,arguments)}function HW(t,e){if(t==null)return{};var r,n,i=GW(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function GW(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function sN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Is(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?sN(Object(r),!0).forEach(function(n){Xo(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Xo(t,e,r){return(e=YW(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function YW(t){var e=QW(t,"string");return typeof e=="symbol"?e:e+""}function QW(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function XW(){return NW(new KW)}class M_ extends _.PureComponent{constructor(e,r){super(e,r),Xo(this,"mounted",!1),Xo(this,"manager",null),Xo(this,"stopJSAnimation",null),Xo(this,"unSubscribe",null);var{isActive:n,attributeName:i,from:a,to:o,children:c,duration:u,animationManager:d}=this.props;if(this.manager=d,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!n||u<=0){this.state={style:{}},typeof c=="function"&&(this.state={style:o});return}if(a){if(typeof c=="function"){this.state={style:a};return}this.state={style:i?{[i]:a}:a}}else this.state={style:{}}}componentDidMount(){var{isActive:e,canBegin:r}=this.props;this.mounted=!0,!(!e||!r)&&this.runAnimation(this.props)}componentDidUpdate(e){var{isActive:r,canBegin:n,attributeName:i,shouldReAnimate:a,to:o,from:c}=this.props,{style:u}=this.state;if(n){if(!r){var d={style:i?{[i]:o}:o};this.state&&u&&(i&&u[i]!==o||!i&&u!==o)&&this.setState(d);return}if(!(IW(e.to,o)&&e.canBegin&&e.isActive)){var m=!e.canBegin||!e.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var p=m||a?c:e.to;if(this.state&&u){var v={style:i?{[i]:p}:p};(i&&u[i]!==p||!i&&u!==p)&&this.setState(v)}this.runAnimation(Is(Is({},this.props),{},{from:p,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:e}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),e&&e()}handleStyleChange(e){this.changeStyle(e)}changeStyle(e){this.mounted&&this.setState({style:e})}runJSAnimation(e){var{from:r,to:n,duration:i,easing:a,begin:o,onAnimationEnd:c,onAnimationStart:u}=e,d=qW(r,n,jW(a),i,this.changeStyle,this.manager.getTimeoutController()),m=()=>{this.stopJSAnimation=d()};this.manager.start([u,o,m,i,c])}runAnimation(e){var{begin:r,duration:n,attributeName:i,to:a,easing:o,onAnimationStart:c,onAnimationEnd:u,children:d}=e;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof o=="function"||typeof d=="function"||o==="spring"){this.runJSAnimation(e);return}var m=i?{[i]:a}:a,p=LW(Object.keys(m),n,o);this.manager.start([c,r,Is(Is({},m),{},{transition:p}),n,u])}render(){var e=this.props,{children:r,begin:n,duration:i,attributeName:a,easing:o,isActive:c,from:u,to:d,canBegin:m,onAnimationEnd:p,shouldReAnimate:v,onAnimationReStart:w,animationManager:b}=e,E=HW(e,WW),S=_.Children.count(r),P=this.state.style;if(typeof r=="function")return r(P);if(!c||S===0||i<=0)return r;var k=C=>{var{style:R={},className:V}=C.props,B=_.cloneElement(C,Is(Is({},E),{},{style:Is(Is({},R),P),className:V}));return B};return S===1?k(_.Children.only(r)):_.createElement("div",null,_.Children.map(r,C=>k(C)))}}Xo(M_,"displayName","Animate");Xo(M_,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});var JW=_.createContext(null);function Js(t){var e,r,n=_.useContext(JW);return _.createElement(M_,Mw({},t,{animationManager:(e=(r=t.animationManager)!==null&&r!==void 0?r:n)!==null&&e!==void 0?e:XW()}))}function kp(){return kp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},kp.apply(null,arguments)}var oN=(t,e,r,n,i)=>{var a=Math.min(Math.abs(r)/2,Math.abs(n)/2),o=n>=0?1:-1,c=r>=0?1:-1,u=n>=0&&r>=0||n<0&&r<0?1:0,d;if(a>0&&i instanceof Array){for(var m=[0,0,0,0],p=0,v=4;p<v;p++)m[p]=i[p]>a?a:i[p];d="M".concat(t,",").concat(e+o*m[0]),m[0]>0&&(d+="A ".concat(m[0],",").concat(m[0],",0,0,").concat(u,",").concat(t+c*m[0],",").concat(e)),d+="L ".concat(t+r-c*m[1],",").concat(e),m[1]>0&&(d+="A ".concat(m[1],",").concat(m[1],",0,0,").concat(u,`,
        `).concat(t+r,",").concat(e+o*m[1])),d+="L ".concat(t+r,",").concat(e+n-o*m[2]),m[2]>0&&(d+="A ".concat(m[2],",").concat(m[2],",0,0,").concat(u,`,
        `).concat(t+r-c*m[2],",").concat(e+n)),d+="L ".concat(t+c*m[3],",").concat(e+n),m[3]>0&&(d+="A ".concat(m[3],",").concat(m[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(e+n-o*m[3])),d+="Z"}else if(a>0&&i===+i&&i>0){var w=Math.min(a,i);d="M ".concat(t,",").concat(e+o*w,`
            A `).concat(w,",").concat(w,",0,0,").concat(u,",").concat(t+c*w,",").concat(e,`
            L `).concat(t+r-c*w,",").concat(e,`
            A `).concat(w,",").concat(w,",0,0,").concat(u,",").concat(t+r,",").concat(e+o*w,`
            L `).concat(t+r,",").concat(e+n-o*w,`
            A `).concat(w,",").concat(w,",0,0,").concat(u,",").concat(t+r-c*w,",").concat(e+n,`
            L `).concat(t+c*w,",").concat(e+n,`
            A `).concat(w,",").concat(w,",0,0,").concat(u,",").concat(t,",").concat(e+n-o*w," Z")}else d="M ".concat(t,",").concat(e," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return d},ZW={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},BO=t=>{var e=Jn(t,ZW),r=_.useRef(null),[n,i]=_.useState(-1);_.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var P=r.current.getTotalLength();P&&i(P)}catch{}},[]);var{x:a,y:o,width:c,height:u,radius:d,className:m}=e,{animationEasing:p,animationDuration:v,animationBegin:w,isAnimationActive:b,isUpdateAnimationActive:E}=e;if(a!==+a||o!==+o||c!==+c||u!==+u||c===0||u===0)return null;var S=et("recharts-rectangle",m);return E?_.createElement(Js,{canBegin:n>0,from:{width:c,height:u,x:a,y:o},to:{width:c,height:u,x:a,y:o},duration:v,animationEasing:p,isActive:E},P=>{var{width:k,height:C,x:R,y:V}=P;return _.createElement(Js,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:v,isActive:b,easing:p},_.createElement("path",kp({},He(e,!0),{className:S,d:oN(R,V,k,C,d),ref:r})))}):_.createElement("path",kp({},He(e,!0),{className:S,d:oN(a,o,c,u,d)}))};function zO(t){var{cx:e,cy:r,radius:n,startAngle:i,endAngle:a}=t,o=Yt(e,r,n,i),c=Yt(e,r,n,a);return{points:[o,c],cx:e,cy:r,radius:n,startAngle:i,endAngle:a}}function Lw(){return Lw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Lw.apply(null,arguments)}var eH=(t,e)=>{var r=mr(e-t),n=Math.min(Math.abs(e-t),359.999);return r*n},Im=t=>{var{cx:e,cy:r,radius:n,angle:i,sign:a,isExternal:o,cornerRadius:c,cornerIsExternal:u}=t,d=c*(o?1:-1)+n,m=Math.asin(c/d)/Ip,p=u?i:i+a*m,v=Yt(e,r,d,p),w=Yt(e,r,n,p),b=u?i-a*m:i,E=Yt(e,r,d*Math.cos(m*Ip),b);return{center:v,circleTangency:w,lineTangency:E,theta:m}},qO=t=>{var{cx:e,cy:r,innerRadius:n,outerRadius:i,startAngle:a,endAngle:o}=t,c=eH(a,o),u=a+c,d=Yt(e,r,i,a),m=Yt(e,r,i,u),p="M ".concat(d.x,",").concat(d.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(a>u),`,
    `).concat(m.x,",").concat(m.y,`
  `);if(n>0){var v=Yt(e,r,n,a),w=Yt(e,r,n,u);p+="L ".concat(w.x,",").concat(w.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(a<=u),`,
            `).concat(v.x,",").concat(v.y," Z")}else p+="L ".concat(e,",").concat(r," Z");return p},tH=t=>{var{cx:e,cy:r,innerRadius:n,outerRadius:i,cornerRadius:a,forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:d}=t,m=mr(d-u),{circleTangency:p,lineTangency:v,theta:w}=Im({cx:e,cy:r,radius:i,angle:u,sign:m,cornerRadius:a,cornerIsExternal:c}),{circleTangency:b,lineTangency:E,theta:S}=Im({cx:e,cy:r,radius:i,angle:d,sign:-m,cornerRadius:a,cornerIsExternal:c}),P=c?Math.abs(u-d):Math.abs(u-d)-w-S;if(P<0)return o?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):qO({cx:e,cy:r,innerRadius:n,outerRadius:i,startAngle:u,endAngle:d});var k="M ".concat(v.x,",").concat(v.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(m<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(P>180),",").concat(+(m<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(m<0),",").concat(E.x,",").concat(E.y,`
  `);if(n>0){var{circleTangency:C,lineTangency:R,theta:V}=Im({cx:e,cy:r,radius:n,angle:u,sign:m,isExternal:!0,cornerRadius:a,cornerIsExternal:c}),{circleTangency:B,lineTangency:I,theta:j}=Im({cx:e,cy:r,radius:n,angle:d,sign:-m,isExternal:!0,cornerRadius:a,cornerIsExternal:c}),D=c?Math.abs(u-d):Math.abs(u-d)-V-j;if(D<0&&a===0)return"".concat(k,"L").concat(e,",").concat(r,"Z");k+="L".concat(I.x,",").concat(I.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(m<0),",").concat(B.x,",").concat(B.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(D>180),",").concat(+(m>0),",").concat(C.x,",").concat(C.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(m<0),",").concat(R.x,",").concat(R.y,"Z")}else k+="L".concat(e,",").concat(r,"Z");return k},rH={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},KO=t=>{var e=Jn(t,rH),{cx:r,cy:n,innerRadius:i,outerRadius:a,cornerRadius:o,forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:m,className:p}=e;if(a<i||d===m)return null;var v=et("recharts-sector",p),w=a-i,b=Hr(o,w,0,!0),E;return b>0&&Math.abs(d-m)<360?E=tH({cx:r,cy:n,innerRadius:i,outerRadius:a,cornerRadius:Math.min(b,w/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:m}):E=qO({cx:r,cy:n,innerRadius:i,outerRadius:a,startAngle:d,endAngle:m}),_.createElement("path",Lw({},He(e,!0),{className:v,d:E}))};function nH(t,e,r){var n,i,a,o;if(t==="horizontal")n=e.x,a=n,i=r.top,o=r.top+r.height;else if(t==="vertical")i=e.y,o=i,n=r.left,a=r.left+r.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var{cx:c,cy:u,innerRadius:d,outerRadius:m,angle:p}=e,v=Yt(c,u,d,p),w=Yt(c,u,m,p);n=v.x,i=v.y,a=w.x,o=w.y}else return zO(e);return[{x:n,y:i},{x:a,y:o}]}var fx={},hx={},mx={},lN;function iH(){return lN||(lN=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=XR();function r(n){return e.isSymbol(n)?NaN:Number(n)}t.toNumber=r}(mx)),mx}var cN;function aH(){return cN||(cN=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=iH();function r(n){return n?(n=e.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}t.toFinite=r}(hx)),hx}var uN;function sH(){return uN||(uN=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=JR(),r=aH();function n(i,a,o){o&&typeof o!="number"&&e.isIterateeCall(i,a,o)&&(a=o=void 0),i=r.toFinite(i),a===void 0?(a=i,i=0):a=r.toFinite(a),o=o===void 0?i<a?1:-1:r.toFinite(o);const c=Math.max(Math.ceil((a-i)/(o||1)),0),u=new Array(c);for(let d=0;d<c;d++)u[d]=i,i+=o;return u}t.range=n}(fx)),fx}var px,dN;function oH(){return dN||(dN=1,px=sH().range),px}var lH=oH();const WO=Pi(lH);function Bs(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function cH(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function L_(t){let e,r,n;t.length!==2?(e=Bs,r=(c,u)=>Bs(t(c),u),n=(c,u)=>t(c)-u):(e=t===Bs||t===cH?t:uH,r=t,n=t);function i(c,u,d=0,m=c.length){if(d<m){if(e(u,u)!==0)return m;do{const p=d+m>>>1;r(c[p],u)<0?d=p+1:m=p}while(d<m)}return d}function a(c,u,d=0,m=c.length){if(d<m){if(e(u,u)!==0)return m;do{const p=d+m>>>1;r(c[p],u)<=0?d=p+1:m=p}while(d<m)}return d}function o(c,u,d=0,m=c.length){const p=i(c,u,d,m-1);return p>d&&n(c[p-1],u)>-n(c[p],u)?p-1:p}return{left:i,center:o,right:a}}function uH(){return 0}function HO(t){return t===null?NaN:+t}function*dH(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const fH=L_(Bs),Bf=fH.right;L_(HO).center;class fN extends Map{constructor(e,r=pH){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,i]of e)this.set(n,i)}get(e){return super.get(hN(this,e))}has(e){return super.has(hN(this,e))}set(e,r){return super.set(hH(this,e),r)}delete(e){return super.delete(mH(this,e))}}function hN({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function hH({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function mH({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function pH(t){return t!==null&&typeof t=="object"?t.valueOf():t}function gH(t=Bs){if(t===Bs)return GO;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function GO(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const yH=Math.sqrt(50),vH=Math.sqrt(10),xH=Math.sqrt(2);function jp(t,e,r){const n=(e-t)/Math.max(0,r),i=Math.floor(Math.log10(n)),a=n/Math.pow(10,i),o=a>=yH?10:a>=vH?5:a>=xH?2:1;let c,u,d;return i<0?(d=Math.pow(10,-i)/o,c=Math.round(t*d),u=Math.round(e*d),c/d<t&&++c,u/d>e&&--u,d=-d):(d=Math.pow(10,i)*o,c=Math.round(t/d),u=Math.round(e/d),c*d<t&&++c,u*d>e&&--u),u<c&&.5<=r&&r<2?jp(t,e,r*2):[c,u,d]}function Vw(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[i,a,o]=n?jp(e,t,r):jp(t,e,r);if(!(a>=i))return[];const c=a-i+1,u=new Array(c);if(n)if(o<0)for(let d=0;d<c;++d)u[d]=(a-d)/-o;else for(let d=0;d<c;++d)u[d]=(a-d)*o;else if(o<0)for(let d=0;d<c;++d)u[d]=(i+d)/-o;else for(let d=0;d<c;++d)u[d]=(i+d)*o;return u}function Fw(t,e,r){return e=+e,t=+t,r=+r,jp(t,e,r)[2]}function $w(t,e,r){e=+e,t=+t,r=+r;const n=e<t,i=n?Fw(e,t,r):Fw(t,e,r);return(n?-1:1)*(i<0?1/-i:i)}function mN(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function pN(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function YO(t,e,r=0,n=1/0,i){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(i=i===void 0?GO:gH(i);n>r;){if(n-r>600){const u=n-r+1,d=e-r+1,m=Math.log(u),p=.5*Math.exp(2*m/3),v=.5*Math.sqrt(m*p*(u-p)/u)*(d-u/2<0?-1:1),w=Math.max(r,Math.floor(e-d*p/u+v)),b=Math.min(n,Math.floor(e+(u-d)*p/u+v));YO(t,e,w,b,i)}const a=t[e];let o=r,c=n;for(wd(t,r,e),i(t[n],a)>0&&wd(t,r,n);o<c;){for(wd(t,o,c),++o,--c;i(t[o],a)<0;)++o;for(;i(t[c],a)>0;)--c}i(t[r],a)===0?wd(t,r,c):(++c,wd(t,c,n)),c<=e&&(r=c+1),e<=c&&(n=c-1)}return t}function wd(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function wH(t,e,r){if(t=Float64Array.from(dH(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return pN(t);if(e>=1)return mN(t);var n,i=(n-1)*e,a=Math.floor(i),o=mN(YO(t,a).subarray(0,a+1)),c=pN(t.subarray(a+1));return o+(c-o)*(i-a)}}function bH(t,e,r=HO){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,i=(n-1)*e,a=Math.floor(i),o=+r(t[a],a,t),c=+r(t[a+1],a+1,t);return o+(c-o)*(i-a)}}function _H(t,e,r){t=+t,e=+e,r=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((e-t)/r))|0,a=new Array(i);++n<i;)a[n]=t+n*r;return a}function Zn(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Za(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Uw=Symbol("implicit");function V_(){var t=new fN,e=[],r=[],n=Uw;function i(a){let o=t.get(a);if(o===void 0){if(n!==Uw)return n;t.set(a,o=e.push(a)-1)}return r[o%r.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new fN;for(const o of a)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(a){return arguments.length?(r=Array.from(a),i):r.slice()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return V_(e,r).unknown(n)},Zn.apply(i,arguments),i}function F_(){var t=V_().unknown(void 0),e=t.domain,r=t.range,n=0,i=1,a,o,c=!1,u=0,d=0,m=.5;delete t.unknown;function p(){var v=e().length,w=i<n,b=w?i:n,E=w?n:i;a=(E-b)/Math.max(1,v-u+d*2),c&&(a=Math.floor(a)),b+=(E-b-a*(v-u))*m,o=a*(1-u),c&&(b=Math.round(b),o=Math.round(o));var S=_H(v).map(function(P){return b+a*P});return r(w?S.reverse():S)}return t.domain=function(v){return arguments.length?(e(v),p()):e()},t.range=function(v){return arguments.length?([n,i]=v,n=+n,i=+i,p()):[n,i]},t.rangeRound=function(v){return[n,i]=v,n=+n,i=+i,c=!0,p()},t.bandwidth=function(){return o},t.step=function(){return a},t.round=function(v){return arguments.length?(c=!!v,p()):c},t.padding=function(v){return arguments.length?(u=Math.min(1,d=+v),p()):u},t.paddingInner=function(v){return arguments.length?(u=Math.min(1,v),p()):u},t.paddingOuter=function(v){return arguments.length?(d=+v,p()):d},t.align=function(v){return arguments.length?(m=Math.max(0,Math.min(1,v)),p()):m},t.copy=function(){return F_(e(),[n,i]).round(c).paddingInner(u).paddingOuter(d).align(m)},Zn.apply(p(),arguments)}function QO(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return QO(e())},t}function EH(){return QO(F_.apply(null,arguments).paddingInner(1))}function $_(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function XO(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function zf(){}var df=.7,Rp=1/df,Mc="\\s*([+-]?\\d+)\\s*",ff="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ji="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",SH=/^#([0-9a-f]{3,8})$/,AH=new RegExp(`^rgb\\(${Mc},${Mc},${Mc}\\)$`),TH=new RegExp(`^rgb\\(${Ji},${Ji},${Ji}\\)$`),PH=new RegExp(`^rgba\\(${Mc},${Mc},${Mc},${ff}\\)$`),IH=new RegExp(`^rgba\\(${Ji},${Ji},${Ji},${ff}\\)$`),NH=new RegExp(`^hsl\\(${ff},${Ji},${Ji}\\)$`),CH=new RegExp(`^hsla\\(${ff},${Ji},${Ji},${ff}\\)$`),gN={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};$_(zf,hf,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:yN,formatHex:yN,formatHex8:kH,formatHsl:jH,formatRgb:vN,toString:vN});function yN(){return this.rgb().formatHex()}function kH(){return this.rgb().formatHex8()}function jH(){return JO(this).formatHsl()}function vN(){return this.rgb().formatRgb()}function hf(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=SH.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?xN(e):r===3?new ln(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?Nm(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?Nm(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=AH.exec(t))?new ln(e[1],e[2],e[3],1):(e=TH.exec(t))?new ln(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=PH.exec(t))?Nm(e[1],e[2],e[3],e[4]):(e=IH.exec(t))?Nm(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=NH.exec(t))?_N(e[1],e[2]/100,e[3]/100,1):(e=CH.exec(t))?_N(e[1],e[2]/100,e[3]/100,e[4]):gN.hasOwnProperty(t)?xN(gN[t]):t==="transparent"?new ln(NaN,NaN,NaN,0):null}function xN(t){return new ln(t>>16&255,t>>8&255,t&255,1)}function Nm(t,e,r,n){return n<=0&&(t=e=r=NaN),new ln(t,e,r,n)}function RH(t){return t instanceof zf||(t=hf(t)),t?(t=t.rgb(),new ln(t.r,t.g,t.b,t.opacity)):new ln}function Bw(t,e,r,n){return arguments.length===1?RH(t):new ln(t,e,r,n??1)}function ln(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}$_(ln,Bw,XO(zf,{brighter(t){return t=t==null?Rp:Math.pow(Rp,t),new ln(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?df:Math.pow(df,t),new ln(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ln(il(this.r),il(this.g),il(this.b),Op(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:wN,formatHex:wN,formatHex8:OH,formatRgb:bN,toString:bN}));function wN(){return`#${Jo(this.r)}${Jo(this.g)}${Jo(this.b)}`}function OH(){return`#${Jo(this.r)}${Jo(this.g)}${Jo(this.b)}${Jo((isNaN(this.opacity)?1:this.opacity)*255)}`}function bN(){const t=Op(this.opacity);return`${t===1?"rgb(":"rgba("}${il(this.r)}, ${il(this.g)}, ${il(this.b)}${t===1?")":`, ${t})`}`}function Op(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function il(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Jo(t){return t=il(t),(t<16?"0":"")+t.toString(16)}function _N(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new xi(t,e,r,n)}function JO(t){if(t instanceof xi)return new xi(t.h,t.s,t.l,t.opacity);if(t instanceof zf||(t=hf(t)),!t)return new xi;if(t instanceof xi)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,i=Math.min(e,r,n),a=Math.max(e,r,n),o=NaN,c=a-i,u=(a+i)/2;return c?(e===a?o=(r-n)/c+(r<n)*6:r===a?o=(n-e)/c+2:o=(e-r)/c+4,c/=u<.5?a+i:2-a-i,o*=60):c=u>0&&u<1?0:o,new xi(o,c,u,t.opacity)}function DH(t,e,r,n){return arguments.length===1?JO(t):new xi(t,e,r,n??1)}function xi(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}$_(xi,DH,XO(zf,{brighter(t){return t=t==null?Rp:Math.pow(Rp,t),new xi(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?df:Math.pow(df,t),new xi(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,i=2*r-n;return new ln(gx(t>=240?t-240:t+120,i,n),gx(t,i,n),gx(t<120?t+240:t-120,i,n),this.opacity)},clamp(){return new xi(EN(this.h),Cm(this.s),Cm(this.l),Op(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Op(this.opacity);return`${t===1?"hsl(":"hsla("}${EN(this.h)}, ${Cm(this.s)*100}%, ${Cm(this.l)*100}%${t===1?")":`, ${t})`}`}}));function EN(t){return t=(t||0)%360,t<0?t+360:t}function Cm(t){return Math.max(0,Math.min(1,t||0))}function gx(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const U_=t=>()=>t;function MH(t,e){return function(r){return t+r*e}}function LH(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function VH(t){return(t=+t)==1?ZO:function(e,r){return r-e?LH(e,r,t):U_(isNaN(e)?r:e)}}function ZO(t,e){var r=e-t;return r?MH(t,r):U_(isNaN(t)?e:t)}const SN=function t(e){var r=VH(e);function n(i,a){var o=r((i=Bw(i)).r,(a=Bw(a)).r),c=r(i.g,a.g),u=r(i.b,a.b),d=ZO(i.opacity,a.opacity);return function(m){return i.r=o(m),i.g=c(m),i.b=u(m),i.opacity=d(m),i+""}}return n.gamma=t,n}(1);function FH(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),i;return function(a){for(i=0;i<r;++i)n[i]=t[i]*(1-a)+e[i]*a;return n}}function $H(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function UH(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,i=new Array(n),a=new Array(r),o;for(o=0;o<n;++o)i[o]=hu(t[o],e[o]);for(;o<r;++o)a[o]=e[o];return function(c){for(o=0;o<n;++o)a[o]=i[o](c);return a}}function BH(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function Dp(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function zH(t,e){var r={},n={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?r[i]=hu(t[i],e[i]):n[i]=e[i];return function(a){for(i in r)n[i]=r[i](a);return n}}var zw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,yx=new RegExp(zw.source,"g");function qH(t){return function(){return t}}function KH(t){return function(e){return t(e)+""}}function WH(t,e){var r=zw.lastIndex=yx.lastIndex=0,n,i,a,o=-1,c=[],u=[];for(t=t+"",e=e+"";(n=zw.exec(t))&&(i=yx.exec(e));)(a=i.index)>r&&(a=e.slice(r,a),c[o]?c[o]+=a:c[++o]=a),(n=n[0])===(i=i[0])?c[o]?c[o]+=i:c[++o]=i:(c[++o]=null,u.push({i:o,x:Dp(n,i)})),r=yx.lastIndex;return r<e.length&&(a=e.slice(r),c[o]?c[o]+=a:c[++o]=a),c.length<2?u[0]?KH(u[0].x):qH(e):(e=u.length,function(d){for(var m=0,p;m<e;++m)c[(p=u[m]).i]=p.x(d);return c.join("")})}function hu(t,e){var r=typeof e,n;return e==null||r==="boolean"?U_(e):(r==="number"?Dp:r==="string"?(n=hf(e))?(e=n,SN):WH:e instanceof hf?SN:e instanceof Date?BH:$H(e)?FH:Array.isArray(e)?UH:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?zH:Dp)(t,e)}function B_(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function HH(t,e){e===void 0&&(e=t,t=hu);for(var r=0,n=e.length-1,i=e[0],a=new Array(n<0?0:n);r<n;)a[r]=t(i,i=e[++r]);return function(o){var c=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return a[c](o-c)}}function GH(t){return function(){return t}}function Mp(t){return+t}var AN=[0,1];function Kr(t){return t}function qw(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:GH(isNaN(e)?NaN:.5)}function YH(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function QH(t,e,r){var n=t[0],i=t[1],a=e[0],o=e[1];return i<n?(n=qw(i,n),a=r(o,a)):(n=qw(n,i),a=r(a,o)),function(c){return a(n(c))}}function XH(t,e,r){var n=Math.min(t.length,e.length)-1,i=new Array(n),a=new Array(n),o=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<n;)i[o]=qw(t[o],t[o+1]),a[o]=r(e[o],e[o+1]);return function(c){var u=Bf(t,c,1,n)-1;return a[u](i[u](c))}}function qf(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function qg(){var t=AN,e=AN,r=hu,n,i,a,o=Kr,c,u,d;function m(){var v=Math.min(t.length,e.length);return o!==Kr&&(o=YH(t[0],t[v-1])),c=v>2?XH:QH,u=d=null,p}function p(v){return v==null||isNaN(v=+v)?a:(u||(u=c(t.map(n),e,r)))(n(o(v)))}return p.invert=function(v){return o(i((d||(d=c(e,t.map(n),Dp)))(v)))},p.domain=function(v){return arguments.length?(t=Array.from(v,Mp),m()):t.slice()},p.range=function(v){return arguments.length?(e=Array.from(v),m()):e.slice()},p.rangeRound=function(v){return e=Array.from(v),r=B_,m()},p.clamp=function(v){return arguments.length?(o=v?!0:Kr,m()):o!==Kr},p.interpolate=function(v){return arguments.length?(r=v,m()):r},p.unknown=function(v){return arguments.length?(a=v,p):a},function(v,w){return n=v,i=w,m()}}function z_(){return qg()(Kr,Kr)}function JH(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Lp(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function Gc(t){return t=Lp(Math.abs(t)),t?t[1]:NaN}function ZH(t,e){return function(r,n){for(var i=r.length,a=[],o=0,c=t[0],u=0;i>0&&c>0&&(u+c+1>n&&(c=Math.max(1,n-u)),a.push(r.substring(i-=c,i+c)),!((u+=c+1)>n));)c=t[o=(o+1)%t.length];return a.reverse().join(e)}}function eG(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var tG=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function mf(t){if(!(e=tG.exec(t)))throw new Error("invalid format: "+t);var e;return new q_({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}mf.prototype=q_.prototype;function q_(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}q_.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function rG(t){e:for(var e=t.length,r=1,n=-1,i;r<e;++r)switch(t[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(i+1):t}var eD;function nG(t,e){var r=Lp(t,e);if(!r)return t+"";var n=r[0],i=r[1],a=i-(eD=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=n.length;return a===o?n:a>o?n+new Array(a-o+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+Lp(t,Math.max(0,e+a-1))[0]}function TN(t,e){var r=Lp(t,e);if(!r)return t+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const PN={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:JH,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>TN(t*100,e),r:TN,s:nG,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function IN(t){return t}var NN=Array.prototype.map,CN=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function iG(t){var e=t.grouping===void 0||t.thousands===void 0?IN:ZH(NN.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?IN:eG(NN.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",c=t.minus===void 0?"−":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function d(p){p=mf(p);var v=p.fill,w=p.align,b=p.sign,E=p.symbol,S=p.zero,P=p.width,k=p.comma,C=p.precision,R=p.trim,V=p.type;V==="n"?(k=!0,V="g"):PN[V]||(C===void 0&&(C=12),R=!0,V="g"),(S||v==="0"&&w==="=")&&(S=!0,v="0",w="=");var B=E==="$"?r:E==="#"&&/[boxX]/.test(V)?"0"+V.toLowerCase():"",I=E==="$"?n:/[%p]/.test(V)?o:"",j=PN[V],D=/[defgprs%]/.test(V);C=C===void 0?6:/[gprs]/.test(V)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function $(M){var U=B,F=I,me,Pe,De;if(V==="c")F=j(M)+F,M="";else{M=+M;var pe=M<0||1/M<0;if(M=isNaN(M)?u:j(Math.abs(M),C),R&&(M=rG(M)),pe&&+M==0&&b!=="+"&&(pe=!1),U=(pe?b==="("?b:c:b==="-"||b==="("?"":b)+U,F=(V==="s"?CN[8+eD/3]:"")+F+(pe&&b==="("?")":""),D){for(me=-1,Pe=M.length;++me<Pe;)if(De=M.charCodeAt(me),48>De||De>57){F=(De===46?i+M.slice(me+1):M.slice(me))+F,M=M.slice(0,me);break}}}k&&!S&&(M=e(M,1/0));var ie=U.length+M.length+F.length,fe=ie<P?new Array(P-ie+1).join(v):"";switch(k&&S&&(M=e(fe+M,fe.length?P-F.length:1/0),fe=""),w){case"<":M=U+M+F+fe;break;case"=":M=U+fe+M+F;break;case"^":M=fe.slice(0,ie=fe.length>>1)+U+M+F+fe.slice(ie);break;default:M=fe+U+M+F;break}return a(M)}return $.toString=function(){return p+""},$}function m(p,v){var w=d((p=mf(p),p.type="f",p)),b=Math.max(-8,Math.min(8,Math.floor(Gc(v)/3)))*3,E=Math.pow(10,-b),S=CN[8+b/3];return function(P){return w(E*P)+S}}return{format:d,formatPrefix:m}}var km,K_,tD;aG({thousands:",",grouping:[3],currency:["$",""]});function aG(t){return km=iG(t),K_=km.format,tD=km.formatPrefix,km}function sG(t){return Math.max(0,-Gc(Math.abs(t)))}function oG(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Gc(e)/3)))*3-Gc(Math.abs(t)))}function lG(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Gc(e)-Gc(t))+1}function rD(t,e,r,n){var i=$w(t,e,r),a;switch(n=mf(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(a=oG(i,o))&&(n.precision=a),tD(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=lG(i,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=sG(i))&&(n.precision=a-(n.type==="%")*2);break}}return K_(n)}function uo(t){var e=t.domain;return t.ticks=function(r){var n=e();return Vw(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var i=e();return rD(i[0],i[i.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),i=0,a=n.length-1,o=n[i],c=n[a],u,d,m=10;for(c<o&&(d=o,o=c,c=d,d=i,i=a,a=d);m-- >0;){if(d=Fw(o,c,r),d===u)return n[i]=o,n[a]=c,e(n);if(d>0)o=Math.floor(o/d)*d,c=Math.ceil(c/d)*d;else if(d<0)o=Math.ceil(o*d)/d,c=Math.floor(c*d)/d;else break;u=d}return t},t}function nD(){var t=z_();return t.copy=function(){return qf(t,nD())},Zn.apply(t,arguments),uo(t)}function iD(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,Mp),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return iD(t).unknown(e)},t=arguments.length?Array.from(t,Mp):[0,1],uo(r)}function aD(t,e){t=t.slice();var r=0,n=t.length-1,i=t[r],a=t[n],o;return a<i&&(o=r,r=n,n=o,o=i,i=a,a=o),t[r]=e.floor(i),t[n]=e.ceil(a),t}function kN(t){return Math.log(t)}function jN(t){return Math.exp(t)}function cG(t){return-Math.log(-t)}function uG(t){return-Math.exp(-t)}function dG(t){return isFinite(t)?+("1e"+t):t<0?0:t}function fG(t){return t===10?dG:t===Math.E?Math.exp:e=>Math.pow(t,e)}function hG(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function RN(t){return(e,r)=>-t(-e,r)}function W_(t){const e=t(kN,jN),r=e.domain;let n=10,i,a;function o(){return i=hG(n),a=fG(n),r()[0]<0?(i=RN(i),a=RN(a),t(cG,uG)):t(kN,jN),e}return e.base=function(c){return arguments.length?(n=+c,o()):n},e.domain=function(c){return arguments.length?(r(c),o()):r()},e.ticks=c=>{const u=r();let d=u[0],m=u[u.length-1];const p=m<d;p&&([d,m]=[m,d]);let v=i(d),w=i(m),b,E;const S=c==null?10:+c;let P=[];if(!(n%1)&&w-v<S){if(v=Math.floor(v),w=Math.ceil(w),d>0){for(;v<=w;++v)for(b=1;b<n;++b)if(E=v<0?b/a(-v):b*a(v),!(E<d)){if(E>m)break;P.push(E)}}else for(;v<=w;++v)for(b=n-1;b>=1;--b)if(E=v>0?b/a(-v):b*a(v),!(E<d)){if(E>m)break;P.push(E)}P.length*2<S&&(P=Vw(d,m,S))}else P=Vw(v,w,Math.min(w-v,S)).map(a);return p?P.reverse():P},e.tickFormat=(c,u)=>{if(c==null&&(c=10),u==null&&(u=n===10?"s":","),typeof u!="function"&&(!(n%1)&&(u=mf(u)).precision==null&&(u.trim=!0),u=K_(u)),c===1/0)return u;const d=Math.max(1,n*c/e.ticks().length);return m=>{let p=m/a(Math.round(i(m)));return p*n<n-.5&&(p*=n),p<=d?u(m):""}},e.nice=()=>r(aD(r(),{floor:c=>a(Math.floor(i(c))),ceil:c=>a(Math.ceil(i(c)))})),e}function sD(){const t=W_(qg()).domain([1,10]);return t.copy=()=>qf(t,sD()).base(t.base()),Zn.apply(t,arguments),t}function ON(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function DN(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function H_(t){var e=1,r=t(ON(e),DN(e));return r.constant=function(n){return arguments.length?t(ON(e=+n),DN(e)):e},uo(r)}function oD(){var t=H_(qg());return t.copy=function(){return qf(t,oD()).constant(t.constant())},Zn.apply(t,arguments)}function MN(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function mG(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function pG(t){return t<0?-t*t:t*t}function G_(t){var e=t(Kr,Kr),r=1;function n(){return r===1?t(Kr,Kr):r===.5?t(mG,pG):t(MN(r),MN(1/r))}return e.exponent=function(i){return arguments.length?(r=+i,n()):r},uo(e)}function Y_(){var t=G_(qg());return t.copy=function(){return qf(t,Y_()).exponent(t.exponent())},Zn.apply(t,arguments),t}function gG(){return Y_.apply(null,arguments).exponent(.5)}function LN(t){return Math.sign(t)*t*t}function yG(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function lD(){var t=z_(),e=[0,1],r=!1,n;function i(a){var o=yG(t(a));return isNaN(o)?n:r?Math.round(o):o}return i.invert=function(a){return t.invert(LN(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,Mp)).map(LN)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(r=!!a,i):r},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return lD(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},Zn.apply(i,arguments),uo(i)}function cD(){var t=[],e=[],r=[],n;function i(){var o=0,c=Math.max(1,e.length);for(r=new Array(c-1);++o<c;)r[o-1]=bH(t,o/c);return a}function a(o){return o==null||isNaN(o=+o)?n:e[Bf(r,o)]}return a.invertExtent=function(o){var c=e.indexOf(o);return c<0?[NaN,NaN]:[c>0?r[c-1]:t[0],c<r.length?r[c]:t[t.length-1]]},a.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let c of o)c!=null&&!isNaN(c=+c)&&t.push(c);return t.sort(Bs),i()},a.range=function(o){return arguments.length?(e=Array.from(o),i()):e.slice()},a.unknown=function(o){return arguments.length?(n=o,a):n},a.quantiles=function(){return r.slice()},a.copy=function(){return cD().domain(t).range(e).unknown(n)},Zn.apply(a,arguments)}function uD(){var t=0,e=1,r=1,n=[.5],i=[0,1],a;function o(u){return u!=null&&u<=u?i[Bf(n,u,0,r)]:a}function c(){var u=-1;for(n=new Array(r);++u<r;)n[u]=((u+1)*e-(u-r)*t)/(r+1);return o}return o.domain=function(u){return arguments.length?([t,e]=u,t=+t,e=+e,c()):[t,e]},o.range=function(u){return arguments.length?(r=(i=Array.from(u)).length-1,c()):i.slice()},o.invertExtent=function(u){var d=i.indexOf(u);return d<0?[NaN,NaN]:d<1?[t,n[0]]:d>=r?[n[r-1],e]:[n[d-1],n[d]]},o.unknown=function(u){return arguments.length&&(a=u),o},o.thresholds=function(){return n.slice()},o.copy=function(){return uD().domain([t,e]).range(i).unknown(a)},Zn.apply(uo(o),arguments)}function dD(){var t=[.5],e=[0,1],r,n=1;function i(a){return a!=null&&a<=a?e[Bf(t,a,0,n)]:r}return i.domain=function(a){return arguments.length?(t=Array.from(a),n=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),n=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var o=e.indexOf(a);return[t[o-1],t[o]]},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return dD().domain(t).range(e).unknown(r)},Zn.apply(i,arguments)}const vx=new Date,xx=new Date;function or(t,e,r,n){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const o=i(a),c=i.ceil(a);return a-o<c-a?o:c},i.offset=(a,o)=>(e(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,c)=>{const u=[];if(a=i.ceil(a),c=c==null?1:Math.floor(c),!(a<o)||!(c>0))return u;let d;do u.push(d=new Date(+a)),e(a,c),t(a);while(d<a&&a<o);return u},i.filter=a=>or(o=>{if(o>=o)for(;t(o),!a(o);)o.setTime(o-1)},(o,c)=>{if(o>=o)if(c<0)for(;++c<=0;)for(;e(o,-1),!a(o););else for(;--c>=0;)for(;e(o,1),!a(o););}),r&&(i.count=(a,o)=>(vx.setTime(+a),xx.setTime(+o),t(vx),t(xx),Math.floor(r(vx,xx))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(n?o=>n(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const Vp=or(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Vp.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?or(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):Vp);Vp.range;const Ra=1e3,Kn=Ra*60,Oa=Kn*60,Ga=Oa*24,Q_=Ga*7,VN=Ga*30,wx=Ga*365,Zo=or(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Ra)},(t,e)=>(e-t)/Ra,t=>t.getUTCSeconds());Zo.range;const X_=or(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ra)},(t,e)=>{t.setTime(+t+e*Kn)},(t,e)=>(e-t)/Kn,t=>t.getMinutes());X_.range;const J_=or(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Kn)},(t,e)=>(e-t)/Kn,t=>t.getUTCMinutes());J_.range;const Z_=or(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ra-t.getMinutes()*Kn)},(t,e)=>{t.setTime(+t+e*Oa)},(t,e)=>(e-t)/Oa,t=>t.getHours());Z_.range;const e1=or(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Oa)},(t,e)=>(e-t)/Oa,t=>t.getUTCHours());e1.range;const Kf=or(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Kn)/Ga,t=>t.getDate()-1);Kf.range;const Kg=or(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ga,t=>t.getUTCDate()-1);Kg.range;const fD=or(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ga,t=>Math.floor(t/Ga));fD.range;function Tl(t){return or(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*Kn)/Q_)}const Wg=Tl(0),Fp=Tl(1),vG=Tl(2),xG=Tl(3),Yc=Tl(4),wG=Tl(5),bG=Tl(6);Wg.range;Fp.range;vG.range;xG.range;Yc.range;wG.range;bG.range;function Pl(t){return or(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/Q_)}const Hg=Pl(0),$p=Pl(1),_G=Pl(2),EG=Pl(3),Qc=Pl(4),SG=Pl(5),AG=Pl(6);Hg.range;$p.range;_G.range;EG.range;Qc.range;SG.range;AG.range;const t1=or(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());t1.range;const r1=or(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());r1.range;const Ya=or(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Ya.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:or(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});Ya.range;const Qa=or(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Qa.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:or(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});Qa.range;function hD(t,e,r,n,i,a){const o=[[Zo,1,Ra],[Zo,5,5*Ra],[Zo,15,15*Ra],[Zo,30,30*Ra],[a,1,Kn],[a,5,5*Kn],[a,15,15*Kn],[a,30,30*Kn],[i,1,Oa],[i,3,3*Oa],[i,6,6*Oa],[i,12,12*Oa],[n,1,Ga],[n,2,2*Ga],[r,1,Q_],[e,1,VN],[e,3,3*VN],[t,1,wx]];function c(d,m,p){const v=m<d;v&&([d,m]=[m,d]);const w=p&&typeof p.range=="function"?p:u(d,m,p),b=w?w.range(d,+m+1):[];return v?b.reverse():b}function u(d,m,p){const v=Math.abs(m-d)/p,w=L_(([,,S])=>S).right(o,v);if(w===o.length)return t.every($w(d/wx,m/wx,p));if(w===0)return Vp.every(Math.max($w(d,m,p),1));const[b,E]=o[v/o[w-1][2]<o[w][2]/v?w-1:w];return b.every(E)}return[c,u]}const[TG,PG]=hD(Qa,r1,Hg,fD,e1,J_),[IG,NG]=hD(Ya,t1,Wg,Kf,Z_,X_);function bx(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function _x(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function bd(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function CG(t){var e=t.dateTime,r=t.date,n=t.time,i=t.periods,a=t.days,o=t.shortDays,c=t.months,u=t.shortMonths,d=_d(i),m=Ed(i),p=_d(a),v=Ed(a),w=_d(o),b=Ed(o),E=_d(c),S=Ed(c),P=_d(u),k=Ed(u),C={a:pe,A:ie,b:fe,B:ue,c:null,d:qN,e:qN,f:ZG,g:cY,G:dY,H:QG,I:XG,j:JG,L:mD,m:eY,M:tY,p:W,q:Y,Q:HN,s:GN,S:rY,u:nY,U:iY,V:aY,w:sY,W:oY,x:null,X:null,y:lY,Y:uY,Z:fY,"%":WN},R={a:he,A:Re,b:Ce,B:Be,c:null,d:KN,e:KN,f:gY,g:TY,G:IY,H:hY,I:mY,j:pY,L:gD,m:yY,M:vY,p:Xe,q:Je,Q:HN,s:GN,S:xY,u:wY,U:bY,V:_Y,w:EY,W:SY,x:null,X:null,y:AY,Y:PY,Z:NY,"%":WN},V={a:$,A:M,b:U,B:F,c:me,d:BN,e:BN,f:WG,g:UN,G:$N,H:zN,I:zN,j:BG,L:KG,m:UG,M:zG,p:D,q:$G,Q:GG,s:YG,S:qG,u:DG,U:MG,V:LG,w:OG,W:VG,x:Pe,X:De,y:UN,Y:$N,Z:FG,"%":HG};C.x=B(r,C),C.X=B(n,C),C.c=B(e,C),R.x=B(r,R),R.X=B(n,R),R.c=B(e,R);function B(oe,Ae){return function(Fe){var ae=[],Pt=-1,Ge=0,Bt=oe.length,Xt,cn,po;for(Fe instanceof Date||(Fe=new Date(+Fe));++Pt<Bt;)oe.charCodeAt(Pt)===37&&(ae.push(oe.slice(Ge,Pt)),(cn=FN[Xt=oe.charAt(++Pt)])!=null?Xt=oe.charAt(++Pt):cn=Xt==="e"?" ":"0",(po=Ae[Xt])&&(Xt=po(Fe,cn)),ae.push(Xt),Ge=Pt+1);return ae.push(oe.slice(Ge,Pt)),ae.join("")}}function I(oe,Ae){return function(Fe){var ae=bd(1900,void 0,1),Pt=j(ae,oe,Fe+="",0),Ge,Bt;if(Pt!=Fe.length)return null;if("Q"in ae)return new Date(ae.Q);if("s"in ae)return new Date(ae.s*1e3+("L"in ae?ae.L:0));if(Ae&&!("Z"in ae)&&(ae.Z=0),"p"in ae&&(ae.H=ae.H%12+ae.p*12),ae.m===void 0&&(ae.m="q"in ae?ae.q:0),"V"in ae){if(ae.V<1||ae.V>53)return null;"w"in ae||(ae.w=1),"Z"in ae?(Ge=_x(bd(ae.y,0,1)),Bt=Ge.getUTCDay(),Ge=Bt>4||Bt===0?$p.ceil(Ge):$p(Ge),Ge=Kg.offset(Ge,(ae.V-1)*7),ae.y=Ge.getUTCFullYear(),ae.m=Ge.getUTCMonth(),ae.d=Ge.getUTCDate()+(ae.w+6)%7):(Ge=bx(bd(ae.y,0,1)),Bt=Ge.getDay(),Ge=Bt>4||Bt===0?Fp.ceil(Ge):Fp(Ge),Ge=Kf.offset(Ge,(ae.V-1)*7),ae.y=Ge.getFullYear(),ae.m=Ge.getMonth(),ae.d=Ge.getDate()+(ae.w+6)%7)}else("W"in ae||"U"in ae)&&("w"in ae||(ae.w="u"in ae?ae.u%7:"W"in ae?1:0),Bt="Z"in ae?_x(bd(ae.y,0,1)).getUTCDay():bx(bd(ae.y,0,1)).getDay(),ae.m=0,ae.d="W"in ae?(ae.w+6)%7+ae.W*7-(Bt+5)%7:ae.w+ae.U*7-(Bt+6)%7);return"Z"in ae?(ae.H+=ae.Z/100|0,ae.M+=ae.Z%100,_x(ae)):bx(ae)}}function j(oe,Ae,Fe,ae){for(var Pt=0,Ge=Ae.length,Bt=Fe.length,Xt,cn;Pt<Ge;){if(ae>=Bt)return-1;if(Xt=Ae.charCodeAt(Pt++),Xt===37){if(Xt=Ae.charAt(Pt++),cn=V[Xt in FN?Ae.charAt(Pt++):Xt],!cn||(ae=cn(oe,Fe,ae))<0)return-1}else if(Xt!=Fe.charCodeAt(ae++))return-1}return ae}function D(oe,Ae,Fe){var ae=d.exec(Ae.slice(Fe));return ae?(oe.p=m.get(ae[0].toLowerCase()),Fe+ae[0].length):-1}function $(oe,Ae,Fe){var ae=w.exec(Ae.slice(Fe));return ae?(oe.w=b.get(ae[0].toLowerCase()),Fe+ae[0].length):-1}function M(oe,Ae,Fe){var ae=p.exec(Ae.slice(Fe));return ae?(oe.w=v.get(ae[0].toLowerCase()),Fe+ae[0].length):-1}function U(oe,Ae,Fe){var ae=P.exec(Ae.slice(Fe));return ae?(oe.m=k.get(ae[0].toLowerCase()),Fe+ae[0].length):-1}function F(oe,Ae,Fe){var ae=E.exec(Ae.slice(Fe));return ae?(oe.m=S.get(ae[0].toLowerCase()),Fe+ae[0].length):-1}function me(oe,Ae,Fe){return j(oe,e,Ae,Fe)}function Pe(oe,Ae,Fe){return j(oe,r,Ae,Fe)}function De(oe,Ae,Fe){return j(oe,n,Ae,Fe)}function pe(oe){return o[oe.getDay()]}function ie(oe){return a[oe.getDay()]}function fe(oe){return u[oe.getMonth()]}function ue(oe){return c[oe.getMonth()]}function W(oe){return i[+(oe.getHours()>=12)]}function Y(oe){return 1+~~(oe.getMonth()/3)}function he(oe){return o[oe.getUTCDay()]}function Re(oe){return a[oe.getUTCDay()]}function Ce(oe){return u[oe.getUTCMonth()]}function Be(oe){return c[oe.getUTCMonth()]}function Xe(oe){return i[+(oe.getUTCHours()>=12)]}function Je(oe){return 1+~~(oe.getUTCMonth()/3)}return{format:function(oe){var Ae=B(oe+="",C);return Ae.toString=function(){return oe},Ae},parse:function(oe){var Ae=I(oe+="",!1);return Ae.toString=function(){return oe},Ae},utcFormat:function(oe){var Ae=B(oe+="",R);return Ae.toString=function(){return oe},Ae},utcParse:function(oe){var Ae=I(oe+="",!0);return Ae.toString=function(){return oe},Ae}}}var FN={"-":"",_:" ",0:"0"},gr=/^\s*\d+/,kG=/^%/,jG=/[\\^$*+?|[\]().{}]/g;function rt(t,e,r){var n=t<0?"-":"",i=(n?-t:t)+"",a=i.length;return n+(a<r?new Array(r-a+1).join(e)+i:i)}function RG(t){return t.replace(jG,"\\$&")}function _d(t){return new RegExp("^(?:"+t.map(RG).join("|")+")","i")}function Ed(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function OG(t,e,r){var n=gr.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function DG(t,e,r){var n=gr.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function MG(t,e,r){var n=gr.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function LG(t,e,r){var n=gr.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function VG(t,e,r){var n=gr.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function $N(t,e,r){var n=gr.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function UN(t,e,r){var n=gr.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function FG(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function $G(t,e,r){var n=gr.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function UG(t,e,r){var n=gr.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function BN(t,e,r){var n=gr.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function BG(t,e,r){var n=gr.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function zN(t,e,r){var n=gr.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function zG(t,e,r){var n=gr.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function qG(t,e,r){var n=gr.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function KG(t,e,r){var n=gr.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function WG(t,e,r){var n=gr.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function HG(t,e,r){var n=kG.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function GG(t,e,r){var n=gr.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function YG(t,e,r){var n=gr.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function qN(t,e){return rt(t.getDate(),e,2)}function QG(t,e){return rt(t.getHours(),e,2)}function XG(t,e){return rt(t.getHours()%12||12,e,2)}function JG(t,e){return rt(1+Kf.count(Ya(t),t),e,3)}function mD(t,e){return rt(t.getMilliseconds(),e,3)}function ZG(t,e){return mD(t,e)+"000"}function eY(t,e){return rt(t.getMonth()+1,e,2)}function tY(t,e){return rt(t.getMinutes(),e,2)}function rY(t,e){return rt(t.getSeconds(),e,2)}function nY(t){var e=t.getDay();return e===0?7:e}function iY(t,e){return rt(Wg.count(Ya(t)-1,t),e,2)}function pD(t){var e=t.getDay();return e>=4||e===0?Yc(t):Yc.ceil(t)}function aY(t,e){return t=pD(t),rt(Yc.count(Ya(t),t)+(Ya(t).getDay()===4),e,2)}function sY(t){return t.getDay()}function oY(t,e){return rt(Fp.count(Ya(t)-1,t),e,2)}function lY(t,e){return rt(t.getFullYear()%100,e,2)}function cY(t,e){return t=pD(t),rt(t.getFullYear()%100,e,2)}function uY(t,e){return rt(t.getFullYear()%1e4,e,4)}function dY(t,e){var r=t.getDay();return t=r>=4||r===0?Yc(t):Yc.ceil(t),rt(t.getFullYear()%1e4,e,4)}function fY(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+rt(e/60|0,"0",2)+rt(e%60,"0",2)}function KN(t,e){return rt(t.getUTCDate(),e,2)}function hY(t,e){return rt(t.getUTCHours(),e,2)}function mY(t,e){return rt(t.getUTCHours()%12||12,e,2)}function pY(t,e){return rt(1+Kg.count(Qa(t),t),e,3)}function gD(t,e){return rt(t.getUTCMilliseconds(),e,3)}function gY(t,e){return gD(t,e)+"000"}function yY(t,e){return rt(t.getUTCMonth()+1,e,2)}function vY(t,e){return rt(t.getUTCMinutes(),e,2)}function xY(t,e){return rt(t.getUTCSeconds(),e,2)}function wY(t){var e=t.getUTCDay();return e===0?7:e}function bY(t,e){return rt(Hg.count(Qa(t)-1,t),e,2)}function yD(t){var e=t.getUTCDay();return e>=4||e===0?Qc(t):Qc.ceil(t)}function _Y(t,e){return t=yD(t),rt(Qc.count(Qa(t),t)+(Qa(t).getUTCDay()===4),e,2)}function EY(t){return t.getUTCDay()}function SY(t,e){return rt($p.count(Qa(t)-1,t),e,2)}function AY(t,e){return rt(t.getUTCFullYear()%100,e,2)}function TY(t,e){return t=yD(t),rt(t.getUTCFullYear()%100,e,2)}function PY(t,e){return rt(t.getUTCFullYear()%1e4,e,4)}function IY(t,e){var r=t.getUTCDay();return t=r>=4||r===0?Qc(t):Qc.ceil(t),rt(t.getUTCFullYear()%1e4,e,4)}function NY(){return"+0000"}function WN(){return"%"}function HN(t){return+t}function GN(t){return Math.floor(+t/1e3)}var bc,vD,xD;CY({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function CY(t){return bc=CG(t),vD=bc.format,bc.parse,xD=bc.utcFormat,bc.utcParse,bc}function kY(t){return new Date(t)}function jY(t){return t instanceof Date?+t:+new Date(+t)}function n1(t,e,r,n,i,a,o,c,u,d){var m=z_(),p=m.invert,v=m.domain,w=d(".%L"),b=d(":%S"),E=d("%I:%M"),S=d("%I %p"),P=d("%a %d"),k=d("%b %d"),C=d("%B"),R=d("%Y");function V(B){return(u(B)<B?w:c(B)<B?b:o(B)<B?E:a(B)<B?S:n(B)<B?i(B)<B?P:k:r(B)<B?C:R)(B)}return m.invert=function(B){return new Date(p(B))},m.domain=function(B){return arguments.length?v(Array.from(B,jY)):v().map(kY)},m.ticks=function(B){var I=v();return t(I[0],I[I.length-1],B??10)},m.tickFormat=function(B,I){return I==null?V:d(I)},m.nice=function(B){var I=v();return(!B||typeof B.range!="function")&&(B=e(I[0],I[I.length-1],B??10)),B?v(aD(I,B)):m},m.copy=function(){return qf(m,n1(t,e,r,n,i,a,o,c,u,d))},m}function RY(){return Zn.apply(n1(IG,NG,Ya,t1,Wg,Kf,Z_,X_,Zo,vD).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function OY(){return Zn.apply(n1(TG,PG,Qa,r1,Hg,Kg,e1,J_,Zo,xD).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Gg(){var t=0,e=1,r,n,i,a,o=Kr,c=!1,u;function d(p){return p==null||isNaN(p=+p)?u:o(i===0?.5:(p=(a(p)-r)*i,c?Math.max(0,Math.min(1,p)):p))}d.domain=function(p){return arguments.length?([t,e]=p,r=a(t=+t),n=a(e=+e),i=r===n?0:1/(n-r),d):[t,e]},d.clamp=function(p){return arguments.length?(c=!!p,d):c},d.interpolator=function(p){return arguments.length?(o=p,d):o};function m(p){return function(v){var w,b;return arguments.length?([w,b]=v,o=p(w,b),d):[o(0),o(1)]}}return d.range=m(hu),d.rangeRound=m(B_),d.unknown=function(p){return arguments.length?(u=p,d):u},function(p){return a=p,r=p(t),n=p(e),i=r===n?0:1/(n-r),d}}function fo(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function wD(){var t=uo(Gg()(Kr));return t.copy=function(){return fo(t,wD())},Za.apply(t,arguments)}function bD(){var t=W_(Gg()).domain([1,10]);return t.copy=function(){return fo(t,bD()).base(t.base())},Za.apply(t,arguments)}function _D(){var t=H_(Gg());return t.copy=function(){return fo(t,_D()).constant(t.constant())},Za.apply(t,arguments)}function i1(){var t=G_(Gg());return t.copy=function(){return fo(t,i1()).exponent(t.exponent())},Za.apply(t,arguments)}function DY(){return i1.apply(null,arguments).exponent(.5)}function ED(){var t=[],e=Kr;function r(n){if(n!=null&&!isNaN(n=+n))return e((Bf(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let i of n)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Bs),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,i)=>e(i/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,a)=>wH(t,a/n))},r.copy=function(){return ED(e).domain(t)},Za.apply(r,arguments)}function Yg(){var t=0,e=.5,r=1,n=1,i,a,o,c,u,d=Kr,m,p=!1,v;function w(E){return isNaN(E=+E)?v:(E=.5+((E=+m(E))-a)*(n*E<n*a?c:u),d(p?Math.max(0,Math.min(1,E)):E))}w.domain=function(E){return arguments.length?([t,e,r]=E,i=m(t=+t),a=m(e=+e),o=m(r=+r),c=i===a?0:.5/(a-i),u=a===o?0:.5/(o-a),n=a<i?-1:1,w):[t,e,r]},w.clamp=function(E){return arguments.length?(p=!!E,w):p},w.interpolator=function(E){return arguments.length?(d=E,w):d};function b(E){return function(S){var P,k,C;return arguments.length?([P,k,C]=S,d=HH(E,[P,k,C]),w):[d(0),d(.5),d(1)]}}return w.range=b(hu),w.rangeRound=b(B_),w.unknown=function(E){return arguments.length?(v=E,w):v},function(E){return m=E,i=E(t),a=E(e),o=E(r),c=i===a?0:.5/(a-i),u=a===o?0:.5/(o-a),n=a<i?-1:1,w}}function SD(){var t=uo(Yg()(Kr));return t.copy=function(){return fo(t,SD())},Za.apply(t,arguments)}function AD(){var t=W_(Yg()).domain([.1,1,10]);return t.copy=function(){return fo(t,AD()).base(t.base())},Za.apply(t,arguments)}function TD(){var t=H_(Yg());return t.copy=function(){return fo(t,TD()).constant(t.constant())},Za.apply(t,arguments)}function a1(){var t=G_(Yg());return t.copy=function(){return fo(t,a1()).exponent(t.exponent())},Za.apply(t,arguments)}function MY(){return a1.apply(null,arguments).exponent(.5)}const Rd=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:F_,scaleDiverging:SD,scaleDivergingLog:AD,scaleDivergingPow:a1,scaleDivergingSqrt:MY,scaleDivergingSymlog:TD,scaleIdentity:iD,scaleImplicit:Uw,scaleLinear:nD,scaleLog:sD,scaleOrdinal:V_,scalePoint:EH,scalePow:Y_,scaleQuantile:cD,scaleQuantize:uD,scaleRadial:lD,scaleSequential:wD,scaleSequentialLog:bD,scaleSequentialPow:i1,scaleSequentialQuantile:ED,scaleSequentialSqrt:DY,scaleSequentialSymlog:_D,scaleSqrt:gG,scaleSymlog:oD,scaleThreshold:dD,scaleTime:RY,scaleUtc:OY,tickFormat:rD},Symbol.toStringTag,{value:"Module"}));var Il=t=>t.chartData,s1=J([Il],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),o1=(t,e,r,n)=>n?s1(t):Il(t);function Xc(t){if(Array.isArray(t)&&t.length===2){var[e,r]=t;if(Nn(e)&&Nn(r))return!0}return!1}function YN(t,e,r){return r?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function LY(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[r,n]=t,i,a;if(Nn(r))i=r;else if(typeof r=="function")return;if(Nn(n))a=n;else if(typeof n=="function")return;var o=[i,a];if(Xc(o))return o}}function VY(t,e,r){if(!(!r&&e==null)){if(typeof t=="function"&&e!=null)try{var n=t(e,r);if(Xc(n))return YN(n,e,r)}catch{}if(Array.isArray(t)&&t.length===2){var[i,a]=t,o,c;if(i==="auto")e!=null&&(o=Math.min(...e));else if(we(i))o=i;else if(typeof i=="function")try{e!=null&&(o=i(e?.[0]))}catch{}else if(typeof i=="string"&&VI.test(i)){var u=VI.exec(i);if(u==null||e==null)o=void 0;else{var d=+u[1];o=e[0]-d}}else o=e?.[0];if(a==="auto")e!=null&&(c=Math.max(...e));else if(we(a))c=a;else if(typeof a=="function")try{e!=null&&(c=a(e?.[1]))}catch{}else if(typeof a=="string"&&FI.test(a)){var m=FI.exec(a);if(m==null||e==null)c=void 0;else{var p=+m[1];c=e[1]+p}}else c=e?.[1];var v=[o,c];if(Xc(v))return e==null?v:YN(v,e,r)}}}var mu=1e9,FY={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},c1,At=!0,Yn="[DecimalError] ",al=Yn+"Invalid argument: ",l1=Yn+"Exponent out of range: ",pu=Math.floor,Ho=Math.pow,$Y=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,En,hr=1e7,xt=7,PD=9007199254740991,Up=pu(PD/xt),xe={};xe.absoluteValue=xe.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};xe.comparedTo=xe.cmp=function(t){var e,r,n,i,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(n=a.d.length,i=t.d.length,e=0,r=n<i?n:i;e<r;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return n===i?0:n>i^a.s<0?1:-1};xe.decimalPlaces=xe.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*xt;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};xe.dividedBy=xe.div=function(t){return Fa(this,new this.constructor(t))};xe.dividedToIntegerBy=xe.idiv=function(t){var e=this,r=e.constructor;return ut(Fa(e,new r(t),0,1),r.precision)};xe.equals=xe.eq=function(t){return!this.cmp(t)};xe.exponent=function(){return Qt(this)};xe.greaterThan=xe.gt=function(t){return this.cmp(t)>0};xe.greaterThanOrEqualTo=xe.gte=function(t){return this.cmp(t)>=0};xe.isInteger=xe.isint=function(){return this.e>this.d.length-2};xe.isNegative=xe.isneg=function(){return this.s<0};xe.isPositive=xe.ispos=function(){return this.s>0};xe.isZero=function(){return this.s===0};xe.lessThan=xe.lt=function(t){return this.cmp(t)<0};xe.lessThanOrEqualTo=xe.lte=function(t){return this.cmp(t)<1};xe.logarithm=xe.log=function(t){var e,r=this,n=r.constructor,i=n.precision,a=i+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(En))throw Error(Yn+"NaN");if(r.s<1)throw Error(Yn+(r.s?"NaN":"-Infinity"));return r.eq(En)?new n(0):(At=!1,e=Fa(pf(r,a),pf(t,a),a),At=!0,ut(e,i))};xe.minus=xe.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?CD(e,t):ID(e,(t.s=-t.s,t))};xe.modulo=xe.mod=function(t){var e,r=this,n=r.constructor,i=n.precision;if(t=new n(t),!t.s)throw Error(Yn+"NaN");return r.s?(At=!1,e=Fa(r,t,0,1).times(t),At=!0,r.minus(e)):ut(new n(r),i)};xe.naturalExponential=xe.exp=function(){return ND(this)};xe.naturalLogarithm=xe.ln=function(){return pf(this)};xe.negated=xe.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};xe.plus=xe.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?ID(e,t):CD(e,(t.s=-t.s,t))};xe.precision=xe.sd=function(t){var e,r,n,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(al+t);if(e=Qt(i)+1,n=i.d.length-1,r=n*xt+1,n=i.d[n],n){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};xe.squareRoot=xe.sqrt=function(){var t,e,r,n,i,a,o,c=this,u=c.constructor;if(c.s<1){if(!c.s)return new u(0);throw Error(Yn+"NaN")}for(t=Qt(c),At=!1,i=Math.sqrt(+c),i==0||i==1/0?(e=qi(c.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=pu((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new u(e)):n=new u(i.toString()),r=u.precision,i=o=r+3;;)if(a=n,n=a.plus(Fa(c,a,o+2)).times(.5),qi(a.d).slice(0,o)===(e=qi(n.d)).slice(0,o)){if(e=e.slice(o-3,o+1),i==o&&e=="4999"){if(ut(a,r+1,0),a.times(a).eq(c)){n=a;break}}else if(e!="9999")break;o+=4}return At=!0,ut(n,r)};xe.times=xe.mul=function(t){var e,r,n,i,a,o,c,u,d,m=this,p=m.constructor,v=m.d,w=(t=new p(t)).d;if(!m.s||!t.s)return new p(0);for(t.s*=m.s,r=m.e+t.e,u=v.length,d=w.length,u<d&&(a=v,v=w,w=a,o=u,u=d,d=o),a=[],o=u+d,n=o;n--;)a.push(0);for(n=d;--n>=0;){for(e=0,i=u+n;i>n;)c=a[i]+w[n]*v[i-n-1]+e,a[i--]=c%hr|0,e=c/hr|0;a[i]=(a[i]+e)%hr|0}for(;!a[--o];)a.pop();return e?++r:a.shift(),t.d=a,t.e=r,At?ut(t,p.precision):t};xe.toDecimalPlaces=xe.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(aa(t,0,mu),e===void 0?e=n.rounding:aa(e,0,8),ut(r,t+Qt(r)+1,e))};xe.toExponential=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=yl(n,!0):(aa(t,0,mu),e===void 0?e=i.rounding:aa(e,0,8),n=ut(new i(n),t+1,e),r=yl(n,!0,t+1)),r};xe.toFixed=function(t,e){var r,n,i=this,a=i.constructor;return t===void 0?yl(i):(aa(t,0,mu),e===void 0?e=a.rounding:aa(e,0,8),n=ut(new a(i),t+Qt(i)+1,e),r=yl(n.abs(),!1,t+Qt(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)};xe.toInteger=xe.toint=function(){var t=this,e=t.constructor;return ut(new e(t),Qt(t)+1,e.rounding)};xe.toNumber=function(){return+this};xe.toPower=xe.pow=function(t){var e,r,n,i,a,o,c=this,u=c.constructor,d=12,m=+(t=new u(t));if(!t.s)return new u(En);if(c=new u(c),!c.s){if(t.s<1)throw Error(Yn+"Infinity");return c}if(c.eq(En))return c;if(n=u.precision,t.eq(En))return ut(c,n);if(e=t.e,r=t.d.length-1,o=e>=r,a=c.s,o){if((r=m<0?-m:m)<=PD){for(i=new u(En),e=Math.ceil(n/xt+4),At=!1;r%2&&(i=i.times(c),XN(i.d,e)),r=pu(r/2),r!==0;)c=c.times(c),XN(c.d,e);return At=!0,t.s<0?new u(En).div(i):ut(i,n)}}else if(a<0)throw Error(Yn+"NaN");return a=a<0&&t.d[Math.max(e,r)]&1?-1:1,c.s=1,At=!1,i=t.times(pf(c,n+d)),At=!0,i=ND(i),i.s=a,i};xe.toPrecision=function(t,e){var r,n,i=this,a=i.constructor;return t===void 0?(r=Qt(i),n=yl(i,r<=a.toExpNeg||r>=a.toExpPos)):(aa(t,1,mu),e===void 0?e=a.rounding:aa(e,0,8),i=ut(new a(i),t,e),r=Qt(i),n=yl(i,t<=r||r<=a.toExpNeg,t)),n};xe.toSignificantDigits=xe.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(aa(t,1,mu),e===void 0?e=n.rounding:aa(e,0,8)),ut(new n(r),t,e)};xe.toString=xe.valueOf=xe.val=xe.toJSON=xe[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Qt(t),r=t.constructor;return yl(t,e<=r.toExpNeg||e>=r.toExpPos)};function ID(t,e){var r,n,i,a,o,c,u,d,m=t.constructor,p=m.precision;if(!t.s||!e.s)return e.s||(e=new m(t)),At?ut(e,p):e;if(u=t.d,d=e.d,o=t.e,i=e.e,u=u.slice(),a=o-i,a){for(a<0?(n=u,a=-a,c=d.length):(n=d,i=o,c=u.length),o=Math.ceil(p/xt),c=o>c?o+1:c+1,a>c&&(a=c,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for(c=u.length,a=d.length,c-a<0&&(a=c,n=d,d=u,u=n),r=0;a;)r=(u[--a]=u[a]+d[a]+r)/hr|0,u[a]%=hr;for(r&&(u.unshift(r),++i),c=u.length;u[--c]==0;)u.pop();return e.d=u,e.e=i,At?ut(e,p):e}function aa(t,e,r){if(t!==~~t||t<e||t>r)throw Error(al+t)}function qi(t){var e,r,n,i=t.length-1,a="",o=t[0];if(i>0){for(a+=o,e=1;e<i;e++)n=t[e]+"",r=xt-n.length,r&&(a+=Cs(r)),a+=n;o=t[e],n=o+"",r=xt-n.length,r&&(a+=Cs(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}var Fa=function(){function t(n,i){var a,o=0,c=n.length;for(n=n.slice();c--;)a=n[c]*i+o,n[c]=a%hr|0,o=a/hr|0;return o&&n.unshift(o),n}function e(n,i,a,o){var c,u;if(a!=o)u=a>o?1:-1;else for(c=u=0;c<a;c++)if(n[c]!=i[c]){u=n[c]>i[c]?1:-1;break}return u}function r(n,i,a){for(var o=0;a--;)n[a]-=o,o=n[a]<i[a]?1:0,n[a]=o*hr+n[a]-i[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,a,o){var c,u,d,m,p,v,w,b,E,S,P,k,C,R,V,B,I,j,D=n.constructor,$=n.s==i.s?1:-1,M=n.d,U=i.d;if(!n.s)return new D(n);if(!i.s)throw Error(Yn+"Division by zero");for(u=n.e-i.e,I=U.length,V=M.length,w=new D($),b=w.d=[],d=0;U[d]==(M[d]||0);)++d;if(U[d]>(M[d]||0)&&--u,a==null?k=a=D.precision:o?k=a+(Qt(n)-Qt(i))+1:k=a,k<0)return new D(0);if(k=k/xt+2|0,d=0,I==1)for(m=0,U=U[0],k++;(d<V||m)&&k--;d++)C=m*hr+(M[d]||0),b[d]=C/U|0,m=C%U|0;else{for(m=hr/(U[0]+1)|0,m>1&&(U=t(U,m),M=t(M,m),I=U.length,V=M.length),R=I,E=M.slice(0,I),S=E.length;S<I;)E[S++]=0;j=U.slice(),j.unshift(0),B=U[0],U[1]>=hr/2&&++B;do m=0,c=e(U,E,I,S),c<0?(P=E[0],I!=S&&(P=P*hr+(E[1]||0)),m=P/B|0,m>1?(m>=hr&&(m=hr-1),p=t(U,m),v=p.length,S=E.length,c=e(p,E,v,S),c==1&&(m--,r(p,I<v?j:U,v))):(m==0&&(c=m=1),p=U.slice()),v=p.length,v<S&&p.unshift(0),r(E,p,S),c==-1&&(S=E.length,c=e(U,E,I,S),c<1&&(m++,r(E,I<S?j:U,S))),S=E.length):c===0&&(m++,E=[0]),b[d++]=m,c&&E[0]?E[S++]=M[R]||0:(E=[M[R]],S=1);while((R++<V||E[0]!==void 0)&&k--)}return b[0]||b.shift(),w.e=u,ut(w,o?a+Qt(w)+1:a)}}();function ND(t,e){var r,n,i,a,o,c,u=0,d=0,m=t.constructor,p=m.precision;if(Qt(t)>16)throw Error(l1+Qt(t));if(!t.s)return new m(En);for(At=!1,c=p,o=new m(.03125);t.abs().gte(.1);)t=t.times(o),d+=5;for(n=Math.log(Ho(2,d))/Math.LN10*2+5|0,c+=n,r=i=a=new m(En),m.precision=c;;){if(i=ut(i.times(t),c),r=r.times(++u),o=a.plus(Fa(i,r,c)),qi(o.d).slice(0,c)===qi(a.d).slice(0,c)){for(;d--;)a=ut(a.times(a),c);return m.precision=p,e==null?(At=!0,ut(a,p)):a}a=o}}function Qt(t){for(var e=t.e*xt,r=t.d[0];r>=10;r/=10)e++;return e}function Ex(t,e,r){if(e>t.LN10.sd())throw At=!0,r&&(t.precision=r),Error(Yn+"LN10 precision limit exceeded");return ut(new t(t.LN10),e)}function Cs(t){for(var e="";t--;)e+="0";return e}function pf(t,e){var r,n,i,a,o,c,u,d,m,p=1,v=10,w=t,b=w.d,E=w.constructor,S=E.precision;if(w.s<1)throw Error(Yn+(w.s?"NaN":"-Infinity"));if(w.eq(En))return new E(0);if(e==null?(At=!1,d=S):d=e,w.eq(10))return e==null&&(At=!0),Ex(E,d);if(d+=v,E.precision=d,r=qi(b),n=r.charAt(0),a=Qt(w),Math.abs(a)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)w=w.times(t),r=qi(w.d),n=r.charAt(0),p++;a=Qt(w),n>1?(w=new E("0."+r),a++):w=new E(n+"."+r.slice(1))}else return u=Ex(E,d+2,S).times(a+""),w=pf(new E(n+"."+r.slice(1)),d-v).plus(u),E.precision=S,e==null?(At=!0,ut(w,S)):w;for(c=o=w=Fa(w.minus(En),w.plus(En),d),m=ut(w.times(w),d),i=3;;){if(o=ut(o.times(m),d),u=c.plus(Fa(o,new E(i),d)),qi(u.d).slice(0,d)===qi(c.d).slice(0,d))return c=c.times(2),a!==0&&(c=c.plus(Ex(E,d+2,S).times(a+""))),c=Fa(c,new E(p),d),E.precision=S,e==null?(At=!0,ut(c,S)):c;c=u,i+=2}}function QN(t,e){var r,n,i;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(n,i),e){if(i-=n,r=r-n-1,t.e=pu(r/xt),t.d=[],n=(r+1)%xt,r<0&&(n+=xt),n<i){for(n&&t.d.push(+e.slice(0,n)),i-=xt;n<i;)t.d.push(+e.slice(n,n+=xt));e=e.slice(n),n=xt-e.length}else n-=i;for(;n--;)e+="0";if(t.d.push(+e),At&&(t.e>Up||t.e<-Up))throw Error(l1+r)}else t.s=0,t.e=0,t.d=[0];return t}function ut(t,e,r){var n,i,a,o,c,u,d,m,p=t.d;for(o=1,a=p[0];a>=10;a/=10)o++;if(n=e-o,n<0)n+=xt,i=e,d=p[m=0];else{if(m=Math.ceil((n+1)/xt),a=p.length,m>=a)return t;for(d=a=p[m],o=1;a>=10;a/=10)o++;n%=xt,i=n-xt+o}if(r!==void 0&&(a=Ho(10,o-i-1),c=d/a%10|0,u=e<0||p[m+1]!==void 0||d%a,u=r<4?(c||u)&&(r==0||r==(t.s<0?3:2)):c>5||c==5&&(r==4||u||r==6&&(n>0?i>0?d/Ho(10,o-i):0:p[m-1])%10&1||r==(t.s<0?8:7))),e<1||!p[0])return u?(a=Qt(t),p.length=1,e=e-a-1,p[0]=Ho(10,(xt-e%xt)%xt),t.e=pu(-e/xt)||0):(p.length=1,p[0]=t.e=t.s=0),t;if(n==0?(p.length=m,a=1,m--):(p.length=m+1,a=Ho(10,xt-n),p[m]=i>0?(d/Ho(10,o-i)%Ho(10,i)|0)*a:0),u)for(;;)if(m==0){(p[0]+=a)==hr&&(p[0]=1,++t.e);break}else{if(p[m]+=a,p[m]!=hr)break;p[m--]=0,a=1}for(n=p.length;p[--n]===0;)p.pop();if(At&&(t.e>Up||t.e<-Up))throw Error(l1+Qt(t));return t}function CD(t,e){var r,n,i,a,o,c,u,d,m,p,v=t.constructor,w=v.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new v(t),At?ut(e,w):e;if(u=t.d,p=e.d,n=e.e,d=t.e,u=u.slice(),o=d-n,o){for(m=o<0,m?(r=u,o=-o,c=p.length):(r=p,n=d,c=u.length),i=Math.max(Math.ceil(w/xt),c)+2,o>i&&(o=i,r.length=1),r.reverse(),i=o;i--;)r.push(0);r.reverse()}else{for(i=u.length,c=p.length,m=i<c,m&&(c=i),i=0;i<c;i++)if(u[i]!=p[i]){m=u[i]<p[i];break}o=0}for(m&&(r=u,u=p,p=r,e.s=-e.s),c=u.length,i=p.length-c;i>0;--i)u[c++]=0;for(i=p.length;i>o;){if(u[--i]<p[i]){for(a=i;a&&u[--a]===0;)u[a]=hr-1;--u[a],u[i]+=hr}u[i]-=p[i]}for(;u[--c]===0;)u.pop();for(;u[0]===0;u.shift())--n;return u[0]?(e.d=u,e.e=n,At?ut(e,w):e):new v(0)}function yl(t,e,r){var n,i=Qt(t),a=qi(t.d),o=a.length;return e?(r&&(n=r-o)>0?a=a.charAt(0)+"."+a.slice(1)+Cs(n):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+Cs(-i-1)+a,r&&(n=r-o)>0&&(a+=Cs(n))):i>=o?(a+=Cs(i+1-o),r&&(n=r-i-1)>0&&(a=a+"."+Cs(n))):((n=i+1)<o&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-o)>0&&(i+1===o&&(a+="."),a+=Cs(n))),t.s<0?"-"+a:a}function XN(t,e){if(t.length>e)return t.length=e,!0}function kD(t){var e,r,n;function i(a){var o=this;if(!(o instanceof i))return new i(a);if(o.constructor=i,a instanceof i){o.s=a.s,o.e=a.e,o.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(al+a);if(a>0)o.s=1;else if(a<0)a=-a,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(a===~~a&&a<1e7){o.e=0,o.d=[a];return}return QN(o,a.toString())}else if(typeof a!="string")throw Error(al+a);if(a.charCodeAt(0)===45?(a=a.slice(1),o.s=-1):o.s=1,$Y.test(a))QN(o,a);else throw Error(al+a)}if(i.prototype=xe,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=kD,i.config=i.set=UY,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return i.config(t),i}function UY(t){if(!t||typeof t!="object")throw Error(Yn+"Object expected");var e,r,n,i=["precision",1,mu,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((n=t[r=i[e]])!==void 0)if(pu(n)===n&&n>=i[e+1]&&n<=i[e+2])this[r]=n;else throw Error(al+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(al+r+": "+n);return this}var c1=kD(FY);En=new c1(1);const st=c1;var BY=t=>t,jD={},RD=t=>t===jD,JN=t=>function e(){return arguments.length===0||arguments.length===1&&RD(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},OD=(t,e)=>t===1?e:JN(function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=n.filter(o=>o!==jD).length;return a>=t?e(...n):OD(t-a,JN(function(){for(var o=arguments.length,c=new Array(o),u=0;u<o;u++)c[u]=arguments[u];var d=n.map(m=>RD(m)?c.shift():m);return e(...d,...c)}))}),Qg=t=>OD(t.length,t),Kw=(t,e)=>{for(var r=[],n=t;n<e;++n)r[n-t]=n;return r},zY=Qg((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(r=>e[r]).map(t)),qY=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return BY;var i=r.reverse(),a=i[0],o=i.slice(1);return function(){return o.reduce((c,u)=>u(c),a(...arguments))}},Ww=t=>Array.isArray(t)?t.reverse():t.split("").reverse().join(""),DD=t=>{var e=null,r=null;return function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e&&i.every((o,c)=>{var u;return o===((u=e)===null||u===void 0?void 0:u[c])})||(e=i,r=t(...i)),r}};function MD(t){var e;return t===0?e=1:e=Math.floor(new st(t).abs().log(10).toNumber())+1,e}function LD(t,e,r){for(var n=new st(t),i=0,a=[];n.lt(e)&&i<1e5;)a.push(n.toNumber()),n=n.add(r),i++;return a}Qg((t,e,r)=>{var n=+t,i=+e;return n+r*(i-n)});Qg((t,e,r)=>{var n=e-+t;return n=n||1/0,(r-t)/n});Qg((t,e,r)=>{var n=e-+t;return n=n||1/0,Math.max(0,Math.min(1,(r-t)/n))});var VD=t=>{var[e,r]=t,[n,i]=[e,r];return e>r&&([n,i]=[r,e]),[n,i]},FD=(t,e,r)=>{if(t.lte(0))return new st(0);var n=MD(t.toNumber()),i=new st(10).pow(n),a=t.div(i),o=n!==1?.05:.1,c=new st(Math.ceil(a.div(o).toNumber())).add(r).mul(o),u=c.mul(i);return e?new st(u.toNumber()):new st(Math.ceil(u.toNumber()))},KY=(t,e,r)=>{var n=new st(1),i=new st(t);if(!i.isint()&&r){var a=Math.abs(t);a<1?(n=new st(10).pow(MD(t)-1),i=new st(Math.floor(i.div(n).toNumber())).mul(n)):a>1&&(i=new st(Math.floor(t)))}else t===0?i=new st(Math.floor((e-1)/2)):r||(i=new st(Math.floor(t)));var o=Math.floor((e-1)/2),c=qY(zY(u=>i.add(new st(u-o).mul(n)).toNumber()),Kw);return c(0,e)},$D=function(e,r,n,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-e)/(n-1)))return{step:new st(0),tickMin:new st(0),tickMax:new st(0)};var o=FD(new st(r).sub(e).div(n-1),i,a),c;e<=0&&r>=0?c=new st(0):(c=new st(e).add(r).div(2),c=c.sub(new st(c).mod(o)));var u=Math.ceil(c.sub(e).div(o).toNumber()),d=Math.ceil(new st(r).sub(c).div(o).toNumber()),m=u+d+1;return m>n?$D(e,r,n,i,a+1):(m<n&&(d=r>0?d+(n-m):d,u=r>0?u:u+(n-m)),{step:o,tickMin:c.sub(new st(u).mul(o)),tickMax:c.add(new st(d).mul(o))})};function WY(t){var[e,r]=t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(n,2),[o,c]=VD([e,r]);if(o===-1/0||c===1/0){var u=c===1/0?[o,...Kw(0,n-1).map(()=>1/0)]:[...Kw(0,n-1).map(()=>-1/0),c];return e>r?Ww(u):u}if(o===c)return KY(o,n,i);var{step:d,tickMin:m,tickMax:p}=$D(o,c,a,i,0),v=LD(m,p.add(new st(.1).mul(d)),d);return e>r?Ww(v):v}function HY(t,e){var[r,n]=t,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[a,o]=VD([r,n]);if(a===-1/0||o===1/0)return[r,n];if(a===o)return[a];var c=Math.max(e,2),u=FD(new st(o).sub(a).div(c-1),i,0),d=[...LD(new st(a),new st(o),u),o];return i===!1&&(d=d.map(m=>Math.round(m))),r>n?Ww(d):d}var GY=DD(WY),YY=DD(HY),UD=t=>t.rootProps.maxBarSize,QY=t=>t.rootProps.barGap,BD=t=>t.rootProps.barCategoryGap,XY=t=>t.rootProps.barSize,Wf=t=>t.rootProps.stackOffset,u1=t=>t.options.chartName,d1=t=>t.rootProps.syncId,zD=t=>t.rootProps.syncMethod,f1=t=>t.options.eventEmitter,Pa={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},wn={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Xg=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},JY={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Pa.angleAxisId,includeHidden:!1,name:void 0,reversed:Pa.reversed,scale:Pa.scale,tick:Pa.tick,tickCount:void 0,ticks:void 0,type:Pa.type,unit:void 0},ZY={allowDataOverflow:wn.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:wn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:wn.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:wn.scale,tick:wn.tick,tickCount:wn.tickCount,ticks:void 0,type:wn.type,unit:void 0},eQ={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Pa.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Pa.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Pa.scale,tick:Pa.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},tQ={allowDataOverflow:wn.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:wn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:wn.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:wn.scale,tick:wn.tick,tickCount:wn.tickCount,ticks:void 0,type:"category",unit:void 0},h1=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?eQ:JY,m1=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?tQ:ZY,Jg=t=>t.polarOptions,p1=J([Xa,Ja,sr],SO),qD=J([Jg,p1],(t,e)=>{if(t!=null)return Hr(t.innerRadius,e,0)}),KD=J([Jg,p1],(t,e)=>{if(t!=null)return Hr(t.outerRadius,e,e*.8)}),rQ=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:r}=t;return[e,r]},WD=J([Jg],rQ);J([h1,WD],Xg);var HD=J([p1,qD,KD],(t,e,r)=>{if(!(t==null||e==null||r==null))return[e,r]});J([m1,HD],Xg);var nQ=J([nt,Jg,qD,KD,Xa,Ja],(t,e,r,n,i,a)=>{if(!(t!=="centric"&&t!=="radial"||e==null||r==null||n==null)){var{cx:o,cy:c,startAngle:u,endAngle:d}=e;return{cx:Hr(o,i,i/2),cy:Hr(c,a,a/2),innerRadius:r,outerRadius:n,startAngle:u,endAngle:d,clockWise:!1}}}),$t=(t,e)=>e,Hf=(t,e,r)=>r;function ZN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Bp(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ZN(Object(r),!0).forEach(function(n){iQ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ZN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function iQ(t,e,r){return(e=aQ(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function aQ(t){var e=sQ(t,"string");return typeof e=="symbol"?e:e+""}function sQ(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Hw=[0,"auto"],vn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},es=(t,e)=>{var r=t.cartesianAxis.xAxis[e];return r??vn},xn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:Hw,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:$g},ho=(t,e)=>{var r=t.cartesianAxis.yAxis[e];return r??xn},oQ={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},g1=(t,e)=>{var r=t.cartesianAxis.zAxis[e];return r??oQ},Ut=(t,e,r)=>{switch(e){case"xAxis":return es(t,r);case"yAxis":return ho(t,r);case"zAxis":return g1(t,r);case"angleAxis":return h1(t,r);case"radiusAxis":return m1(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},lQ=(t,e,r)=>{switch(e){case"xAxis":return es(t,r);case"yAxis":return ho(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},Gf=(t,e,r)=>{switch(e){case"xAxis":return es(t,r);case"yAxis":return ho(t,r);case"angleAxis":return h1(t,r);case"radiusAxis":return m1(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},GD=t=>t.graphicalItems.countOfBars>0;function y1(t,e){return r=>{switch(t){case"xAxis":return"xAxisId"in r&&r.xAxisId===e;case"yAxis":return"yAxisId"in r&&r.yAxisId===e;case"zAxis":return"zAxisId"in r&&r.zAxisId===e;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===e;default:return!1}}}var Zg=t=>t.graphicalItems.cartesianItems,cQ=J([$t,Hf],y1),v1=(t,e,r)=>t.filter(r).filter(n=>e?.includeHidden===!0?!0:!n.hide),Yf=J([Zg,Ut,cQ],v1),YD=t=>t.filter(e=>e.stackId===void 0),uQ=J([Yf],YD),x1=t=>t.map(e=>e.data).filter(Boolean).flat(1),dQ=J([Yf],x1),w1=(t,e)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:i}=e;return t.length>0?t:r.slice(n,i+1)},ey=J([dQ,o1],w1),b1=(t,e,r)=>e?.dataKey!=null?t.map(n=>({value:_t(n,e.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>t.map(i=>({value:_t(i,n)}))):t.map(n=>({value:n})),ty=J([ey,Ut,Yf],b1);function QD(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function Nl(t){return t.filter(e=>ia(e)||e instanceof Date).map(Number).filter(e=>Tn(e)===!1)}function fQ(t,e,r){return!r||typeof e!="number"||Tn(e)?[]:r.length?Nl(r.flatMap(n=>{var i=_t(t,n.dataKey),a,o;if(Array.isArray(i)?[a,o]=i:a=o=i,!(!Nn(a)||!Nn(o)))return[e-a,e+o]})):[]}var XD=(t,e,r)=>{var n={},i=e.reduce((a,o)=>(o.stackId==null||(a[o.stackId]==null&&(a[o.stackId]=[]),a[o.stackId].push(o)),a),n);return Object.fromEntries(Object.entries(i).map(a=>{var[o,c]=a,u=c.map(d=>d.dataKey);return[o,{stackedData:TK(t,u,r),graphicalItems:c}]}))},Gw=J([ey,Yf,Wf],XD),JD=(t,e,r)=>{var{dataStartIndex:n,dataEndIndex:i}=e;if(r!=="zAxis"){var a=CK(t,n,i);if(!(a!=null&&a[0]===0&&a[1]===0))return a}},hQ=J([Gw,Il,$t],JD),ZD=(t,e,r,n)=>r.length>0?t.flatMap(i=>r.flatMap(a=>{var o,c,u=(o=a.errorBars)===null||o===void 0?void 0:o.filter(m=>QD(n,m)),d=_t(i,(c=e.dataKey)!==null&&c!==void 0?c:a.dataKey);return{value:d,errorDomain:fQ(i,d,u)}})).filter(Boolean):e?.dataKey!=null?t.map(i=>({value:_t(i,e.dataKey),errorDomain:[]})):t.map(i=>({value:i,errorDomain:[]})),mQ=J(ey,Ut,uQ,$t,ZD);function pQ(t){var{value:e}=t;if(ia(e)||e instanceof Date)return e}var gQ=t=>{var e=t.flatMap(n=>[n.value,n.errorDomain]).flat(1),r=Nl(e);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},yQ=(t,e,r)=>{var n=t.map(pQ).filter(i=>i!=null);return r&&(e.dataKey==null||e.allowDuplicatedCategory&&bR(n))?WO(0,t.length):e.allowDuplicatedCategory?n:Array.from(new Set(n))},_1=t=>{var e;if(t==null||!("domain"in t))return Hw;if(t.domain!=null)return t.domain;if(t.ticks!=null){if(t.type==="number"){var r=Nl(t.ticks);return[Math.min(...r),Math.max(...r)]}if(t.type==="category")return t.ticks.map(String)}return(e=t?.domain)!==null&&e!==void 0?e:Hw},E1=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=r.filter(Boolean);if(i.length!==0){var a=i.flat(),o=Math.min(...a),c=Math.max(...a);return[o,c]}},eM=t=>t.referenceElements.dots,gu=(t,e,r)=>t.filter(n=>n.ifOverflow==="extendDomain").filter(n=>e==="xAxis"?n.xAxisId===r:n.yAxisId===r),vQ=J([eM,$t,Hf],gu),tM=t=>t.referenceElements.areas,xQ=J([tM,$t,Hf],gu),rM=t=>t.referenceElements.lines,wQ=J([rM,$t,Hf],gu),nM=(t,e)=>{var r=Nl(t.map(n=>e==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},bQ=J(vQ,$t,nM),iM=(t,e)=>{var r=Nl(t.flatMap(n=>[e==="xAxis"?n.x1:n.y1,e==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},_Q=J([xQ,$t],iM),aM=(t,e)=>{var r=Nl(t.map(n=>e==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},EQ=J(wQ,$t,aM),SQ=J(bQ,EQ,_Q,(t,e,r)=>E1(t,r,e)),sM=J([Ut],_1),S1=(t,e,r,n,i)=>{var a=LY(e,t.allowDataOverflow);return a??VY(e,E1(r,i,gQ(n)),t.allowDataOverflow)},AQ=J([Ut,sM,hQ,mQ,SQ],S1),TQ=[0,1],A1=(t,e,r,n,i,a,o)=>{if(!(t==null||r==null||r.length===0)){var{dataKey:c,type:u}=t,d=co(e,a);return d&&c==null?WO(0,r.length):u==="category"?yQ(n,t,d):i==="expand"?TQ:o}},T1=J([Ut,nt,ey,ty,Wf,$t,AQ],A1),oM=(t,e,r,n,i)=>{if(t!=null){var{scale:a,type:o}=t;if(a==="auto")return e==="radial"&&i==="radiusAxis"?"band":e==="radial"&&i==="angleAxis"?"linear":o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":o==="category"?"band":"linear";if(typeof a=="string"){var c="scale".concat(Ff(a));return c in Rd?c:"point"}}},yu=J([Ut,nt,GD,u1,$t],oM);function PQ(t){if(t!=null){if(t in Rd)return Rd[t]();var e="scale".concat(Ff(t));if(e in Rd)return Rd[e]()}}function P1(t,e,r,n){if(!(r==null||n==null)){if(typeof t.scale=="function")return t.scale.copy().domain(r).range(n);var i=PQ(e);if(i!=null){var a=i.domain(r).range(n);return bK(a),a}}}var I1=(t,e,r)=>{var n=_1(e);if(!(r!=="auto"&&r!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Xc(t))return GY(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&Xc(t))return YY(t,e.tickCount,e.allowDecimals)}},N1=J([T1,Gf,yu],I1),C1=(t,e,r,n)=>{if(n!=="angleAxis"&&t?.type==="number"&&Xc(e)&&Array.isArray(r)&&r.length>0){var i=e[0],a=r[0],o=e[1],c=r[r.length-1];return[Math.min(i,a),Math.max(o,c)]}return e},IQ=J([Ut,T1,N1,$t],C1),NQ=J(ty,Ut,(t,e)=>{if(!(!e||e.type!=="number")){var r=1/0,n=Array.from(Nl(t.map(c=>c.value))).sort((c,u)=>c-u);if(n.length<2)return 1/0;var i=n[n.length-1]-n[0];if(i===0)return 1/0;for(var a=0;a<n.length-1;a++){var o=n[a+1]-n[a];r=Math.min(r,o)}return r/i}}),lM=J(NQ,nt,BD,sr,(t,e,r,n)=>n,(t,e,r,n,i)=>{if(!Nn(t))return 0;var a=e==="vertical"?n.height:n.width;if(i==="gap")return t*a/2;if(i==="no-gap"){var o=Hr(r,t*a),c=t*a/2;return c-o-(c-o)/a*o}return 0}),CQ=(t,e)=>{var r=es(t,e);return r==null||typeof r.padding!="string"?0:lM(t,"xAxis",e,r.padding)},kQ=(t,e)=>{var r=ho(t,e);return r==null||typeof r.padding!="string"?0:lM(t,"yAxis",e,r.padding)},jQ=J(es,CQ,(t,e)=>{var r,n;if(t==null)return{left:0,right:0};var{padding:i}=t;return typeof i=="string"?{left:e,right:e}:{left:((r=i.left)!==null&&r!==void 0?r:0)+e,right:((n=i.right)!==null&&n!==void 0?n:0)+e}}),RQ=J(ho,kQ,(t,e)=>{var r,n;if(t==null)return{top:0,bottom:0};var{padding:i}=t;return typeof i=="string"?{top:e,bottom:e}:{top:((r=i.top)!==null&&r!==void 0?r:0)+e,bottom:((n=i.bottom)!==null&&n!==void 0?n:0)+e}}),OQ=J([sr,jQ,Bg,Ug,(t,e,r)=>r],(t,e,r,n,i)=>{var{padding:a}=n;return i?[a.left,r.width-a.right]:[t.left+e.left,t.left+t.width-e.right]}),DQ=J([sr,nt,RQ,Bg,Ug,(t,e,r)=>r],(t,e,r,n,i,a)=>{var{padding:o}=i;return a?[n.height-o.bottom,o.top]:e==="horizontal"?[t.top+t.height-r.bottom,t.top+r.top]:[t.top+r.top,t.top+t.height-r.bottom]}),Qf=(t,e,r,n)=>{var i;switch(e){case"xAxis":return OQ(t,r,n);case"yAxis":return DQ(t,r,n);case"zAxis":return(i=g1(t,r))===null||i===void 0?void 0:i.range;case"angleAxis":return WD(t);case"radiusAxis":return HD(t,r);default:return}},cM=J([Ut,Qf],Xg),vu=J([Ut,yu,IQ,cM],P1);J(Yf,$t,(t,e)=>t.flatMap(r=>{var n;return(n=r.errorBars)!==null&&n!==void 0?n:[]}).filter(r=>QD(e,r)));function uM(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var ry=(t,e)=>e,ny=(t,e,r)=>r,MQ=J(j_,ry,ny,(t,e,r)=>t.filter(n=>n.orientation===e).filter(n=>n.mirror===r).sort(uM)),LQ=J(R_,ry,ny,(t,e,r)=>t.filter(n=>n.orientation===e).filter(n=>n.mirror===r).sort(uM)),dM=(t,e)=>({width:t.width,height:e.height}),VQ=(t,e)=>{var r=typeof e.width=="number"?e.width:$g;return{width:r,height:t.height}},fM=J(sr,es,dM),FQ=(t,e,r)=>{switch(e){case"top":return t.top;case"bottom":return r-t.bottom;default:return 0}},$Q=(t,e,r)=>{switch(e){case"left":return t.left;case"right":return r-t.right;default:return 0}},UQ=J(Ja,sr,MQ,ry,ny,(t,e,r,n,i)=>{var a={},o;return r.forEach(c=>{var u=dM(e,c);o==null&&(o=FQ(e,n,t));var d=n==="top"&&!i||n==="bottom"&&i;a[c.id]=o-Number(d)*u.height,o+=(d?-1:1)*u.height}),a}),BQ=J(Xa,sr,LQ,ry,ny,(t,e,r,n,i)=>{var a={},o;return r.forEach(c=>{var u=VQ(e,c);o==null&&(o=$Q(e,n,t));var d=n==="left"&&!i||n==="right"&&i;a[c.id]=o-Number(d)*u.width,o+=(d?-1:1)*u.width}),a}),zQ=(t,e)=>{var r=sr(t),n=es(t,e);if(n!=null){var i=UQ(t,n.orientation,n.mirror),a=i[e];return a==null?{x:r.left,y:0}:{x:r.left,y:a}}},qQ=(t,e)=>{var r=sr(t),n=ho(t,e);if(n!=null){var i=BQ(t,n.orientation,n.mirror),a=i[e];return a==null?{x:0,y:r.top}:{x:a,y:r.top}}},hM=J(sr,ho,(t,e)=>{var r=typeof e.width=="number"?e.width:$g;return{width:r,height:t.height}}),eC=(t,e,r)=>{switch(e){case"xAxis":return fM(t,r).width;case"yAxis":return hM(t,r).height;default:return}},mM=(t,e,r,n)=>{if(r!=null){var{allowDuplicatedCategory:i,type:a,dataKey:o}=r,c=co(t,n),u=e.map(d=>d.value);if(o&&c&&a==="category"&&i&&bR(u))return u}},k1=J([nt,ty,Ut,$t],mM),pM=(t,e,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:i,scale:a}=r,o=co(t,n);if(o&&(i==="number"||a!=="auto"))return e.map(c=>c.value)}},j1=J([nt,ty,Gf,$t],pM),tC=J([nt,lQ,yu,vu,k1,j1,Qf,N1,$t],(t,e,r,n,i,a,o,c,u)=>{if(e==null)return null;var d=co(t,u);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:u,categoricalDomain:a,duplicateDomain:i,isCategorical:d,niceTicks:c,range:o,realScaleType:r,scale:n}}),KQ=(t,e,r,n,i,a,o,c,u)=>{if(!(e==null||n==null)){var d=co(t,u),{type:m,ticks:p,tickCount:v}=e,w=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,b=m==="category"&&n.bandwidth?n.bandwidth()/w:0;b=u==="angleAxis"&&a!=null&&a.length>=2?mr(a[0]-a[1])*2*b:b;var E=p||i;if(E){var S=E.map((P,k)=>{var C=o?o.indexOf(P):P;return{index:k,coordinate:n(C)+b,value:P,offset:b}});return S.filter(P=>!Tn(P.coordinate))}return d&&c?c.map((P,k)=>({coordinate:n(P)+b,value:P,index:k,offset:b})):n.ticks?n.ticks(v).map(P=>({coordinate:n(P)+b,value:P,offset:b})):n.domain().map((P,k)=>({coordinate:n(P)+b,value:o?o[P]:P,index:k,offset:b}))}},gM=J([nt,Gf,yu,vu,N1,Qf,k1,j1,$t],KQ),WQ=(t,e,r,n,i,a,o)=>{if(!(e==null||r==null||n==null||n[0]===n[1])){var c=co(t,o),{tickCount:u}=e,d=0;return d=o==="angleAxis"&&n?.length>=2?mr(n[0]-n[1])*2*d:d,c&&a?a.map((m,p)=>({coordinate:r(m)+d,value:m,index:p,offset:d})):r.ticks?r.ticks(u).map(m=>({coordinate:r(m)+d,value:m,offset:d})):r.domain().map((m,p)=>({coordinate:r(m)+d,value:i?i[m]:m,index:p,offset:d}))}},Zs=J([nt,Gf,vu,Qf,k1,j1,$t],WQ),sa=J(Ut,vu,(t,e)=>{if(!(t==null||e==null))return Bp(Bp({},t),{},{scale:e})}),HQ=J([Ut,yu,T1,cM],P1);J((t,e,r)=>g1(t,r),HQ,(t,e)=>{if(!(t==null||e==null))return Bp(Bp({},t),{},{scale:e})});var GQ=J([nt,j_,R_],(t,e,r)=>{switch(t){case"horizontal":return e.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),yM=t=>t.options.defaultTooltipEventType,vM=t=>t.options.validateTooltipEventTypes;function xM(t,e,r){if(t==null)return e;var n=t?"axis":"item";return r==null?e:r.includes(n)?n:e}function R1(t,e){var r=yM(t),n=vM(t);return xM(e,r,n)}function YQ(t){return Se(e=>R1(e,t))}var wM=(t,e)=>{var r,n=Number(e);if(!(Tn(n)||e==null))return n>=0?t==null||(r=t[n])===null||r===void 0?void 0:r.value:void 0},QQ=t=>t.tooltip.settings,Ds={active:!1,index:null,dataKey:void 0,coordinate:void 0},XQ={itemInteraction:{click:Ds,hover:Ds},axisInteraction:{click:Ds,hover:Ds},keyboardInteraction:Ds,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},bM=Xn({name:"tooltip",initialState:XQ,reducers:{addTooltipEntrySettings(t,e){t.tooltipItemPayloads.push(e.payload)},removeTooltipEntrySettings(t,e){var r=Va(t).tooltipItemPayloads.indexOf(e.payload);r>-1&&t.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate,t.keyboardInteraction.dataKey=e.payload.activeDataKey}}}),{addTooltipEntrySettings:JQ,removeTooltipEntrySettings:ZQ,setTooltipSettingsState:eX,setActiveMouseOverItemIndex:_M,mouseLeaveItem:tX,mouseLeaveChart:EM,setActiveClickItemIndex:rX,setMouseOverAxisIndex:SM,setMouseClickAxisIndex:nX,setSyncInteraction:Yw,setKeyboardInteraction:Qw}=bM.actions,iX=bM.reducer;function rC(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function jm(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?rC(Object(r),!0).forEach(function(n){aX(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rC(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function aX(t,e,r){return(e=sX(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function sX(t){var e=oX(t,"string");return typeof e=="symbol"?e:e+""}function oX(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lX(t,e,r){return e==="axis"?r==="click"?t.axisInteraction.click:t.axisInteraction.hover:r==="click"?t.itemInteraction.click:t.itemInteraction.hover}function cX(t){return t.index!=null}var AM=(t,e,r,n)=>{if(e==null)return Ds;var i=lX(t,e,r);if(i==null)return Ds;if(i.active)return i;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var a=t.settings.active===!0;if(cX(i)){if(a)return jm(jm({},i),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return jm(jm({},Ds),{},{coordinate:i.coordinate})},O1=(t,e)=>{var r=t?.index;if(r==null)return null;var n=Number(r);if(!Nn(n))return r;var i=0,a=1/0;return e.length>0&&(a=e.length-1),String(Math.max(i,Math.min(n,a)))},TM=(t,e,r,n,i,a,o,c)=>{if(!(a==null||c==null)){var u=o[0],d=u==null?void 0:c(u.positions,a);if(d!=null)return d;var m=i?.[Number(a)];if(m)switch(r){case"horizontal":return{x:m.coordinate,y:(n.top+e)/2};default:return{x:(n.left+t)/2,y:m.coordinate}}}},PM=(t,e,r,n)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var i;return r==="hover"?i=t.itemInteraction.hover.dataKey:i=t.itemInteraction.click.dataKey,i==null&&n!=null?[t.tooltipItemPayloads[0]]:t.tooltipItemPayloads.filter(a=>{var o;return((o=a.settings)===null||o===void 0?void 0:o.dataKey)===i})},Xf=t=>t.options.tooltipPayloadSearcher,xu=t=>t.tooltip;function nC(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function iC(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?nC(Object(r),!0).forEach(function(n){uX(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nC(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function uX(t,e,r){return(e=dX(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dX(t){var e=fX(t,"string");return typeof e=="symbol"?e:e+""}function fX(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hX(t,e,r){return Array.isArray(t)&&t&&e+r!==0?t.slice(e,r+1):t}function mX(t,e){return t??e}var IM=(t,e,r,n,i,a,o)=>{if(!(e==null||a==null)){var{chartData:c,computedData:u,dataStartIndex:d,dataEndIndex:m}=r,p=[];return t.reduce((v,w)=>{var b,{dataDefinedOnItem:E,settings:S}=w,P=mX(E,c),k=hX(P,d,m),C=(b=S?.dataKey)!==null&&b!==void 0?b:n?.dataKey,R=S?.nameKey,V;if(n!=null&&n.dataKey&&Array.isArray(k)&&!Array.isArray(k[0])&&o==="axis"?V=_R(k,n.dataKey,i):V=a(k,e,u,R),Array.isArray(V))V.forEach(I=>{var j=iC(iC({},S),{},{name:I.name,unit:I.unit,color:void 0,fill:void 0});v.push($I({tooltipEntrySettings:j,dataKey:I.dataKey,payload:I.payload,value:_t(I.payload,I.dataKey),name:I.name}))});else{var B;v.push($I({tooltipEntrySettings:S,dataKey:C,payload:V,value:_t(V,C),name:(B=_t(V,R))!==null&&B!==void 0?B:S?.name}))}return v},p)}},yr=t=>{var e=nt(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},wu=t=>t.tooltip.settings.axisId,Ir=t=>{var e=yr(t),r=wu(t);return Gf(t,e,r)},D1=J([Ir,nt,GD,u1,yr],oM),pX=J([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),gX=J([yr,wu],y1),iy=J([pX,Ir,gX],v1),yX=J([iy],x1),Cl=J([yX,Il],w1),M1=J([Cl,Ir,iy],b1),vX=J([Ir],_1),xX=J([Cl,iy,Wf],XD),wX=J([xX,Il,yr],JD),bX=J([iy],YD),_X=J([Cl,Ir,bX,yr],ZD),EX=J([eM,yr,wu],gu),SX=J([EX,yr],nM),AX=J([tM,yr,wu],gu),TX=J([AX,yr],iM),PX=J([rM,yr,wu],gu),IX=J([PX,yr],aM),NX=J([SX,IX,TX],E1),CX=J([Ir,vX,wX,_X,NX],S1),NM=J([Ir,nt,Cl,M1,Wf,yr,CX],A1),kX=J([NM,Ir,D1],I1),jX=J([Ir,NM,kX,yr],C1),CM=t=>{var e=yr(t),r=wu(t),n=!1;return Qf(t,e,r,n)},kM=J([Ir,CM],Xg),jM=J([Ir,D1,jX,kM],P1),RX=J([nt,M1,Ir,yr],mM),OX=J([nt,M1,Ir,yr],pM),DX=(t,e,r,n,i,a,o,c)=>{if(e){var{type:u}=e,d=co(t,c);if(n){var m=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,p=u==="category"&&n.bandwidth?n.bandwidth()/m:0;return p=c==="angleAxis"&&i!=null&&i?.length>=2?mr(i[0]-i[1])*2*p:p,d&&o?o.map((v,w)=>({coordinate:n(v)+p,value:v,index:w,offset:p})):n.domain().map((v,w)=>({coordinate:n(v)+p,value:a?a[v]:v,index:w,offset:p}))}}},ts=J([nt,Ir,D1,jM,CM,RX,OX,yr],DX),L1=J([yM,vM,QQ],(t,e,r)=>xM(r.shared,t,e)),RM=t=>t.tooltip.settings.trigger,V1=t=>t.tooltip.settings.defaultIndex,ay=J([xu,L1,RM,V1],AM),eo=J([ay,Cl],O1),OM=J([ts,eo],wM),DM=J([ay],t=>{if(t)return t.dataKey}),MM=J([xu,L1,RM,V1],PM),MX=J([Xa,Ja,nt,sr,ts,V1,MM,Xf],TM),LX=J([ay,MX],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),VX=J([ay],t=>t.active),FX=J([MM,eo,Il,Ir,OM,Xf,L1],IM),$X=J([FX],t=>{if(t!=null){var e=t.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(e))}});function aC(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function sC(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?aC(Object(r),!0).forEach(function(n){UX(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):aC(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function UX(t,e,r){return(e=BX(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function BX(t){var e=zX(t,"string");return typeof e=="symbol"?e:e+""}function zX(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qX=()=>Se(Ir),KX=()=>{var t=qX(),e=Se(ts),r=Se(jM);return cf(sC(sC({},t),{},{scale:r}),e)},WX=()=>Se(u1),F1=(t,e)=>e,LM=(t,e,r)=>r,$1=(t,e,r,n)=>n,HX=J(ts,t=>Rg(t,e=>e.coordinate)),U1=J([xu,F1,LM,$1],AM),VM=J([U1,Cl],O1),GX=(t,e,r)=>{if(e!=null){var n=xu(t);return e==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},FM=J([xu,F1,LM,$1],PM),zp=J([Xa,Ja,nt,sr,ts,$1,FM,Xf],TM),YX=J([U1,zp],(t,e)=>{var r;return(r=t.coordinate)!==null&&r!==void 0?r:e}),$M=J(ts,VM,wM),QX=J([FM,VM,Il,Ir,$M,Xf,F1],IM),XX=J([U1],t=>({isActive:t.active,activeIndex:t.index})),JX=(t,e,r,n,i,a,o,c)=>{if(!(!t||!e||!n||!i||!a)){var u=kK(t.chartX,t.chartY,e,r,c);if(u){var d=RK(u,e),m=xK(d,o,a,n,i),p=jK(e,a,m,u);return{activeIndex:String(m),activeCoordinate:p}}}};function Xw(){return Xw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Xw.apply(null,arguments)}function oC(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Rm(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?oC(Object(r),!0).forEach(function(n){ZX(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):oC(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ZX(t,e,r){return(e=eJ(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function eJ(t){var e=tJ(t,"string");return typeof e=="symbol"?e:e+""}function tJ(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rJ(t){var{coordinate:e,payload:r,index:n,offset:i,tooltipAxisBandSize:a,layout:o,cursor:c,tooltipEventType:u,chartName:d}=t,m=e,p=r,v=n;if(!c||!m||d!=="ScatterChart"&&u!=="axis")return null;var w,b;if(d==="ScatterChart")w=m,b=gW;else if(d==="BarChart")w=yW(o,m,i,a),b=BO;else if(o==="radial"){var{cx:E,cy:S,radius:P,startAngle:k,endAngle:C}=zO(m);w={cx:E,cy:S,startAngle:k,endAngle:C,innerRadius:P,outerRadius:P},b=KO}else w={points:nH(o,m,i)},b=D_;var R=typeof c=="object"&&"className"in c?c.className:void 0,V=Rm(Rm(Rm(Rm({stroke:"#ccc",pointerEvents:"none"},i),w),He(c,!1)),{},{payload:p,payloadIndex:v,className:et("recharts-tooltip-cursor",R)});return _.isValidElement(c)?_.cloneElement(c,V):_.createElement(b,V)}function nJ(t){var e=KX(),r=jO(),n=zg(),i=WX();return _.createElement(rJ,Xw({},t,{coordinate:t.coordinate,index:t.index,payload:t.payload,offset:r,layout:n,tooltipAxisBandSize:e,chartName:i}))}var UM=_.createContext(null),iJ=()=>_.useContext(UM),Sx={exports:{}},lC;function aJ(){return lC||(lC=1,function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(u,d,m){this.fn=u,this.context=d,this.once=m||!1}function a(u,d,m,p,v){if(typeof m!="function")throw new TypeError("The listener must be a function");var w=new i(m,p||u,v),b=r?r+d:d;return u._events[b]?u._events[b].fn?u._events[b]=[u._events[b],w]:u._events[b].push(w):(u._events[b]=w,u._eventsCount++),u}function o(u,d){--u._eventsCount===0?u._events=new n:delete u._events[d]}function c(){this._events=new n,this._eventsCount=0}c.prototype.eventNames=function(){var d=[],m,p;if(this._eventsCount===0)return d;for(p in m=this._events)e.call(m,p)&&d.push(r?p.slice(1):p);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(m)):d},c.prototype.listeners=function(d){var m=r?r+d:d,p=this._events[m];if(!p)return[];if(p.fn)return[p.fn];for(var v=0,w=p.length,b=new Array(w);v<w;v++)b[v]=p[v].fn;return b},c.prototype.listenerCount=function(d){var m=r?r+d:d,p=this._events[m];return p?p.fn?1:p.length:0},c.prototype.emit=function(d,m,p,v,w,b){var E=r?r+d:d;if(!this._events[E])return!1;var S=this._events[E],P=arguments.length,k,C;if(S.fn){switch(S.once&&this.removeListener(d,S.fn,void 0,!0),P){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,m),!0;case 3:return S.fn.call(S.context,m,p),!0;case 4:return S.fn.call(S.context,m,p,v),!0;case 5:return S.fn.call(S.context,m,p,v,w),!0;case 6:return S.fn.call(S.context,m,p,v,w,b),!0}for(C=1,k=new Array(P-1);C<P;C++)k[C-1]=arguments[C];S.fn.apply(S.context,k)}else{var R=S.length,V;for(C=0;C<R;C++)switch(S[C].once&&this.removeListener(d,S[C].fn,void 0,!0),P){case 1:S[C].fn.call(S[C].context);break;case 2:S[C].fn.call(S[C].context,m);break;case 3:S[C].fn.call(S[C].context,m,p);break;case 4:S[C].fn.call(S[C].context,m,p,v);break;default:if(!k)for(V=1,k=new Array(P-1);V<P;V++)k[V-1]=arguments[V];S[C].fn.apply(S[C].context,k)}}return!0},c.prototype.on=function(d,m,p){return a(this,d,m,p,!1)},c.prototype.once=function(d,m,p){return a(this,d,m,p,!0)},c.prototype.removeListener=function(d,m,p,v){var w=r?r+d:d;if(!this._events[w])return this;if(!m)return o(this,w),this;var b=this._events[w];if(b.fn)b.fn===m&&(!v||b.once)&&(!p||b.context===p)&&o(this,w);else{for(var E=0,S=[],P=b.length;E<P;E++)(b[E].fn!==m||v&&!b[E].once||p&&b[E].context!==p)&&S.push(b[E]);S.length?this._events[w]=S.length===1?S[0]:S:o(this,w)}return this},c.prototype.removeAllListeners=function(d){var m;return d?(m=r?r+d:d,this._events[m]&&o(this,m)):(this._events=new n,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=r,c.EventEmitter=c,t.exports=c}(Sx)),Sx.exports}var sJ=aJ();const oJ=Pi(sJ);var gf=new oJ,Jw="recharts.syncEvent.tooltip",cC="recharts.syncEvent.brush";function B1(t,e){if(e){var r=Number.parseInt(e,10);if(!Tn(r))return t?.[r]}}var lJ={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},BM=Xn({name:"options",initialState:lJ,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),cJ=BM.reducer,{createEventEmitter:uJ}=BM.actions;function dJ(t){return t.tooltip.syncInteraction}var fJ={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},zM=Xn({name:"chartData",initialState:fJ,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:r,endIndex:n}=e.payload;r!=null&&(t.dataStartIndex=r),n!=null&&(t.dataEndIndex=n)}}}),{setChartData:uC,setDataStartEndIndexes:hJ,setComputedData:xae}=zM.actions,mJ=zM.reducer,qM=()=>{};function pJ(){var t=Se(d1),e=Se(f1),r=Dt(),n=Se(zD),i=Se(ts),a=zg(),o=O_(),c=Se(u=>u.rootProps.className);_.useEffect(()=>{if(t==null)return qM;var u=(d,m,p)=>{if(e!==p&&t===d){if(n==="index"){r(m);return}if(i!=null){var v;if(typeof n=="function"){var w={activeTooltipIndex:m.payload.index==null?void 0:Number(m.payload.index),isTooltipActive:m.payload.active,activeIndex:m.payload.index==null?void 0:Number(m.payload.index),activeLabel:m.payload.label,activeDataKey:m.payload.dataKey,activeCoordinate:m.payload.coordinate},b=n(i,w);v=i[b]}else n==="value"&&(v=i.find(B=>String(B.value)===m.payload.label));var{coordinate:E}=m.payload;if(v==null||m.payload.active===!1||E==null||o==null){r(Yw({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:S,y:P}=E,k=Math.min(S,o.x+o.width),C=Math.min(P,o.y+o.height),R={x:a==="horizontal"?v.coordinate:k,y:a==="horizontal"?C:v.coordinate},V=Yw({active:m.payload.active,coordinate:R,dataKey:m.payload.dataKey,index:String(v.index),label:m.payload.label});r(V)}}};return gf.on(Jw,u),()=>{gf.off(Jw,u)}},[c,r,e,t,n,i,a,o])}function gJ(){var t=Se(d1),e=Se(f1),r=Dt();_.useEffect(()=>{if(t==null)return qM;var n=(i,a,o)=>{e!==o&&t===i&&r(hJ(a))};return gf.on(cC,n),()=>{gf.off(cC,n)}},[r,e,t])}function yJ(){var t=Dt();_.useEffect(()=>{t(uJ())},[t]),pJ(),gJ()}function vJ(t,e,r,n,i,a){var o=Se(v=>GX(v,t,e)),c=Se(f1),u=Se(d1),d=Se(zD),m=Se(dJ),p=m?.active;_.useEffect(()=>{if(!p&&u!=null&&c!=null){var v=Yw({active:a,coordinate:r,dataKey:o,index:i,label:typeof n=="number"?String(n):n});gf.emit(Jw,u,v,c)}},[p,r,o,i,n,c,u,d,a])}function dC(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function fC(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?dC(Object(r),!0).forEach(function(n){xJ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dC(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function xJ(t,e,r){return(e=wJ(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wJ(t){var e=bJ(t,"string");return typeof e=="symbol"?e:e+""}function bJ(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _J(t){return t.dataKey}function EJ(t,e){return _.isValidElement(t)?_.cloneElement(t,e):typeof t=="function"?_.createElement(t,e):_.createElement(GK,e)}var hC=[],SJ={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Al.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function sl(t){var e=Jn(t,SJ),{active:r,allowEscapeViewBox:n,animationDuration:i,animationEasing:a,content:o,filterNull:c,isAnimationActive:u,offset:d,payloadUniqBy:m,position:p,reverseDirection:v,useTranslate3d:w,wrapperStyle:b,cursor:E,shared:S,trigger:P,defaultIndex:k,portal:C,axisId:R}=e,V=Dt(),B=typeof k=="number"?String(k):k;_.useEffect(()=>{V(eX({shared:S,trigger:P,axisId:R,active:r,defaultIndex:B}))},[V,S,P,R,r,B]);var I=O_(),j=VO(),D=YQ(S),{activeIndex:$,isActive:M}=Se(Ce=>XX(Ce,D,P,B)),U=Se(Ce=>QX(Ce,D,P,B)),F=Se(Ce=>$M(Ce,D,P,B)),me=Se(Ce=>YX(Ce,D,P,B)),Pe=U,De=iJ(),pe=r??M,[ie,fe]=cq([Pe,pe]),ue=D==="axis"?F:void 0;vJ(D,P,me,ue,$,pe);var W=C??De;if(W==null)return null;var Y=Pe??hC;pe||(Y=hC),c&&Y.length&&(Y=D7(Pe.filter(Ce=>Ce.value!=null&&(Ce.hide!==!0||e.includeHidden)),m,_J));var he=Y.length>0,Re=_.createElement(tW,{allowEscapeViewBox:n,animationDuration:i,animationEasing:a,isAnimationActive:u,active:pe,coordinate:me,hasPayload:he,offset:d,position:p,reverseDirection:v,useTranslate3d:w,viewBox:I,wrapperStyle:b,lastBoundingBox:ie,innerRef:fe,hasPortalFromProps:!!C},EJ(o,fC(fC({},e),{},{payload:Y,label:ue,active:pe,coordinate:me,accessibilityLayer:j})));return _.createElement(_.Fragment,null,O6.createPortal(Re,W),pe&&_.createElement(nJ,{cursor:E,tooltipEventType:D,coordinate:me,payload:Pe,index:$}))}var Ax={},Tx={},mC;function AJ(){return mC||(mC=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n=0,i={}){typeof i!="object"&&(i={});let a=null,o=null,c=null,u=0,d=null,m;const{leading:p=!1,trailing:v=!0,maxWait:w}=i,b="maxWait"in i,E=b?Math.max(Number(w)||0,n):0,S=I=>(a!==null&&(m=r.apply(o,a)),a=o=null,u=I,m),P=I=>(u=I,d=setTimeout(V,n),p&&a!==null?S(I):m),k=I=>(d=null,v&&a!==null?S(I):m),C=I=>{if(c===null)return!0;const j=I-c,D=j>=n||j<0,$=b&&I-u>=E;return D||$},R=I=>{const j=c===null?0:I-c,D=n-j,$=E-(I-u);return b?Math.min(D,$):D},V=()=>{const I=Date.now();if(C(I))return k(I);d=setTimeout(V,R(I))},B=function(...I){const j=Date.now(),D=C(j);if(a=I,o=this,c=j,D){if(d===null)return P(j);if(b)return clearTimeout(d),d=setTimeout(V,n),S(j)}return d===null&&(d=setTimeout(V,n)),m};return B.cancel=()=>{d!==null&&clearTimeout(d),u=0,c=a=o=d=null},B.flush=()=>d===null?m:k(Date.now()),B}t.debounce=e}(Tx)),Tx}var pC;function TJ(){return pC||(pC=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=AJ();function r(n,i=0,a={}){const{leading:o=!0,trailing:c=!0}=a;return e.debounce(n,i,{leading:o,maxWait:i,trailing:c})}t.throttle=r}(Ax)),Ax}var Px,gC;function PJ(){return gC||(gC=1,Px=TJ().throttle),Px}var IJ=PJ();const NJ=Pi(IJ);var $d=function(e,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a]};function yC(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ix(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?yC(Object(r),!0).forEach(function(n){CJ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yC(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function CJ(t,e,r){return(e=kJ(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function kJ(t){var e=jJ(t,"string");return typeof e=="symbol"?e:e+""}function jJ(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ol=_.forwardRef((t,e)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:i="100%",height:a="100%",minWidth:o=0,minHeight:c,maxHeight:u,children:d,debounce:m=0,id:p,className:v,onResize:w,style:b={}}=t,E=_.useRef(null),S=_.useRef();S.current=w,_.useImperativeHandle(e,()=>E.current);var[P,k]=_.useState({containerWidth:n.width,containerHeight:n.height}),C=_.useCallback((V,B)=>{k(I=>{var j=Math.round(V),D=Math.round(B);return I.containerWidth===j&&I.containerHeight===D?I:{containerWidth:j,containerHeight:D}})},[]);_.useEffect(()=>{var V=D=>{var $,{width:M,height:U}=D[0].contentRect;C(M,U),($=S.current)===null||$===void 0||$.call(S,M,U)};m>0&&(V=NJ(V,m,{trailing:!0,leading:!1}));var B=new ResizeObserver(V),{width:I,height:j}=E.current.getBoundingClientRect();return C(I,j),B.observe(E.current),()=>{B.disconnect()}},[C,m]);var R=_.useMemo(()=>{var{containerWidth:V,containerHeight:B}=P;if(V<0||B<0)return null;$d(Qo(i)||Qo(a),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,a),$d(!r||r>0,"The aspect(%s) must be greater than zero.",r);var I=Qo(i)?V:i,j=Qo(a)?B:a;return r&&r>0&&(I?j=I/r:j&&(I=j*r),u&&j>u&&(j=u)),$d(I>0||j>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,I,j,i,a,o,c,r),_.Children.map(d,D=>_.cloneElement(D,{width:I,height:j,style:Ix({width:I,height:j},D.props.style)}))},[r,d,a,u,c,o,P,i]);return _.createElement("div",{id:p?"".concat(p):void 0,className:et("recharts-responsive-container",v),style:Ix(Ix({},b),{},{width:i,height:a,minWidth:o,minHeight:c,maxHeight:u}),ref:E},_.createElement("div",{style:{width:0,height:0,overflow:"visible"}},R))}),bu=t=>null;bu.displayName="Cell";function vC(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Zw(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?vC(Object(r),!0).forEach(function(n){RJ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vC(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function RJ(t,e,r){return(e=OJ(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function OJ(t){var e=DJ(t,"string");return typeof e=="symbol"?e:e+""}function DJ(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _c={widthCache:{},cacheCount:0},MJ=2e3,LJ={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},xC="recharts_measurement_span";function VJ(t){var e=Zw({},t);return Object.keys(e).forEach(r=>{e[r]||delete e[r]}),e}var Ud=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Al.isSsr)return{width:0,height:0};var n=VJ(r),i=JSON.stringify({text:e,copyStyle:n});if(_c.widthCache[i])return _c.widthCache[i];try{var a=document.getElementById(xC);a||(a=document.createElement("span"),a.setAttribute("id",xC),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var o=Zw(Zw({},LJ),n);Object.assign(a.style,o),a.textContent="".concat(e);var c=a.getBoundingClientRect(),u={width:c.width,height:c.height};return _c.widthCache[i]=u,++_c.cacheCount>MJ&&(_c.cacheCount=0,_c.widthCache={}),u}catch{return{width:0,height:0}}},wC=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,bC=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,FJ=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,$J=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,KM={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},UJ=Object.keys(KM),Ic="NaN";function BJ(t,e){return t*KM[e]}class nn{static parse(e){var r,[,n,i]=(r=$J.exec(e))!==null&&r!==void 0?r:[];return new nn(parseFloat(n),i??"")}constructor(e,r){this.num=e,this.unit=r,this.num=e,this.unit=r,Tn(e)&&(this.unit=""),r!==""&&!FJ.test(r)&&(this.num=NaN,this.unit=""),UJ.includes(r)&&(this.num=BJ(e,r),this.unit="px")}add(e){return this.unit!==e.unit?new nn(NaN,""):new nn(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new nn(NaN,""):new nn(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new nn(NaN,""):new nn(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new nn(NaN,""):new nn(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Tn(this.num)}}function WM(t){if(t.includes(Ic))return Ic;for(var e=t;e.includes("*")||e.includes("/");){var r,[,n,i,a]=(r=wC.exec(e))!==null&&r!==void 0?r:[],o=nn.parse(n??""),c=nn.parse(a??""),u=i==="*"?o.multiply(c):o.divide(c);if(u.isNaN())return Ic;e=e.replace(wC,u.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var d,[,m,p,v]=(d=bC.exec(e))!==null&&d!==void 0?d:[],w=nn.parse(m??""),b=nn.parse(v??""),E=p==="+"?w.add(b):w.subtract(b);if(E.isNaN())return Ic;e=e.replace(bC,E.toString())}return e}var _C=/\(([^()]*)\)/;function zJ(t){for(var e=t,r;(r=_C.exec(e))!=null;){var[,n]=r;e=e.replace(_C,WM(n))}return e}function qJ(t){var e=t.replace(/\s+/g,"");return e=zJ(e),e=WM(e),e}function KJ(t){try{return qJ(t)}catch{return Ic}}function Nx(t){var e=KJ(t.slice(5,-1));return e===Ic?"":e}var WJ=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],HJ=["dx","dy","angle","className","breakAll"];function eb(){return eb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},eb.apply(null,arguments)}function EC(t,e){if(t==null)return{};var r,n,i=GJ(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function GJ(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var HM=/[ \f\n\r\t\v\u2028\u2029]+/,GM=t=>{var{children:e,breakAll:r,style:n}=t;try{var i=[];dt(e)||(r?i=e.toString().split(""):i=e.toString().split(HM));var a=i.map(c=>({word:c,width:Ud(c,n).width})),o=r?0:Ud(" ",n).width;return{wordsWithComputedWidth:a,spaceWidth:o}}catch{return null}},YJ=(t,e,r,n,i)=>{var{maxLines:a,children:o,style:c,breakAll:u}=t,d=we(a),m=o,p=function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return M.reduce((U,F)=>{var{word:me,width:Pe}=F,De=U[U.length-1];if(De&&(n==null||i||De.width+Pe+r<Number(n)))De.words.push(me),De.width+=Pe+r;else{var pe={words:[me],width:Pe};U.push(pe)}return U},[])},v=p(e),w=$=>$.reduce((M,U)=>M.width>U.width?M:U);if(!d||i)return v;var b=v.length>a||w(v).width>Number(n);if(!b)return v;for(var E="…",S=$=>{var M=m.slice(0,$),U=GM({breakAll:u,style:c,children:M+E}).wordsWithComputedWidth,F=p(U),me=F.length>a||w(F).width>Number(n);return[me,F]},P=0,k=m.length-1,C=0,R;P<=k&&C<=m.length-1;){var V=Math.floor((P+k)/2),B=V-1,[I,j]=S(B),[D]=S(V);if(!I&&!D&&(P=V+1),I&&D&&(k=V-1),!I&&D){R=j;break}C++}return R||v},SC=t=>{var e=dt(t)?[]:t.toString().split(HM);return[{words:e}]},QJ=t=>{var{width:e,scaleToFit:r,children:n,style:i,breakAll:a,maxLines:o}=t;if((e||r)&&!Al.isSsr){var c,u,d=GM({breakAll:a,children:n,style:i});if(d){var{wordsWithComputedWidth:m,spaceWidth:p}=d;c=m,u=p}else return SC(n);return YJ({breakAll:a,children:n,maxLines:o,style:i},c,u,e,r)}return SC(n)},AC="#808080",sy=_.forwardRef((t,e)=>{var{x:r=0,y:n=0,lineHeight:i="1em",capHeight:a="0.71em",scaleToFit:o=!1,textAnchor:c="start",verticalAnchor:u="end",fill:d=AC}=t,m=EC(t,WJ),p=_.useMemo(()=>QJ({breakAll:m.breakAll,children:m.children,maxLines:m.maxLines,scaleToFit:o,style:m.style,width:m.width}),[m.breakAll,m.children,m.maxLines,o,m.style,m.width]),{dx:v,dy:w,angle:b,className:E,breakAll:S}=m,P=EC(m,HJ);if(!ia(r)||!ia(n))return null;var k=r+(we(v)?v:0),C=n+(we(w)?w:0),R;switch(u){case"start":R=Nx("calc(".concat(a,")"));break;case"middle":R=Nx("calc(".concat((p.length-1)/2," * -").concat(i," + (").concat(a," / 2))"));break;default:R=Nx("calc(".concat(p.length-1," * -").concat(i,")"));break}var V=[];if(o){var B=p[0].width,{width:I}=m;V.push("scale(".concat(we(I)?I/B:1,")"))}return b&&V.push("rotate(".concat(b,", ").concat(k,", ").concat(C,")")),V.length&&(P.transform=V.join(" ")),_.createElement("text",eb({},He(P,!0),{ref:e,x:k,y:C,className:et("recharts-text",E),textAnchor:c,fill:d.includes("url")?AC:d}),p.map((j,D)=>{var $=j.words.join(S?"":" ");return _.createElement("tspan",{x:k,dy:D===0?R:i,key:"".concat($,"-").concat(D)},$)}))});sy.displayName="Text";var XJ=["offset"],JJ=["labelRef"];function TC(t,e){if(t==null)return{};var r,n,i=ZJ(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function ZJ(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function PC(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Kt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?PC(Object(r),!0).forEach(function(n){eZ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):PC(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function eZ(t,e,r){return(e=tZ(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function tZ(t){var e=rZ(t,"string");return typeof e=="symbol"?e:e+""}function rZ(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ia(){return Ia=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ia.apply(null,arguments)}var nZ=t=>{var{value:e,formatter:r}=t,n=dt(t.children)?e:t.children;return typeof r=="function"?r(n):n},z1=t=>t!=null&&typeof t=="function",iZ=(t,e)=>{var r=mr(e-t),n=Math.min(Math.abs(e-t),360);return r*n},aZ=(t,e,r)=>{var{position:n,viewBox:i,offset:a,className:o}=t,{cx:c,cy:u,innerRadius:d,outerRadius:m,startAngle:p,endAngle:v,clockWise:w}=i,b=(d+m)/2,E=iZ(p,v),S=E>=0?1:-1,P,k;n==="insideStart"?(P=p+S*a,k=w):n==="insideEnd"?(P=v-S*a,k=!w):n==="end"&&(P=v+S*a,k=w),k=E<=0?k:!k;var C=Yt(c,u,b,P),R=Yt(c,u,b,P+(k?1:-1)*359),V="M".concat(C.x,",").concat(C.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(k?0:1,`,
    `).concat(R.x,",").concat(R.y),B=dt(t.id)?ml("recharts-radial-line-"):t.id;return _.createElement("text",Ia({},r,{dominantBaseline:"central",className:et("recharts-radial-bar-label",o)}),_.createElement("defs",null,_.createElement("path",{id:B,d:V})),_.createElement("textPath",{xlinkHref:"#".concat(B)},e))},sZ=t=>{var{viewBox:e,offset:r,position:n}=t,{cx:i,cy:a,innerRadius:o,outerRadius:c,startAngle:u,endAngle:d}=e,m=(u+d)/2;if(n==="outside"){var{x:p,y:v}=Yt(i,a,c+r,m);return{x:p,y:v,textAnchor:p>=i?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:i,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:i,y:a,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:i,y:a,textAnchor:"middle",verticalAnchor:"end"};var w=(o+c)/2,{x:b,y:E}=Yt(i,a,w,m);return{x:b,y:E,textAnchor:"middle",verticalAnchor:"middle"}},oZ=(t,e)=>{var{parentViewBox:r,offset:n,position:i}=t,{x:a,y:o,width:c,height:u}=e,d=u>=0?1:-1,m=d*n,p=d>0?"end":"start",v=d>0?"start":"end",w=c>=0?1:-1,b=w*n,E=w>0?"end":"start",S=w>0?"start":"end";if(i==="top"){var P={x:a+c/2,y:o-d*n,textAnchor:"middle",verticalAnchor:p};return Kt(Kt({},P),r?{height:Math.max(o-r.y,0),width:c}:{})}if(i==="bottom"){var k={x:a+c/2,y:o+u+m,textAnchor:"middle",verticalAnchor:v};return Kt(Kt({},k),r?{height:Math.max(r.y+r.height-(o+u),0),width:c}:{})}if(i==="left"){var C={x:a-b,y:o+u/2,textAnchor:E,verticalAnchor:"middle"};return Kt(Kt({},C),r?{width:Math.max(C.x-r.x,0),height:u}:{})}if(i==="right"){var R={x:a+c+b,y:o+u/2,textAnchor:S,verticalAnchor:"middle"};return Kt(Kt({},R),r?{width:Math.max(r.x+r.width-R.x,0),height:u}:{})}var V=r?{width:c,height:u}:{};return i==="insideLeft"?Kt({x:a+b,y:o+u/2,textAnchor:S,verticalAnchor:"middle"},V):i==="insideRight"?Kt({x:a+c-b,y:o+u/2,textAnchor:E,verticalAnchor:"middle"},V):i==="insideTop"?Kt({x:a+c/2,y:o+m,textAnchor:"middle",verticalAnchor:v},V):i==="insideBottom"?Kt({x:a+c/2,y:o+u-m,textAnchor:"middle",verticalAnchor:p},V):i==="insideTopLeft"?Kt({x:a+b,y:o+m,textAnchor:S,verticalAnchor:v},V):i==="insideTopRight"?Kt({x:a+c-b,y:o+m,textAnchor:E,verticalAnchor:v},V):i==="insideBottomLeft"?Kt({x:a+b,y:o+u-m,textAnchor:S,verticalAnchor:p},V):i==="insideBottomRight"?Kt({x:a+c-b,y:o+u-m,textAnchor:E,verticalAnchor:p},V):i&&typeof i=="object"&&(we(i.x)||Qo(i.x))&&(we(i.y)||Qo(i.y))?Kt({x:a+Hr(i.x,c),y:o+Hr(i.y,u),textAnchor:"end",verticalAnchor:"end"},V):Kt({x:a+c/2,y:o+u/2,textAnchor:"middle",verticalAnchor:"middle"},V)},lZ=t=>"cx"in t&&we(t.cx);function _n(t){var{offset:e=5}=t,r=TC(t,XJ),n=Kt({offset:e},r),{viewBox:i,position:a,value:o,children:c,content:u,className:d="",textBreakAll:m,labelRef:p}=n,v=O_(),w=i||v;if(!w||dt(o)&&dt(c)&&!_.isValidElement(u)&&typeof u!="function")return null;if(_.isValidElement(u)){var{labelRef:b}=n,E=TC(n,JJ);return _.cloneElement(u,E)}var S;if(typeof u=="function"){if(S=_.createElement(u,n),_.isValidElement(S))return S}else S=nZ(n);var P=lZ(w),k=He(n,!0);if(P&&(a==="insideStart"||a==="insideEnd"||a==="end"))return aZ(n,S,k);var C=P?sZ(n):oZ(n,w);return _.createElement(sy,Ia({ref:p,className:et("recharts-label",d)},k,C,{breakAll:m}),S)}_n.displayName="Label";var YM=t=>{var{cx:e,cy:r,angle:n,startAngle:i,endAngle:a,r:o,radius:c,innerRadius:u,outerRadius:d,x:m,y:p,top:v,left:w,width:b,height:E,clockWise:S,labelViewBox:P}=t;if(P)return P;if(we(b)&&we(E)){if(we(m)&&we(p))return{x:m,y:p,width:b,height:E};if(we(v)&&we(w))return{x:v,y:w,width:b,height:E}}if(we(m)&&we(p))return{x:m,y:p,width:0,height:0};if(we(e)&&we(r))return{cx:e,cy:r,startAngle:i||n||0,endAngle:a||n||0,innerRadius:u||0,outerRadius:d||c||o||0,clockWise:S};if(t.viewBox)return t.viewBox},cZ=(t,e,r)=>{if(!t)return null;var n={viewBox:e,labelRef:r};return t===!0?_.createElement(_n,Ia({key:"label-implicit"},n)):ia(t)?_.createElement(_n,Ia({key:"label-implicit",value:t},n)):_.isValidElement(t)?t.type===_n?_.cloneElement(t,Kt({key:"label-implicit"},n)):_.createElement(_n,Ia({key:"label-implicit",content:t},n)):z1(t)?_.createElement(_n,Ia({key:"label-implicit",content:t},n)):t&&typeof t=="object"?_.createElement(_n,Ia({},t,{key:"label-implicit"},n)):null},uZ=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var{children:i,labelRef:a}=e,o=YM(e),c=$f(i,_n).map((d,m)=>_.cloneElement(d,{viewBox:r||o,key:"label-".concat(m)}));if(!n)return c;var u=cZ(e.label,r||o,a);return[u,...c]};_n.parseViewBox=YM;_n.renderCallByParent=uZ;var Cx={},kx={},IC;function dZ(){return IC||(IC=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r[r.length-1]}t.last=e}(kx)),kx}var jx={},NC;function fZ(){return NC||(NC=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Array.isArray(r)?r:Array.from(r)}t.toArray=e}(jx)),jx}var CC;function hZ(){return CC||(CC=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=dZ(),r=fZ(),n=b_();function i(a){if(n.isArrayLike(a))return e.last(r.toArray(a))}t.last=i}(Cx)),Cx}var Rx,kC;function mZ(){return kC||(kC=1,Rx=hZ().last),Rx}var pZ=mZ();const gZ=Pi(pZ);var yZ=["valueAccessor"],vZ=["data","dataKey","clockWise","id","textBreakAll"];function qp(){return qp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},qp.apply(null,arguments)}function jC(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function RC(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?jC(Object(r),!0).forEach(function(n){xZ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jC(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function xZ(t,e,r){return(e=wZ(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wZ(t){var e=bZ(t,"string");return typeof e=="symbol"?e:e+""}function bZ(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function OC(t,e){if(t==null)return{};var r,n,i=_Z(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function _Z(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var EZ=t=>Array.isArray(t.value)?gZ(t.value):t.value;function zs(t){var{valueAccessor:e=EZ}=t,r=OC(t,yZ),{data:n,dataKey:i,clockWise:a,id:o,textBreakAll:c}=r,u=OC(r,vZ);return!n||!n.length?null:_.createElement(pr,{className:"recharts-label-list"},n.map((d,m)=>{var p=dt(i)?e(d,m):_t(d&&d.payload,i),v=dt(o)?{}:{id:"".concat(o,"-").concat(m)};return _.createElement(_n,qp({},He(d,!0),u,v,{parentViewBox:d.parentViewBox,value:p,textBreakAll:c,viewBox:_n.parseViewBox(dt(a)?d:RC(RC({},d),{},{clockWise:a})),key:"label-".concat(m),index:m}))}))}zs.displayName="LabelList";function SZ(t,e){return t?t===!0?_.createElement(zs,{key:"labelList-implicit",data:e}):_.isValidElement(t)||z1(t)?_.createElement(zs,{key:"labelList-implicit",data:e,content:t}):typeof t=="object"?_.createElement(zs,qp({data:e},t,{key:"labelList-implicit"})):null:null}function AZ(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var{children:n}=t,i=$f(n,zs).map((o,c)=>_.cloneElement(o,{data:e,key:"labelList-".concat(c)}));if(!r)return i;var a=SZ(t.label,e);return[a,...i]}zs.renderCallByParent=AZ;function tb(){return tb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},tb.apply(null,arguments)}var QM=t=>{var{cx:e,cy:r,r:n,className:i}=t,a=et("recharts-dot",i);return e===+e&&r===+r&&n===+n?_.createElement("circle",tb({},He(t,!1),y_(t),{className:a,cx:e,cy:r,r:n})):null},XM=t=>t.graphicalItems.polarItems,TZ=J([$t,Hf],y1),q1=J([XM,Ut,TZ],v1),PZ=J([q1],x1),K1=J([PZ,s1],w1),IZ=J([K1,Ut,q1],b1),NZ=J([K1,Ut,q1],(t,e,r)=>r.length>0?t.flatMap(n=>r.flatMap(i=>{var a,o=_t(n,(a=e.dataKey)!==null&&a!==void 0?a:i.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):e?.dataKey!=null?t.map(n=>({value:_t(n,e.dataKey),errorDomain:[]})):t.map(n=>({value:n,errorDomain:[]}))),DC=()=>{},CZ=J([Ut,sM,DC,NZ,DC],S1),JM=J([Ut,nt,K1,IZ,Wf,$t,CZ],A1),kZ=J([JM,Ut,yu],I1);J([Ut,JM,kZ,$t],C1);var jZ={radiusAxis:{},angleAxis:{}},ZM=Xn({name:"polarAxis",initialState:jZ,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:wae,removeRadiusAxis:bae,addAngleAxis:_ae,removeAngleAxis:Eae}=ZM.actions,RZ=ZM.reducer;function MC(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function LC(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?MC(Object(r),!0).forEach(function(n){OZ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):MC(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function OZ(t,e,r){return(e=DZ(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function DZ(t){var e=MZ(t,"string");return typeof e=="symbol"?e:e+""}function MZ(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var W1=(t,e)=>e,LZ=[],H1=(t,e,r)=>r?.length===0?LZ:r,eL=J([s1,W1,H1],(t,e,r)=>{var{chartData:n}=t,i;if(e?.data!=null&&e.data.length>0?i=e.data:i=n,(!i||!i.length)&&r!=null&&(i=r.map(a=>LC(LC({},e.presentationProps),a.props))),i!=null)return i}),VZ=J([eL,W1,H1],(t,e,r)=>{if(t!=null)return t.map((n,i)=>{var a,o=_t(n,e.nameKey,e.name),c;return r!=null&&(a=r[i])!==null&&a!==void 0&&(a=a.props)!==null&&a!==void 0&&a.fill?c=r[i].props.fill:typeof n=="object"&&n!=null&&"fill"in n?c=n.fill:c=e.fill,{value:fu(o,e.dataKey),color:c,payload:n,type:e.legendType}})}),FZ=J([XM,W1],(t,e)=>{if(t.some(r=>r.type==="pie"&&e.dataKey===r.dataKey&&e.data===r.data))return e}),$Z=J([eL,FZ,H1,sr],(t,e,r,n)=>{if(!(e==null||t==null))return kee({offset:n,pieSettings:e,displayedData:t,cells:r})}),UZ={countOfBars:0,cartesianItems:[],polarItems:[]},tL=Xn({name:"graphicalItems",initialState:UZ,reducers:{addBar(t){t.countOfBars+=1},removeBar(t){t.countOfBars-=1},addCartesianGraphicalItem(t,e){t.cartesianItems.push(e.payload)},replaceCartesianGraphicalItem(t,e){var{prev:r,next:n}=e.payload,i=Va(t).cartesianItems.indexOf(r);i>-1&&(t.cartesianItems[i]=n)},removeCartesianGraphicalItem(t,e){var r=Va(t).cartesianItems.indexOf(e.payload);r>-1&&t.cartesianItems.splice(r,1)},addPolarGraphicalItem(t,e){t.polarItems.push(e.payload)},removePolarGraphicalItem(t,e){var r=Va(t).polarItems.indexOf(e.payload);r>-1&&t.polarItems.splice(r,1)}}}),{addBar:BZ,removeBar:zZ,addCartesianGraphicalItem:qZ,replaceCartesianGraphicalItem:KZ,removeCartesianGraphicalItem:WZ,addPolarGraphicalItem:HZ,removePolarGraphicalItem:GZ}=tL.actions,YZ=tL.reducer;function VC(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function FC(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?VC(Object(r),!0).forEach(function(n){QZ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):VC(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function QZ(t,e,r){return(e=XZ(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function XZ(t){var e=JZ(t,"string");return typeof e=="symbol"?e:e+""}function JZ(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ZZ(t){var e=Dt(),r=_.useRef(null);return _.useEffect(()=>{var n=FC(FC({},t),{},{stackId:PO(t.stackId)});r.current===null?e(qZ(n)):r.current!==n&&e(KZ({prev:r.current,next:n})),r.current=n},[e,t]),_.useEffect(()=>()=>{r.current&&(e(WZ(r.current)),r.current=null)},[e]),null}function eee(t){var e=Dt();return _.useEffect(()=>(e(HZ(t)),()=>{e(GZ(t))}),[e,t]),null}var Ox={},$C;function tee(){return $C||($C=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const i=r[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(r,Symbol.toStringTag)?.writable?!1:r.toString()===`[object ${i}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}t.isPlainObject=e}(Ox)),Ox}var Dx,UC;function ree(){return UC||(UC=1,Dx=tee().isPlainObject),Dx}var nee=ree();const iee=Pi(nee);function Kp(){return Kp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Kp.apply(null,arguments)}var BC=(t,e,r,n,i)=>{var a=r-n,o;return o="M ".concat(t,",").concat(e),o+="L ".concat(t+r,",").concat(e),o+="L ".concat(t+r-a/2,",").concat(e+i),o+="L ".concat(t+r-a/2-n,",").concat(e+i),o+="L ".concat(t,",").concat(e," Z"),o},aee={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},see=t=>{var e=Jn(t,aee),r=_.useRef(),[n,i]=_.useState(-1);_.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var S=r.current.getTotalLength();S&&i(S)}catch{}},[]);var{x:a,y:o,upperWidth:c,lowerWidth:u,height:d,className:m}=e,{animationEasing:p,animationDuration:v,animationBegin:w,isUpdateAnimationActive:b}=e;if(a!==+a||o!==+o||c!==+c||u!==+u||d!==+d||c===0&&u===0||d===0)return null;var E=et("recharts-trapezoid",m);return b?_.createElement(Js,{canBegin:n>0,from:{upperWidth:0,lowerWidth:0,height:d,x:a,y:o},to:{upperWidth:c,lowerWidth:u,height:d,x:a,y:o},duration:v,animationEasing:p,isActive:b},S=>{var{upperWidth:P,lowerWidth:k,height:C,x:R,y:V}=S;return _.createElement(Js,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:v,easing:p},_.createElement("path",Kp({},He(e,!0),{className:E,d:BC(R,V,P,k,C),ref:r})))}):_.createElement("g",null,_.createElement("path",Kp({},He(e,!0),{className:E,d:BC(a,o,c,u,d)})))},oee=["option","shapeType","propTransformer","activeClassName","isActive"];function lee(t,e){if(t==null)return{};var r,n,i=cee(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function cee(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function zC(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Wp(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?zC(Object(r),!0).forEach(function(n){uee(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zC(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function uee(t,e,r){return(e=dee(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dee(t){var e=fee(t,"string");return typeof e=="symbol"?e:e+""}function fee(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hee(t,e){return Wp(Wp({},e),t)}function mee(t,e){return t==="symbols"}function qC(t){var{shapeType:e,elementProps:r}=t;switch(e){case"rectangle":return _.createElement(BO,r);case"trapezoid":return _.createElement(see,r);case"sector":return _.createElement(KO,r);case"symbols":if(mee(e))return _.createElement(zR,r);break;default:return null}}function pee(t){return _.isValidElement(t)?t.props:t}function rL(t){var{option:e,shapeType:r,propTransformer:n=hee,activeClassName:i="recharts-active-shape",isActive:a}=t,o=lee(t,oee),c;if(_.isValidElement(e))c=_.cloneElement(e,Wp(Wp({},o),pee(e)));else if(typeof e=="function")c=e(o);else if(iee(e)&&typeof e!="boolean"){var u=n(e,o);c=_.createElement(qC,{shapeType:r,elementProps:u})}else{var d=o;c=_.createElement(qC,{shapeType:r,elementProps:d})}return a?_.createElement(pr,{className:i},c):c}var G1=(t,e)=>{var r=Dt();return(n,i)=>a=>{t?.(n,i,a),r(_M({activeIndex:String(i),activeDataKey:e,activeCoordinate:n.tooltipPosition}))}},Y1=t=>{var e=Dt();return(r,n)=>i=>{t?.(r,n,i),e(tX())}},Q1=(t,e)=>{var r=Dt();return(n,i)=>a=>{t?.(n,i,a),r(rX({activeIndex:String(i),activeDataKey:e,activeCoordinate:n.tooltipPosition}))}};function X1(t){var{fn:e,args:r}=t,n=Dt(),i=Gr();return _.useEffect(()=>{if(!i){var a=e(r);return n(JQ(a)),()=>{n(ZQ(a))}}},[e,r,n,i]),null}var nL=()=>{};function iL(t){var{legendPayload:e}=t,r=Dt(),n=Gr();return _.useEffect(()=>n?nL:(r(MO(e)),()=>{r(LO(e))}),[r,n,e]),null}function gee(t){var{legendPayload:e}=t,r=Dt(),n=Se(nt);return _.useEffect(()=>n!=="centric"&&n!=="radial"?nL:(r(MO(e)),()=>{r(LO(e))}),[r,n,e]),null}function J1(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=_.useRef(ml(e)),n=_.useRef(t);return n.current!==t&&(r.current=ml(e),n.current=t),r.current}var yee=["onMouseEnter","onClick","onMouseLeave"];function vee(t,e){if(t==null)return{};var r,n,i=xee(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function xee(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function KC(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ot(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?KC(Object(r),!0).forEach(function(n){oy(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):KC(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function oy(t,e,r){return(e=wee(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wee(t){var e=bee(t,"string");return typeof e=="symbol"?e:e+""}function bee(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vl(){return vl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},vl.apply(null,arguments)}function _ee(t){var e=_.useMemo(()=>He(t,!1),[t]),r=_.useMemo(()=>$f(t.children,bu),[t.children]),n=_.useMemo(()=>({name:t.name,nameKey:t.nameKey,tooltipType:t.tooltipType,data:t.data,dataKey:t.dataKey,cx:t.cx,cy:t.cy,startAngle:t.startAngle,endAngle:t.endAngle,minAngle:t.minAngle,paddingAngle:t.paddingAngle,innerRadius:t.innerRadius,outerRadius:t.outerRadius,cornerRadius:t.cornerRadius,legendType:t.legendType,fill:t.fill,presentationProps:e}),[t.cornerRadius,t.cx,t.cy,t.data,t.dataKey,t.endAngle,t.innerRadius,t.minAngle,t.name,t.nameKey,t.outerRadius,t.paddingAngle,t.startAngle,t.tooltipType,t.legendType,t.fill,e]),i=Se(a=>VZ(a,n,r));return _.createElement(gee,{legendPayload:i})}function Eee(t){var{dataKey:e,nameKey:r,sectors:n,stroke:i,strokeWidth:a,fill:o,name:c,hide:u,tooltipType:d}=t;return{dataDefinedOnItem:n?.map(m=>m.tooltipPayload),positions:n?.map(m=>m.tooltipPosition),settings:{stroke:i,strokeWidth:a,fill:o,dataKey:e,nameKey:r,name:fu(c,e),hide:u,type:d,color:o,unit:""}}}var See=(t,e)=>t>e?"start":t<e?"end":"middle",Aee=(t,e,r)=>typeof e=="function"?e(t):Hr(e,r,r*.8),Tee=(t,e,r)=>{var{top:n,left:i,width:a,height:o}=e,c=SO(a,o),u=i+Hr(t.cx,a,a/2),d=n+Hr(t.cy,o,o/2),m=Hr(t.innerRadius,c,0),p=Aee(r,t.outerRadius,c),v=t.maxRadius||Math.sqrt(a*a+o*o)/2;return{cx:u,cy:d,innerRadius:m,outerRadius:p,maxRadius:v}},Pee=(t,e)=>{var r=mr(e-t),n=Math.min(Math.abs(e-t),360);return r*n},Iee=(t,e)=>{if(_.isValidElement(t))return _.cloneElement(t,e);if(typeof t=="function")return t(e);var r=et("recharts-pie-label-line",typeof t!="boolean"?t.className:"");return _.createElement(D_,vl({},e,{type:"linear",className:r}))},Nee=(t,e,r)=>{if(_.isValidElement(t))return _.cloneElement(t,e);var n=r;if(typeof t=="function"&&(n=t(e),_.isValidElement(n)))return n;var i=et("recharts-pie-label-text",typeof t!="boolean"&&typeof t!="function"?t.className:"");return _.createElement(sy,vl({},e,{alignmentBaseline:"middle",className:i}),n)};function Cee(t){var{sectors:e,props:r,showLabels:n}=t,{label:i,labelLine:a,dataKey:o}=r;if(!n||!i||!e)return null;var c=He(r,!1),u=He(i,!1),d=He(a,!1),m=typeof i=="object"&&"offsetRadius"in i&&i.offsetRadius||20,p=e.map((v,w)=>{var b=(v.startAngle+v.endAngle)/2,E=Yt(v.cx,v.cy,v.outerRadius+m,b),S=Ot(Ot(Ot(Ot({},c),v),{},{stroke:"none"},u),{},{index:w,textAnchor:See(E.x,v.cx)},E),P=Ot(Ot(Ot(Ot({},c),v),{},{fill:"none",stroke:v.fill},d),{},{index:w,points:[Yt(v.cx,v.cy,v.outerRadius,b),E],key:"line"});return _.createElement(pr,{key:"label-".concat(v.startAngle,"-").concat(v.endAngle,"-").concat(v.midAngle,"-").concat(w)},a&&Iee(a,P),Nee(i,S,_t(v,o)))});return _.createElement(pr,{className:"recharts-pie-labels"},p)}function aL(t){var{sectors:e,activeShape:r,inactiveShape:n,allOtherPieProps:i,showLabels:a}=t,o=Se(eo),{onMouseEnter:c,onClick:u,onMouseLeave:d}=i,m=vee(i,yee),p=G1(c,i.dataKey),v=Y1(d),w=Q1(u,i.dataKey);return e==null?null:_.createElement(_.Fragment,null,e.map((b,E)=>{if(b?.startAngle===0&&b?.endAngle===0&&e.length!==1)return null;var S=r&&String(E)===o,P=o?n:null,k=S?r:P,C=Ot(Ot({},b),{},{stroke:b.stroke,tabIndex:-1,[NO]:E,[CO]:i.dataKey});return _.createElement(pr,vl({tabIndex:-1,className:"recharts-pie-sector"},Ng(m,b,E),{onMouseEnter:p(b,E),onMouseLeave:v(b,E),onClick:w(b,E),key:"sector-".concat(b?.startAngle,"-").concat(b?.endAngle,"-").concat(b.midAngle,"-").concat(E)}),_.createElement(rL,vl({option:k,isActive:S,shapeType:"sector"},C)))}),_.createElement(Cee,{sectors:e,props:i,showLabels:a}))}function kee(t){var e,{pieSettings:r,displayedData:n,cells:i,offset:a}=t,{cornerRadius:o,startAngle:c,endAngle:u,dataKey:d,nameKey:m,tooltipType:p}=r,v=Math.abs(r.minAngle),w=Pee(c,u),b=Math.abs(w),E=n.length<=1?0:(e=r.paddingAngle)!==null&&e!==void 0?e:0,S=n.filter(B=>_t(B,d,0)!==0).length,P=(b>=360?S:S-1)*E,k=b-S*v-P,C=n.reduce((B,I)=>{var j=_t(I,d,0);return B+(we(j)?j:0)},0),R;if(C>0){var V;R=n.map((B,I)=>{var j=_t(B,d,0),D=_t(B,m,I),$=Tee(r,a,B),M=(we(j)?j:0)/C,U,F=Ot(Ot({},B),i&&i[I]&&i[I].props);I?U=V.endAngle+mr(w)*E*(j!==0?1:0):U=c;var me=U+mr(w)*((j!==0?v:0)+M*k),Pe=(U+me)/2,De=($.innerRadius+$.outerRadius)/2,pe=[{name:D,value:j,payload:F,dataKey:d,type:p}],ie=Yt($.cx,$.cy,De,Pe);return V=Ot(Ot(Ot(Ot({},r.presentationProps),{},{percent:M,cornerRadius:o,name:D,tooltipPayload:pe,midAngle:Pe,middleRadius:De,tooltipPosition:ie},F),$),{},{value:_t(B,d),startAngle:U,endAngle:me,payload:F,paddingAngle:mr(w)*E}),V})}return R}function jee(t){var{props:e,previousSectorsRef:r}=t,{sectors:n,isAnimationActive:i,animationBegin:a,animationDuration:o,animationEasing:c,activeShape:u,inactiveShape:d,onAnimationStart:m,onAnimationEnd:p}=e,v=J1(e,"recharts-pie-"),w=r.current,[b,E]=_.useState(!0),S=_.useCallback(()=>{typeof p=="function"&&p(),E(!1)},[p]),P=_.useCallback(()=>{typeof m=="function"&&m(),E(!0)},[m]);return _.createElement(Js,{begin:a,duration:o,isActive:i,easing:c,from:{t:0},to:{t:1},onAnimationStart:P,onAnimationEnd:S,key:v},k=>{var{t:C}=k,R=[],V=n&&n[0],B=V.startAngle;return n.forEach((I,j)=>{var D=w&&w[j],$=j>0?Xs(I,"paddingAngle",0):0;if(D){var M=bn(D.endAngle-D.startAngle,I.endAngle-I.startAngle),U=Ot(Ot({},I),{},{startAngle:B+$,endAngle:B+M(C)+$});R.push(U),B=U.endAngle}else{var{endAngle:F,startAngle:me}=I,Pe=bn(0,F-me),De=Pe(C),pe=Ot(Ot({},I),{},{startAngle:B+$,endAngle:B+De+$});R.push(pe),B=pe.endAngle}}),r.current=R,_.createElement(pr,null,_.createElement(aL,{sectors:R,activeShape:u,inactiveShape:d,allOtherPieProps:e,showLabels:!b}))})}function Ree(t){var{sectors:e,isAnimationActive:r,activeShape:n,inactiveShape:i}=t,a=_.useRef(null),o=a.current;return r&&e&&e.length&&(!o||o!==e)?_.createElement(jee,{props:t,previousSectorsRef:a}):_.createElement(aL,{sectors:e,activeShape:n,inactiveShape:i,allOtherPieProps:t,showLabels:!0})}function Oee(t){var{hide:e,className:r,rootTabIndex:n}=t,i=et("recharts-pie",r);return e?null:_.createElement(pr,{tabIndex:n,className:i},_.createElement(Ree,t))}var sL={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!Al.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function Dee(t){var e=Jn(t,sL),r=_.useMemo(()=>$f(t.children,bu),[t.children]),n=He(e,!1),i=_.useMemo(()=>({name:e.name,nameKey:e.nameKey,tooltipType:e.tooltipType,data:e.data,dataKey:e.dataKey,cx:e.cx,cy:e.cy,startAngle:e.startAngle,endAngle:e.endAngle,minAngle:e.minAngle,paddingAngle:e.paddingAngle,innerRadius:e.innerRadius,outerRadius:e.outerRadius,cornerRadius:e.cornerRadius,legendType:e.legendType,fill:e.fill,presentationProps:n}),[e.cornerRadius,e.cx,e.cy,e.data,e.dataKey,e.endAngle,e.innerRadius,e.minAngle,e.name,e.nameKey,e.outerRadius,e.paddingAngle,e.startAngle,e.tooltipType,e.legendType,e.fill,n]),a=Se(o=>$Z(o,i,r));return _.createElement(_.Fragment,null,_.createElement(X1,{fn:Eee,args:Ot(Ot({},e),{},{sectors:a})}),_.createElement(Oee,vl({},e,{sectors:a})))}class ly extends _.PureComponent{constructor(){super(...arguments),oy(this,"id",ml("recharts-pie-"))}render(){return _.createElement(_.Fragment,null,_.createElement(eee,{data:this.props.data,dataKey:this.props.dataKey,hide:this.props.hide,angleAxisId:0,radiusAxisId:0,stackId:void 0,barSize:void 0,type:"pie"}),_.createElement(_ee,this.props),_.createElement(Dee,this.props),this.props.children)}}oy(ly,"displayName","Pie");oy(ly,"defaultProps",sL);var Mee=J([sr],t=>{if(t)return{top:t.top,bottom:t.bottom,left:t.left,right:t.right}}),Lee=J([Mee,Xa,Ja],(t,e,r)=>{if(!(!t||e==null||r==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,r-t.top-t.bottom)}}),Vee=t=>{var e=Gr();return Se(r=>sa(r,"xAxis",t,e))},Fee=t=>{var e=Gr();return Se(r=>sa(r,"yAxis",t,e))},Z1=()=>Se(Lee),$ee=()=>Se($X);function WC(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function HC(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?WC(Object(r),!0).forEach(function(n){Uee(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):WC(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Uee(t,e,r){return(e=Bee(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Bee(t){var e=zee(t,"string");return typeof e=="symbol"?e:e+""}function zee(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qee=t=>{var{point:e,childIndex:r,mainColor:n,activeDot:i,dataKey:a}=t;if(i===!1||e.x==null||e.y==null)return null;var o=HC(HC({index:r,dataKey:a,cx:e.x,cy:e.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},He(i,!1)),y_(i)),c;return _.isValidElement(i)?c=_.cloneElement(i,o):typeof i=="function"?c=i(o):c=_.createElement(QM,o),_.createElement(pr,{className:"recharts-active-dot"},c)};function Kee(t){var{points:e,mainColor:r,activeDot:n,itemDataKey:i}=t,a=Se(eo),o=$ee();if(e==null||o==null)return null;var c=e.find(u=>o.includes(u.payload));return dt(c)?null:qee({point:c,childIndex:Number(a),mainColor:r,dataKey:i,activeDot:n})}var Wee=()=>{var t=Dt();return _.useEffect(()=>(t(BZ()),()=>{t(zZ())})),null},Hee=["children"];function Gee(t,e){if(t==null)return{};var r,n,i=Yee(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function Yee(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var GC=()=>{},oL=_.createContext({addErrorBar:GC,removeErrorBar:GC}),Qee={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},lL=_.createContext(Qee);function cL(t){var{children:e}=t,r=Gee(t,Hee);return _.createElement(lL.Provider,{value:r},e)}var Xee=()=>_.useContext(lL),uL=t=>{var{children:e,xAxisId:r,yAxisId:n,zAxisId:i,dataKey:a,data:o,stackId:c,hide:u,type:d,barSize:m}=t,[p,v]=_.useState([]),w=_.useCallback(S=>{v(P=>[...P,S])},[v]),b=_.useCallback(S=>{v(P=>P.filter(k=>k!==S))},[v]),E=Gr();return _.createElement(oL.Provider,{value:{addErrorBar:w,removeErrorBar:b}},_.createElement(ZZ,{type:d,data:o,xAxisId:r,yAxisId:n,zAxisId:i,dataKey:a,errorBars:p,stackId:c,hide:u,barSize:m,isPanorama:E}),e)};function Jee(t){var{addErrorBar:e,removeErrorBar:r}=_.useContext(oL);return _.useEffect(()=>(e(t),()=>{r(t)}),[e,r,t]),null}var Zee=["direction","width","dataKey","isAnimationActive","animationBegin","animationDuration","animationEasing"];function dL(t,e,r){return(e=ete(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ete(t){var e=tte(t,"string");return typeof e=="symbol"?e:e+""}function tte(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yf(){return yf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},yf.apply(null,arguments)}function rte(t,e){if(t==null)return{};var r,n,i=nte(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function nte(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function ite(t){var{direction:e,width:r,dataKey:n,isAnimationActive:i,animationBegin:a,animationDuration:o,animationEasing:c}=t,u=rte(t,Zee),d=He(u,!1),{data:m,dataPointFormatter:p,xAxisId:v,yAxisId:w,errorBarOffset:b}=Xee(),E=Vee(v),S=Fee(w);if(E?.scale==null||S?.scale==null||m==null||e==="x"&&E.type!=="number")return null;var P=m.map(k=>{var{x:C,y:R,value:V,errorVal:B}=p(k,n,e);if(!B)return null;var I=[],j,D;if(Array.isArray(B)?[j,D]=B:j=D=B,e==="x"){var{scale:$}=E,M=R+b,U=M+r,F=M-r,me=$(V-j),Pe=$(V+D);I.push({x1:Pe,y1:U,x2:Pe,y2:F}),I.push({x1:me,y1:M,x2:Pe,y2:M}),I.push({x1:me,y1:U,x2:me,y2:F})}else if(e==="y"){var{scale:De}=S,pe=C+b,ie=pe-r,fe=pe+r,ue=De(V-j),W=De(V+D);I.push({x1:ie,y1:W,x2:fe,y2:W}),I.push({x1:pe,y1:ue,x2:pe,y2:W}),I.push({x1:ie,y1:ue,x2:fe,y2:ue})}var Y="".concat(C+b,"px ").concat(R+b,"px");return _.createElement(pr,yf({className:"recharts-errorBar",key:"bar-".concat(I.map(he=>"".concat(he.x1,"-").concat(he.x2,"-").concat(he.y1,"-").concat(he.y2)))},d),I.map(he=>{var Re=i?{transformOrigin:"".concat(he.x1-5,"px")}:void 0;return _.createElement(Js,{from:{transform:"scaleY(0)",transformOrigin:Y},to:{transform:"scaleY(1)",transformOrigin:Y},begin:a,easing:c,isActive:i,duration:o,key:"line-".concat(he.x1,"-").concat(he.x2,"-").concat(he.y1,"-").concat(he.y2),style:{transformOrigin:Y}},_.createElement("line",yf({},he,{style:Re})))}))});return _.createElement(pr,{className:"recharts-errorBars"},P)}var fL=_.createContext(void 0);function ate(t){var e=_.useContext(fL);return t??e??"x"}function hL(t){var{direction:e,children:r}=t;return _.createElement(fL.Provider,{value:e},r)}var mL={stroke:"black",strokeWidth:1.5,width:5,offset:0,isAnimationActive:!0,animationBegin:0,animationDuration:400,animationEasing:"ease-in-out"};function ste(t){var e=ate(t.direction),{width:r,isAnimationActive:n,animationBegin:i,animationDuration:a,animationEasing:o}=Jn(t,mL);return _.createElement(_.Fragment,null,_.createElement(Jee,{dataKey:t.dataKey,direction:e}),_.createElement(ite,yf({},t,{direction:e,width:r,isAnimationActive:n,animationBegin:i,animationDuration:a,animationEasing:o})))}class pL extends _.Component{render(){return _.createElement(ste,this.props)}}dL(pL,"defaultProps",mL);dL(pL,"displayName","ErrorBar");var ote="Invariant failed";function lte(t,e){throw new Error(ote)}var cte=["x","y"];function rb(){return rb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},rb.apply(null,arguments)}function YC(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Sd(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?YC(Object(r),!0).forEach(function(n){ute(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):YC(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ute(t,e,r){return(e=dte(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dte(t){var e=fte(t,"string");return typeof e=="symbol"?e:e+""}function fte(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hte(t,e){if(t==null)return{};var r,n,i=mte(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function mte(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function pte(t,e){var{x:r,y:n}=t,i=hte(t,cte),a="".concat(r),o=parseInt(a,10),c="".concat(n),u=parseInt(c,10),d="".concat(e.height||i.height),m=parseInt(d,10),p="".concat(e.width||i.width),v=parseInt(p,10);return Sd(Sd(Sd(Sd(Sd({},e),i),o?{x:o}:{}),u?{y:u}:{}),{},{height:m,width:v,name:e.name,radius:e.radius})}function gL(t){return _.createElement(rL,rb({shapeType:"rectangle",propTransformer:pte,activeClassName:"recharts-active-bar"},t))}var gte=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,i)=>{if(we(e))return e;var a=we(n)||dt(n);return a?e(n,i):(a||lte(),r)}};function eE(t,e){var r,n,i=Se(d=>es(d,t)),a=Se(d=>ho(d,e)),o=(r=i?.allowDataOverflow)!==null&&r!==void 0?r:vn.allowDataOverflow,c=(n=a?.allowDataOverflow)!==null&&n!==void 0?n:xn.allowDataOverflow,u=o||c;return{needClip:u,needClipX:o,needClipY:c}}function yL(t){var{xAxisId:e,yAxisId:r,clipPathId:n}=t,i=Z1(),{needClipX:a,needClipY:o,needClip:c}=eE(e,r);if(!c)return null;var{x:u,y:d,width:m,height:p}=i;return _.createElement("clipPath",{id:"clipPath-".concat(n)},_.createElement("rect",{x:a?u:u-m/2,y:o?d:d-p/2,width:a?m:m*2,height:o?p:p*2}))}var yte=["onMouseEnter","onMouseLeave","onClick"],vte=["value","background","tooltipPosition"],xte=["onMouseEnter","onClick","onMouseLeave"];function vf(){return vf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},vf.apply(null,arguments)}function QC(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Lr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?QC(Object(r),!0).forEach(function(n){cy(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):QC(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function cy(t,e,r){return(e=wte(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wte(t){var e=bte(t,"string");return typeof e=="symbol"?e:e+""}function bte(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nb(t,e){if(t==null)return{};var r,n,i=_te(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function _te(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Ete=t=>{var{dataKey:e,name:r,fill:n,legendType:i,hide:a}=t;return[{inactive:a,dataKey:e,type:i,color:n,value:fu(r,e),payload:t}]};function Ste(t){var{dataKey:e,stroke:r,strokeWidth:n,fill:i,name:a,hide:o,unit:c}=t;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:i,dataKey:e,nameKey:void 0,name:fu(a,e),hide:o,type:t.tooltipType,color:t.fill,unit:c}}}function Ate(t){var e=Se(eo),{data:r,dataKey:n,background:i,allOtherBarProps:a}=t,{onMouseEnter:o,onMouseLeave:c,onClick:u}=a,d=nb(a,yte),m=G1(o,n),p=Y1(c),v=Q1(u,n);if(!i||r==null)return null;var w=He(i,!1);return _.createElement(_.Fragment,null,r.map((b,E)=>{var{value:S,background:P,tooltipPosition:k}=b,C=nb(b,vte);if(!P)return null;var R=m(b,E),V=p(b,E),B=v(b,E),I=Lr(Lr(Lr(Lr(Lr({option:i,isActive:String(E)===e},C),{},{fill:"#eee"},P),w),Ng(d,b,E)),{},{onMouseEnter:R,onMouseLeave:V,onClick:B,dataKey:n,index:E,className:"recharts-bar-background-rectangle"});return _.createElement(gL,vf({key:"background-bar-".concat(E)},I))}))}function vL(t){var{data:e,props:r,showLabels:n}=t,i=He(r,!1),{shape:a,dataKey:o,activeBar:c}=r,u=Se(eo),d=Se(DM),{onMouseEnter:m,onClick:p,onMouseLeave:v}=r,w=nb(r,xte),b=G1(m,o),E=Y1(v),S=Q1(p,o);return e?_.createElement(_.Fragment,null,e.map((P,k)=>{var C=c&&String(k)===u&&(d==null||o===d),R=C?c:a,V=Lr(Lr(Lr({},i),P),{},{isActive:C,option:R,index:k,dataKey:o});return _.createElement(pr,vf({className:"recharts-bar-rectangle"},Ng(w,P,k),{onMouseEnter:b(P,k),onMouseLeave:E(P,k),onClick:S(P,k),key:"rectangle-".concat(P?.x,"-").concat(P?.y,"-").concat(P?.value,"-").concat(k)}),_.createElement(gL,V))}),n&&zs.renderCallByParent(r,e)):null}function Tte(t){var{props:e,previousRectanglesRef:r}=t,{data:n,layout:i,isAnimationActive:a,animationBegin:o,animationDuration:c,animationEasing:u,onAnimationEnd:d,onAnimationStart:m}=e,p=r.current,v=J1(e,"recharts-bar-"),[w,b]=_.useState(!1),E=_.useCallback(()=>{typeof d=="function"&&d(),b(!1)},[d]),S=_.useCallback(()=>{typeof m=="function"&&m(),b(!0)},[m]);return _.createElement(Js,{begin:o,duration:c,isActive:a,easing:u,from:{t:0},to:{t:1},onAnimationEnd:E,onAnimationStart:S,key:v},P=>{var{t:k}=P,C=k===1?n:n.map((R,V)=>{var B=p&&p[V];if(B){var I=bn(B.x,R.x),j=bn(B.y,R.y),D=bn(B.width,R.width),$=bn(B.height,R.height);return Lr(Lr({},R),{},{x:I(k),y:j(k),width:D(k),height:$(k)})}if(i==="horizontal"){var M=bn(0,R.height),U=M(k);return Lr(Lr({},R),{},{y:R.y+R.height-U,height:U})}var F=bn(0,R.width),me=F(k);return Lr(Lr({},R),{},{width:me})});return k>0&&(r.current=C),_.createElement(pr,null,_.createElement(vL,{props:e,data:C,showLabels:!w}))})}function Pte(t){var{data:e,isAnimationActive:r}=t,n=_.useRef(null);return r&&e&&e.length&&(n.current==null||n.current!==e)?_.createElement(Tte,{previousRectanglesRef:n,props:t}):_.createElement(vL,{props:t,data:e,showLabels:!0})}var xL=0,Ite=(t,e)=>{var r=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:r,errorVal:_t(t,e)}};class Nte extends _.PureComponent{constructor(){super(...arguments),cy(this,"id",ml("recharts-bar-"))}render(){var{hide:e,data:r,dataKey:n,className:i,xAxisId:a,yAxisId:o,needClip:c,background:u,id:d,layout:m}=this.props;if(e)return null;var p=et("recharts-bar",i),v=dt(d)?this.id:d;return _.createElement(pr,{className:p},c&&_.createElement("defs",null,_.createElement(yL,{clipPathId:v,xAxisId:a,yAxisId:o})),_.createElement(pr,{className:"recharts-bar-rectangles",clipPath:c?"url(#clipPath-".concat(v,")"):null},_.createElement(Ate,{data:r,dataKey:n,background:u,allOtherBarProps:this.props}),_.createElement(Pte,this.props)),_.createElement(hL,{direction:m==="horizontal"?"y":"x"},this.props.children))}}var wL={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Al.isSsr,legendType:"rect",minPointSize:xL,xAxisId:0,yAxisId:0};function Cte(t){var{xAxisId:e,yAxisId:r,hide:n,legendType:i,minPointSize:a,activeBar:o,animationBegin:c,animationDuration:u,animationEasing:d,isAnimationActive:m}=Jn(t,wL),{needClip:p}=eE(e,r),v=zg(),w=Gr(),b=_.useMemo(()=>({barSize:t.barSize,data:void 0,dataKey:t.dataKey,maxBarSize:t.maxBarSize,minPointSize:a,stackId:PO(t.stackId)}),[t.barSize,t.dataKey,t.maxBarSize,a,t.stackId]),E=$f(t.children,bu),S=Se(C=>ire(C,e,r,w,b,E));if(v!=="vertical"&&v!=="horizontal")return null;var P,k=S?.[0];return k==null||k.height==null||k.width==null?P=0:P=v==="vertical"?k.height/2:k.width/2,_.createElement(cL,{xAxisId:e,yAxisId:r,data:S,dataPointFormatter:Ite,errorBarOffset:P},_.createElement(Nte,vf({},t,{layout:v,needClip:p,data:S,xAxisId:e,yAxisId:r,hide:n,legendType:i,minPointSize:a,activeBar:o,animationBegin:c,animationDuration:u,animationEasing:d,isAnimationActive:m})))}function kte(t){var{layout:e,barSettings:{dataKey:r,minPointSize:n},pos:i,bandSize:a,xAxis:o,yAxis:c,xAxisTicks:u,yAxisTicks:d,stackedData:m,displayedData:p,offset:v,cells:w}=t,b=e==="horizontal"?c:o,E=m?b.scale.domain():null,S=PK({numericAxis:b});return p.map((P,k)=>{var C,R,V,B,I,j;m?C=_K(m[k],E):(C=_t(P,r),Array.isArray(C)||(C=[S,C]));var D=gte(n,xL)(C[1],k);if(e==="horizontal"){var $,[M,U]=[c.scale(C[0]),c.scale(C[1])];R=LI({axis:o,ticks:u,bandSize:a,offset:i.offset,entry:P,index:k}),V=($=U??M)!==null&&$!==void 0?$:void 0,B=i.size;var F=M-U;if(I=Tn(F)?0:F,j={x:R,y:v.top,width:B,height:v.height},Math.abs(D)>0&&Math.abs(I)<Math.abs(D)){var me=mr(I||D)*(Math.abs(D)-Math.abs(I));V-=me,I+=me}}else{var[Pe,De]=[o.scale(C[0]),o.scale(C[1])];if(R=Pe,V=LI({axis:c,ticks:d,bandSize:a,offset:i.offset,entry:P,index:k}),B=De-Pe,I=i.size,j={x:v.left,y:V,width:v.width,height:I},Math.abs(D)>0&&Math.abs(B)<Math.abs(D)){var pe=mr(B||D)*(Math.abs(D)-Math.abs(B));B+=pe}}var ie=Lr(Lr({},P),{},{x:R,y:V,width:B,height:I,value:m?C:C[1],payload:P,background:j,tooltipPosition:{x:R+B/2,y:V+I/2}},w&&w[k]&&w[k].props);return ie})}class Jc extends _.PureComponent{render(){return _.createElement(uL,{type:"bar",data:null,xAxisId:this.props.xAxisId,yAxisId:this.props.yAxisId,zAxisId:0,dataKey:this.props.dataKey,stackId:this.props.stackId,hide:this.props.hide,barSize:this.props.barSize},_.createElement(Wee,null),_.createElement(iL,{legendPayload:Ete(this.props)}),_.createElement(X1,{fn:Ste,args:this.props}),_.createElement(Cte,this.props))}}cy(Jc,"displayName","Bar");cy(Jc,"defaultProps",wL);function XC(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Om(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?XC(Object(r),!0).forEach(function(n){jte(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):XC(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function jte(t,e,r){return(e=Rte(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Rte(t){var e=Ote(t,"string");return typeof e=="symbol"?e:e+""}function Ote(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Dte=(t,e)=>e,Mte=(t,e,r)=>r,Lte=(t,e,r,n)=>n,tE=(t,e,r,n,i)=>i,Vte=(t,e,r,n,i)=>i.maxBarSize,Fte=(t,e,r,n,i,a)=>a,JC=(t,e,r)=>{var n=r??t;if(!dt(n))return Hr(n,e,0)},$te=J([nt,Zg,Dte,Mte,Lte],(t,e,r,n,i)=>e.filter(a=>t==="horizontal"?a.xAxisId===r:a.yAxisId===n).filter(a=>a.isPanorama===i).filter(a=>a.hide===!1).filter(a=>a.type==="bar")),Ute=(t,e,r,n)=>{var i=nt(t);return i==="horizontal"?Gw(t,"yAxis",r,n):Gw(t,"xAxis",e,n)},Bte=(t,e,r)=>{var n=nt(t);return n==="horizontal"?eC(t,"xAxis",e):eC(t,"yAxis",r)};function zte(t){return t.stackId!=null&&t.dataKey!=null}var qte=(t,e,r)=>{var n={},i=t.filter(zte),a=t.filter(d=>d.stackId==null),o=i.reduce((d,m)=>(d[m.stackId]||(d[m.stackId]=[]),d[m.stackId].push(m),d),n),c=Object.entries(o).map(d=>{var[m,p]=d,v=p.map(b=>b.dataKey),w=JC(e,r,p[0].barSize);return{stackId:m,dataKeys:v,barSize:w}}),u=a.map(d=>{var m=[d.dataKey].filter(v=>v!=null),p=JC(e,r,d.barSize);return{stackId:void 0,dataKeys:m,barSize:p}});return[...c,...u]},Kte=J([$te,XY,Bte],qte),Wte=(t,e,r,n,i)=>{var a,o,c=nt(t),u=UD(t),{maxBarSize:d}=i,m=dt(d)?u:d,p,v;return c==="horizontal"?(p=sa(t,"xAxis",e,n),v=Zs(t,"xAxis",e,n)):(p=sa(t,"yAxis",r,n),v=Zs(t,"yAxis",r,n)),(a=(o=cf(p,v,!0))!==null&&o!==void 0?o:m)!==null&&a!==void 0?a:0},bL=(t,e,r,n)=>{var i=nt(t),a,o;return i==="horizontal"?(a=sa(t,"xAxis",e,n),o=Zs(t,"xAxis",e,n)):(a=sa(t,"yAxis",r,n),o=Zs(t,"yAxis",r,n)),cf(a,o)};function Hte(t,e,r,n,i){var a=n.length;if(!(a<1)){var o=Hr(t,r,0,!0),c,u=[];if(Nn(n[0].barSize)){var d=!1,m=r/a,p=n.reduce((P,k)=>P+(k.barSize||0),0);p+=(a-1)*o,p>=r&&(p-=(a-1)*o,o=0),p>=r&&m>0&&(d=!0,m*=.9,p=a*m);var v=(r-p)/2>>0,w={offset:v-o,size:0};c=n.reduce((P,k)=>{var C,R={stackId:k.stackId,dataKeys:k.dataKeys,position:{offset:w.offset+w.size+o,size:d?m:(C=k.barSize)!==null&&C!==void 0?C:0}},V=[...P,R];return w=V[V.length-1].position,V},u)}else{var b=Hr(e,r,0,!0);r-2*b-(a-1)*o<=0&&(o=0);var E=(r-2*b-(a-1)*o)/a;E>1&&(E>>=0);var S=Nn(i)?Math.min(E,i):E;c=n.reduce((P,k,C)=>[...P,{stackId:k.stackId,dataKeys:k.dataKeys,position:{offset:b+(E+o)*C+(E-S)/2,size:S}}],u)}return c}}var Gte=(t,e,r,n,i,a,o)=>{var c=dt(o)?e:o,u=Hte(r,n,i!==a?i:a,t,c);return i!==a&&u!=null&&(u=u.map(d=>Om(Om({},d),{},{position:Om(Om({},d.position),{},{offset:d.position.offset-i/2})}))),u},Yte=J([Kte,UD,QY,BD,Wte,bL,Vte],Gte),Qte=(t,e,r,n)=>sa(t,"xAxis",e,n),Xte=(t,e,r,n)=>sa(t,"yAxis",r,n),Jte=(t,e,r,n)=>Zs(t,"xAxis",e,n),Zte=(t,e,r,n)=>Zs(t,"yAxis",r,n),ere=J([Yte,tE],(t,e)=>{if(t!=null){var r=t.find(n=>n.stackId===e.stackId&&n.dataKeys.includes(e.dataKey));if(r!=null)return r.position}}),tre=(t,e)=>{if(!(!t||e?.dataKey==null)){var{stackId:r}=e;if(r!=null){var n=t[r];if(n){var{stackedData:i}=n;if(i){var a=i.find(o=>o.key===e.dataKey);return a}}}}},rre=J([Zg,tE],(t,e)=>{if(t.some(r=>r.type==="bar"&&e.dataKey===r.dataKey&&e.stackId===r.stackId&&e.stackId===r.stackId))return e}),nre=J([Ute,tE],tre),ire=J([sr,Qte,Xte,Jte,Zte,ere,nt,o1,bL,nre,rre,Fte],(t,e,r,n,i,a,o,c,u,d,m,p)=>{var{chartData:v,dataStartIndex:w,dataEndIndex:b}=c;if(!(m==null||a==null||o!=="horizontal"&&o!=="vertical"||e==null||r==null||n==null||i==null||u==null)){var{data:E}=m,S;if(E!=null&&E.length>0?S=E:S=v?.slice(w,b+1),S!=null)return kte({layout:o,barSettings:m,pos:a,bandSize:u,xAxis:e,yAxis:r,xAxisTicks:n,yAxisTicks:i,stackedData:d,displayedData:S,offset:t,cells:p})}}),_L=t=>{var{chartData:e}=t,r=Dt(),n=Gr();return _.useEffect(()=>n?()=>{}:(r(uC(e)),()=>{r(uC(void 0))}),[e,r,n]),null},ZC={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},EL=Xn({name:"brush",initialState:ZC,reducers:{setBrushSettings(t,e){return e.payload==null?ZC:e.payload}}}),{setBrushSettings:Sae}=EL.actions,are=EL.reducer;function sre(t,e,r){return(e=ore(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ore(t){var e=lre(t,"string");return typeof e=="symbol"?e:e+""}function lre(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class rE{static create(e){return new rE(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(n)switch(n){case"start":return this.scale(e);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(e)+a}default:return this.scale(e)}if(r){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+o}return this.scale(e)}}isInRange(e){var r=this.range(),n=r[0],i=r[r.length-1];return n<=i?e>=n&&e<=i:e>=i&&e<=n}}sre(rE,"EPS",1e-4);function cre(t){return(t%180+180)%180}var ure=function(e){var{width:r,height:n}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=cre(i),o=a*Math.PI/180,c=Math.atan(n/r),u=o>c&&o<Math.PI-c?n/Math.sin(o):r/Math.cos(o);return Math.abs(u)},dre={dots:[],areas:[],lines:[]},SL=Xn({name:"referenceElements",initialState:dre,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var r=Va(t).dots.findIndex(n=>n===e.payload);r!==-1&&t.dots.splice(r,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var r=Va(t).areas.findIndex(n=>n===e.payload);r!==-1&&t.areas.splice(r,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var r=Va(t).lines.findIndex(n=>n===e.payload);r!==-1&&t.lines.splice(r,1)}}}),{addDot:Aae,removeDot:Tae,addArea:Pae,removeArea:Iae,addLine:Nae,removeLine:Cae}=SL.actions,fre=SL.reducer,hre=_.createContext(void 0),mre=t=>{var{children:e}=t,[r]=_.useState("".concat(ml("recharts"),"-clip")),n=Z1();if(n==null)return null;var{x:i,y:a,width:o,height:c}=n;return _.createElement(hre.Provider,{value:r},_.createElement("defs",null,_.createElement("clipPath",{id:r},_.createElement("rect",{x:i,y:a,height:c,width:o}))),e)};function Mx(t,e){for(var r in t)if({}.hasOwnProperty.call(t,r)&&(!{}.hasOwnProperty.call(e,r)||t[r]!==e[r]))return!1;for(var n in e)if({}.hasOwnProperty.call(e,n)&&!{}.hasOwnProperty.call(t,n))return!1;return!0}function AL(t,e,r){if(e<1)return[];if(e===1&&r===void 0)return t;for(var n=[],i=0;i<t.length;i+=e)n.push(t[i]);return n}function pre(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return ure(n,r)}function gre(t,e,r){var n=r==="width",{x:i,y:a,width:o,height:c}=t;return e===1?{start:n?i:a,end:n?i+o:a+c}:{start:n?i+o:a+c,end:n?i:a}}function Hp(t,e,r,n,i){if(t*e<t*n||t*e>t*i)return!1;var a=r();return t*(e-t*a/2-n)>=0&&t*(e+t*a/2-i)<=0}function yre(t,e){return AL(t,e+1)}function vre(t,e,r,n,i){for(var a=(n||[]).slice(),{start:o,end:c}=e,u=0,d=1,m=o,p=function(){var b=n?.[u];if(b===void 0)return{v:AL(n,d)};var E=u,S,P=()=>(S===void 0&&(S=r(b,E)),S),k=b.coordinate,C=u===0||Hp(t,k,P,m,c);C||(u=0,m=o,d+=1),C&&(m=k+t*(P()/2+i),u+=d)},v;d<=a.length;)if(v=p(),v)return v.v;return[]}function ek(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Or(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ek(Object(r),!0).forEach(function(n){xre(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ek(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function xre(t,e,r){return(e=wre(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wre(t){var e=bre(t,"string");return typeof e=="symbol"?e:e+""}function bre(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _re(t,e,r,n,i){for(var a=(n||[]).slice(),o=a.length,{start:c}=e,{end:u}=e,d=function(v){var w=a[v],b,E=()=>(b===void 0&&(b=r(w,v)),b);if(v===o-1){var S=t*(w.coordinate+t*E()/2-u);a[v]=w=Or(Or({},w),{},{tickCoord:S>0?w.coordinate-S*t:w.coordinate})}else a[v]=w=Or(Or({},w),{},{tickCoord:w.coordinate});var P=Hp(t,w.tickCoord,E,c,u);P&&(u=w.tickCoord-t*(E()/2+i),a[v]=Or(Or({},w),{},{isShow:!0}))},m=o-1;m>=0;m--)d(m);return a}function Ere(t,e,r,n,i,a){var o=(n||[]).slice(),c=o.length,{start:u,end:d}=e;if(a){var m=n[c-1],p=r(m,c-1),v=t*(m.coordinate+t*p/2-d);o[c-1]=m=Or(Or({},m),{},{tickCoord:v>0?m.coordinate-v*t:m.coordinate});var w=Hp(t,m.tickCoord,()=>p,u,d);w&&(d=m.tickCoord-t*(p/2+i),o[c-1]=Or(Or({},m),{},{isShow:!0}))}for(var b=a?c-1:c,E=function(k){var C=o[k],R,V=()=>(R===void 0&&(R=r(C,k)),R);if(k===0){var B=t*(C.coordinate-t*V()/2-u);o[k]=C=Or(Or({},C),{},{tickCoord:B<0?C.coordinate-B*t:C.coordinate})}else o[k]=C=Or(Or({},C),{},{tickCoord:C.coordinate});var I=Hp(t,C.tickCoord,V,u,d);I&&(u=C.tickCoord+t*(V()/2+i),o[k]=Or(Or({},C),{},{isShow:!0}))},S=0;S<b;S++)E(S);return o}function nE(t,e,r){var{tick:n,ticks:i,viewBox:a,minTickGap:o,orientation:c,interval:u,tickFormatter:d,unit:m,angle:p}=t;if(!i||!i.length||!n)return[];if(we(u)||Al.isSsr){var v;return(v=yre(i,we(u)?u:0))!==null&&v!==void 0?v:[]}var w=[],b=c==="top"||c==="bottom"?"width":"height",E=m&&b==="width"?Ud(m,{fontSize:e,letterSpacing:r}):{width:0,height:0},S=(C,R)=>{var V=typeof d=="function"?d(C.value,R):C.value;return b==="width"?pre(Ud(V,{fontSize:e,letterSpacing:r}),E,p):Ud(V,{fontSize:e,letterSpacing:r})[b]},P=i.length>=2?mr(i[1].coordinate-i[0].coordinate):1,k=gre(a,P,b);return u==="equidistantPreserveStart"?vre(P,k,S,i,o):(u==="preserveStart"||u==="preserveStartEnd"?w=Ere(P,k,S,i,o,u==="preserveStartEnd"):w=_re(P,k,S,i,o),w.filter(C=>C.isShow))}var Sre=["viewBox"],Are=["viewBox"];function Nc(){return Nc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Nc.apply(null,arguments)}function tk(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function nr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?tk(Object(r),!0).forEach(function(n){iE(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function rk(t,e){if(t==null)return{};var r,n,i=Tre(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function Tre(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function iE(t,e,r){return(e=Pre(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Pre(t){var e=Ire(t,"string");return typeof e=="symbol"?e:e+""}function Ire(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class mo extends _.Component{constructor(e){super(e),this.tickRefs=_.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(e,r){var{viewBox:n}=e,i=rk(e,Sre),a=this.props,{viewBox:o}=a,c=rk(a,Are);return!Mx(n,o)||!Mx(i,c)||!Mx(r,this.state)}getTickLineCoord(e){var{x:r,y:n,width:i,height:a,orientation:o,tickSize:c,mirror:u,tickMargin:d}=this.props,m,p,v,w,b,E,S=u?-1:1,P=e.tickSize||c,k=we(e.tickCoord)?e.tickCoord:e.coordinate;switch(o){case"top":m=p=e.coordinate,w=n+ +!u*a,v=w-S*P,E=v-S*d,b=k;break;case"left":v=w=e.coordinate,p=r+ +!u*i,m=p-S*P,b=m-S*d,E=k;break;case"right":v=w=e.coordinate,p=r+ +u*i,m=p+S*P,b=m+S*d,E=k;break;default:m=p=e.coordinate,w=n+ +u*a,v=w+S*P,E=v+S*d,b=k;break}return{line:{x1:m,y1:v,x2:p,y2:w},tick:{x:b,y:E}}}getTickTextAnchor(){var{orientation:e,mirror:r}=this.props,n;switch(e){case"left":n=r?"start":"end";break;case"right":n=r?"end":"start";break;default:n="middle";break}return n}getTickVerticalAnchor(){var{orientation:e,mirror:r}=this.props;switch(e){case"left":case"right":return"middle";case"top":return r?"start":"end";default:return r?"end":"start"}}renderAxisLine(){var{x:e,y:r,width:n,height:i,orientation:a,mirror:o,axisLine:c}=this.props,u=nr(nr(nr({},He(this.props,!1)),He(c,!1)),{},{fill:"none"});if(a==="top"||a==="bottom"){var d=+(a==="top"&&!o||a==="bottom"&&o);u=nr(nr({},u),{},{x1:e,y1:r+d*i,x2:e+n,y2:r+d*i})}else{var m=+(a==="left"&&!o||a==="right"&&o);u=nr(nr({},u),{},{x1:e+m*n,y1:r,x2:e+m*n,y2:r+i})}return _.createElement("line",Nc({},u,{className:et("recharts-cartesian-axis-line",Xs(c,"className"))}))}static renderTickItem(e,r,n){var i,a=et(r.className,"recharts-cartesian-axis-tick-value");if(_.isValidElement(e))i=_.cloneElement(e,nr(nr({},r),{},{className:a}));else if(typeof e=="function")i=e(nr(nr({},r),{},{className:a}));else{var o="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(o=et(o,e.className)),i=_.createElement(sy,Nc({},r,{className:o}),n)}return i}renderTicks(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:i,stroke:a,tick:o,tickFormatter:c,unit:u}=this.props,d=nE(nr(nr({},this.props),{},{ticks:n}),e,r),m=this.getTickTextAnchor(),p=this.getTickVerticalAnchor(),v=He(this.props,!1),w=He(o,!1),b=nr(nr({},v),{},{fill:"none"},He(i,!1)),E=d.map((S,P)=>{var{line:k,tick:C}=this.getTickLineCoord(S),R=nr(nr(nr(nr({textAnchor:m,verticalAnchor:p},v),{},{stroke:"none",fill:a},w),C),{},{index:P,payload:S,visibleTicksCount:d.length,tickFormatter:c});return _.createElement(pr,Nc({className:"recharts-cartesian-axis-tick",key:"tick-".concat(S.value,"-").concat(S.coordinate,"-").concat(S.tickCoord)},Ng(this.props,S,P)),i&&_.createElement("line",Nc({},b,k,{className:et("recharts-cartesian-axis-tick-line",Xs(i,"className"))})),o&&mo.renderTickItem(o,R,"".concat(typeof c=="function"?c(S.value,P):S.value).concat(u||"")))});return E.length>0?_.createElement("g",{className:"recharts-cartesian-axis-ticks"},E):null}render(){var{axisLine:e,width:r,height:n,className:i,hide:a}=this.props;if(a)return null;var{ticks:o}=this.props;return r!=null&&r<=0||n!=null&&n<=0?null:_.createElement(pr,{className:et("recharts-cartesian-axis",i),ref:c=>{if(c){var u=c.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(u);var d=u[0];if(d){var m=window.getComputedStyle(d).fontSize,p=window.getComputedStyle(d).letterSpacing;(m!==this.state.fontSize||p!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(d).fontSize,letterSpacing:window.getComputedStyle(d).letterSpacing})}}}},e&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,o),_n.renderCallByParent(this.props))}}iE(mo,"displayName","CartesianAxis");iE(mo,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Nre=["x1","y1","x2","y2","key"],Cre=["offset"],kre=["xAxisId","yAxisId"],jre=["xAxisId","yAxisId"];function nk(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Vr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?nk(Object(r),!0).forEach(function(n){Rre(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Rre(t,e,r){return(e=Ore(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ore(t){var e=Dre(t,"string");return typeof e=="symbol"?e:e+""}function Dre(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function el(){return el=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},el.apply(null,arguments)}function Gp(t,e){if(t==null)return{};var r,n,i=Mre(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function Mre(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Lre=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:r,x:n,y:i,width:a,height:o,ry:c}=t;return _.createElement("rect",{x:n,y:i,ry:c,width:a,height:o,stroke:"none",fill:e,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function TL(t,e){var r;if(_.isValidElement(t))r=_.cloneElement(t,e);else if(typeof t=="function")r=t(e);else{var{x1:n,y1:i,x2:a,y2:o,key:c}=e,u=Gp(e,Nre),d=He(u,!1),{offset:m}=d,p=Gp(d,Cre);r=_.createElement("line",el({},p,{x1:n,y1:i,x2:a,y2:o,fill:"none",key:c}))}return r}function Vre(t){var{x:e,width:r,horizontal:n=!0,horizontalPoints:i}=t;if(!n||!i||!i.length)return null;var{xAxisId:a,yAxisId:o}=t,c=Gp(t,kre),u=i.map((d,m)=>{var p=Vr(Vr({},c),{},{x1:e,y1:d,x2:e+r,y2:d,key:"line-".concat(m),index:m});return TL(n,p)});return _.createElement("g",{className:"recharts-cartesian-grid-horizontal"},u)}function Fre(t){var{y:e,height:r,vertical:n=!0,verticalPoints:i}=t;if(!n||!i||!i.length)return null;var{xAxisId:a,yAxisId:o}=t,c=Gp(t,jre),u=i.map((d,m)=>{var p=Vr(Vr({},c),{},{x1:d,y1:e,x2:d,y2:e+r,key:"line-".concat(m),index:m});return TL(n,p)});return _.createElement("g",{className:"recharts-cartesian-grid-vertical"},u)}function $re(t){var{horizontalFill:e,fillOpacity:r,x:n,y:i,width:a,height:o,horizontalPoints:c,horizontal:u=!0}=t;if(!u||!e||!e.length)return null;var d=c.map(p=>Math.round(p+i-i)).sort((p,v)=>p-v);i!==d[0]&&d.unshift(0);var m=d.map((p,v)=>{var w=!d[v+1],b=w?i+o-p:d[v+1]-p;if(b<=0)return null;var E=v%e.length;return _.createElement("rect",{key:"react-".concat(v),y:p,x:n,height:b,width:a,stroke:"none",fill:e[E],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return _.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},m)}function Ure(t){var{vertical:e=!0,verticalFill:r,fillOpacity:n,x:i,y:a,width:o,height:c,verticalPoints:u}=t;if(!e||!r||!r.length)return null;var d=u.map(p=>Math.round(p+i-i)).sort((p,v)=>p-v);i!==d[0]&&d.unshift(0);var m=d.map((p,v)=>{var w=!d[v+1],b=w?i+o-p:d[v+1]-p;if(b<=0)return null;var E=v%r.length;return _.createElement("rect",{key:"react-".concat(v),x:p,y:a,width:b,height:c,stroke:"none",fill:r[E],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return _.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},m)}var Bre=(t,e)=>{var{xAxis:r,width:n,height:i,offset:a}=t;return AO(nE(Vr(Vr(Vr({},mo.defaultProps),r),{},{ticks:TO(r),viewBox:{x:0,y:0,width:n,height:i}})),a.left,a.left+a.width,e)},zre=(t,e)=>{var{yAxis:r,width:n,height:i,offset:a}=t;return AO(nE(Vr(Vr(Vr({},mo.defaultProps),r),{},{ticks:TO(r),viewBox:{x:0,y:0,width:n,height:i}})),a.top,a.top+a.height,e)},qre={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function Zc(t){var e=RO(),r=OO(),n=jO(),i=Vr(Vr({},Jn(t,qre)),{},{x:we(t.x)?t.x:n.left,y:we(t.y)?t.y:n.top,width:we(t.width)?t.width:n.width,height:we(t.height)?t.height:n.height}),{xAxisId:a,yAxisId:o,x:c,y:u,width:d,height:m,syncWithTicks:p,horizontalValues:v,verticalValues:w}=i,b=Gr(),E=Se(D=>tC(D,"xAxis",a,b)),S=Se(D=>tC(D,"yAxis",o,b));if(!we(d)||d<=0||!we(m)||m<=0||!we(c)||c!==+c||!we(u)||u!==+u)return null;var P=i.verticalCoordinatesGenerator||Bre,k=i.horizontalCoordinatesGenerator||zre,{horizontalPoints:C,verticalPoints:R}=i;if((!C||!C.length)&&typeof k=="function"){var V=v&&v.length,B=k({yAxis:S?Vr(Vr({},S),{},{ticks:V?v:S.ticks}):void 0,width:e,height:r,offset:n},V?!0:p);$d(Array.isArray(B),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof B,"]")),Array.isArray(B)&&(C=B)}if((!R||!R.length)&&typeof P=="function"){var I=w&&w.length,j=P({xAxis:E?Vr(Vr({},E),{},{ticks:I?w:E.ticks}):void 0,width:e,height:r,offset:n},I?!0:p);$d(Array.isArray(j),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof j,"]")),Array.isArray(j)&&(R=j)}return _.createElement("g",{className:"recharts-cartesian-grid"},_.createElement(Lre,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),_.createElement($re,el({},i,{horizontalPoints:C})),_.createElement(Ure,el({},i,{verticalPoints:R})),_.createElement(Vre,el({},i,{offset:n,horizontalPoints:C,xAxis:E,yAxis:S})),_.createElement(Fre,el({},i,{offset:n,verticalPoints:R,xAxis:E,yAxis:S})))}Zc.displayName="CartesianGrid";var PL=(t,e,r,n)=>sa(t,"xAxis",e,n),IL=(t,e,r,n)=>Zs(t,"xAxis",e,n),NL=(t,e,r,n)=>sa(t,"yAxis",r,n),CL=(t,e,r,n)=>Zs(t,"yAxis",r,n),Kre=J([nt,PL,NL,IL,CL],(t,e,r,n,i)=>co(t,"xAxis")?cf(e,n,!1):cf(r,i,!1)),Wre=(t,e,r,n,i)=>i,Hre=J([Zg,Wre],(t,e)=>{if(t.some(r=>r.type==="line"&&e.dataKey===r.dataKey&&e.data===r.data))return e}),Gre=J([nt,PL,NL,IL,CL,Hre,Kre,o1],(t,e,r,n,i,a,o,c)=>{var{chartData:u,dataStartIndex:d,dataEndIndex:m}=c;if(!(a==null||e==null||r==null||n==null||i==null||n.length===0||i.length===0||o==null)){var{dataKey:p,data:v}=a,w;if(v!=null&&v.length>0?w=v:w=u?.slice(d,m+1),w!=null)return hne({layout:t,xAxis:e,yAxis:r,xAxisTicks:n,yAxisTicks:i,dataKey:p,bandSize:o,displayedData:w})}}),Yre=["type","layout","connectNulls","needClip"],Qre=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId"];function kL(t,e){if(t==null)return{};var r,n,i=Xre(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function Xre(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function ik(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function gi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ik(Object(r),!0).forEach(function(n){uy(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ik(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function uy(t,e,r){return(e=Jre(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Jre(t){var e=Zre(t,"string");return typeof e=="symbol"?e:e+""}function Zre(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function eu(){return eu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},eu.apply(null,arguments)}var ene=t=>{var{dataKey:e,name:r,stroke:n,legendType:i,hide:a}=t;return[{inactive:a,dataKey:e,type:i,color:n,value:fu(r,e),payload:t}]};function tne(t){var{dataKey:e,data:r,stroke:n,strokeWidth:i,fill:a,name:o,hide:c,unit:u}=t;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:i,fill:a,dataKey:e,nameKey:void 0,name:fu(o,e),hide:c,type:t.tooltipType,color:t.stroke,unit:u}}}var jL=(t,e)=>"".concat(e,"px ").concat(t-e,"px");function rne(t,e){for(var r=t.length%2!==0?[...t,0]:t,n=[],i=0;i<e;++i)n=[...n,...r];return n}var nne=(t,e,r)=>{var n=r.reduce((p,v)=>p+v);if(!n)return jL(e,t);for(var i=Math.floor(t/n),a=t%n,o=e-t,c=[],u=0,d=0;u<r.length;d+=r[u],++u)if(d+r[u]>a){c=[...r.slice(0,u),a-d];break}var m=c.length%2===0?[0,o]:[o];return[...rne(r,i),...c,...m].map(p=>"".concat(p,"px")).join(", ")};function ine(t,e){var r;if(_.isValidElement(t))r=_.cloneElement(t,e);else if(typeof t=="function")r=t(e);else{var n=et("recharts-line-dot",typeof t!="boolean"?t.className:"");r=_.createElement(QM,eu({},e,{className:n}))}return r}function ane(t,e){return t==null?!1:e?!0:t.length===1}function sne(t){var{clipPathId:e,points:r,props:n}=t,{dot:i,dataKey:a,needClip:o}=n;if(!ane(r,i))return null;var c=SR(i),u=He(n,!1),d=He(i,!0),m=r.map((v,w)=>{var b=gi(gi(gi({key:"dot-".concat(w),r:3},u),d),{},{index:w,cx:v.x,cy:v.y,dataKey:a,value:v.value,payload:v.payload,points:r});return ine(i,b)}),p={clipPath:o?"url(#clipPath-".concat(c?"":"dots-").concat(e,")"):null};return _.createElement(pr,eu({className:"recharts-line-dots",key:"dots"},p),m)}function ib(t){var{clipPathId:e,pathRef:r,points:n,strokeDasharray:i,props:a,showLabels:o}=t,{type:c,layout:u,connectNulls:d,needClip:m}=a,p=kL(a,Yre),v=gi(gi({},He(p,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:m?"url(#clipPath-".concat(e,")"):null,points:n,type:c,layout:u,connectNulls:d,strokeDasharray:i??a.strokeDasharray});return _.createElement(_.Fragment,null,n?.length>1&&_.createElement(D_,eu({},v,{pathRef:r})),_.createElement(sne,{points:n,clipPathId:e,props:a}),o&&zs.renderCallByParent(a,n))}function one(t){try{return t&&t.getTotalLength&&t.getTotalLength()||0}catch{return 0}}function lne(t){var{clipPathId:e,props:r,pathRef:n,previousPointsRef:i,longestAnimatedLengthRef:a}=t,{points:o,strokeDasharray:c,isAnimationActive:u,animationBegin:d,animationDuration:m,animationEasing:p,animateNewValues:v,width:w,height:b,onAnimationEnd:E,onAnimationStart:S}=r,P=i.current,k=J1(r,"recharts-line-"),[C,R]=_.useState(!1),V=_.useCallback(()=>{typeof E=="function"&&E(),R(!1)},[E]),B=_.useCallback(()=>{typeof S=="function"&&S(),R(!0)},[S]),I=one(n.current),j=a.current;return _.createElement(Js,{begin:d,duration:m,isActive:u,easing:p,from:{t:0},to:{t:1},onAnimationEnd:V,onAnimationStart:B,key:k},D=>{var{t:$}=D,M=bn(j,I+j),U=Math.min(M($),I),F;if(c){var me="".concat(c).split(/[,\s]+/gim).map(pe=>parseFloat(pe));F=nne(U,I,me)}else F=jL(I,U);if(P){var Pe=P.length/o.length,De=$===1?o:o.map((pe,ie)=>{var fe=Math.floor(ie*Pe);if(P[fe]){var ue=P[fe],W=bn(ue.x,pe.x),Y=bn(ue.y,pe.y);return gi(gi({},pe),{},{x:W($),y:Y($)})}if(v){var he=bn(w*2,pe.x),Re=bn(b/2,pe.y);return gi(gi({},pe),{},{x:he($),y:Re($)})}return gi(gi({},pe),{},{x:pe.x,y:pe.y})});return i.current=De,_.createElement(ib,{props:r,points:De,clipPathId:e,pathRef:n,showLabels:!C,strokeDasharray:F})}return $>0&&I>0&&(i.current=o,a.current=U),_.createElement(ib,{props:r,points:o,clipPathId:e,pathRef:n,showLabels:!C,strokeDasharray:F})})}function cne(t){var{clipPathId:e,props:r}=t,{points:n,isAnimationActive:i}=r,a=_.useRef(null),o=_.useRef(0),c=_.useRef(null),u=a.current;return i&&n&&n.length&&u!==n?_.createElement(lne,{props:r,clipPathId:e,previousPointsRef:a,longestAnimatedLengthRef:o,pathRef:c}):_.createElement(ib,{props:r,points:n,clipPathId:e,pathRef:c,showLabels:!0})}var une=(t,e)=>({x:t.x,y:t.y,value:t.value,errorVal:_t(t.payload,e)});class dne extends _.Component{constructor(){super(...arguments),uy(this,"id",ml("recharts-line-"))}render(){var e,{hide:r,dot:n,points:i,className:a,xAxisId:o,yAxisId:c,top:u,left:d,width:m,height:p,id:v,needClip:w,layout:b}=this.props;if(r)return null;var E=et("recharts-line",a),S=dt(v)?this.id:v,{r:P=3,strokeWidth:k=2}=(e=He(n,!1))!==null&&e!==void 0?e:{r:3,strokeWidth:2},C=SR(n),R=P*2+k;return _.createElement(_.Fragment,null,_.createElement(pr,{className:E},w&&_.createElement("defs",null,_.createElement(yL,{clipPathId:S,xAxisId:o,yAxisId:c}),!C&&_.createElement("clipPath",{id:"clipPath-dots-".concat(S)},_.createElement("rect",{x:d-R/2,y:u-R/2,width:m+R,height:p+R}))),_.createElement(cne,{props:this.props,clipPathId:S}),_.createElement(hL,{direction:b==="horizontal"?"y":"x"},_.createElement(cL,{xAxisId:o,yAxisId:c,data:i,dataPointFormatter:une,errorBarOffset:0},this.props.children))),_.createElement(Kee,{activeDot:this.props.activeDot,points:i,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var RL={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!Al.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function fne(t){var e=Jn(t,RL),{activeDot:r,animateNewValues:n,animationBegin:i,animationDuration:a,animationEasing:o,connectNulls:c,dot:u,hide:d,isAnimationActive:m,label:p,legendType:v,xAxisId:w,yAxisId:b}=e,E=kL(e,Qre),{needClip:S}=eE(w,b),{height:P,width:k,x:C,y:R}=Z1(),V=zg(),B=Gr(),I=_.useMemo(()=>({dataKey:t.dataKey,data:t.data}),[t.dataKey,t.data]),j=Se(D=>Gre(D,w,b,B,I));return V!=="horizontal"&&V!=="vertical"?null:_.createElement(dne,eu({},E,{connectNulls:c,dot:u,activeDot:r,animateNewValues:n,animationBegin:i,animationDuration:a,animationEasing:o,isAnimationActive:m,hide:d,label:p,legendType:v,xAxisId:w,yAxisId:b,points:j,layout:V,height:P,width:k,left:C,top:R,needClip:S}))}function hne(t){var{layout:e,xAxis:r,yAxis:n,xAxisTicks:i,yAxisTicks:a,dataKey:o,bandSize:c,displayedData:u}=t;return u.map((d,m)=>{var p=_t(d,o);return e==="horizontal"?{x:MI({axis:r,ticks:i,bandSize:c,entry:d,index:m}),y:dt(p)?null:n.scale(p),value:p,payload:d}:{x:dt(p)?null:r.scale(p),y:MI({axis:n,ticks:a,bandSize:c,entry:d,index:m}),value:p,payload:d}})}class dy extends _.PureComponent{render(){return _.createElement(uL,{type:"line",data:this.props.data,xAxisId:this.props.xAxisId,yAxisId:this.props.yAxisId,zAxisId:0,dataKey:this.props.dataKey,stackId:void 0,hide:this.props.hide,barSize:void 0},_.createElement(iL,{legendPayload:ene(this.props)}),_.createElement(X1,{fn:tne,args:this.props}),_.createElement(fne,this.props))}}uy(dy,"displayName","Line");uy(dy,"defaultProps",RL);function ak(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function sk(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ak(Object(r),!0).forEach(function(n){mne(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ak(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function mne(t,e,r){return(e=pne(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pne(t){var e=gne(t,"string");return typeof e=="symbol"?e:e+""}function gne(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yne={xAxis:{},yAxis:{},zAxis:{}},OL=Xn({name:"cartesianAxis",initialState:yne,reducers:{addXAxis(t,e){t.xAxis[e.payload.id]=e.payload},removeXAxis(t,e){delete t.xAxis[e.payload.id]},addYAxis(t,e){t.yAxis[e.payload.id]=e.payload},removeYAxis(t,e){delete t.yAxis[e.payload.id]},addZAxis(t,e){t.zAxis[e.payload.id]=e.payload},removeZAxis(t,e){delete t.zAxis[e.payload.id]},updateYAxisWidth(t,e){var{id:r,width:n}=e.payload;t.yAxis[r]&&(t.yAxis[r]=sk(sk({},t.yAxis[r]),{},{width:n}))}}}),{addXAxis:vne,removeXAxis:xne,addYAxis:wne,removeYAxis:bne,addZAxis:kae,removeZAxis:jae,updateYAxisWidth:_ne}=OL.actions,Ene=OL.reducer,Sne=["children"],Ane=["dangerouslySetInnerHTML","ticks"];function DL(t,e,r){return(e=Tne(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Tne(t){var e=Pne(t,"string");return typeof e=="symbol"?e:e+""}function Pne(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ab(){return ab=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ab.apply(null,arguments)}function ML(t,e){if(t==null)return{};var r,n,i=Ine(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function Ine(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Nne(t){var e=Dt(),r=_.useMemo(()=>{var{children:a}=t,o=ML(t,Sne);return o},[t]),n=Se(a=>es(a,r.id)),i=r===n;return _.useEffect(()=>(e(vne(r)),()=>{e(xne(r))}),[r,e]),i?t.children:null}var Cne=t=>{var{xAxisId:e,className:r}=t,n=Se(kO),i=Gr(),a="xAxis",o=Se(w=>vu(w,a,e,i)),c=Se(w=>gM(w,a,e,i)),u=Se(w=>fM(w,e)),d=Se(w=>zQ(w,e));if(u==null||d==null)return null;var{dangerouslySetInnerHTML:m,ticks:p}=t,v=ML(t,Ane);return _.createElement(mo,ab({},v,{scale:o,x:d.x,y:d.y,width:u.width,height:u.height,className:et("recharts-".concat(a," ").concat(a),r),viewBox:n,ticks:c}))},kne=t=>{var e,r,n,i,a;return _.createElement(Nne,{interval:(e=t.interval)!==null&&e!==void 0?e:"preserveEnd",id:t.xAxisId,scale:t.scale,type:t.type,padding:t.padding,allowDataOverflow:t.allowDataOverflow,domain:t.domain,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,includeHidden:(r=t.includeHidden)!==null&&r!==void 0?r:!1,reversed:t.reversed,ticks:t.ticks,height:t.height,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:(n=t.angle)!==null&&n!==void 0?n:0,minTickGap:(i=t.minTickGap)!==null&&i!==void 0?i:5,tick:(a=t.tick)!==null&&a!==void 0?a:!0,tickFormatter:t.tickFormatter},_.createElement(Cne,t))};class xl extends _.Component{render(){return _.createElement(kne,this.props)}}DL(xl,"displayName","XAxis");DL(xl,"defaultProps",{allowDataOverflow:vn.allowDataOverflow,allowDecimals:vn.allowDecimals,allowDuplicatedCategory:vn.allowDuplicatedCategory,height:vn.height,hide:!1,mirror:vn.mirror,orientation:vn.orientation,padding:vn.padding,reversed:vn.reversed,scale:vn.scale,tickCount:vn.tickCount,type:vn.type,xAxisId:0});var jne=t=>{var{ticks:e,label:r,labelGapWithTick:n=5,tickSize:i=0,tickMargin:a=0}=t,o=0;if(e){e.forEach(m=>{if(m){var p=m.getBoundingClientRect();p.width>o&&(o=p.width)}});var c=r?r.getBoundingClientRect().width:0,u=i+a,d=o+u+c+(r?n:0);return Math.round(d)}return 0},Rne=["dangerouslySetInnerHTML","ticks"];function LL(t,e,r){return(e=One(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function One(t){var e=Dne(t,"string");return typeof e=="symbol"?e:e+""}function Dne(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sb(){return sb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},sb.apply(null,arguments)}function Mne(t,e){if(t==null)return{};var r,n,i=Lne(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function Lne(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Vne(t){var e=Dt();return _.useEffect(()=>(e(wne(t)),()=>{e(bne(t))}),[t,e]),null}var Fne=t=>{var e,{yAxisId:r,className:n,width:i,label:a}=t,o=_.useRef(null),c=_.useRef(null),u=Se(kO),d=Gr(),m=Dt(),p="yAxis",v=Se(C=>vu(C,p,r,d)),w=Se(C=>hM(C,r)),b=Se(C=>qQ(C,r)),E=Se(C=>gM(C,p,r,d));if(_.useLayoutEffect(()=>{var C;if(!(i!=="auto"||!w||z1(a)||_.isValidElement(a))){var R=o.current,V=R==null||(C=R.tickRefs)===null||C===void 0?void 0:C.current,{tickSize:B,tickMargin:I}=R.props,j=jne({ticks:V,label:c.current,labelGapWithTick:5,tickSize:B,tickMargin:I});Math.round(w.width)!==Math.round(j)&&m(_ne({id:r,width:j}))}},[o,o==null||(e=o.current)===null||e===void 0||(e=e.tickRefs)===null||e===void 0?void 0:e.current,w?.width,w,m,a,r,i]),w==null||b==null)return null;var{dangerouslySetInnerHTML:S,ticks:P}=t,k=Mne(t,Rne);return _.createElement(mo,sb({},k,{ref:o,labelRef:c,scale:v,x:b.x,y:b.y,width:w.width,height:w.height,className:et("recharts-".concat(p," ").concat(p),n),viewBox:u,ticks:E}))},$ne=t=>{var e,r,n,i,a;return _.createElement(_.Fragment,null,_.createElement(Vne,{interval:(e=t.interval)!==null&&e!==void 0?e:"preserveEnd",id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:(r=t.includeHidden)!==null&&r!==void 0?r:!1,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:(n=t.angle)!==null&&n!==void 0?n:0,minTickGap:(i=t.minTickGap)!==null&&i!==void 0?i:5,tick:(a=t.tick)!==null&&a!==void 0?a:!0,tickFormatter:t.tickFormatter}),_.createElement(Fne,t))},Une={allowDataOverflow:xn.allowDataOverflow,allowDecimals:xn.allowDecimals,allowDuplicatedCategory:xn.allowDuplicatedCategory,hide:!1,mirror:xn.mirror,orientation:xn.orientation,padding:xn.padding,reversed:xn.reversed,scale:xn.scale,tickCount:xn.tickCount,type:xn.type,width:xn.width,yAxisId:0};class wl extends _.Component{render(){return _.createElement($ne,this.props)}}LL(wl,"displayName","YAxis");LL(wl,"defaultProps",Une);var Lx={exports:{}},Vx={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ok;function Bne(){if(ok)return Vx;ok=1;var t=tu();function e(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var r=typeof Object.is=="function"?Object.is:e,n=t.useSyncExternalStore,i=t.useRef,a=t.useEffect,o=t.useMemo,c=t.useDebugValue;return Vx.useSyncExternalStoreWithSelector=function(u,d,m,p,v){var w=i(null);if(w.current===null){var b={hasValue:!1,value:null};w.current=b}else b=w.current;w=o(function(){function S(V){if(!P){if(P=!0,k=V,V=p(V),v!==void 0&&b.hasValue){var B=b.value;if(v(B,V))return C=B}return C=V}if(B=C,r(k,V))return B;var I=p(V);return v!==void 0&&v(B,I)?(k=V,B):(k=V,C=I)}var P=!1,k,C,R=m===void 0?null:m;return[function(){return S(d())},R===null?void 0:function(){return S(R())}]},[d,m,p,v]);var E=n(u,w[0],w[1]);return a(function(){b.hasValue=!0,b.value=E},[E]),c(E),E},Vx}var lk;function zne(){return lk||(lk=1,Lx.exports=Bne()),Lx.exports}zne();function qne(t){t()}function Kne(){let t=null,e=null;return{clear(){t=null,e=null},notify(){qne(()=>{let r=t;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=t;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const i=e={callback:r,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!n||t===null||(n=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var ck={notify(){},get:()=>[]};function Wne(t,e){let r,n=ck,i=0,a=!1;function o(E){m();const S=n.subscribe(E);let P=!1;return()=>{P||(P=!0,S(),p())}}function c(){n.notify()}function u(){b.onStateChange&&b.onStateChange()}function d(){return a}function m(){i++,r||(r=t.subscribe(u),n=Kne())}function p(){i--,r&&i===0&&(r(),r=void 0,n.clear(),n=ck)}function v(){a||(a=!0,m())}function w(){a&&(a=!1,p())}const b={addNestedSub:o,notifyNestedSubs:c,handleChangeWrapper:u,isSubscribed:d,trySubscribe:v,tryUnsubscribe:w,getListeners:()=>n};return b}var Hne=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Gne=Hne(),Yne=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Qne=Yne(),Xne=()=>Gne||Qne?_.useLayoutEffect:_.useEffect,Jne=Xne(),Zne=Symbol.for("react-redux-context"),eie=typeof globalThis<"u"?globalThis:{};function tie(){if(!_.createContext)return{};const t=eie[Zne]??=new Map;let e=t.get(_.createContext);return e||(e=_.createContext(null),t.set(_.createContext,e)),e}var rie=tie();function nie(t){const{children:e,context:r,serverState:n,store:i}=t,a=_.useMemo(()=>{const u=Wne(i);return{store:i,subscription:u,getServerState:n?()=>n:void 0}},[i,n]),o=_.useMemo(()=>i.getState(),[i]);Jne(()=>{const{subscription:u}=a;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),o!==i.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[a,o]);const c=r||rie;return _.createElement(c.Provider,{value:a},e)}var iie=nie,aie=(t,e)=>e,aE=J([aie,nt,nQ,yr,kM,ts,HX,sr],JX),sE=t=>{var e=t.currentTarget.getBoundingClientRect(),r=e.width/t.currentTarget.offsetWidth,n=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/r),chartY:Math.round((t.clientY-e.top)/n)}},VL=Gn("mouseClick"),FL=Uf();FL.startListening({actionCreator:VL,effect:(t,e)=>{var r=t.payload,n=aE(e.getState(),sE(r));n?.activeIndex!=null&&e.dispatch(nX({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var ob=Gn("mouseMove"),$L=Uf();$L.startListening({actionCreator:ob,effect:(t,e)=>{var r=t.payload,n=e.getState(),i=R1(n,n.tooltip.settings.shared),a=aE(n,sE(r));i==="axis"&&(a?.activeIndex!=null?e.dispatch(SM({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate})):e.dispatch(EM()))}});function sie(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":e}var uk={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},UL=Xn({name:"rootProps",initialState:uk,reducers:{updateOptions:(t,e)=>{var r;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(r=e.payload.barGap)!==null&&r!==void 0?r:uk.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className}}}),oie=UL.reducer,{updateOptions:lie}=UL.actions,BL=Xn({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:cie}=BL.actions,uie=BL.reducer,zL=Gn("keyDown"),qL=Gn("focus"),oE=Uf();oE.startListening({actionCreator:zL,effect:(t,e)=>{var r=e.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=r.tooltip,a=t.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var o=Number(O1(i,Cl(r))),c=ts(r);if(a==="Enter"){var u=zp(r,"axis","hover",String(i.index));e.dispatch(Qw({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:u}));return}var d=GQ(r),m=d==="left-to-right"?1:-1,p=a==="ArrowRight"?1:-1,v=o+p*m;if(!(c==null||v>=c.length||v<0)){var w=zp(r,"axis","hover",String(v));e.dispatch(Qw({active:!0,activeIndex:v.toString(),activeDataKey:void 0,activeCoordinate:w}))}}}}});oE.startListening({actionCreator:qL,effect:(t,e)=>{var r=e.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=r.tooltip;if(!i.active&&i.index==null){var a="0",o=zp(r,"axis","hover",String(a));e.dispatch(Qw({activeDataKey:void 0,active:!0,activeIndex:a,activeCoordinate:o}))}}}});var Bn=Gn("externalEvent"),KL=Uf();KL.startListening({actionCreator:Bn,effect:(t,e)=>{if(t.payload.handler!=null){var r=e.getState(),n={activeCoordinate:LX(r),activeDataKey:DM(r),activeIndex:eo(r),activeLabel:OM(r),activeTooltipIndex:eo(r),isTooltipActive:VX(r)};t.payload.handler(n,t.payload.reactEvent)}}});var die=J([xu],t=>t.tooltipItemPayloads),fie=J([die,Xf,(t,e,r)=>e,(t,e,r)=>r],(t,e,r,n)=>{var i=t.find(c=>c.settings.dataKey===n);if(i!=null){var{positions:a}=i;if(a!=null){var o=e(a,r);return o}}}),WL=Gn("touchMove"),HL=Uf();HL.startListening({actionCreator:WL,effect:(t,e)=>{var r=t.payload,n=e.getState(),i=R1(n,n.tooltip.settings.shared);if(i==="axis"){var a=aE(n,sE({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));a?.activeIndex!=null&&e.dispatch(SM({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}else if(i==="item"){var o,c=r.touches[0],u=document.elementFromPoint(c.clientX,c.clientY);if(!u||!u.getAttribute)return;var d=u.getAttribute(NO),m=(o=u.getAttribute(CO))!==null&&o!==void 0?o:void 0,p=fie(e.getState(),d,m);e.dispatch(_M({activeDataKey:m,activeIndex:d,activeCoordinate:p}))}}});var hie=tO({brush:are,cartesianAxis:Ene,chartData:mJ,graphicalItems:YZ,layout:sK,legend:zK,options:cJ,polarAxis:RZ,polarOptions:uie,referenceElements:fre,rootProps:oie,tooltip:iX}),mie=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return kq({reducer:hie,preloadedState:e,middleware:n=>n({serializableCheck:!1}).concat([FL.middleware,$L.middleware,oE.middleware,KL.middleware,HL.middleware]),devTools:{serialize:{replacer:sie},name:"recharts-".concat(r)}})};function GL(t){var{preloadedState:e,children:r,reduxStoreName:n}=t,i=Gr(),a=_.useRef(null);if(i)return r;a.current==null&&(a.current=mie(e,n));var o=T_;return _.createElement(iie,{context:o,store:a.current},r)}function YL(t){var{layout:e,width:r,height:n,margin:i}=t,a=Dt(),o=Gr();return _.useEffect(()=>{o||(a(nK(e)),a(iK({width:r,height:n})),a(rK(i)))},[a,o,e,r,n,i]),null}function QL(t){var e=Dt();return _.useEffect(()=>{e(lie(t))},[e,t]),null}var pie=["children"];function gie(t,e){if(t==null)return{};var r,n,i=yie(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function yie(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Yp(){return Yp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Yp.apply(null,arguments)}var vie={width:"100%",height:"100%"},xie=_.forwardRef((t,e)=>{var r=RO(),n=OO(),i=VO();if(!Hc(r)||!Hc(n))return null;var{children:a,otherAttributes:o,title:c,desc:u}=t,d,m;return typeof o.tabIndex=="number"?d=o.tabIndex:d=i?0:void 0,typeof o.role=="string"?m=o.role:m=i?"application":void 0,_.createElement(AR,Yp({},o,{title:c,desc:u,role:m,tabIndex:d,width:r,height:n,style:vie,ref:e}),a)}),wie=t=>{var{children:e}=t,r=Se(Bg);if(!r)return null;var{width:n,height:i,y:a,x:o}=r;return _.createElement(AR,{width:n,height:i,x:o,y:a},e)},dk=_.forwardRef((t,e)=>{var{children:r}=t,n=gie(t,pie),i=Gr();return i?_.createElement(wie,null,r):_.createElement(xie,Yp({ref:e},n),r)});function bie(){var t=Dt(),[e,r]=_.useState(null),n=Se(OK);return _.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),a=i.width/e.offsetWidth;Nn(a)&&a!==n&&t(aK(a))}},[e,t,n]),r}function fk(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function _ie(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?fk(Object(r),!0).forEach(function(n){Eie(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Eie(t,e,r){return(e=Sie(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Sie(t){var e=Aie(t,"string");return typeof e=="symbol"?e:e+""}function Aie(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Tie=_.forwardRef((t,e)=>{var{children:r,className:n,height:i,onClick:a,onContextMenu:o,onDoubleClick:c,onMouseDown:u,onMouseEnter:d,onMouseLeave:m,onMouseMove:p,onMouseUp:v,onTouchEnd:w,onTouchMove:b,onTouchStart:E,style:S,width:P}=t,k=Dt(),[C,R]=_.useState(null),[V,B]=_.useState(null);yJ();var I=bie(),j=_.useCallback(Y=>{I(Y),typeof e=="function"&&e(Y),R(Y),B(Y)},[I,e,R,B]),D=_.useCallback(Y=>{k(VL(Y)),k(Bn({handler:a,reactEvent:Y}))},[k,a]),$=_.useCallback(Y=>{k(ob(Y)),k(Bn({handler:d,reactEvent:Y}))},[k,d]),M=_.useCallback(Y=>{k(EM()),k(Bn({handler:m,reactEvent:Y}))},[k,m]),U=_.useCallback(Y=>{k(ob(Y)),k(Bn({handler:p,reactEvent:Y}))},[k,p]),F=_.useCallback(()=>{k(qL())},[k]),me=_.useCallback(Y=>{k(zL(Y.key))},[k]),Pe=_.useCallback(Y=>{k(Bn({handler:o,reactEvent:Y}))},[k,o]),De=_.useCallback(Y=>{k(Bn({handler:c,reactEvent:Y}))},[k,c]),pe=_.useCallback(Y=>{k(Bn({handler:u,reactEvent:Y}))},[k,u]),ie=_.useCallback(Y=>{k(Bn({handler:v,reactEvent:Y}))},[k,v]),fe=_.useCallback(Y=>{k(Bn({handler:E,reactEvent:Y}))},[k,E]),ue=_.useCallback(Y=>{k(WL(Y)),k(Bn({handler:b,reactEvent:Y}))},[k,b]),W=_.useCallback(Y=>{k(Bn({handler:w,reactEvent:Y}))},[k,w]);return _.createElement(UM.Provider,{value:C},_.createElement(Pz.Provider,{value:V},_.createElement("div",{className:et("recharts-wrapper",n),style:_ie({position:"relative",cursor:"default",width:P,height:i},S),onClick:D,onContextMenu:Pe,onDoubleClick:De,onFocus:F,onKeyDown:me,onMouseDown:pe,onMouseEnter:$,onMouseLeave:M,onMouseMove:U,onMouseUp:ie,onTouchEnd:W,onTouchMove:ue,onTouchStart:fe,ref:j},r)))}),Pie=["children","className","width","height","style","compact","title","desc"];function Iie(t,e){if(t==null)return{};var r,n,i=Nie(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function Nie(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var XL=_.forwardRef((t,e)=>{var{children:r,className:n,width:i,height:a,style:o,compact:c,title:u,desc:d}=t,m=Iie(t,Pie),p=He(m,!1);return c?_.createElement(dk,{otherAttributes:p,title:u,desc:d},r):_.createElement(Tie,{className:n,style:o,width:i,height:a,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},_.createElement(dk,{otherAttributes:p,title:u,desc:d,ref:e},_.createElement(mre,null,r)))}),Cie=["width","height"];function lb(){return lb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},lb.apply(null,arguments)}function kie(t,e){if(t==null)return{};var r,n,i=jie(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function jie(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Rie={top:5,right:5,bottom:5,left:5},Oie={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Rie,reverseStackOrder:!1,syncMethod:"index"},JL=_.forwardRef(function(e,r){var n,i=Jn(e.categoricalChartProps,Oie),{width:a,height:o}=i,c=kie(i,Cie);if(!Hc(a)||!Hc(o))return null;var{chartName:u,defaultTooltipEventType:d,validateTooltipEventTypes:m,tooltipPayloadSearcher:p,categoricalChartProps:v}=e,w={chartName:u,defaultTooltipEventType:d,validateTooltipEventTypes:m,tooltipPayloadSearcher:p,eventEmitter:void 0};return _.createElement(GL,{preloadedState:{options:w},reduxStoreName:(n=v.id)!==null&&n!==void 0?n:u},_.createElement(_L,{chartData:v.data}),_.createElement(YL,{width:a,height:o,layout:i.layout,margin:i.margin}),_.createElement(QL,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),_.createElement(XL,lb({},c,{width:a,height:o,ref:r})))}),Die=["axis"],ZL=_.forwardRef((t,e)=>_.createElement(JL,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Die,tooltipPayloadSearcher:B1,categoricalChartProps:t,ref:e})),Mie=["axis","item"],lE=_.forwardRef((t,e)=>_.createElement(JL,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Mie,tooltipPayloadSearcher:B1,categoricalChartProps:t,ref:e}));function Lie(t){var e=Dt();return _.useEffect(()=>{e(cie(t))},[e,t]),null}var Vie=["width","height","layout"];function cb(){return cb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},cb.apply(null,arguments)}function Fie(t,e){if(t==null)return{};var r,n,i=$ie(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function $ie(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Uie={top:5,right:5,bottom:5,left:5},Bie={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Uie,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},zie=_.forwardRef(function(e,r){var n,i=Jn(e.categoricalChartProps,Bie),{width:a,height:o,layout:c}=i,u=Fie(i,Vie);if(!Hc(a)||!Hc(o))return null;var{chartName:d,defaultTooltipEventType:m,validateTooltipEventTypes:p,tooltipPayloadSearcher:v}=e,w={chartName:d,defaultTooltipEventType:m,validateTooltipEventTypes:p,tooltipPayloadSearcher:v,eventEmitter:void 0};return _.createElement(GL,{preloadedState:{options:w},reduxStoreName:(n=i.id)!==null&&n!==void 0?n:d},_.createElement(_L,{chartData:i.data}),_.createElement(YL,{width:a,height:o,layout:c,margin:i.margin}),_.createElement(QL,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),_.createElement(Lie,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),_.createElement(XL,cb({width:a,height:o},u,{ref:r})))}),qie=["item"],Kie={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},e4=_.forwardRef((t,e)=>{var r=Jn(t,Kie);return _.createElement(zie,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:qie,tooltipPayloadSearcher:B1,categoricalChartProps:r,ref:e})});function Wie(){const[t,e]=_.useState({totalCommunities:0,activeCommunities:0,totalTenants:0,monthlyRevenue:0,collectionRate:0}),[r,n]=_.useState([]),[i,a]=_.useState([]),[o,c]=_.useState(!0),[u,d]=_.useState(""),[m,p]=_.useState("all");_.useEffect(()=>{v()},[]);const v=async()=>{try{c(!0);const S=await d_.getSuperAdminStats();e(S);const P=await Tr.getCommunities(),k=await rf.getUsers(),C=P.map(V=>{const B=k.find(D=>D.id===V.adminId||D.email===V.adminId),I=new Date,j=V.subscriptionEndDate?new Date(V.subscriptionEndDate)>I?"active":"expired":"none";return{...V,adminName:B?.name||"N/A",subscriptionName:"Basic Plan",subscriptionStatus:j}});n(C);const R=[];for(const V of P.slice(0,5))try{const B=await O8.getSubscriptionPayments(V.id);R.push(...B)}catch(B){console.error(`Error fetching payments for community ${V.id}:`,B)}R.sort((V,B)=>B.createdAt.getTime()-V.createdAt.getTime()),a(R.slice(0,10))}catch(S){console.error("Error fetching dashboard data:",S)}finally{c(!1)}},w=async S=>{try{await Tr.toggleCommunityStatus(S),v()}catch(P){console.error("Error updating community status:",P)}},b=r.filter(S=>{const P=S.name.toLowerCase().includes(u.toLowerCase())||S.adminName?.toLowerCase().includes(u.toLowerCase()),k=m==="all"||m==="active"&&S.subscriptionStatus==="active"||m==="expired"&&S.subscriptionStatus==="expired"||m==="inactive"&&!S.isActive;return P&&k}),E=[{month:"Jan",communities:12,revenue:45e3},{month:"Feb",communities:18,revenue:52e3},{month:"Mar",communities:25,revenue:68e3},{month:"Apr",communities:32,revenue:75e3},{month:"May",communities:38,revenue:85e3},{month:"Jun",communities:t.totalCommunities,revenue:t.monthlyRevenue}];return o?f.jsx("div",{className:"p-6 ml-64",children:f.jsx("div",{className:"flex items-center justify-center h-64",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})}):f.jsxs("div",{className:"p-6 ml-64",children:[f.jsxs("div",{className:"mb-6",children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Super Admin Dashboard"}),f.jsx("p",{className:"text-gray-600",children:"Overview of all communities and platform performance"})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[f.jsx(Ls,{title:"Total Communities",value:t.totalCommunities.toString(),icon:Ti,change:`${t.activeCommunities} active`,changeType:"positive"}),f.jsx(Ls,{title:"Active Tenants",value:t.totalTenants.toLocaleString(),icon:Ig,change:"+8% from last month",changeType:"positive"}),f.jsx(Ls,{title:"Monthly Revenue",value:`₹${t.monthlyRevenue.toLocaleString()}`,icon:_i,change:"+15% from last month",changeType:"positive"}),f.jsx(Ls,{title:"Collection Rate",value:`${t.collectionRate}%`,icon:yR,change:"+2% from last month",changeType:"positive"})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[f.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Monthly Revenue"}),f.jsx(ol,{width:"100%",height:300,children:f.jsxs(lE,{data:E,children:[f.jsx(Zc,{strokeDasharray:"3 3"}),f.jsx(xl,{dataKey:"month"}),f.jsx(wl,{}),f.jsx(sl,{formatter:S=>[`₹${S.toLocaleString()}`,"Revenue"]}),f.jsx(Jc,{dataKey:"revenue",fill:"#309b47"})]})})]}),f.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Community Growth"}),f.jsx(ol,{width:"100%",height:300,children:f.jsxs(ZL,{data:E,children:[f.jsx(Zc,{strokeDasharray:"3 3"}),f.jsx(xl,{dataKey:"month"}),f.jsx(wl,{}),f.jsx(sl,{}),f.jsx(dy,{type:"monotone",dataKey:"communities",stroke:"#0e2625",strokeWidth:2})]})})]})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 mb-8",children:[f.jsx("div",{className:"p-6 border-b border-gray-200",children:f.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Subscription Payments"})}),f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full",children:[f.jsx("thead",{className:"bg-gray-50",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Community"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valid Until"})]})}),f.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(S=>{const P=r.find(k=>k.id===S.communityId);return f.jsxs("tr",{children:[f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsx("div",{className:"text-sm text-gray-900",children:S.createdAt.toLocaleDateString()})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsx("div",{className:"text-sm font-medium text-gray-900",children:P?.name||"Unknown"})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsxs("div",{className:"text-sm text-gray-900",children:["₹",S.amount.toLocaleString()]})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${S.status==="success"?"bg-green-100 text-green-800":S.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:S.status})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsx("div",{className:"text-sm text-gray-900",children:S.endDate.toLocaleDateString()})})]},S.id)})})]})})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[f.jsxs("div",{className:"p-6 border-b border-gray-200",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Communities Management"}),f.jsxs("button",{className:"bg-secondary text-white px-4 py-2 rounded-md hover:bg-secondary/90 flex items-center",children:[f.jsx(Wa,{className:"h-4 w-4 mr-2"}),"Add Community"]})]}),f.jsxs("div",{className:"mt-4 flex space-x-4",children:[f.jsxs("div",{className:"flex-1 relative",children:[f.jsx(Vf,{className:"h-5 w-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),f.jsx("input",{type:"text",placeholder:"Search communities or admins...",value:u,onChange:S=>d(S.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-secondary focus:border-transparent"})]}),f.jsxs("select",{value:m,onChange:S=>p(S.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-secondary focus:border-transparent",children:[f.jsx("option",{value:"all",children:"All Status"}),f.jsx("option",{value:"active",children:"Active Subscription"}),f.jsx("option",{value:"expired",children:"Expired Subscription"}),f.jsx("option",{value:"inactive",children:"Inactive"})]})]})]}),f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full",children:[f.jsx("thead",{className:"bg-gray-50",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Community Name"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Admin"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tenants"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subscription"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),f.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:b.slice(0,10).map(S=>f.jsxs("tr",{children:[f.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[f.jsx("div",{className:"text-sm font-medium text-gray-900",children:S.name}),f.jsxs("div",{className:"text-sm text-gray-500",children:["Created: ",S.createdAt.toLocaleDateString()]})]}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsx("div",{className:"text-sm text-gray-900",children:S.adminName})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsx("div",{className:"text-sm text-gray-900",children:S.totalTenants})}),f.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[f.jsx("div",{className:"text-sm text-gray-900",children:S.subscriptionName}),f.jsx("div",{className:"text-sm text-gray-500",children:S.subscriptionEndDate?`Until ${S.subscriptionEndDate.toLocaleDateString()}`:"No subscription"})]}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${S.subscriptionStatus==="active"?"bg-green-100 text-green-800":S.subscriptionStatus==="expired"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:S.subscriptionStatus==="active"?"Active":S.subscriptionStatus==="expired"?"Expired":"No Subscription"})}),f.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[f.jsx("button",{onClick:()=>w(S.id),className:`px-3 py-1 rounded text-xs font-medium ${S.isActive?"bg-red-100 text-red-800 hover:bg-red-200":"bg-green-100 text-green-800 hover:bg-green-200"}`,children:S.isActive?"Disable":"Enable"}),f.jsx("button",{className:"text-secondary hover:text-secondary/80",children:"View"})]})]},S.id))})]})})]})]})}function Hie(){const[t,e]=_.useState([]),[r,n]=_.useState([]),[i,a]=_.useState(!0),[o,c]=_.useState(""),[u,d]=_.useState("all"),[m,p]=_.useState(!1),[v,w]=_.useState(null),[b,E]=_.useState({name:"",address:"",city:"",state:"",pincode:"",adminName:"",adminEmail:"",adminPhone:"",subscriptionId:"",totalBlocks:""});_.useEffect(()=>{S()},[]);const S=async()=>{try{a(!0);const[I,j,D]=await Promise.all([Tr.getCommunities(),rf.getUsers(),Yo.getSubscriptions()]),$=I.map(M=>{const U=j.find(me=>me.id===M.adminId),F=D.find(me=>me.id===M.subscriptionId);return{...M,adminName:U?.name||"N/A",adminEmail:U?.email||"N/A",subscriptionName:F?.name||"N/A"}});e($),n(D)}catch(I){console.error("Error fetching data:",I)}finally{a(!1)}},P=async I=>{I.preventDefault();try{const j={name:b.name,address:b.address,city:b.city,state:b.state,pincode:b.pincode,adminId:"",subscriptionId:b.subscriptionId,isActive:!0,totalTenants:0,totalBlocks:parseInt(b.totalBlocks)||0,settings:{paymentGateway:{razorpayKeyId:"",razorpayKeySecret:""},whatsapp:{apiKey:"",phoneNumberId:"",templateId:""},charges:{gstEnabled:!0,gstPercentage:18,handlingCharges:50}}};if(v)await Tr.updateCommunity(v.id,j);else{const D=await rf.createUser({email:b.adminEmail,name:b.adminName,phone:b.adminPhone,role:"community_admin",isActive:!0});await Tr.createCommunity({...j,adminId:D})}p(!1),w(null),V(),S()}catch(j){console.error("Error saving community:",j)}},k=async I=>{try{await Tr.toggleCommunityStatus(I),S()}catch(j){console.error("Error toggling community status:",j)}},C=I=>{w(I),E({name:I.name,address:I.address,city:I.city,state:I.state,pincode:I.pincode,adminName:I.adminName||"",adminEmail:I.adminEmail||"",adminPhone:"",subscriptionId:I.subscriptionId,totalBlocks:I.totalBlocks.toString()}),p(!0)},R=async I=>{if(confirm("Are you sure you want to delete this community?"))try{await Tr.deleteCommunity(I),S()}catch(j){console.error("Error deleting community:",j)}},V=()=>{E({name:"",address:"",city:"",state:"",pincode:"",adminName:"",adminEmail:"",adminPhone:"",subscriptionId:"",totalBlocks:""})},B=t.filter(I=>{const j=I.name.toLowerCase().includes(o.toLowerCase())||I.adminName?.toLowerCase().includes(o.toLowerCase()),D=u==="all"||u==="active"&&I.isActive||u==="inactive"&&!I.isActive;return j&&D});return i?f.jsx("div",{className:"p-6 ml-64",children:f.jsx("div",{className:"flex items-center justify-center h-64",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})}):f.jsxs("div",{className:"p-6 ml-64",children:[f.jsx("div",{className:"mb-6",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Communities Management"}),f.jsx("p",{className:"text-gray-600",children:"Manage all registered communities and their subscriptions"})]}),f.jsxs("button",{onClick:()=>{V(),w(null),p(!0)},className:"bg-secondary text-white px-4 py-2 rounded-md hover:bg-secondary/90 flex items-center",children:[f.jsx(Wa,{className:"h-4 w-4 mr-2"}),"Add Community"]})]})}),f.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:f.jsxs("div",{className:"flex space-x-4",children:[f.jsxs("div",{className:"flex-1 relative",children:[f.jsx(Vf,{className:"h-5 w-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),f.jsx("input",{type:"text",placeholder:"Search communities or admins...",value:o,onChange:I=>c(I.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-secondary focus:border-transparent"})]}),f.jsxs("select",{value:u,onChange:I=>d(I.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-secondary focus:border-transparent",children:[f.jsx("option",{value:"all",children:"All Status"}),f.jsx("option",{value:"active",children:"Active"}),f.jsx("option",{value:"inactive",children:"Inactive"})]})]})}),f.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full",children:[f.jsx("thead",{className:"bg-gray-50",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Community Details"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Admin"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subscription"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tenants"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),f.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:B.map(I=>f.jsxs("tr",{children:[f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsxs("div",{children:[f.jsx("div",{className:"text-sm font-medium text-gray-900",children:I.name}),f.jsxs("div",{className:"text-sm text-gray-500",children:[I.city,", ",I.state]}),f.jsxs("div",{className:"text-xs text-gray-400",children:["Created: ",I.createdAt.toLocaleDateString()]})]})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsxs("div",{children:[f.jsx("div",{className:"text-sm text-gray-900",children:I.adminName}),f.jsx("div",{className:"text-sm text-gray-500",children:I.adminEmail})]})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsx("div",{className:"text-sm text-gray-900",children:I.subscriptionName})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsx("div",{className:"text-sm text-gray-900",children:I.totalTenants})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${I.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:I.isActive?"Active":"Inactive"})}),f.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[f.jsx("button",{onClick:()=>k(I.id),className:"text-gray-400 hover:text-gray-600",children:I.isActive?f.jsx(J8,{className:"h-5 w-5"}):f.jsx(X8,{className:"h-5 w-5"})}),f.jsx("button",{onClick:()=>C(I),className:"text-secondary hover:text-secondary/80",children:f.jsx(sf,{className:"h-4 w-4"})}),f.jsx("button",{className:"text-primary hover:text-primary/80",children:f.jsx(mR,{className:"h-4 w-4"})}),f.jsx("button",{onClick:()=>R(I.id),className:"text-red-600 hover:text-red-800",children:f.jsx(qc,{className:"h-4 w-4"})})]})]},I.id))})]})})}),m&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:f.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[f.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:v?"Edit Community":"Add New Community"}),f.jsxs("form",{onSubmit:P,className:"space-y-4",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{className:"md:col-span-2",children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Community Name *"}),f.jsx("input",{type:"text",required:!0,value:b.name,onChange:I=>E({...b,name:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent"})]}),f.jsxs("div",{className:"md:col-span-2",children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address *"}),f.jsx("input",{type:"text",required:!0,value:b.address,onChange:I=>E({...b,address:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City *"}),f.jsx("input",{type:"text",required:!0,value:b.city,onChange:I=>E({...b,city:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"State *"}),f.jsxs("select",{required:!0,value:b.state,onChange:I=>E({...b,state:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent",children:[f.jsx("option",{value:"",children:"Select State"}),f.jsx("option",{value:"Maharashtra",children:"Maharashtra"}),f.jsx("option",{value:"Karnataka",children:"Karnataka"}),f.jsx("option",{value:"Tamil Nadu",children:"Tamil Nadu"}),f.jsx("option",{value:"Delhi",children:"Delhi"}),f.jsx("option",{value:"Gujarat",children:"Gujarat"}),f.jsx("option",{value:"Rajasthan",children:"Rajasthan"}),f.jsx("option",{value:"Uttar Pradesh",children:"Uttar Pradesh"}),f.jsx("option",{value:"West Bengal",children:"West Bengal"}),f.jsx("option",{value:"Telangana",children:"Telangana"}),f.jsx("option",{value:"Andhra Pradesh",children:"Andhra Pradesh"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pincode *"}),f.jsx("input",{type:"text",required:!0,value:b.pincode,onChange:I=>E({...b,pincode:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total Blocks"}),f.jsx("input",{type:"number",value:b.totalBlocks,onChange:I=>E({...b,totalBlocks:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Admin Name *"}),f.jsx("input",{type:"text",required:!0,value:b.adminName,onChange:I=>E({...b,adminName:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Admin Email *"}),f.jsx("input",{type:"email",required:!0,value:b.adminEmail,onChange:I=>E({...b,adminEmail:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Admin Phone *"}),f.jsx("input",{type:"tel",required:!0,value:b.adminPhone,onChange:I=>E({...b,adminPhone:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subscription Plan *"}),f.jsxs("select",{required:!0,value:b.subscriptionId,onChange:I=>E({...b,subscriptionId:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent",children:[f.jsx("option",{value:"",children:"Select Subscription"}),r.map(I=>f.jsxs("option",{value:I.id,children:[I.name," - ₹",I.price.toLocaleString()]},I.id))]})]})]}),f.jsxs("div",{className:"flex space-x-4 pt-4",children:[f.jsx("button",{type:"button",onClick:()=>p(!1),className:"flex-1 bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700",children:"Cancel"}),f.jsxs("button",{type:"submit",className:"flex-1 bg-secondary text-white px-4 py-2 rounded-md hover:bg-secondary/90",children:[v?"Update":"Create"," Community"]})]})]})]})})]})}function Gie(){const[t,e]=_.useState([]),[r,n]=_.useState(!0),[i,a]=_.useState(!1),[o,c]=_.useState(null),[u,d]=_.useState({name:"",description:"",price:"",duration:"12",features:[""],maxTenants:"",isActive:!0});_.useEffect(()=>{m()},[]);const m=async()=>{try{const C=await Yo.getSubscriptions();e(C)}catch(C){console.error("Error fetching subscriptions:",C)}finally{n(!1)}},p=async C=>{C.preventDefault();try{const R={name:u.name,description:u.description,price:parseFloat(u.price),duration:parseInt(u.duration),features:u.features.filter(V=>V.trim()!==""),maxTenants:parseInt(u.maxTenants),isActive:u.isActive};o?await Yo.updateSubscription(o.id,R):await Yo.createSubscription(R),a(!1),c(null),b(),m()}catch(R){console.error("Error saving subscription:",R)}},v=C=>{c(C),d({name:C.name,description:C.description,price:C.price.toString(),duration:C.duration.toString(),features:C.features.length>0?C.features:[""],maxTenants:C.maxTenants.toString(),isActive:C.isActive}),a(!0)},w=async C=>{if(confirm("Are you sure you want to delete this subscription?"))try{await Yo.deleteSubscription(C),m()}catch(R){console.error("Error deleting subscription:",R)}},b=()=>{d({name:"",description:"",price:"",duration:"12",features:[""],maxTenants:"",isActive:!0})},E=()=>{d({...u,features:[...u.features,""]})},S=(C,R)=>{const V=[...u.features];V[C]=R,d({...u,features:V})},P=C=>{const R=u.features.filter((V,B)=>B!==C);d({...u,features:R})},k=C=>C.toLowerCase().includes("basic")?Ti:C.toLowerCase().includes("premium")?gR:C.toLowerCase().includes("enterprise")?hR:Ti;return r?f.jsx("div",{className:"p-6 ml-64",children:f.jsx("div",{className:"flex items-center justify-center h-64",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})}):f.jsxs("div",{className:"p-6 ml-64",children:[f.jsx("div",{className:"mb-6",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Subscription Management"}),f.jsx("p",{className:"text-gray-600",children:"Manage subscription plans for communities"})]}),f.jsxs("button",{onClick:()=>{b(),c(null),a(!0)},className:"bg-secondary text-white px-4 py-2 rounded-md hover:bg-secondary/90 flex items-center",children:[f.jsx(Wa,{className:"h-4 w-4 mr-2"}),"Add Subscription"]})]})}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(C=>{const R=k(C.name);return f.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 relative",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx(R,{className:"h-8 w-8 text-secondary"}),f.jsxs("div",{className:"flex space-x-2",children:[f.jsx("button",{onClick:()=>v(C),className:"p-1 text-gray-400 hover:text-gray-600",children:f.jsx(sf,{className:"h-4 w-4"})}),f.jsx("button",{onClick:()=>w(C.id),className:"p-1 text-gray-400 hover:text-red-600",children:f.jsx(qc,{className:"h-4 w-4"})})]})]}),f.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:C.name}),f.jsx("p",{className:"text-gray-600 mb-4",children:C.description}),f.jsxs("div",{className:"mb-4",children:[f.jsxs("span",{className:"text-3xl font-bold text-gray-900",children:["₹",C.price.toLocaleString()]}),f.jsxs("span",{className:"text-gray-500 ml-1",children:["/",C.duration," months"]})]}),f.jsx("div",{className:"mb-4",children:f.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Up to ",C.maxTenants===999999?"Unlimited":C.maxTenants," tenants"]})}),f.jsx("ul",{className:"space-y-2 mb-6",children:C.features.map((V,B)=>f.jsxs("li",{className:"flex items-center text-sm text-gray-600",children:[f.jsx("div",{className:"w-2 h-2 bg-secondary rounded-full mr-3"}),V]},B))}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${C.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:C.isActive?"Active":"Inactive"}),f.jsxs("span",{className:"text-xs text-gray-500",children:["Created: ",C.createdAt.toLocaleDateString()]})]})]},C.id)})}),i&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:f.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[f.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:o?"Edit Subscription":"Add New Subscription"}),f.jsxs("form",{onSubmit:p,className:"space-y-4",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Plan Name"}),f.jsx("input",{type:"text",required:!0,value:u.name,onChange:C=>d({...u,name:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent",placeholder:"e.g., Basic Plan"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price (₹)"}),f.jsx("input",{type:"number",required:!0,value:u.price,onChange:C=>d({...u,price:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent",placeholder:"2999"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration (months)"}),f.jsxs("select",{value:u.duration,onChange:C=>d({...u,duration:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent",children:[f.jsx("option",{value:"1",children:"1 Month"}),f.jsx("option",{value:"3",children:"3 Months"}),f.jsx("option",{value:"6",children:"6 Months"}),f.jsx("option",{value:"12",children:"12 Months"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Tenants"}),f.jsx("input",{type:"number",required:!0,value:u.maxTenants,onChange:C=>d({...u,maxTenants:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent",placeholder:"50"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),f.jsx("textarea",{required:!0,value:u.description,onChange:C=>d({...u,description:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent",rows:3,placeholder:"Perfect for small communities"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Features"}),u.features.map((C,R)=>f.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[f.jsx("input",{type:"text",value:C,onChange:V=>S(R,V.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent",placeholder:"Enter feature"}),u.features.length>1&&f.jsx("button",{type:"button",onClick:()=>P(R),className:"p-2 text-red-600 hover:text-red-800",children:f.jsx(qc,{className:"h-4 w-4"})})]},R)),f.jsx("button",{type:"button",onClick:E,className:"text-secondary hover:text-secondary/80 text-sm",children:"+ Add Feature"})]}),f.jsx("div",{children:f.jsxs("label",{className:"flex items-center",children:[f.jsx("input",{type:"checkbox",checked:u.isActive,onChange:C=>d({...u,isActive:C.target.checked}),className:"mr-2"}),f.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"})]})}),f.jsxs("div",{className:"flex space-x-4 pt-4",children:[f.jsx("button",{type:"button",onClick:()=>a(!1),className:"flex-1 bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700",children:"Cancel"}),f.jsxs("button",{type:"submit",className:"flex-1 bg-secondary text-white px-4 py-2 rounded-md hover:bg-secondary/90",children:[o?"Update":"Create"," Subscription"]})]})]})]})})]})}function Yie(){const[t,e]=_.useState([]),[r,n]=_.useState([]),[i,a]=_.useState(!0),[o,c]=_.useState(""),[u,d]=_.useState("all"),[m,p]=_.useState("all"),[v,w]=_.useState({from:"",to:""});_.useEffect(()=>{b()},[]);const b=async()=>{try{a(!0);const[R]=await Promise.all([Tr.getCommunities()]);n(R);const V=[];for(const B of R)try{const j=(await sR.getPayments(B.id)).map(D=>({...D,communityName:B.name,tenantName:"Tenant Name"}));V.push(...j)}catch(I){console.error(`Error fetching payments for community ${B.id}:`,I)}V.sort((B,I)=>I.createdAt.getTime()-B.createdAt.getTime()),e(V)}catch(R){console.error("Error fetching data:",R)}finally{a(!1)}},E=t.filter(R=>{const V=R.communityName?.toLowerCase().includes(o.toLowerCase())||R.tenantName?.toLowerCase().includes(o.toLowerCase())||R.razorpayPaymentId.toLowerCase().includes(o.toLowerCase()),B=u==="all"||R.status===u,I=m==="all"||R.communityId===m;let j=!0;if(v.from&&v.to){const D=R.createdAt.toISOString().split("T")[0];j=D>=v.from&&D<=v.to}return V&&B&&I&&j}),S=E.reduce((R,V)=>R+V.amount,0),P=E.filter(R=>R.status==="success"),k=E.length>0?P.length/E.length*100:0,C=()=>{const R=[["Date","Community","Tenant","Amount","Status","Payment ID","Method"].join(","),...E.map(j=>[j.createdAt.toLocaleDateString(),j.communityName,j.tenantName,j.amount,j.status,j.razorpayPaymentId,j.method].join(","))].join(`
`),V=new Blob([R],{type:"text/csv"}),B=window.URL.createObjectURL(V),I=document.createElement("a");I.href=B,I.download=`payments-${new Date().toISOString().split("T")[0]}.csv`,I.click(),window.URL.revokeObjectURL(B)};return i?f.jsx("div",{className:"p-6 ml-64",children:f.jsx("div",{className:"flex items-center justify-center h-64",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})}):f.jsxs("div",{className:"p-6 ml-64",children:[f.jsx("div",{className:"mb-6",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Payment Management"}),f.jsx("p",{className:"text-gray-600",children:"Monitor all payment transactions across communities"})]}),f.jsxs("button",{onClick:C,className:"bg-secondary text-white px-4 py-2 rounded-md hover:bg-secondary/90 flex items-center",children:[f.jsx(Pg,{className:"h-4 w-4 mr-2"}),"Export Payments"]})]})}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[f.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Payments"}),f.jsx("p",{className:"text-2xl font-bold text-gray-900",children:E.length})]}),f.jsx(_i,{className:"h-8 w-8 text-primary"})]})}),f.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Amount"}),f.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["₹",S.toLocaleString()]})]}),f.jsx(_i,{className:"h-8 w-8 text-secondary"})]})}),f.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Successful"}),f.jsx("p",{className:"text-2xl font-bold text-green-600",children:P.length})]}),f.jsx(_i,{className:"h-8 w-8 text-green-600"})]})}),f.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Success Rate"}),f.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[k.toFixed(1),"%"]})]}),f.jsx(_i,{className:"h-8 w-8 text-primary"})]})})]}),f.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[f.jsxs("div",{className:"relative",children:[f.jsx(Vf,{className:"h-5 w-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),f.jsx("input",{type:"text",placeholder:"Search payments...",value:o,onChange:R=>c(R.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-secondary focus:border-transparent"})]}),f.jsxs("select",{value:u,onChange:R=>d(R.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-secondary focus:border-transparent",children:[f.jsx("option",{value:"all",children:"All Status"}),f.jsx("option",{value:"success",children:"Success"}),f.jsx("option",{value:"failed",children:"Failed"}),f.jsx("option",{value:"pending",children:"Pending"})]}),f.jsxs("select",{value:m,onChange:R=>p(R.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-secondary focus:border-transparent",children:[f.jsx("option",{value:"all",children:"All Communities"}),r.map(R=>f.jsx("option",{value:R.id,children:R.name},R.id))]}),f.jsx("input",{type:"date",value:v.from,onChange:R=>w({...v,from:R.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-secondary focus:border-transparent"}),f.jsx("input",{type:"date",value:v.to,onChange:R=>w({...v,to:R.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-secondary focus:border-transparent"})]})}),f.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full",children:[f.jsx("thead",{className:"bg-gray-50",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date & Time"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Community"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tenant"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Method"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment ID"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),f.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:E.map(R=>f.jsxs("tr",{children:[f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsxs("div",{children:[f.jsx("div",{className:"text-sm text-gray-900",children:R.createdAt.toLocaleDateString()}),f.jsx("div",{className:"text-sm text-gray-500",children:R.createdAt.toLocaleTimeString()})]})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsx("div",{className:"text-sm text-gray-900",children:R.communityName})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsx("div",{className:"text-sm text-gray-900",children:R.tenantName})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["₹",R.amount.toLocaleString()]})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsx("div",{className:"text-sm text-gray-900 capitalize",children:R.method})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${R.status==="success"?"bg-green-100 text-green-800":R.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:R.status})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsx("div",{className:"text-sm text-gray-900 font-mono",children:R.razorpayPaymentId})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:f.jsx("button",{className:"text-primary hover:text-primary/80",children:f.jsx(mR,{className:"h-4 w-4"})})})]},R.id))})]})})})]})}function Qie(){const[t,e]=_.useState(!0),[r,n]=_.useState({from:new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0],to:new Date().toISOString().split("T")[0]}),[i,a]=_.useState({totalRevenue:0,totalCommunities:0,activeCommunities:0,totalTenants:0,monthlyGrowth:0,collectionRate:0}),o=[{month:"Jan",revenue:45e3,communities:12,tenants:450},{month:"Feb",revenue:52e3,communities:18,tenants:520},{month:"Mar",revenue:68e3,communities:25,tenants:680},{month:"Apr",revenue:75e3,communities:32,tenants:750},{month:"May",revenue:85e3,communities:38,tenants:850},{month:"Jun",revenue:95e3,communities:45,tenants:950}],c=[{name:"Basic Plan",value:60,color:"#0e2625"},{name:"Premium Plan",value:30,color:"#309b47"},{name:"Enterprise Plan",value:10,color:"#f59e0b"}],u=[{state:"Maharashtra",communities:15,revenue:35e3},{state:"Karnataka",communities:12,revenue:28e3},{state:"Tamil Nadu",communities:8,revenue:18e3},{state:"Delhi",communities:6,revenue:15e3},{state:"Gujarat",communities:4,revenue:9e3}];_.useEffect(()=>{d()},[r]);const d=async()=>{try{e(!0);const p=await d_.getSuperAdminStats();a({totalRevenue:95e3,totalCommunities:p.totalCommunities,activeCommunities:p.activeCommunities,totalTenants:p.totalTenants,monthlyGrowth:15.5,collectionRate:p.collectionRate})}catch(p){console.error("Error fetching report data:",p)}finally{e(!1)}},m=()=>{const p=[["Metric","Value"],["Total Revenue",`₹${i.totalRevenue.toLocaleString()}`],["Total Communities",i.totalCommunities],["Active Communities",i.activeCommunities],["Total Tenants",i.totalTenants],["Monthly Growth",`${i.monthlyGrowth}%`],["Collection Rate",`${i.collectionRate}%`],[""],["Monthly Revenue Data"],["Month","Revenue","Communities","Tenants"],...o.map(E=>[E.month,E.revenue,E.communities,E.tenants])].map(E=>E.join(",")).join(`
`),v=new Blob([p],{type:"text/csv"}),w=window.URL.createObjectURL(v),b=document.createElement("a");b.href=w,b.download=`super-admin-report-${new Date().toISOString().split("T")[0]}.csv`,b.click(),window.URL.revokeObjectURL(w)};return t?f.jsx("div",{className:"p-6 ml-64",children:f.jsx("div",{className:"flex items-center justify-center h-64",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})}):f.jsxs("div",{className:"p-6 ml-64",children:[f.jsx("div",{className:"mb-6",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Platform Reports"}),f.jsx("p",{className:"text-gray-600",children:"Comprehensive analytics and insights"})]}),f.jsxs("div",{className:"flex space-x-4",children:[f.jsxs("div",{className:"flex space-x-2",children:[f.jsx("input",{type:"date",value:r.from,onChange:p=>n({...r,from:p.target.value}),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent"}),f.jsx("input",{type:"date",value:r.to,onChange:p=>n({...r,to:p.target.value}),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent"})]}),f.jsxs("button",{onClick:m,className:"bg-secondary text-white px-4 py-2 rounded-md hover:bg-secondary/90 flex items-center",children:[f.jsx(Pg,{className:"h-4 w-4 mr-2"}),"Export Report"]})]})]})}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[f.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),f.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["₹",i.totalRevenue.toLocaleString()]}),f.jsxs("p",{className:"text-sm text-green-600",children:["+",i.monthlyGrowth,"% from last month"]})]}),f.jsx(_i,{className:"h-8 w-8 text-primary"})]})}),f.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Communities"}),f.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.activeCommunities}),f.jsxs("p",{className:"text-sm text-gray-500",children:["of ",i.totalCommunities," total"]})]}),f.jsx(Ti,{className:"h-8 w-8 text-secondary"})]})}),f.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Tenants"}),f.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.totalTenants.toLocaleString()}),f.jsx("p",{className:"text-sm text-green-600",children:"+8% from last month"})]}),f.jsx(Ig,{className:"h-8 w-8 text-primary"})]})}),f.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Collection Rate"}),f.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[i.collectionRate,"%"]}),f.jsx("p",{className:"text-sm text-green-600",children:"+2% from last month"})]}),f.jsx(yR,{className:"h-8 w-8 text-secondary"})]})})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[f.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Monthly Revenue Trend"}),f.jsx(ol,{width:"100%",height:300,children:f.jsxs(ZL,{data:o,children:[f.jsx(Zc,{strokeDasharray:"3 3"}),f.jsx(xl,{dataKey:"month"}),f.jsx(wl,{}),f.jsx(sl,{formatter:p=>[`₹${p.toLocaleString()}`,"Revenue"]}),f.jsx(dy,{type:"monotone",dataKey:"revenue",stroke:"#309b47",strokeWidth:2})]})})]}),f.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Subscription Distribution"}),f.jsx(ol,{width:"100%",height:300,children:f.jsxs(e4,{children:[f.jsx(ly,{data:c,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,dataKey:"value",children:c.map((p,v)=>f.jsx(bu,{fill:p.color},`cell-${v}`))}),f.jsx(sl,{formatter:p=>[`${p}%`,"Percentage"]})]})}),f.jsx("div",{className:"flex justify-center space-x-4 mt-4",children:c.map((p,v)=>f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:p.color}}),f.jsxs("span",{className:"text-sm text-gray-600",children:[p.name," (",p.value,"%)"]})]},v))})]})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[f.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Community Growth"}),f.jsx(ol,{width:"100%",height:300,children:f.jsxs(lE,{data:o,children:[f.jsx(Zc,{strokeDasharray:"3 3"}),f.jsx(xl,{dataKey:"month"}),f.jsx(wl,{}),f.jsx(sl,{}),f.jsx(Jc,{dataKey:"communities",fill:"#0e2625"})]})})]}),f.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"State-wise Distribution"}),f.jsx("div",{className:"space-y-4",children:u.map((p,v)=>f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-sm font-medium text-gray-900",children:p.state}),f.jsxs("div",{className:"text-sm text-gray-500",children:[p.communities," communities"]})]}),f.jsxs("div",{className:"text-right",children:[f.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["₹",p.revenue.toLocaleString()]}),f.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:f.jsx("div",{className:"bg-secondary h-2 rounded-full",style:{width:`${p.revenue/35e3*100}%`}})})]})]},v))})]})]})]})}const Xie={platformName:"SocietyPay",supportEmail:"support@societypay.com",supportPhone:"+91 98765 43210",maintenanceMode:!1,allowRegistrations:!0,maxCommunitiesPerAdmin:1,razorpayKeyId:"",razorpayKeySecret:"",webhookSecret:"",commissionPercentage:2.5,gstOnCommission:!0,emailNotifications:!0,smsNotifications:!1,whatsappNotifications:!0,adminAlerts:!0,paymentAlerts:!0,sessionTimeout:30,passwordMinLength:8,requireTwoFactor:!1,allowPasswordReset:!0,maxLoginAttempts:5};function Jie(){const[t,e]=_.useState("platform"),[r,n]=_.useState(!0),[i,a]=_.useState(!1),[o,c]=_.useState(""),[u,d]=_.useState(Xie),m=_.useCallback(async()=>{try{n(!0);const b=await mw.getPlatformSettings();b&&d(E=>({...E,...b}))}catch(b){console.error("Error loading settings:",b),c("Error: Could not load settings.")}finally{n(!1)}},[]);_.useEffect(()=>{m()},[m]);const p=b=>{const{name:E,value:S,type:P,checked:k}=b.target,C=P==="checkbox"?k:P==="number"?parseFloat(S)||0:S;d(R=>({...R,[E]:C}))},v=async()=>{try{a(!0),await mw.updatePlatformSettings(u),c("Settings saved successfully!"),setTimeout(()=>c(""),3e3)}catch(b){console.error("Error saving settings:",b),c("Error: Could not save settings.")}finally{a(!1)}},w=[{id:"platform",label:"Platform Settings",icon:h_},{id:"payment",label:"Payment Gateway",icon:hl},{id:"notifications",label:"Notifications",icon:Ag},{id:"security",label:"Security",icon:Y8},{id:"database",label:"Database",icon:q8}];return r?f.jsx("div",{className:"p-6 ml-64 flex justify-center items-center h-screen",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})}):f.jsxs("div",{className:"p-6 ml-64",children:[f.jsxs("div",{className:"mb-6",children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Platform Settings"}),f.jsx("p",{className:"text-gray-600",children:"Manage global platform configuration and settings"}),o&&f.jsx("div",{className:`mt-4 p-3 rounded-md ${o.includes("Error")?"bg-red-50 text-red-700 border border-red-200":"bg-green-50 text-green-700 border border-green-200"}`,children:o})]}),f.jsx("div",{className:"border-b border-gray-200 mb-6",children:f.jsx("nav",{className:"-mb-px flex space-x-8",children:w.map(b=>f.jsxs("button",{onClick:()=>e(b.id),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center ${t===b.id?"border-secondary text-secondary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[f.jsx(b.icon,{className:"h-4 w-4 mr-2"}),b.label]},b.id))})}),t==="platform"&&f.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Platform Configuration"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsx(pi,{label:"Platform Name",name:"platformName",value:u.platformName,onChange:p}),f.jsx(pi,{label:"Support Email",name:"supportEmail",type:"email",value:u.supportEmail,onChange:p}),f.jsx(pi,{label:"Support Phone",name:"supportPhone",type:"tel",value:u.supportPhone,onChange:p}),f.jsx(pi,{label:"Max Communities per Admin",name:"maxCommunitiesPerAdmin",type:"number",value:u.maxCommunitiesPerAdmin,onChange:p})]}),f.jsxs("div",{className:"mt-6 space-y-4",children:[f.jsx(Ui,{label:"Maintenance Mode",name:"maintenanceMode",checked:u.maintenanceMode,onChange:p}),f.jsx(Ui,{label:"Allow New Registrations",name:"allowRegistrations",checked:u.allowRegistrations,onChange:p})]}),f.jsx("div",{className:"mt-6",children:f.jsx("button",{onClick:v,disabled:i,className:"bg-secondary text-white px-6 py-2 rounded-md hover:bg-secondary/90 disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Saving...":"Save Settings"})})]}),t==="payment"&&f.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Payment Gateway Configuration"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsx(pi,{label:"Razorpay Key ID",name:"razorpayKeyId",value:u.razorpayKeyId,onChange:p}),f.jsx(pi,{label:"Razorpay Key Secret",name:"razorpayKeySecret",type:"password",value:u.razorpayKeySecret,onChange:p}),f.jsx(pi,{label:"Webhook Secret",name:"webhookSecret",type:"password",value:u.webhookSecret,onChange:p}),f.jsx(pi,{label:"Commission Percentage (%)",name:"commissionPercentage",type:"number",step:"0.1",value:u.commissionPercentage,onChange:p})]}),f.jsx("div",{className:"mt-6",children:f.jsx(Ui,{label:"Apply GST on Commission",name:"gstOnCommission",checked:u.gstOnCommission,onChange:p})}),f.jsx("div",{className:"mt-6",children:f.jsx("button",{onClick:v,disabled:i,className:"bg-secondary text-white px-6 py-2 rounded-md hover:bg-secondary/90 disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Saving...":"Save Settings"})})]}),t==="notifications"&&f.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Notification Configuration"}),f.jsxs("div",{className:"space-y-4",children:[f.jsx(Ui,{label:"Email Notifications",name:"emailNotifications",checked:u.emailNotifications,onChange:p}),f.jsx(Ui,{label:"SMS Notifications",name:"smsNotifications",checked:u.smsNotifications,onChange:p}),f.jsx(Ui,{label:"WhatsApp Notifications",name:"whatsappNotifications",checked:u.whatsappNotifications,onChange:p}),f.jsx(Ui,{label:"Admin Alerts",name:"adminAlerts",checked:u.adminAlerts,onChange:p}),f.jsx(Ui,{label:"Payment Alerts",name:"paymentAlerts",checked:u.paymentAlerts,onChange:p})]}),f.jsx("div",{className:"mt-6",children:f.jsx("button",{onClick:v,disabled:i,className:"bg-secondary text-white px-6 py-2 rounded-md hover:bg-secondary/90 disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Saving...":"Save Settings"})})]}),t==="security"&&f.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Security Configuration"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsx(pi,{label:"Session Timeout (minutes)",name:"sessionTimeout",type:"number",value:u.sessionTimeout,onChange:p}),f.jsx(pi,{label:"Password Minimum Length",name:"passwordMinLength",type:"number",value:u.passwordMinLength,onChange:p}),f.jsx(pi,{label:"Max Login Attempts",name:"maxLoginAttempts",type:"number",value:u.maxLoginAttempts,onChange:p})]}),f.jsxs("div",{className:"mt-6 space-y-4",children:[f.jsx(Ui,{label:"Require Two-Factor Authentication",name:"requireTwoFactor",checked:u.requireTwoFactor,onChange:p}),f.jsx(Ui,{label:"Allow Password Reset",name:"allowPasswordReset",checked:u.allowPasswordReset,onChange:p})]}),f.jsx("div",{className:"mt-6",children:f.jsx("button",{onClick:v,disabled:i,className:"bg-secondary text-white px-6 py-2 rounded-md hover:bg-secondary/90 disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Saving...":"Save Settings"})})]}),t==="database"&&f.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Database Management"}),f.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Critical database operations like backups and cleanup should be handled by secure, server-side Cloud Functions, not directly from the client."})]})]})}const pi=({label:t,name:e,type:r="text",value:n,onChange:i,step:a})=>f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t}),f.jsx("input",{type:r,name:e,value:n,onChange:i,step:a,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent"})]}),Ui=({label:t,name:e,checked:r,onChange:n})=>f.jsxs("label",{className:"flex items-center",children:[f.jsx("input",{type:"checkbox",name:e,checked:r,onChange:n,className:"h-4 w-4 rounded border-gray-300 text-secondary focus:ring-secondary"}),f.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700",children:t})]});function Zie(){const{userProfile:t}=$r(),[e,r]=_.useState({totalTenants:0,totalMonthlyMaintenance:0,totalPaid:0,totalDue:0,collectionRate:0}),[n,i]=_.useState([]),[a,o]=_.useState(!0),c=_.useCallback(async()=>{if(t?.communityId)try{o(!0);const[m,p,v]=await Promise.all([d_.getCommunityAdminStats(t.communityId),sR.getPayments(t.communityId,10),ja.getTenants(t.communityId)]);r(m);const w=p.map(b=>{const E=v.find(S=>S.id===b.tenantId);return{...b,tenantName:E?.name||"Unknown",flatNumber:E?.flatNumber||"N/A"}});i(w)}catch(m){console.error("Error fetching dashboard data:",m)}finally{o(!1)}},[t?.communityId]);_.useEffect(()=>{t?.communityId&&c()},[t?.communityId,c]);const u=[{name:"Paid",value:Math.round(e.totalPaid/(e.totalPaid+e.totalDue)*100)||0,color:"#309b47"},{name:"Pending",value:Math.round(e.totalDue/(e.totalPaid+e.totalDue)*100)||0,color:"#f59e0b"}],d=[{month:"Jan",collected:85e3,target:9e4},{month:"Feb",collected:88e3,target:9e4},{month:"Mar",collected:92e3,target:9e4},{month:"Apr",collected:87e3,target:9e4},{month:"May",collected:95e3,target:9e4},{month:"Jun",collected:e.totalPaid,target:e.totalMonthlyMaintenance}];return a?f.jsx("div",{className:"p-6 ml-64",children:f.jsx("div",{className:"flex items-center justify-center h-64",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})}):f.jsxs("div",{className:"p-6 ml-64",children:[f.jsxs("div",{className:"mb-6",children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Community Dashboard"}),f.jsxs("p",{className:"text-gray-600",children:["Monthly Overview - ",new Date().toLocaleString("default",{month:"long",year:"numeric"})]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[f.jsx(Ls,{title:"Total Tenants",value:e.totalTenants.toString(),icon:Ig,change:"+3 new this month",changeType:"positive"}),f.jsx(Ls,{title:"Monthly Maintenance",value:`₹${e.totalMonthlyMaintenance.toLocaleString()}`,icon:_i,change:`Target: ₹${e.totalMonthlyMaintenance.toLocaleString()}`,changeType:"neutral"}),f.jsx(Ls,{title:"Collected This Month",value:`₹${e.totalPaid.toLocaleString()}`,icon:Tg,change:`${e.collectionRate.toFixed(1)}% collection rate`,changeType:"positive"}),f.jsx(Ls,{title:"Pending Amount",value:`₹${e.totalDue.toLocaleString()}`,icon:U8,change:`${Math.round(e.totalDue/(e.totalMonthlyMaintenance/e.totalTenants||1))} tenants pending`,changeType:"negative"})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[f.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Payment Status Distribution"}),f.jsx(ol,{width:"100%",height:300,children:f.jsxs(e4,{children:[f.jsx(ly,{data:u,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,dataKey:"value",children:u.map((m,p)=>f.jsx(bu,{fill:m.color},`cell-${p}`))}),f.jsx(sl,{formatter:m=>[`${m}%`,"Percentage"]})]})}),f.jsx("div",{className:"flex justify-center space-x-4 mt-4",children:u.map((m,p)=>f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:m.color}}),f.jsxs("span",{className:"text-sm text-gray-600",children:[m.name," (",m.value,"%)"]})]},p))})]}),f.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Monthly Collection vs Target"}),f.jsx(ol,{width:"100%",height:300,children:f.jsxs(lE,{data:d,children:[f.jsx(Zc,{strokeDasharray:"3 3"}),f.jsx(xl,{dataKey:"month"}),f.jsx(wl,{}),f.jsx(sl,{formatter:m=>[`₹${m.toLocaleString()}`,""]}),f.jsx(Jc,{dataKey:"collected",fill:"#309b47"}),f.jsx(Jc,{dataKey:"target",fill:"#0e2625"})]})})]})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[f.jsx("div",{className:"p-6 border-b border-gray-200",children:f.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Payments"})}),f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full",children:[f.jsx("thead",{className:"bg-gray-50",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tenant"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Flat No"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),f.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.length>0?n.map((m,p)=>f.jsxs("tr",{children:[f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsx("div",{className:"text-sm font-medium text-gray-900",children:m.tenantName})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsx("div",{className:"text-sm text-gray-900",children:m.flatNumber})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsxs("div",{className:"text-sm text-gray-900",children:["₹",m.amount.toLocaleString()]})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${m.status==="success"?"bg-green-100 text-green-800":m.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:m.status})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsx("div",{className:"text-sm text-gray-900",children:m.createdAt.toLocaleDateString()})})]},p)):f.jsx("tr",{children:f.jsx("td",{colSpan:5,className:"px-6 py-4 text-center text-gray-500",children:"No recent payments found"})})})]})})]})]})}function eae(){const[t,e]=_.useState([]),[r,n]=_.useState([]),[i,a]=_.useState(!0),[o,c]=_.useState("blocks"),[u,d]=_.useState(!1),[m,p]=_.useState("block"),[v,w]=_.useState(null),[b,E]=_.useState({name:"",totalFlats:""}),[S,P]=_.useState({blockId:"",flatNumber:""}),k=_.useCallback(async()=>{try{a(!0);const M=[{id:"1",name:"Block A",totalFlats:20,createdAt:new Date},{id:"2",name:"Block B",totalFlats:15,createdAt:new Date},{id:"3",name:"Block C",totalFlats:25,createdAt:new Date}],U=[{id:"1",blockId:"1",flatNumber:"A-101",isOccupied:!0,tenantName:"John Doe",createdAt:new Date},{id:"2",blockId:"1",flatNumber:"A-102",isOccupied:!1,createdAt:new Date},{id:"3",blockId:"1",flatNumber:"A-103",isOccupied:!0,tenantName:"Jane Smith",createdAt:new Date},{id:"4",blockId:"2",flatNumber:"B-101",isOccupied:!0,tenantName:"Bob Johnson",createdAt:new Date},{id:"5",blockId:"2",flatNumber:"B-102",isOccupied:!1,createdAt:new Date}];e(M),n(U)}catch(M){console.error("Error fetching data:",M)}finally{a(!1)}},[]);_.useEffect(()=>{k()},[k]);const C=()=>{p("block"),w(null),E({name:"",totalFlats:""}),d(!0)},R=()=>{p("flat"),w(null),P({blockId:"",flatNumber:""}),d(!0)},V=M=>{p("block"),w(M),E({name:M.name,totalFlats:M.totalFlats.toString()}),d(!0)},B=M=>{p("flat"),w(M),P({blockId:M.blockId,flatNumber:M.flatNumber}),d(!0)},I=M=>{M.preventDefault(),console.log("Block form:",b),d(!1)},j=M=>{M.preventDefault(),console.log("Flat form:",S),d(!1)},D=M=>{confirm("Are you sure you want to delete this block?")&&console.log("Delete block:",M)},$=M=>{confirm("Are you sure you want to delete this flat?")&&console.log("Delete flat:",M)};return i?f.jsx("div",{className:"p-6 ml-64",children:f.jsx("div",{className:"flex items-center justify-center h-64",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})}):f.jsxs("div",{className:"p-6 ml-64",children:[f.jsxs("div",{className:"mb-6",children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Blocks & Flats Management"}),f.jsx("p",{className:"text-gray-600",children:"Manage your community's blocks and flat assignments"})]}),f.jsx("div",{className:"border-b border-gray-200 mb-6",children:f.jsxs("nav",{className:"-mb-px flex space-x-8",children:[f.jsxs("button",{onClick:()=>c("blocks"),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center ${o==="blocks"?"border-secondary text-secondary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[f.jsx(fP,{className:"h-4 w-4 mr-2"}),"Blocks"]}),f.jsxs("button",{onClick:()=>c("flats"),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center ${o==="flats"?"border-secondary text-secondary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[f.jsx(zc,{className:"h-4 w-4 mr-2"}),"Flats"]})]})}),o==="blocks"&&f.jsxs("div",{children:[f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Blocks"}),f.jsxs("button",{onClick:C,className:"bg-secondary text-white px-4 py-2 rounded-md hover:bg-secondary/90 flex items-center",children:[f.jsx(Wa,{className:"h-4 w-4 mr-2"}),"Add Block"]})]}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(M=>{const U=r.filter(Pe=>Pe.blockId===M.id),F=U.filter(Pe=>Pe.isOccupied).length,me=U.length>0?F/U.length*100:0;return f.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx(fP,{className:"h-8 w-8 text-primary mr-3"}),f.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:M.name})]}),f.jsxs("div",{className:"flex space-x-2",children:[f.jsx("button",{onClick:()=>V(M),className:"text-gray-400 hover:text-gray-600",children:f.jsx(sf,{className:"h-4 w-4"})}),f.jsx("button",{onClick:()=>D(M.id),className:"text-gray-400 hover:text-red-600",children:f.jsx(qc,{className:"h-4 w-4"})})]})]}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-sm text-gray-600",children:"Total Flats"}),f.jsx("span",{className:"text-sm font-medium text-gray-900",children:U.length})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-sm text-gray-600",children:"Occupied"}),f.jsx("span",{className:"text-sm font-medium text-gray-900",children:F})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-sm text-gray-600",children:"Vacant"}),f.jsx("span",{className:"text-sm font-medium text-gray-900",children:U.length-F})]}),f.jsxs("div",{children:[f.jsxs("div",{className:"flex justify-between mb-1",children:[f.jsx("span",{className:"text-sm text-gray-600",children:"Occupancy Rate"}),f.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[me.toFixed(1),"%"]})]}),f.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:f.jsx("div",{className:"bg-secondary h-2 rounded-full",style:{width:`${me}%`}})})]})]})]},M.id)})})]}),o==="flats"&&f.jsxs("div",{children:[f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Flats"}),f.jsxs("button",{onClick:R,className:"bg-secondary text-white px-4 py-2 rounded-md hover:bg-secondary/90 flex items-center",children:[f.jsx(Wa,{className:"h-4 w-4 mr-2"}),"Add Flat"]})]}),f.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full",children:[f.jsx("thead",{className:"bg-gray-50",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Flat Number"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Block"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tenant"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),f.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(M=>{const U=t.find(F=>F.id===M.blockId);return f.jsxs("tr",{children:[f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsxs("div",{className:"flex items-center",children:[f.jsx(zc,{className:"h-5 w-5 text-gray-400 mr-3"}),f.jsx("div",{className:"text-sm font-medium text-gray-900",children:M.flatNumber})]})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsx("div",{className:"text-sm text-gray-900",children:U?.name})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsx("div",{className:"text-sm text-gray-900",children:M.tenantName||"Vacant"})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${M.isOccupied?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:M.isOccupied?"Occupied":"Vacant"})}),f.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[f.jsx("button",{onClick:()=>B(M),className:"text-secondary hover:text-secondary/80",children:f.jsx(sf,{className:"h-4 w-4"})}),f.jsx("button",{onClick:()=>$(M.id),className:"text-red-600 hover:text-red-800",children:f.jsx(qc,{className:"h-4 w-4"})})]})]},M.id)})})]})})})]}),u&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:f.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[f.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:[v?"Edit":"Add"," ",m==="block"?"Block":"Flat"]}),m==="block"?f.jsxs("form",{onSubmit:I,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Block Name *"}),f.jsx("input",{type:"text",required:!0,value:b.name,onChange:M=>E({...b,name:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent",placeholder:"e.g., Block A"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total Flats"}),f.jsx("input",{type:"number",value:b.totalFlats,onChange:M=>E({...b,totalFlats:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent",placeholder:"20"})]}),f.jsxs("div",{className:"flex space-x-4 pt-4",children:[f.jsx("button",{type:"button",onClick:()=>d(!1),className:"flex-1 bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700",children:"Cancel"}),f.jsxs("button",{type:"submit",className:"flex-1 bg-secondary text-white px-4 py-2 rounded-md hover:bg-secondary/90",children:[v?"Update":"Add"," Block"]})]})]}):f.jsxs("form",{onSubmit:j,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Block *"}),f.jsxs("select",{required:!0,value:S.blockId,onChange:M=>P({...S,blockId:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent",children:[f.jsx("option",{value:"",children:"Select Block"}),t.map(M=>f.jsx("option",{value:M.id,children:M.name},M.id))]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Flat Number *"}),f.jsx("input",{type:"text",required:!0,value:S.flatNumber,onChange:M=>P({...S,flatNumber:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent",placeholder:"e.g., A-101"})]}),f.jsxs("div",{className:"flex space-x-4 pt-4",children:[f.jsx("button",{type:"button",onClick:()=>d(!1),className:"flex-1 bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700",children:"Cancel"}),f.jsxs("button",{type:"submit",className:"flex-1 bg-secondary text-white px-4 py-2 rounded-md hover:bg-secondary/90",children:[v?"Update":"Add"," Flat"]})]})]})]})})]})}function tae(){const{userProfile:t}=$r(),[e,r]=_.useState([]),[n,i]=_.useState([]),[a,o]=_.useState(!0),[c,u]=_.useState(""),[d,m]=_.useState("all"),[p,v]=_.useState(!1),[w,b]=_.useState(null),[E,S]=_.useState({name:"",email:"",phone:"",flatNumber:"",blockId:"",monthlyMaintenance:"",isActive:!0}),P=_.useCallback(async()=>{if(t?.communityId)try{o(!0);const[I,j]=await Promise.all([ja.getTenants(t.communityId),R8.getBlocks(t.communityId)]);r(I),i(j)}catch(I){console.error("Error fetching data:",I)}finally{o(!1)}},[t?.communityId]);_.useEffect(()=>{t?.communityId&&P()},[t?.communityId,P]);const k=async I=>{if(I.preventDefault(),!!t?.communityId)try{const j={communityId:t.communityId,blockId:E.blockId,flatId:"",name:E.name,email:E.email,phone:E.phone,flatNumber:E.flatNumber,monthlyMaintenance:parseFloat(E.monthlyMaintenance),isActive:E.isActive};w?await ja.updateTenant(w.id,j):await ja.createTenant(j),v(!1),b(null),V(),P()}catch(j){console.error("Error saving tenant:",j)}},C=I=>{b(I),S({name:I.name,email:I.email,phone:I.phone,flatNumber:I.flatNumber,blockId:I.blockId,monthlyMaintenance:I.monthlyMaintenance.toString(),isActive:I.isActive}),v(!0)},R=async I=>{if(confirm("Are you sure you want to delete this tenant?"))try{await ja.deleteTenant(I),P()}catch(j){console.error("Error deleting tenant:",j)}},V=()=>{S({name:"",email:"",phone:"",flatNumber:"",blockId:"",monthlyMaintenance:"",isActive:!0})},B=e.filter(I=>{const j=I.name.toLowerCase().includes(c.toLowerCase())||I.email.toLowerCase().includes(c.toLowerCase())||I.flatNumber.toLowerCase().includes(c.toLowerCase()),D=d==="all"||d==="active"&&I.isActive||d==="inactive"&&!I.isActive;return j&&D});return a?f.jsx("div",{className:"p-6 ml-64",children:f.jsx("div",{className:"flex items-center justify-center h-64",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})}):f.jsxs("div",{className:"p-6 ml-64",children:[f.jsx("div",{className:"mb-6",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Tenants Management"}),f.jsx("p",{className:"text-gray-600",children:"Manage tenant information and maintenance charges"})]}),f.jsxs("button",{onClick:()=>{V(),b(null),v(!0)},className:"bg-secondary text-white px-4 py-2 rounded-md hover:bg-secondary/90 flex items-center",children:[f.jsx(Wa,{className:"h-4 w-4 mr-2"}),"Add Tenant"]})]})}),f.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:f.jsxs("div",{className:"flex space-x-4",children:[f.jsxs("div",{className:"flex-1 relative",children:[f.jsx(Vf,{className:"h-5 w-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),f.jsx("input",{type:"text",placeholder:"Search tenants...",value:c,onChange:I=>u(I.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-secondary focus:border-transparent"})]}),f.jsxs("select",{value:d,onChange:I=>m(I.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-secondary focus:border-transparent",children:[f.jsx("option",{value:"all",children:"All Status"}),f.jsx("option",{value:"active",children:"Active"}),f.jsx("option",{value:"inactive",children:"Inactive"})]})]})}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:B.map(I=>{const j=n.find(D=>D.id===I.blockId);return f.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx(Z8,{className:"h-8 w-8 text-primary mr-3"}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:I.name}),f.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${I.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:I.isActive?"Active":"Inactive"})]})]}),f.jsxs("div",{className:"flex space-x-2",children:[f.jsx("button",{onClick:()=>C(I),className:"text-gray-400 hover:text-gray-600",children:f.jsx(sf,{className:"h-4 w-4"})}),f.jsx("button",{onClick:()=>R(I.id),className:"text-gray-400 hover:text-red-600",children:f.jsx(qc,{className:"h-4 w-4"})})]})]}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[f.jsx(zc,{className:"h-4 w-4 mr-2"}),f.jsxs("span",{children:[I.flatNumber," (",j?.name,")"]})]}),f.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[f.jsx(K8,{className:"h-4 w-4 mr-2"}),f.jsx("span",{children:I.email})]}),f.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[f.jsx(W8,{className:"h-4 w-4 mr-2"}),f.jsx("span",{children:I.phone})]}),f.jsx("div",{className:"pt-2 border-t border-gray-200",children:f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-sm text-gray-600",children:"Monthly Maintenance"}),f.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["₹",I.monthlyMaintenance.toLocaleString()]})]})})]})]},I.id)})}),p&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:f.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[f.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:w?"Edit Tenant":"Add New Tenant"}),f.jsxs("form",{onSubmit:k,className:"space-y-4",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name *"}),f.jsx("input",{type:"text",required:!0,value:E.name,onChange:I=>S({...E,name:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),f.jsx("input",{type:"email",required:!0,value:E.email,onChange:I=>S({...E,email:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number *"}),f.jsx("input",{type:"tel",required:!0,value:E.phone,onChange:I=>S({...E,phone:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Block *"}),f.jsxs("select",{required:!0,value:E.blockId,onChange:I=>S({...E,blockId:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent",children:[f.jsx("option",{value:"",children:"Select Block"}),n.map(I=>f.jsx("option",{value:I.id,children:I.name},I.id))]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Flat Number *"}),f.jsx("input",{type:"text",required:!0,value:E.flatNumber,onChange:I=>S({...E,flatNumber:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent",placeholder:"e.g., A-101"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Monthly Maintenance (₹) *"}),f.jsx("input",{type:"number",required:!0,value:E.monthlyMaintenance,onChange:I=>S({...E,monthlyMaintenance:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent",placeholder:"3000"})]})]}),f.jsx("div",{children:f.jsxs("label",{className:"flex items-center",children:[f.jsx("input",{type:"checkbox",checked:E.isActive,onChange:I=>S({...E,isActive:I.target.checked}),className:"mr-2"}),f.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active Tenant"})]})}),f.jsxs("div",{className:"flex space-x-4 pt-4",children:[f.jsx("button",{type:"button",onClick:()=>v(!1),className:"flex-1 bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700",children:"Cancel"}),f.jsxs("button",{type:"submit",className:"flex-1 bg-secondary text-white px-4 py-2 rounded-md hover:bg-secondary/90",children:[w?"Update":"Add"," Tenant"]})]})]})]})})]})}function rae(){const{userProfile:t}=$r(),[e,r]=_.useState([]),[n,i]=_.useState([]),[a,o]=_.useState(!0),[c,u]=_.useState(new Date().toLocaleString("default",{month:"long"})),[d,m]=_.useState(new Date().getFullYear()),[p,v]=_.useState("all"),[w,b]=_.useState(!1),E=["January","February","March","April","May","June","July","August","September","October","November","December"],S=Array.from({length:5},(I,j)=>new Date().getFullYear()-2+j),P=_.useCallback(async()=>{if(t?.communityId)try{o(!0);const[I,j]=await Promise.all([pw.getMaintenanceRecords(t.communityId,{month:c,year:d}),ja.getTenants(t.communityId)]);r(I),i(j)}catch(I){console.error("Error fetching data:",I)}finally{o(!1)}},[t?.communityId,c,d]);_.useEffect(()=>{t?.communityId&&P()},[t?.communityId,P]);const k=async()=>{if(t?.communityId)try{await pw.generateMonthlyMaintenance(t.communityId,c,d),b(!1),P()}catch(I){console.error("Error generating maintenance:",I)}},C=async()=>{console.log("Sending reminders..."),alert("Reminders sent successfully!")},R=()=>{const I=[["Tenant Name","Flat Number","Amount","GST","Handling Charges","Total","Status","Due Date"].join(","),...V.map(M=>{const U=n.find(F=>F.id===M.tenantId);return[U?.name||"Unknown",U?.flatNumber||"N/A",M.amount,M.gstAmount,M.handlingCharges,M.totalAmount,M.status,M.dueDate.toLocaleDateString()].join(",")})].join(`
`),j=new Blob([I],{type:"text/csv"}),D=window.URL.createObjectURL(j),$=document.createElement("a");$.href=D,$.download=`maintenance-${c}-${d}.csv`,$.click(),window.URL.revokeObjectURL(D)},V=e.filter(I=>p==="all"||I.status===p),B={total:V.length,paid:V.filter(I=>I.status==="paid").length,pending:V.filter(I=>I.status==="pending").length,overdue:V.filter(I=>I.status==="overdue").length,totalAmount:V.reduce((I,j)=>I+j.totalAmount,0),paidAmount:V.filter(I=>I.status==="paid").reduce((I,j)=>I+j.totalAmount,0)};return a?f.jsx("div",{className:"p-6 ml-64",children:f.jsx("div",{className:"flex items-center justify-center h-64",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})}):f.jsxs("div",{className:"p-6 ml-64",children:[f.jsx("div",{className:"mb-6",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Maintenance Management"}),f.jsx("p",{className:"text-gray-600",children:"Generate and track monthly maintenance collections"})]}),f.jsxs("div",{className:"flex space-x-3",children:[f.jsxs("button",{onClick:C,className:"bg-primary text-white px-4 py-2 rounded-md hover:bg-primary/90 flex items-center",children:[f.jsx(af,{className:"h-4 w-4 mr-2"}),"Send Reminders"]}),f.jsxs("button",{onClick:()=>b(!0),className:"bg-secondary text-white px-4 py-2 rounded-md hover:bg-secondary/90 flex items-center",children:[f.jsx(Wa,{className:"h-4 w-4 mr-2"}),"Generate Maintenance"]})]})]})}),f.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:f.jsxs("div",{className:"flex space-x-4",children:[f.jsx("select",{value:c,onChange:I=>u(I.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-secondary focus:border-transparent",children:E.map(I=>f.jsx("option",{value:I,children:I},I))}),f.jsx("select",{value:d,onChange:I=>m(parseInt(I.target.value)),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-secondary focus:border-transparent",children:S.map(I=>f.jsx("option",{value:I,children:I},I))}),f.jsxs("select",{value:p,onChange:I=>v(I.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-secondary focus:border-transparent",children:[f.jsx("option",{value:"all",children:"All Status"}),f.jsx("option",{value:"pending",children:"Pending"}),f.jsx("option",{value:"paid",children:"Paid"}),f.jsx("option",{value:"overdue",children:"Overdue"})]}),f.jsxs("button",{onClick:R,className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700 flex items-center",children:[f.jsx(Pg,{className:"h-4 w-4 mr-2"}),"Export"]})]})}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[f.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Records"}),f.jsx("p",{className:"text-2xl font-bold text-gray-900",children:B.total})]}),f.jsx(f_,{className:"h-8 w-8 text-primary"})]})}),f.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Paid"}),f.jsx("p",{className:"text-2xl font-bold text-green-600",children:B.paid})]}),f.jsx(Tg,{className:"h-8 w-8 text-green-600"})]})}),f.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending"}),f.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:B.pending})]}),f.jsx(fR,{className:"h-8 w-8 text-yellow-600"})]})}),f.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Collection Rate"}),f.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[B.total>0?(B.paid/B.total*100).toFixed(1):0,"%"]})]}),f.jsx(_i,{className:"h-8 w-8 text-secondary"})]})})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[f.jsx("div",{className:"p-6 border-b border-gray-200",children:f.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Maintenance Records - ",c," ",d]})}),f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full",children:[f.jsx("thead",{className:"bg-gray-50",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tenant"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Flat"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"GST"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Due Date"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),f.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:V.map(I=>{const j=n.find(D=>D.id===I.tenantId);return f.jsxs("tr",{children:[f.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[f.jsx("div",{className:"text-sm font-medium text-gray-900",children:j?.name||"Unknown"}),f.jsx("div",{className:"text-sm text-gray-500",children:j?.email})]}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsx("div",{className:"text-sm text-gray-900",children:j?.flatNumber})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsxs("div",{className:"text-sm text-gray-900",children:["₹",I.amount.toLocaleString()]})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsxs("div",{className:"text-sm text-gray-900",children:["₹",I.gstAmount.toLocaleString()]})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["₹",I.totalAmount.toLocaleString()]})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsx("div",{className:"text-sm text-gray-900",children:I.dueDate.toLocaleDateString()})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${I.status==="paid"?"bg-green-100 text-green-800":I.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:I.status})}),f.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[f.jsx("button",{className:"text-secondary hover:text-secondary/80 mr-3",children:"Send Reminder"}),f.jsx("button",{className:"text-primary hover:text-primary/80",children:"View Details"})]})]},I.id)})})]})})]}),w&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:f.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[f.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Generate Monthly Maintenance"}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Month"}),f.jsx("select",{value:c,onChange:I=>u(I.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent",children:E.map(I=>f.jsx("option",{value:I,children:I},I))})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Year"}),f.jsx("select",{value:d,onChange:I=>m(parseInt(I.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent",children:S.map(I=>f.jsx("option",{value:I,children:I},I))})]}),f.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:f.jsxs("p",{className:"text-sm text-blue-700",children:["This will generate maintenance records for all active tenants for ",c," ",d,"."]})})]}),f.jsxs("div",{className:"flex space-x-4 pt-6",children:[f.jsx("button",{onClick:()=>b(!1),className:"flex-1 bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700",children:"Cancel"}),f.jsx("button",{onClick:k,className:"flex-1 bg-secondary text-white px-4 py-2 rounded-md hover:bg-secondary/90",children:"Generate"})]})]})})]})}class nae{config=null;setConfig(e){this.config=e}getHeaders(){if(!this.config)throw new Error("WhatsApp configuration not set");return{wabaNumber:this.config.wabaNumber,Key:this.config.apiKey,"Content-Type":"application/json"}}getBaseUrl(){return this.config?.baseUrl||"https://cpaasreseller.notify24x7.com/REST/directApi"}async sendMessage(e){try{const r=await fetch(`${this.getBaseUrl()}/message`,{method:"POST",headers:this.getHeaders(),body:JSON.stringify(e)});if(!r.ok)throw new Error(`WhatsApp API error: ${r.status} ${r.statusText}`);return{success:!0,data:await r.json()}}catch(r){return console.error("Error sending WhatsApp message:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}async sendTextMessage(e,r){const n={to:e,type:"text",recipient_type:"individual",text:{body:r}};return this.sendMessage(n)}async sendTemplateMessage(e,r,n="en",i){const a={to:e,type:"template",template:{name:r,language:{code:n,policy:"deterministic"},components:i||[]}};return this.sendMessage(a)}async sendMaintenanceNotification(e,r,n,i,a,o,c){const u="maintenance_reminder",d=[{type:"body",parameters:[{type:"text",text:r},{type:"text",text:n},{type:"text",text:c},{type:"text",text:`₹${i.toLocaleString()}`},{type:"text",text:a}]},{type:"button",sub_type:"url",index:"0",parameters:[{type:"text",text:o}]}];return this.sendTemplateMessage(e,u,"en",d)}async sendPaymentConfirmation(e,r,n,i,a){const o="payment_confirmation",c=[{type:"body",parameters:[{type:"text",text:r},{type:"text",text:`₹${n.toLocaleString()}`},{type:"text",text:a},{type:"text",text:i}]}];return this.sendTemplateMessage(e,o,"en",c)}async sendImageMessage(e,r,n){const i={to:e,type:"image",recipient_type:"individual",image:{link:r,caption:n||""}};return this.sendMessage(i)}async sendDocumentMessage(e,r,n,i){const a={to:e,type:"document",recipient_type:"individual",document:{link:r,filename:n,caption:i||""}};return this.sendMessage(a)}async sendInteractiveListMessage(e,r,n,i,a,o){const c={messaging_product:"whatsapp",recipient_type:"individual",to:e,type:"interactive",interactive:{type:"list",header:{type:"text",text:r},body:{text:n},footer:{text:i},action:{button:a,sections:o}}};return this.sendMessage(c)}async sendInteractiveButtonMessage(e,r,n){const i={messaging_product:"whatsapp",recipient_type:"individual",to:e,type:"interactive",interactive:{type:"button",body:{text:r},action:{buttons:n.map(a=>({type:"reply",reply:{id:a.id,title:a.title}}))}}};return this.sendMessage(i)}async fetchTemplates(){return[{id:"1",name:"maintenance_reminder",language:"en",status:"APPROVED",category:"UTILITY",components:[{type:"HEADER",format:"TEXT",text:"Maintenance Due - {{1}}"},{type:"BODY",text:`Dear {{1}},

Your maintenance fee for Flat {{2}} in {{3}} is due.

Amount: {{4}}
Due Date: {{5}}

Please pay at your earliest convenience.`},{type:"FOOTER",text:"Thank you for your cooperation."},{type:"BUTTONS",buttons:[{type:"URL",text:"Pay Now",url:"https://pay.example.com/{{1}}"}]}]},{id:"2",name:"payment_confirmation",language:"en",status:"APPROVED",category:"UTILITY",components:[{type:"HEADER",format:"TEXT",text:"Payment Received"},{type:"BODY",text:`Dear {{1}},

We have received your maintenance payment of {{2}} for {{3}}.

Transaction ID: {{4}}

Thank you for your payment!`},{type:"FOOTER",text:"SocietyPay - Maintenance Management"}]}]}}const Na=new nae;class iae{async sendMaintenanceReminder(e,r,n,i){try{const a=new Date(r.dueDate).toLocaleDateString("en-IN",{day:"numeric",month:"long",year:"numeric"});return await Na.sendMaintenanceNotification(e.phone,e.name,e.flatNumber,r.totalAmount,a,n,i),!0}catch(a){return console.error("Error sending maintenance reminder:",a),!1}}async sendPaymentConfirmation(e,r,n,i){try{return await Na.sendPaymentConfirmation(e.phone,e.name,r,n,i),!0}catch(a){return console.error("Error sending payment confirmation:",a),!1}}async sendBulkReminders(e,r,n,i){let a=0,o=0;for(const c of e){const u=r.find(d=>d.tenantId===c.id&&d.status==="pending");if(u){const d=i(c.id,u.id);await this.sendMaintenanceReminder(c,u,d,n)?a++:o++,await new Promise(p=>setTimeout(p,1e3))}}return{success:a,failed:o}}async sendOverdueNotices(e,r,n){let i=0,a=0;for(const o of e){const c=r.find(u=>u.tenantId===o.id&&u.status==="overdue");if(c){try{const u=Math.floor((new Date().getTime()-new Date(c.dueDate).getTime())/864e5);await Na.sendTextMessage(o.phone,`Dear ${o.name},

Your maintenance payment for Flat ${o.flatNumber} in ${n} is overdue by ${u} days.

Amount Due: ₹${c.totalAmount.toLocaleString()}

Please make the payment immediately to avoid any inconvenience.

Thank you,
${n} Management`),i++}catch(u){console.error(`Error sending overdue notice to ${o.name}:`,u),a++}await new Promise(u=>setTimeout(u,1e3))}}return{success:i,failed:a}}}const aae=new iae;function sae(){const{userProfile:t}=$r(),[e,r]=_.useState([]),[n,i]=_.useState([]),[a,o]=_.useState([]),[c,u]=_.useState(!0),[d,m]=_.useState(!1),[p,v]=_.useState({type:"general",message:"",includePaymentLink:!1}),w=_.useCallback(async()=>{try{u(!0);const k=await ja.getTenants(t?.communityId||"");r(k.filter(R=>R.isActive));const C=[{id:"1",type:"maintenance_reminder",recipients:25,sentAt:new Date(Date.now()-2880*60*1e3),status:"sent",message:"Monthly maintenance reminder for March 2024"},{id:"2",type:"general",recipients:30,sentAt:new Date(Date.now()-7200*60*1e3),status:"sent",message:"Community meeting announcement"},{id:"3",type:"payment_confirmation",recipients:15,sentAt:new Date(Date.now()-10080*60*1e3),status:"sent",message:"Payment confirmation messages"}];o(C)}catch(k){console.error("Error fetching data:",k)}finally{u(!1)}},[t?.communityId]);_.useEffect(()=>{t?.communityId&&w()},[t?.communityId,w]);const b=()=>{n.length===e.length?i([]):i(e.map(k=>k.id))},E=k=>{i(C=>C.includes(k)?C.filter(R=>R!==k):[...C,k])},S=async()=>{if(n.length===0||!p.message.trim()){alert("Please select tenants and enter a message");return}try{m(!0);const k=e.filter(R=>n.includes(R.id));for(const R of k)console.log(`Sending message to ${R.name}: ${p.message}`),await new Promise(V=>setTimeout(V,500));const C={id:Date.now().toString(),type:p.type,recipients:n.length,sentAt:new Date,status:"sent",message:p.message};o(R=>[C,...R]),v({type:"general",message:"",includePaymentLink:!1}),i([]),alert("Messages sent successfully!")}catch(k){console.error("Error sending messages:",k),alert("Failed to send messages. Please try again.")}finally{m(!1)}},P=async()=>{try{m(!0);const k=await aae.sendBulkReminders(e,[],t?.communityId||"",(C,R)=>`https://pay.societypay.com/${C}/${R}`);alert(`Reminders sent! Success: ${k.success}, Failed: ${k.failed}`)}catch(k){console.error("Error sending reminders:",k),alert("Failed to send reminders. Please try again.")}finally{m(!1)}};return c?f.jsx("div",{className:"p-6 ml-64",children:f.jsx("div",{className:"flex items-center justify-center h-64",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})}):f.jsxs("div",{className:"p-6 ml-64",children:[f.jsxs("div",{className:"mb-6",children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Notifications & Messaging"}),f.jsx("p",{className:"text-gray-600",children:"Send WhatsApp messages and maintenance reminders to tenants"})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[f.jsxs("div",{className:"lg:col-span-2",children:[f.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Compose Message"}),f.jsxs("button",{onClick:P,disabled:d,className:"bg-primary text-white px-4 py-2 rounded-md hover:bg-primary/90 disabled:opacity-50 flex items-center",children:[f.jsx(af,{className:"h-4 w-4 mr-2"}),"Send Maintenance Reminders"]})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Message Type"}),f.jsxs("select",{value:p.type,onChange:k=>v({...p,type:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent",children:[f.jsx("option",{value:"general",children:"General Message"}),f.jsx("option",{value:"maintenance_reminder",children:"Maintenance Reminder"}),f.jsx("option",{value:"payment_confirmation",children:"Payment Confirmation"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Message Content"}),f.jsx("textarea",{value:p.message,onChange:k=>v({...p,message:k.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent",placeholder:"Enter your message here..."})]}),p.type==="maintenance_reminder"&&f.jsx("div",{children:f.jsxs("label",{className:"flex items-center",children:[f.jsx("input",{type:"checkbox",checked:p.includePaymentLink,onChange:k=>v({...p,includePaymentLink:k.target.checked}),className:"mr-2"}),f.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Include Payment Link"})]})}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsxs("span",{className:"text-sm text-gray-600",children:[n.length," tenant(s) selected"]}),f.jsxs("button",{onClick:S,disabled:d||n.length===0||!p.message.trim(),className:"bg-secondary text-white px-6 py-2 rounded-md hover:bg-secondary/90 disabled:opacity-50 flex items-center",children:[f.jsx(af,{className:"h-4 w-4 mr-2"}),d?"Sending...":"Send Message"]})]})]})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[f.jsx("div",{className:"p-6 border-b border-gray-200",children:f.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Notification History"})}),f.jsx("div",{className:"divide-y divide-gray-200",children:a.map(k=>f.jsx("div",{className:"p-6",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{className:`p-2 rounded-lg mr-3 ${k.type==="maintenance_reminder"?"bg-blue-100":k.type==="payment_confirmation"?"bg-green-100":"bg-gray-100"}`,children:f.jsx(nf,{className:`h-5 w-5 ${k.type==="maintenance_reminder"?"text-blue-600":k.type==="payment_confirmation"?"text-green-600":"text-gray-600"}`})}),f.jsxs("div",{children:[f.jsx("h4",{className:"text-sm font-medium text-gray-900",children:k.message}),f.jsxs("p",{className:"text-sm text-gray-500",children:["Sent to ",k.recipients," recipients • ",k.sentAt.toLocaleDateString()]})]})]}),f.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${k.status==="sent"?"bg-green-100 text-green-800":k.status==="failed"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:k.status})]})},k.id))})]})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[f.jsx("div",{className:"p-6 border-b border-gray-200",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Select Recipients"}),f.jsx("button",{onClick:b,className:"text-secondary hover:text-secondary/80 text-sm font-medium",children:n.length===e.length?"Deselect All":"Select All"})]})}),f.jsx("div",{className:"max-h-96 overflow-y-auto",children:e.map(k=>f.jsx("div",{className:"p-4 border-b border-gray-100 last:border-b-0",children:f.jsxs("label",{className:"flex items-center cursor-pointer",children:[f.jsx("input",{type:"checkbox",checked:n.includes(k.id),onChange:()=>E(k.id),className:"mr-3"}),f.jsxs("div",{className:"flex-1",children:[f.jsx("div",{className:"text-sm font-medium text-gray-900",children:k.name}),f.jsx("div",{className:"text-sm text-gray-500",children:k.flatNumber}),f.jsx("div",{className:"text-xs text-gray-400",children:k.phone})]})]})},k.id))})]})]})]})}function oae(){const{userProfile:t}=$r(),[e,r]=_.useState(!0),[n,i]=_.useState({totalPaid:0,totalDue:0,totalAmount:0,collectionRate:0,recordsCount:0}),[a,o]=_.useState([{month:"Jan",collected:85e3,target:9e4},{month:"Feb",collected:88e3,target:9e4},{month:"Mar",collected:92e3,target:9e4},{month:"Apr",collected:87e3,target:9e4},{month:"May",collected:95e3,target:9e4},{month:"Jun",collected:89e3,target:9e4}]),[c,u]=_.useState(new Date().toLocaleString("default",{month:"long"})),[d,m]=_.useState(new Date().getFullYear()),p=["January","February","March","April","May","June","July","August","September","October","November","December"],v=Array.from({length:5},(P,k)=>new Date().getFullYear()-2+k),w=_.useCallback(async()=>{if(t?.communityId)try{r(!0);const P={totalPaid:45e4,totalDue:85e3,totalAmount:535e3,collectionRate:84.1,recordsCount:45};i(P),o(k=>k.map(C=>C.month===c.slice(0,3)?{...C,collected:P.totalPaid/6,target:P.totalAmount/6}:C))}catch(P){console.error("Error fetching report data:",P)}finally{r(!1)}},[t?.communityId,c]);_.useEffect(()=>{t?.communityId&&w()},[t?.communityId,w]);const b=()=>{const P=[["Metric","Value"],["Total Paid",`₹${n.totalPaid.toLocaleString()}`],["Total Due",`₹${n.totalDue.toLocaleString()}`],["Total Amount",`₹${n.totalAmount.toLocaleString()}`],["Collection Rate",`${n.collectionRate}%`],["Records Count",n.recordsCount],[""],["Monthly Data"],["Month","Collected","Target"],...a.map(V=>[V.month,V.collected,V.target])].map(V=>V.join(",")).join(`
`),k=new Blob([P],{type:"text/csv"}),C=window.URL.createObjectURL(k),R=document.createElement("a");R.href=C,R.download=`community-report-${c}-${d}.csv`,R.click(),window.URL.revokeObjectURL(C)},E=()=>{w(),alert(`Report generated for ${c} ${d}`)},S=()=>{alert("Report sent to community admin email")};return e?f.jsx("div",{className:"p-6 ml-64",children:f.jsx("div",{className:"flex items-center justify-center h-64",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})}):f.jsxs("div",{className:"p-6 ml-64",children:[f.jsx("div",{className:"mb-6",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Reports & Analytics"}),f.jsx("p",{className:"text-gray-600",children:"Generate and view community maintenance reports"})]}),f.jsxs("div",{className:"flex space-x-3",children:[f.jsxs("button",{onClick:S,className:"bg-primary text-white px-4 py-2 rounded-md hover:bg-primary/90 flex items-center",children:[f.jsx(af,{className:"h-4 w-4 mr-2"}),"Send Report"]}),f.jsxs("button",{onClick:b,className:"bg-secondary text-white px-4 py-2 rounded-md hover:bg-secondary/90 flex items-center",children:[f.jsx(Pg,{className:"h-4 w-4 mr-2"}),"Export Report"]})]})]})}),f.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:f.jsxs("div",{className:"flex items-center space-x-4",children:[f.jsx("select",{value:c,onChange:P=>u(P.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-secondary focus:border-transparent",children:p.map(P=>f.jsx("option",{value:P,children:P},P))}),f.jsx("select",{value:d,onChange:P=>m(parseInt(P.target.value)),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-secondary focus:border-transparent",children:v.map(P=>f.jsx("option",{value:P,children:P},P))}),f.jsxs("button",{onClick:E,className:"bg-secondary text-white px-4 py-2 rounded-md hover:bg-secondary/90 flex items-center",children:[f.jsx(Wa,{className:"h-4 w-4 mr-2"}),"Generate Report"]})]})}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[f.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Collected"}),f.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["₹",n.totalPaid.toLocaleString()]})]}),f.jsx(Tg,{className:"h-8 w-8 text-green-600"})]})}),f.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending Amount"}),f.jsxs("p",{className:"text-2xl font-bold text-yellow-600",children:["₹",n.totalDue.toLocaleString()]})]}),f.jsx(fR,{className:"h-8 w-8 text-yellow-600"})]})}),f.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Amount"}),f.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["₹",n.totalAmount.toLocaleString()]})]}),f.jsx(_i,{className:"h-8 w-8 text-primary"})]})}),f.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Collection Rate"}),f.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[n.collectionRate,"%"]})]}),f.jsx(_i,{className:"h-8 w-8 text-secondary"})]})})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Monthly Collection Analysis"}),f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full",children:[f.jsx("thead",{className:"bg-gray-50",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Month"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Target Amount"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Collected Amount"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Collection Rate"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),f.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map((P,k)=>{const C=(P.collected/P.target*100).toFixed(1);return f.jsxs("tr",{children:[f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsx("div",{className:"text-sm font-medium text-gray-900",children:P.month})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsxs("div",{className:"text-sm text-gray-900",children:["₹",P.target.toLocaleString()]})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsxs("div",{className:"text-sm text-gray-900",children:["₹",P.collected.toLocaleString()]})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsxs("div",{className:"text-sm text-gray-900",children:[C,"%"]})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${parseFloat(C)>=90?"bg-green-100 text-green-800":parseFloat(C)>=75?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:parseFloat(C)>=90?"Excellent":parseFloat(C)>=75?"Good":"Poor"})})]},k)})})]})})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[f.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Report Summary for ",c," ",d]}),f.jsx("div",{className:"prose prose-sm max-w-none",children:f.jsxs("ul",{className:"space-y-2",children:[f.jsxs("li",{children:[f.jsx("strong",{children:"Total Records:"})," ",n.recordsCount," maintenance records processed"]}),f.jsxs("li",{children:[f.jsx("strong",{children:"Collection Performance:"})," ",n.collectionRate,"% collection rate achieved"]}),f.jsxs("li",{children:[f.jsx("strong",{children:"Outstanding Amount:"})," ₹",n.totalDue.toLocaleString()," pending collection"]}),f.jsxs("li",{children:[f.jsx("strong",{children:"Recommendation:"})," ",n.collectionRate>=85?"Excellent collection performance. Continue current practices.":"Consider sending additional reminders for pending payments."]})]})})]})]})}function lae({initialConfig:t,onSave:e}){const[r,n]=_.useState({wabaNumber:t?.wabaNumber||"",apiKey:t?.apiKey||"",baseUrl:t?.baseUrl||"https://cpaasreseller.notify24x7.com/REST/directApi"}),[i,a]=_.useState([]),[o,c]=_.useState(""),[u,d]=_.useState(""),[m,p]=_.useState(!1),[v,w]=_.useState(!1),b=_.useCallback(async()=>{try{w(!0),Na.setConfig(r);const P=await Na.fetchTemplates();a(P)}catch(P){console.error("Error fetching templates:",P)}finally{w(!1)}},[r]);_.useEffect(()=>{r.wabaNumber&&r.apiKey&&b()},[r.wabaNumber,r.apiKey,b]);const E=()=>{e(r)},S=async()=>{if(!u||!o){alert("Please enter a test number and select a template.");return}try{p(!0),Na.setConfig(r),o==="text"?await Na.sendTextMessage(u,"This is a test message."):await Na.sendTemplateMessage(u,o),alert("Test message sent successfully!")}catch(P){console.error("Error sending test message:",P),alert("Failed to send test message.")}finally{p(!1)}};return f.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[f.jsxs("div",{className:"flex items-center mb-6",children:[f.jsx(nf,{className:"h-6 w-6 text-green-600 mr-3"}),f.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"WhatsApp Configuration"})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"WABA Number"}),f.jsx("input",{type:"text",value:r.wabaNumber,onChange:P=>n({...r,wabaNumber:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter WABA Number"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"API Key"}),f.jsx("input",{type:"password",value:r.apiKey,onChange:P=>n({...r,apiKey:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter API Key"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Base URL"}),f.jsx("input",{type:"url",value:r.baseUrl,onChange:P=>n({...r,baseUrl:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter Base URL"})]}),f.jsx("div",{className:"flex justify-end",children:f.jsxs("button",{onClick:E,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[f.jsx(H8,{className:"h-4 w-4 mr-2"}),"Save Configuration"]})})]}),r.wabaNumber&&r.apiKey&&f.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[f.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Test Configuration"}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Test Phone Number"}),f.jsx("input",{type:"tel",value:u,onChange:P=>d(P.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter phone number with country code (e.g., +919876543210)"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Message Template"}),f.jsxs("select",{value:o,onChange:P=>c(P.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:v,children:[f.jsx("option",{value:"",children:"Select a template"}),f.jsx("option",{value:"text",children:"Simple Text Message"}),i.map(P=>f.jsx("option",{value:P.name,children:P.name},P.id))]}),v&&f.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Loading templates..."})]}),f.jsx("div",{className:"flex justify-end",children:f.jsxs("button",{onClick:S,disabled:m||!u||!o,className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 disabled:bg-gray-400 disabled:cursor-not-allowed",children:[f.jsx(Q8,{className:"h-4 w-4 mr-2"}),m?"Sending...":"Send Test Message"]})})]})]})]})}const cae=(t,e)=>{if(!t)return null;const r=n=>n.replace(/\{\{1\}\}/g,e.tenantName).replace(/\{\{2\}\}/g,e.flatNumber).replace(/\{\{3\}\}/g,e.communityName).replace(/\{\{4\}\}/g,`₹${e.amount}`).replace(/\{\{5\}\}/g,e.dueDate);return f.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 max-w-sm",children:[f.jsx("div",{className:"bg-green-500 text-white p-2 rounded-t-lg text-sm font-medium",children:"WhatsApp Business"}),f.jsx("div",{className:"p-3 space-y-2",children:t.components.map((n,i)=>{const a=n.text?r(n.text):"";return n.type==="HEADER"?f.jsx("div",{className:"font-bold text-gray-900 text-sm",children:a},i):n.type==="BODY"?f.jsx("div",{className:"text-gray-800 text-sm whitespace-pre-line",children:a},i):n.type==="FOOTER"?f.jsx("div",{className:"text-gray-500 text-xs",children:a},i):n.type==="BUTTONS"&&n.buttons?f.jsx("div",{className:"space-y-1 mt-2",children:n.buttons.map((o,c)=>f.jsx("button",{className:"w-full bg-blue-500 text-white py-2 px-3 rounded text-sm hover:bg-blue-600",children:o.text},c))},i):null})})]})};function uae({communityId:t}){const[e,r]=_.useState([]),[n,i]=_.useState(null),[a,o]=_.useState({tenantName:"John Doe",flatNumber:"A-101",communityName:"Green Valley Apartments",amount:"3000",dueDate:"31st July 2025",paymentLink:"https://pay.example.com/abc123"}),[c,u]=_.useState(!1),d=_.useCallback(async()=>{if(t)try{u(!0);const m=await Na.fetchTemplates();r(m)}catch(m){console.error("Error fetching templates:",m)}finally{u(!1)}},[t]);return _.useEffect(()=>{d()},[d]),f.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[f.jsxs("div",{className:"flex items-center justify-between mb-6",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx(nf,{className:"h-6 w-6 text-primary mr-3"}),f.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Message Templates"})]}),f.jsxs("button",{className:"bg-secondary text-white px-4 py-2 rounded-md hover:bg-secondary/90 flex items-center",children:[f.jsx(Wa,{className:"h-4 w-4 mr-2"}),"Create Template"]})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Available Templates"}),c?f.jsx("div",{className:"text-center py-8",children:f.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"})}):f.jsx("div",{className:"space-y-3",children:e.map(m=>f.jsxs("div",{className:`border rounded-lg p-4 cursor-pointer transition-colors ${n?.id===m.id?"border-secondary bg-secondary/5":"border-gray-200 hover:border-gray-300"}`,onClick:()=>i(m),children:[f.jsx("h5",{className:"font-medium text-gray-900",children:m.name}),f.jsxs("p",{className:"text-sm text-gray-500",children:["Status: ",m.status]})]},m.id))})]}),f.jsxs("div",{children:[f.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Template Preview"}),n?f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-3",children:[f.jsx("h5",{className:"text-sm font-medium text-gray-700",children:"Customize Preview Data"}),f.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[f.jsx("input",{type:"text",placeholder:"Tenant Name",value:a.tenantName,onChange:m=>o({...a,tenantName:m.target.value}),className:"px-3 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"}),f.jsx("input",{type:"text",placeholder:"Flat Number",value:a.flatNumber,onChange:m=>o({...a,flatNumber:m.target.value}),className:"px-3 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"}),f.jsx("input",{type:"text",placeholder:"Community Name",value:a.communityName,onChange:m=>o({...a,communityName:m.target.value}),className:"px-3 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"}),f.jsx("input",{type:"text",placeholder:"Amount",value:a.amount,onChange:m=>o({...a,amount:m.target.value}),className:"px-3 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"}),f.jsx("input",{type:"text",placeholder:"Due Date",value:a.dueDate,onChange:m=>o({...a,dueDate:m.target.value}),className:"px-3 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500 col-span-2"})]})]}),cae(n,a),f.jsx("div",{className:"flex space-x-3",children:f.jsxs("button",{className:"flex-1 bg-primary text-white px-4 py-2 rounded-md hover:bg-primary/90 flex items-center justify-center",children:[f.jsx(af,{className:"h-4 w-4 mr-2"}),"Send Test Message"]})})]}):f.jsxs("div",{className:"text-center py-8 text-gray-500",children:[f.jsx(nf,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),f.jsx("p",{children:"Select a template to preview"})]})]})]})]})}function dae(){const{userProfile:t}=$r(),[e,r]=_.useState("community"),[n,i]=_.useState(!1),[a,o]=_.useState(!1),[c,u]=_.useState(""),[d,m]=_.useState({name:"Green Valley Apartments",address:"123 Green Valley Road",city:"Mumbai",state:"Maharashtra",pincode:"400001",adminName:"Rajesh Kumar",adminEmail:"admin@greenvalley.com",adminPhone:"+91 98765 43210"}),[p,v]=_.useState({razorpayKeyId:"",razorpayKeySecret:"",webhookSecret:"",gstEnabled:!0,gstPercentage:18,handlingCharges:50,paymentMethods:["card","netbanking","upi","wallet"]}),[w,b]=_.useState({wabaNumber:"",apiKey:"",baseUrl:"https://cpaasreseller.notify24x7.com/REST/directApi",autoReminders:!0,reminderDays:[3,1]}),E=_.useCallback(async()=>{if(t?.communityId)try{i(!0);const[R,V]=await Promise.all([Tr.getCommunity(t.communityId),dP.getCommunitySettings(t.communityId)]);R&&m({name:R.name,address:R.address,city:R.city,state:R.state,pincode:R.pincode,adminName:t.name,adminEmail:t.email,adminPhone:t.phone}),V&&v({razorpayKeyId:V.paymentGateway?.razorpayKeyId||"",razorpayKeySecret:V.paymentGateway?.razorpayKeySecret||"",webhookSecret:V.paymentGateway?.webhookSecret||"",gstEnabled:V.charges?.gstEnabled??!0,gstPercentage:V.charges?.gstPercentage??18,handlingCharges:V.charges?.handlingCharges??50,paymentMethods:["card","netbanking","upi","wallet"]})}catch(R){console.error("Error loading settings:",R),u("Error loading settings")}finally{i(!1)}},[t]);hk.useEffect(()=>{t?.communityId&&E()},[t?.communityId,E]);const S=[{id:"community",label:"Community Details",icon:Ti},{id:"payment",label:"Payment Gateway",icon:hl},{id:"whatsapp",label:"WhatsApp Settings",icon:nf},{id:"templates",label:"Message Templates",icon:Ag}],P=async()=>{if(t?.communityId)try{o(!0),await Tr.updateCommunity(t.communityId,{name:d.name,address:d.address,city:d.city,state:d.state,pincode:d.pincode}),u("Community settings saved successfully!"),setTimeout(()=>u(""),3e3)}catch(R){console.error("Error saving community settings:",R),u("Error saving community settings")}finally{o(!1)}},k=async()=>{if(t?.communityId)try{o(!0),await dP.updateCommunitySettings(t.communityId,{paymentGateway:{razorpayKeyId:p.razorpayKeyId,razorpayKeySecret:p.razorpayKeySecret,webhookSecret:p.webhookSecret},charges:{gstEnabled:p.gstEnabled,gstPercentage:p.gstPercentage,handlingCharges:p.handlingCharges}}),u("Payment settings saved successfully!"),setTimeout(()=>u(""),3e3)}catch(R){console.error("Error saving payment settings:",R),u("Error saving payment settings")}finally{o(!1)}},C=R=>{b({...w,...R}),console.log("Saving WhatsApp settings:",R)};return n?f.jsx("div",{className:"p-6 ml-64",children:f.jsx("div",{className:"flex items-center justify-center h-64",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})}):f.jsxs("div",{className:"p-6 ml-64",children:[f.jsxs("div",{className:"mb-6",children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Settings"}),f.jsx("p",{className:"text-gray-600",children:"Manage your community and system settings"}),c&&f.jsx("div",{className:`mt-4 p-3 rounded-md ${c.includes("Error")?"bg-red-50 text-red-700 border border-red-200":"bg-green-50 text-green-700 border border-green-200"}`,children:c})]}),f.jsx("div",{className:"border-b border-gray-200 mb-6",children:f.jsx("nav",{className:"-mb-px flex space-x-8",children:S.map(R=>f.jsxs("button",{onClick:()=>r(R.id),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center ${e===R.id?"border-secondary text-secondary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[f.jsx(R.icon,{className:"h-4 w-4 mr-2"}),R.label]},R.id))})}),e==="community"&&f.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[f.jsxs("div",{className:"flex items-center mb-6",children:[f.jsx(Ti,{className:"h-6 w-6 text-primary mr-3"}),f.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Community Details"})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Community Name"}),f.jsx("input",{type:"text",value:d.name,onChange:R=>m({...d,name:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),f.jsx("input",{type:"text",value:d.address,onChange:R=>m({...d,address:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City"}),f.jsx("input",{type:"text",value:d.city,onChange:R=>m({...d,city:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"State"}),f.jsx("input",{type:"text",value:d.state,onChange:R=>m({...d,state:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pincode"}),f.jsx("input",{type:"text",value:d.pincode,onChange:R=>m({...d,pincode:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Admin Name"}),f.jsx("input",{type:"text",value:d.adminName,onChange:R=>m({...d,adminName:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Admin Email"}),f.jsx("input",{type:"email",value:d.adminEmail,onChange:R=>m({...d,adminEmail:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Admin Phone"}),f.jsx("input",{type:"tel",value:d.adminPhone,onChange:R=>m({...d,adminPhone:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent"})]})]}),f.jsx("div",{className:"mt-6",children:f.jsx("button",{onClick:P,disabled:a,className:"bg-secondary text-white px-6 py-2 rounded-md hover:bg-secondary/90 disabled:opacity-50 disabled:cursor-not-allowed",children:a?"Saving...":"Save Community Settings"})})]}),e==="payment"&&f.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[f.jsxs("div",{className:"flex items-center mb-6",children:[f.jsx(hl,{className:"h-6 w-6 text-primary mr-3"}),f.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Payment Gateway Settings"})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Razorpay Key ID"}),f.jsx("input",{type:"text",value:p.razorpayKeyId,onChange:R=>v({...p,razorpayKeyId:R.target.value}),placeholder:"rzp_test_xxxxxxxxxx",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Razorpay Key Secret"}),f.jsx("input",{type:"password",value:p.razorpayKeySecret,onChange:R=>v({...p,razorpayKeySecret:R.target.value}),placeholder:"Enter your secret key",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Webhook Secret"}),f.jsx("input",{type:"password",value:p.webhookSecret,onChange:R=>v({...p,webhookSecret:R.target.value}),placeholder:"Enter webhook secret",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GST Percentage"}),f.jsx("input",{type:"number",value:p.gstPercentage,onChange:R=>v({...p,gstPercentage:Number(R.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Handling Charges (₹)"}),f.jsx("input",{type:"number",value:p.handlingCharges,onChange:R=>v({...p,handlingCharges:Number(R.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent"})]})]}),f.jsx("div",{className:"mt-6",children:f.jsxs("label",{className:"flex items-center",children:[f.jsx("input",{type:"checkbox",checked:p.gstEnabled,onChange:R=>v({...p,gstEnabled:R.target.checked}),className:"mr-2"}),f.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Enable GST Collection"})]})}),f.jsx("div",{className:"mt-6",children:f.jsx("button",{onClick:k,disabled:a,className:"bg-secondary text-white px-6 py-2 rounded-md hover:bg-secondary/90 disabled:opacity-50 disabled:cursor-not-allowed",children:a?"Saving...":"Save Payment Settings"})})]}),e==="whatsapp"&&f.jsx(lae,{communityId:t?.communityId||"",initialConfig:w,onSave:C}),e==="templates"&&f.jsx(uae,{communityId:t?.communityId||""})]})}function yn({children:t}){return f.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[f.jsx(rz,{}),f.jsxs("div",{className:"flex-1",children:[f.jsx(nz,{}),f.jsx("main",{className:"p-6",children:t})]})]})}function zo({children:t,requiredRole:e}){return cR()?(console.log("🔓 Bypassing subscription check due to recent payment or manual override"),f.jsx(Ns,{requiredRole:e,children:t})):f.jsx(Ns,{requiredRole:e,children:f.jsx(V8,{children:t})})}function fae(){const{userProfile:t}=$r();return f.jsxs(r6,{children:[f.jsx(Rt,{path:"/login",element:f.jsx(iz,{})}),f.jsx(Rt,{path:"/signup",element:f.jsx(az,{})}),f.jsx(Rt,{path:"/select-subscription",element:f.jsx(sz,{})}),f.jsx(Rt,{path:"/payment-success",element:f.jsx(oz,{})}),f.jsx(Rt,{path:"/subscription-expired",element:f.jsx(lz,{})}),f.jsx(Rt,{path:"/unauthorized",element:f.jsx(cz,{})}),f.jsx(Rt,{path:"/super-admin",element:f.jsx(Ns,{requiredRole:"super_admin",children:f.jsx(yn,{children:f.jsx(Wie,{})})})}),f.jsx(Rt,{path:"/super-admin/communities",element:f.jsx(Ns,{requiredRole:"super_admin",children:f.jsx(yn,{children:f.jsx(Hie,{})})})}),f.jsx(Rt,{path:"/super-admin/subscriptions",element:f.jsx(Ns,{requiredRole:"super_admin",children:f.jsx(yn,{children:f.jsx(Gie,{})})})}),f.jsx(Rt,{path:"/super-admin/payments",element:f.jsx(Ns,{requiredRole:"super_admin",children:f.jsx(yn,{children:f.jsx(Yie,{})})})}),f.jsx(Rt,{path:"/super-admin/reports",element:f.jsx(Ns,{requiredRole:"super_admin",children:f.jsx(yn,{children:f.jsx(Qie,{})})})}),f.jsx(Rt,{path:"/super-admin/settings",element:f.jsx(Ns,{requiredRole:"super_admin",children:f.jsx(yn,{children:f.jsx(Jie,{})})})}),f.jsx(Rt,{path:"/admin",element:f.jsx(zo,{requiredRole:"community_admin",children:f.jsx(yn,{children:f.jsx(Zie,{})})})}),f.jsx(Rt,{path:"/admin/blocks",element:f.jsx(zo,{requiredRole:"community_admin",children:f.jsx(yn,{children:f.jsx(eae,{})})})}),f.jsx(Rt,{path:"/admin/tenants",element:f.jsx(zo,{requiredRole:"community_admin",children:f.jsx(yn,{children:f.jsx(tae,{})})})}),f.jsx(Rt,{path:"/admin/maintenance",element:f.jsx(zo,{requiredRole:"community_admin",children:f.jsx(yn,{children:f.jsx(rae,{})})})}),f.jsx(Rt,{path:"/admin/notifications",element:f.jsx(zo,{requiredRole:"community_admin",children:f.jsx(yn,{children:f.jsx(sae,{})})})}),f.jsx(Rt,{path:"/admin/reports",element:f.jsx(zo,{requiredRole:"community_admin",children:f.jsx(yn,{children:f.jsx(oae,{})})})}),f.jsx(Rt,{path:"/admin/settings",element:f.jsx(zo,{requiredRole:"community_admin",children:f.jsx(yn,{children:f.jsx(dae,{})})})}),f.jsx(Rt,{path:"/",element:f.jsx(zi,{to:t?.role==="super_admin"?"/super-admin":t?.role==="community_admin"?"/admin":"/login",replace:!0})}),f.jsx(Rt,{path:"*",element:f.jsx(zi,{to:"/",replace:!0})})]})}function hae(){return f.jsx(D8,{children:f.jsx(A6,{children:f.jsx(fae,{})})})}f3.createRoot(document.getElementById("root")).render(f.jsx(hk.StrictMode,{children:f.jsx(hae,{})}));
